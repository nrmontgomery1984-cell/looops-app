/* ========== Reset & Base ========== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  /* Looops Brand Colors */
  --looops-navy: #1a1a2e;
  --looops-coral: #F27059;    /* To Do / Stop */
  --looops-amber: #F4B942;    /* In Progress / Wait */
  --looops-sage: #73A58C;     /* Done / Go */
  --looops-white: #FFFFFF;

  /* Dark Theme - Looops Navy Base */
  --color-black: #0d0d17;
  --color-dark: #12121f;
  --color-gray-900: #1a1a2e;
  --color-gray-800: #252540;
  --color-gray-700: #353552;
  --color-gray-600: #525270;
  --color-gray-500: #737390;
  --color-gray-400: #a3a3b8;
  --color-gray-300: #d4d4e0;
  --color-gray-200: #e5e5ed;
  --color-gray-100: #f5f5f8;
  --color-white: #ffffff;

  /* Accent - Looops Coral (Primary Action) */
  --color-accent: #F27059;
  --color-accent-light: #f58d7a;
  --color-accent-dark: #d95a45;
  --color-accent-glow: rgba(242, 112, 89, 0.3);
  --color-accent-subtle: rgba(242, 112, 89, 0.1);
  --color-accent-hover: #f58d7a;

  /* Looops Coral variants */
  --looops-coral-light: #f58d7a;
  --looops-coral-subtle: rgba(242, 112, 89, 0.1);

  /* Looops Sage variants */
  --looops-sage-subtle: rgba(115, 165, 140, 0.15);

  /* Looops Amber variants */
  --looops-amber-subtle: rgba(244, 185, 66, 0.15);

  /* Status colors - Traffic Light System */
  --color-success: #73A58C;   /* Looops Sage - Done/Go */
  --color-warning: #F4B942;   /* Looops Amber - In Progress/Wait */
  --color-error: #F27059;     /* Looops Coral - To Do/Stop */
  --color-red: #F27059;
  --color-red-light: rgba(242, 112, 89, 0.1);

  /* Primary Colors */
  --color-primary: var(--color-accent);
  --color-primary-hover: var(--color-accent-light);
  --color-primary-glow: var(--color-accent-glow);

  /* Background - Looops Navy */
  --color-bg: #0d0d17;
  --color-bg-secondary: #12121f;
  --color-surface: #1a1a2e;
  --color-surface-hover: #252540;
  --color-border: #353552;
  --color-border-light: #252540;

  /* Text Colors */
  --color-text: #ffffff;
  --color-text-secondary: #a3a3b8;
  --color-text-tertiary: #737390;

  /* Loop Colors - Using brand palette */
  --loop-health: #73A58C;     /* Sage */
  --loop-wealth: #F4B942;     /* Amber */
  --loop-family: #F27059;     /* Coral */
  --loop-work: #5a7fb8;       /* Muted blue to complement */
  --loop-fun: #b87fa8;        /* Muted purple to complement */
  --loop-maintenance: #737390;

  /* Spacing */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 12px;
  --spacing-lg: 24px;
  --spacing-xl: 40px;
  --spacing-2xl: 60px;

  /* Border Radius */
  --radius-sm: 4px;
  --radius: 8px;
  --radius-lg: 16px;
  --radius-full: 9999px;

  /* Shadows - Subtle glow effects */
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
  --shadow-glow: 0 0 20px var(--color-accent-glow);
  --shadow-glow-sm: 0 0 10px var(--color-accent-glow);
}

body {
  font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background-color: var(--color-bg);
  color: var(--color-text);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-size: 14px;
}

/* Modal root - dedicated portal container outside React tree */
#modal-root {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 999999;
}

#modal-root:empty {
  display: none;
}

#modal-root > * {
  pointer-events: auto;
}

/* Disable transforms when modal is open to fix stacking context issues */
body.modal-open .widget-container,
body.modal-open .widget-container:hover {
  transform: none !important;
}

body.modal-open {
  overflow: hidden;
}

/* ========== Login Screen ========== */
.login-screen {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--color-black) 0%, var(--color-dark) 50%, var(--color-gray-900) 100%);
  padding: 20px;
}

.login-container {
  width: 100%;
  max-width: 420px;
  background: var(--color-surface);
  border-radius: 24px;
  padding: 48px 40px;
  box-shadow:
    0 4px 6px rgba(0, 0, 0, 0.1),
    0 20px 40px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.login-header {
  text-align: center;
  margin-bottom: 40px;
}

.login-logo {
  margin-bottom: 20px;
}

.login-logo svg {
  filter: drop-shadow(0 4px 12px rgba(99, 102, 241, 0.3));
}

.login-title {
  font-size: 32px;
  font-weight: 700;
  color: var(--color-text);
  margin-bottom: 8px;
  letter-spacing: -0.5px;
}

.login-subtitle {
  font-size: 15px;
  color: var(--color-text-secondary);
}

.login-options {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.login-btn {
  display: flex;
  align-items: center;
  gap: 16px;
  width: 100%;
  padding: 20px 24px;
  border: 1px solid var(--color-border);
  border-radius: 16px;
  background: var(--color-bg-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
}

.login-btn:hover {
  background: var(--color-bg-tertiary);
  border-color: var(--color-primary);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
}

.login-btn-icon {
  font-size: 28px;
  flex-shrink: 0;
}

.login-btn-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.login-btn-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.login-btn-desc {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.login-btn--demo:hover {
  border-color: var(--color-success);
}

.login-btn--private:hover {
  border-color: var(--color-primary);
}

.login-btn--google {
  background: white;
  border-color: rgba(0, 0, 0, 0.1);
}

.login-btn--google:hover {
  background: #f8f9fa;
  border-color: rgba(0, 0, 0, 0.2);
}

.login-btn--google .login-btn-title {
  color: #3c4043;
}

.login-btn--google .login-btn-icon {
  display: flex;
  align-items: center;
  justify-content: center;
}

.login-btn--email:hover,
.login-btn--signup:hover {
  border-color: var(--color-primary);
}

.login-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.login-divider {
  display: flex;
  align-items: center;
  gap: 16px;
  margin: 8px 0;
}

.login-divider::before,
.login-divider::after {
  content: "";
  flex: 1;
  height: 1px;
  background: var(--color-border);
}

.login-divider span {
  font-size: 13px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.login-form {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.login-back {
  background: none;
  border: none;
  color: var(--color-text-secondary);
  font-size: 14px;
  cursor: pointer;
  padding: 0;
  text-align: left;
  transition: color 0.2s;
}

.login-back:hover {
  color: var(--color-text);
}

.login-form-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.login-form-group label {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.login-form-group input {
  padding: 14px 16px;
  border: 1px solid var(--color-border);
  border-radius: 12px;
  background: var(--color-bg-secondary);
  color: var(--color-text);
  font-size: 16px;
  transition: all 0.2s;
}

.login-form-group input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
}

.login-form-group input::placeholder {
  color: var(--color-text-tertiary);
}

.login-error {
  padding: 12px 16px;
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.3);
  border-radius: 8px;
  color: #ef4444;
  font-size: 14px;
}

.login-submit {
  padding: 14px 24px;
  background: var(--color-primary);
  border: none;
  border-radius: 12px;
  color: white;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.login-submit:hover:not(:disabled) {
  background: var(--color-primary-hover);
  transform: translateY(-1px);
}

.login-submit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.login-form-title {
  font-size: 24px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
  text-align: center;
}

.login-form-description {
  font-size: 14px;
  color: var(--color-text-secondary);
  text-align: center;
  margin: 0 0 16px 0;
  line-height: 1.5;
}

.login-link {
  background: none;
  border: none;
  color: var(--color-primary);
  font-size: 14px;
  cursor: pointer;
  padding: 0;
  text-align: center;
  transition: color 0.2s;
  text-decoration: underline;
  text-underline-offset: 2px;
}

.login-link:hover {
  color: var(--color-primary-hover);
}

.login-link:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.login-switch {
  font-size: 14px;
  color: var(--color-text-secondary);
  text-align: center;
  margin-top: 8px;
}

.login-link-inline {
  background: none;
  border: none;
  color: var(--color-primary);
  font-size: 14px;
  cursor: pointer;
  padding: 0;
  font-weight: 600;
  transition: color 0.2s;
}

.login-link-inline:hover {
  color: var(--color-primary-hover);
  text-decoration: underline;
}

.login-link-inline:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.login-success {
  text-align: center;
  padding: 24px 0;
}

.login-success p {
  margin: 0 0 12px 0;
  font-size: 16px;
  color: var(--color-text);
  font-weight: 500;
}

.login-success-hint {
  font-size: 14px !important;
  color: var(--color-text-secondary) !important;
  font-weight: 400 !important;
  margin-bottom: 24px !important;
}

.login-footer {
  margin-top: 32px;
  text-align: center;
}

.login-footer p {
  font-size: 13px;
  color: var(--color-text-tertiary);
}

/* Demo mode banner */
.demo-banner {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(90deg, var(--color-warning), #e5a83d);
  color: #1a1a2e;
  padding: 10px 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  font-size: 14px;
  font-weight: 500;
  z-index: 1000;
}

.demo-banner-logout {
  padding: 6px 16px;
  background: rgba(0, 0, 0, 0.2);
  border: none;
  border-radius: 6px;
  color: inherit;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}

.demo-banner-logout:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* ========== App Container ========== */
.app-container {
  display: flex;
  min-height: 100vh;
  width: 100%;
}

/* ========== Sidebar ========== */
.sidebar {
  width: 80px;
  background: var(--color-black);
  border-right: 1px solid var(--color-gray-900);
  display: flex;
  flex-direction: column;
  position: fixed;
  height: 100vh;
  left: 0;
  top: 0;
  z-index: 100;
  align-items: center;
  padding: 20px 0;
}

.sidebar-header {
  padding: 0;
  border-bottom: none;
  margin-bottom: 32px;
}

.logo {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0;
  padding: 0;
  border-radius: 0;
  transition: none;
}

.logo:hover {
  background: transparent;
}

.logo svg {
  flex-shrink: 0;
  width: 40px;
  height: 40px;
}

.logo-text {
  display: none;
}

.sidebar-nav {
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 12px;
  width: 100%;
  align-items: center;
}

.nav-item {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0;
  padding: 0;
  background: linear-gradient(145deg, var(--color-surface) 0%, rgba(0, 0, 0, 0.2) 100%);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  color: rgba(255, 255, 255, 0.6);
  font-size: 24px;
  font-weight: 400;
  text-align: center;
  width: 48px;
  height: 48px;
  position: relative;
  /* Soft 3D raised effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.15),
    0 4px 8px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.nav-item:hover {
  background: linear-gradient(145deg, rgba(115, 165, 140, 0.15) 0%, var(--color-surface) 100%);
  border-color: rgba(115, 165, 140, 0.3);
  color: rgba(255, 255, 255, 0.95);
  transform: translateY(-2px) scale(1.05);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.2),
    0 8px 16px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

.nav-item:active {
  transform: translateY(0) scale(0.98);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.nav-item--active {
  background: linear-gradient(145deg, var(--looops-navy) 0%, rgba(26, 26, 46, 0.9) 100%);
  border-color: rgba(242, 112, 89, 0.4);
  color: #ffffff;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.2),
    0 4px 8px rgba(0, 0, 0, 0.15),
    0 0 12px rgba(242, 112, 89, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.nav-item--active::before {
  content: '';
  position: absolute;
  left: -20px;
  width: 4px;
  height: 24px;
  background: linear-gradient(180deg, var(--looops-coral) 0%, var(--looops-amber) 100%);
  border-radius: 0 4px 4px 0;
  box-shadow: 0 0 8px rgba(242, 112, 89, 0.4);
}

.nav-icon {
  font-size: 24px;
  flex-shrink: 0;
  line-height: 1;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.nav-icon svg {
  width: 100%;
  height: 100%;
}

.nav-label {
  display: none;
}

/* ========== Sidebar Footer & Theme Toggle ========== */
.sidebar-footer {
  margin-top: auto;
  padding: 20px 0;
  display: flex;
  justify-content: center;
}

.theme-toggle {
  width: 40px;
  height: 40px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: linear-gradient(145deg, var(--color-surface) 0%, rgba(0, 0, 0, 0.2) 100%);
  color: var(--color-text-secondary);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px;
  /* Soft 3D raised effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.15),
    0 4px 8px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.theme-toggle:hover {
  background: linear-gradient(145deg, rgba(244, 185, 66, 0.15) 0%, var(--color-surface) 100%);
  border-color: rgba(244, 185, 66, 0.3);
  color: var(--looops-amber);
  transform: translateY(-2px) scale(1.05);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.2),
    0 8px 16px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

.theme-toggle:active {
  transform: translateY(0) scale(0.98);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.theme-toggle svg {
  width: 100%;
  height: 100%;
}

/* ========== Main Content ========== */
.app-main {
  flex: 1;
  margin-left: 80px;
  padding: 32px 40px;
  max-width: 100%;
  background: var(--color-bg-secondary);
}


/* ========== Screen Layout ========== */
.screen {
  animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Loops screen - full height, no scroll */
.loops-screen {
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.loops-screen .screen-header {
  flex-shrink: 0;
  padding: 16px 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid var(--color-border);
}

.loops-screen .screen-header h2 {
  margin: 0;
  font-size: 20px;
}

.loops-screen .loops-viz-container {
  flex: 1;
  min-height: 0;
}

/* Loop Cards Grid - Navigation cards below visualization */
.loop-cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
  padding: 24px;
  background: linear-gradient(180deg, var(--color-bg) 0%, var(--color-bg-secondary) 100%);
  border-top: 1px solid var(--color-border);
  overflow-y: auto;
  max-height: 320px;
}

.loop-nav-card {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 18px 20px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  text-align: left;
  width: 100%;
  /* Soft 3D raised effect - multiple layered shadows */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 8px 16px rgba(0, 0, 0, 0.06),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.loop-nav-card:hover {
  background: linear-gradient(145deg, var(--loop-bg) 0%, var(--color-surface) 100%);
  border-color: var(--loop-color);
  transform: translateY(-4px) scale(1.02);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.12),
    0 8px 16px rgba(0, 0, 0, 0.1),
    0 16px 32px rgba(0, 0, 0, 0.08),
    0 0 0 1px var(--loop-color),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.loop-nav-card:active {
  transform: translateY(-1px) scale(0.99);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.1),
    0 2px 4px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.loop-nav-card__icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 52px;
  height: 52px;
  font-size: 26px;
  flex-shrink: 0;
  /* Icon gets its own raised block effect */
  background: linear-gradient(145deg, var(--loop-bg) 0%, rgba(0,0,0,0.1) 100%);
  border-radius: 14px;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.15),
    0 4px 8px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.05);
  border: 1px solid var(--loop-color);
}

.loop-nav-card__content {
  flex: 1;
  min-width: 0;
}

.loop-nav-card__name {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 4px 0;
}

.loop-nav-card__state {
  display: inline-block;
  font-size: 10px;
  font-weight: 500;
  padding: 2px 8px;
  border-radius: 10px;
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.loop-nav-card__stats {
  display: flex;
  flex-direction: column;
  gap: 2px;
  align-items: flex-end;
}

.loop-nav-card__stat {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.loop-nav-card__arrow {
  font-size: 18px;
  color: var(--color-text-tertiary);
  margin-left: 8px;
}

.loop-nav-card:hover .loop-nav-card__arrow {
  color: var(--loop-color);
}

/* Loop Card View Dashboard Button */
.loop-card__view-btn {
  margin-top: 12px;
  padding: 8px 12px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 12px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
  width: 100%;
}

.loop-card__view-btn:hover {
  border-color: var(--looops-coral);
  color: var(--looops-coral);
}

/* Back button for dashboards */
.back-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background: linear-gradient(145deg, var(--color-surface) 0%, rgba(0, 0, 0, 0.15) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 10px;
  font-size: 18px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  margin-right: 12px;
  /* Soft 3D raised effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.12),
    0 4px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.back-btn:hover {
  background: linear-gradient(145deg, rgba(242, 112, 89, 0.15) 0%, var(--color-surface) 100%);
  border-color: rgba(242, 112, 89, 0.4);
  color: var(--looops-coral);
  transform: translateY(-2px) scale(1.05);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.15),
    0 8px 16px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

.back-btn:active {
  transform: translateY(0) scale(0.98);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

@media (max-width: 768px) {
  .loop-cards-grid {
    grid-template-columns: 1fr;
    max-height: none;
    padding: 16px;
    gap: 12px;
  }

  .loop-nav-card {
    padding: 14px 16px;
  }

  .loop-nav-card__icon {
    width: 44px;
    height: 44px;
    font-size: 22px;
    border-radius: 12px;
  }

  .loop-nav-card__stats {
    display: none;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.screen h2 {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 24px;
  color: var(--color-text);
  letter-spacing: -0.02em;
  line-height: 1.2;
}

.screen h3 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 16px;
  margin-top: 32px;
  color: var(--color-text);
}

.screen-section {
  margin-bottom: var(--spacing-2xl);
}

.placeholder-text {
  color: var(--color-text-tertiary);
  font-size: 14px;
  padding: 40px;
  text-align: center;
  background: transparent;
  border-radius: 3px;
  border: none;
}

/* ========== Today Screen Grid ========== */
.today-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-bottom: 32px;
}

.today-panel {
  background: var(--color-surface);
  border-radius: 16px;
  padding: 24px;
  box-shadow: var(--shadow-md);
  border: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  min-height: 500px;
}

.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--color-border);
}

.panel-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.panel-date {
  font-size: 13px;
  color: var(--color-gray-600);
  font-weight: 500;
}

.task-count {
  font-size: 13px;
  color: var(--color-text-secondary);
  background: var(--color-gray-800);
  padding: 4px 12px;
  border-radius: 12px;
  font-weight: 500;
}

/* ========== Calendar Panel ========== */
.calendar-events {
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow-y: auto;
}

.calendar-event {
  display: flex;
  gap: 16px;
  padding: 12px 16px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  border-left: 3px solid var(--color-accent);
  transition: all 0.2s ease;
  border: 1px solid var(--color-border);
  border-left-width: 3px;
}

.calendar-event:hover {
  background: var(--color-surface-hover);
  border-left-color: var(--color-accent-light);
  transform: translateX(4px);
}

.event-time {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  min-width: 70px;
}

.event-details {
  flex: 1;
}

.event-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 2px;
}

.event-duration {
  font-size: 12px;
  color: var(--color-gray-600);
}

/* ========== Todo Panel ========== */
.add-todo-btn {
  width: 100%;
  padding: 12px 16px;
  border: 2px dashed var(--color-border);
  background: transparent;
  color: var(--color-text-secondary);
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-bottom: 16px;
  text-align: left;
}

.add-todo-btn:hover {
  border-color: var(--color-accent);
  background: var(--color-accent-subtle);
  color: var(--color-accent-light);
}

.todo-form {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 16px;
}

.todo-form-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 8px;
  margin-top: 8px;
}

.todo-input-small {
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 13px;
  font-family: inherit;
  background: var(--color-surface);
  color: var(--color-text);
}

.todo-select {
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 13px;
  font-family: inherit;
  background: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
}

.todo-form-actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.btn-todo-add {
  padding: 8px 16px;
  background: var(--color-accent);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-todo-add:hover {
  background: var(--color-accent-light);
  box-shadow: var(--shadow-glow-sm);
}

.btn-todo-cancel {
  padding: 8px 16px;
  background: transparent;
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-todo-cancel:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.todo-input-wrapper {
  margin-bottom: 16px;
}

.todo-input {
  width: 100%;
  padding: 12px 16px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 14px;
  font-family: inherit;
  transition: all 0.2s ease;
  background: var(--color-surface);
  color: var(--color-text);
}

.todo-input:focus {
  outline: none;
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px var(--color-accent-glow);
}

.todo-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow-y: auto;
}

.todo-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 12px 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  transition: all 0.2s ease;
  border: 1px solid var(--color-border-light);
  border-left-width: 3px;
  position: relative;
}

.todo-item:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border);
}

.todo-item:hover .todo-delete {
  opacity: 1;
}

.todo-item.completed {
  opacity: 0.5;
}

.todo-item.completed .todo-text {
  text-decoration: line-through;
  color: var(--color-gray-500);
}

.todo-priority-indicator {
  width: 3px;
  height: 100%;
  position: absolute;
  left: -1px;
  top: 0;
  border-radius: 8px 0 0 8px;
}

.todo-checkbox {
  width: 18px;
  height: 18px;
  cursor: pointer;
  accent-color: var(--color-accent);
  border-radius: 4px;
  margin-top: 2px;
  flex-shrink: 0;
}

.todo-content-wrapper {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
}

.todo-text {
  font-size: 14px;
  color: var(--color-text);
  font-weight: 500;
  line-height: 1.4;
}

.todo-meta {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  align-items: center;
}

.todo-project {
  font-size: 10px;
  color: var(--color-text-secondary);
  background: var(--color-gray-800);
  padding: 3px 8px;
  border-radius: 4px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.todo-due-date {
  font-size: 11px;
  color: var(--color-gray-600);
  display: flex;
  align-items: center;
  gap: 4px;
}

.todo-due-date::before {
  content: 'ðŸ“…';
  font-size: 10px;
}

.todo-label {
  font-size: 10px;
  color: var(--color-accent);
  background: var(--color-accent-subtle);
  padding: 3px 8px;
  border-radius: 4px;
  font-weight: 600;
}

.todo-delete {
  width: 24px;
  height: 24px;
  border: none;
  background: transparent;
  color: var(--color-gray-500);
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
  border-radius: 4px;
  opacity: 0;
  transition: all 0.2s ease;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: -2px;
}

.todo-delete:hover {
  background: rgba(239, 68, 68, 0.2);
  color: var(--color-error);
}

/* ========== Notes Panel ========== */
.add-note-btn {
  background: var(--color-accent);
  color: white;
  border: none;
  padding: 6px 16px;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.add-note-btn:hover {
  background: var(--color-accent-light);
  box-shadow: var(--shadow-glow);
  transform: translateY(-1px);
}

.note-input-card {
  background: var(--color-bg-secondary);
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 16px;
  border: 1px solid var(--color-border);
}

.note-title-input {
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: transparent;
  font-size: 15px;
  font-weight: 600;
  font-family: inherit;
  margin-bottom: 8px;
  color: var(--color-text);
}

.note-title-input:focus {
  outline: none;
}

.note-content-input {
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: transparent;
  font-size: 14px;
  font-family: inherit;
  resize: vertical;
  margin-bottom: 12px;
  color: var(--color-text);
}

.note-content-input:focus {
  outline: none;
}

.note-input-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.btn-note-action {
  padding: 6px 14px;
  border: none;
  background: var(--color-accent);
  color: white;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-note-action:hover {
  background: var(--color-accent-light);
  box-shadow: var(--shadow-glow-sm);
}

.btn-note-action:last-child {
  background: transparent;
  color: var(--color-text-secondary);
}

.btn-note-action:last-child:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.notes-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
  overflow-y: auto;
}

.note-card {
  padding: 16px;
  border-radius: 8px;
  border: 1px solid var(--color-border);
  transition: all 0.2s ease;
  cursor: pointer;
  position: relative;
  background: var(--color-bg-secondary);
}

.note-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  transform: translateY(-2px);
  border-color: var(--color-accent);
}

.note-pin {
  position: absolute;
  top: 12px;
  right: 12px;
  font-size: 14px;
  color: var(--color-accent);
}

.note-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.note-content {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0;
  line-height: 1.5;
  word-wrap: break-word;
}

.challenge-section {
  margin-top: 32px;
}

@media (max-width: 1200px) {
  .today-grid {
    grid-template-columns: 1fr;
  }

  .today-panel {
    min-height: 400px;
  }
}

/* ========== Card ========== */
.card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 16px;
  transition: all 0.3s ease;
  box-shadow: var(--shadow-sm);
}

.card:hover {
  box-shadow: var(--shadow-md);
  border-color: var(--color-accent);
  transform: translateY(-2px);
}

/* ========== Challenge Card ========== */
.challenge-card {
  cursor: pointer;
  position: relative;
  overflow: hidden;
  border-radius: 20px;
}

.challenge-card--primary {
  background: var(--color-surface);
  border: 2px solid var(--color-accent);
  color: white;
}

.challenge-card--primary:hover {
  box-shadow: var(--shadow-glow);
  transform: translateY(-4px);
  border-color: var(--color-accent-light);
}

.challenge-card__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
  gap: 12px;
}

.challenge-card__header h3 {
  font-size: 20px;
  font-weight: 700;
  margin: 0;
  line-height: 1.3;
  color: white;
}

.challenge-card__loop {
  background: var(--color-accent);
  color: white;
  padding: 6px 14px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  white-space: nowrap;
  flex-shrink: 0;
  border: none;
}

.challenge-card__description {
  color: rgba(255, 255, 255, 0.9);
  font-size: 14px;
  line-height: 1.6;
  margin-bottom: 16px;
}

.challenge-card__footer {
  display: flex;
  gap: 16px;
  font-size: 13px;
  color: rgba(255, 255, 255, 0.8);
  flex-wrap: wrap;
}

.challenge-card__duration,
.challenge-card__difficulty {
  background: transparent;
  padding: 0;
  border-radius: 0;
  font-weight: 500;
}

/* ========== Task List ========== */
.task-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.task-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 20px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  transition: all 0.2s ease;
  cursor: pointer;
  min-height: auto;
  box-shadow: var(--shadow-sm);
}

.task-row:hover {
  box-shadow: var(--shadow-md);
  border-color: var(--color-accent);
  transform: translateY(-2px);
}

.task-row--compact {
  padding: 12px 16px;
  gap: 10px;
}

.task-row__checkbox {
  width: 20px;
  height: 20px;
  cursor: pointer;
  flex-shrink: 0;
  margin: 0;
  accent-color: var(--color-primary);
  border-radius: 4px;
}

.task-row__content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.task-row__title {
  font-size: 15px;
  font-weight: 500;
  color: var(--color-text);
  line-height: 1.4;
}

.task-row__description {
  font-size: 13px;
  color: var(--color-text-secondary);
  line-height: 1.4;
}

.task-row__meta {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-shrink: 0;
  flex-wrap: wrap;
}

.task-row__loop {
  background: var(--color-accent-subtle);
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-accent);
}

.task-row__due {
  font-size: 12px;
  color: var(--color-text-secondary);
  font-weight: 400;
}

/* ========== Loop Card ========== */
.loop-list {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.loop-card {
  padding: 24px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  box-shadow: var(--shadow-sm);
  transition: all 0.3s ease;
}

.loop-card:hover {
  box-shadow: var(--shadow-md);
  border-color: var(--color-accent);
}

.loop-card__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--color-border);
}

.loop-card__header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.loop-card__focus {
  background: var(--color-black);
  color: white;
  padding: 6px 14px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  border: 1px solid var(--color-gray-700);
}

.loop-card__columns {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
}

/* ========== Loop Column ========== */
.loop-column {
  background: var(--color-bg-secondary);
  padding: 16px;
  border-radius: 12px;
  min-height: 200px;
  border: 1px solid var(--color-border);
}

.loop-column__title {
  font-size: 12px;
  font-weight: 700;
  margin-bottom: 12px;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.loop-column__empty {
  font-size: 13px;
  color: var(--color-text-tertiary);
  text-align: center;
  padding: 32px 0;
}

.loop-column__list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* ========== Challenge List ========== */
.challenge-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

/* ========== Profile Screen ========== */
.profile-section {
  margin-bottom: 24px;
  padding: 24px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  box-shadow: var(--shadow-sm);
}

.profile-section h3 {
  margin-bottom: 16px;
  font-size: 18px;
  font-weight: 700;
}

.season-badge {
  display: inline-block;
  background: var(--color-surface);
  color: var(--color-text);
  padding: 10px 20px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  box-shadow: var(--shadow-sm);
  border: 2px solid var(--color-accent);
}

/* ========== Archetype List ========== */
.archetype-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.archetype-item {
  display: grid;
  grid-template-columns: 120px 1fr 60px;
  align-items: center;
  gap: 16px;
}

.archetype-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
}

.archetype-bar {
  height: 10px;
  background: var(--color-gray-800);
  border-radius: 10px;
  overflow: hidden;
}

.archetype-bar__fill {
  height: 100%;
  background: var(--color-accent);
  transition: width 0.5s ease;
  border-radius: 10px;
}

.archetype-score {
  text-align: right;
  font-size: 14px;
  font-weight: 700;
  color: var(--color-text);
}

/* ========== Inspiration List ========== */
.inspiration-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.inspiration-item {
  background: transparent;
  padding: 4px 8px;
  border-radius: 3px;
  border: none;
  font-size: 14px;
  font-weight: 400;
  transition: background 20ms ease-in;
  color: var(--color-text);
}

.inspiration-item:hover {
  background: var(--color-surface-hover);
}

/* ========== Modal ========== */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--looops-navy);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  padding: var(--spacing-lg);
}

.modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  max-width: 600px;
  width: 100%;
  max-height: 85vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.modal__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-xl);
  border-bottom: 1px solid var(--color-border);
  flex-shrink: 0;
}

.modal__header h2 {
  margin: 0;
  font-size: 24px;
  font-weight: 700;
  letter-spacing: -0.01em;
}

.modal__close {
  background: transparent;
  border: none;
  font-size: 24px;
  color: var(--color-text-secondary);
  cursor: pointer;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: all 0.15s ease;
  line-height: 1;
}

.modal__close:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.modal__body {
  padding: var(--spacing-xl);
  overflow-y: auto;
  flex: 1;
}

.modal__description {
  margin-bottom: var(--spacing-xl);
  font-size: 15px;
  line-height: 1.6;
  color: var(--color-text);
}

.modal__meta {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  background: var(--color-bg-secondary);
  padding: var(--spacing-lg);
  border-radius: var(--radius);
}

.modal__meta p {
  font-size: 14px;
  color: var(--color-text-secondary);
  line-height: 1.6;
}

.modal__meta strong {
  color: var(--color-text);
  font-weight: 600;
}

.modal__footer {
  padding: var(--spacing-xl);
  border-top: 1px solid var(--color-border);
  display: flex;
  gap: var(--spacing-md);
  justify-content: flex-end;
  flex-shrink: 0;
  background: var(--color-bg-secondary);
}

/* ========== Button ========== */
.button {
  padding: 10px 20px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: linear-gradient(145deg, var(--color-surface) 0%, rgba(0, 0, 0, 0.15) 100%);
  color: var(--color-text);
  font-size: 14px;
  font-weight: 600;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  font-family: inherit;
  /* Soft 3D raised effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.12),
    0 4px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.button:hover {
  background: linear-gradient(145deg, var(--color-surface-hover) 0%, var(--color-surface) 100%);
  border-color: rgba(115, 165, 140, 0.3);
  transform: translateY(-2px) scale(1.02);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.15),
    0 8px 16px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

.button:active {
  transform: translateY(0) scale(0.98);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.button--primary {
  background: linear-gradient(145deg, var(--color-accent) 0%, rgba(242, 112, 89, 0.85) 100%);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.15);
  box-shadow:
    0 2px 4px rgba(242, 112, 89, 0.25),
    0 4px 8px rgba(242, 112, 89, 0.15),
    0 0 16px rgba(242, 112, 89, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.button--primary:hover {
  background: linear-gradient(145deg, var(--color-accent-light) 0%, var(--color-accent) 100%);
  transform: translateY(-3px) scale(1.02);
  box-shadow:
    0 4px 8px rgba(242, 112, 89, 0.3),
    0 8px 16px rgba(242, 112, 89, 0.2),
    0 0 24px rgba(242, 112, 89, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.button--primary:active {
  transform: translateY(-1px) scale(0.99);
  box-shadow:
    0 1px 2px rgba(242, 112, 89, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.button--text {
  background: transparent;
  border: none;
  color: var(--color-text-secondary);
  padding: 8px 16px;
  font-size: 14px;
  cursor: pointer;
  transition: color 0.2s;
}

.button--text:hover {
  color: var(--color-text);
}

/* ========== Profile Grid ========== */
.profile-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 24px;
}

.profile-field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.profile-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-gray-700);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.profile-value {
  font-size: 15px;
  color: var(--color-text);
  font-weight: 500;
  margin: 0;
}

.profile-input,
.profile-select {
  padding: 10px 14px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 14px;
  font-family: inherit;
  transition: all 0.2s ease;
  background: var(--color-surface);
  color: var(--color-text);
}

.profile-input:focus,
.profile-select:focus {
  outline: none;
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px var(--color-accent-glow);
}

.profile-input-small {
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 14px;
  font-family: inherit;
  flex: 1;
  background: var(--color-surface);
  color: var(--color-text);
}

.profile-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin: 0;
  padding: 0;
}

.profile-list-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  font-size: 14px;
  color: var(--color-gray-800);
  line-height: 1.6;
}

.profile-bullet {
  color: var(--color-accent);
  font-weight: bold;
  font-size: 18px;
  line-height: 1.4;
}

/* ========== Loop Focus Editor ========== */
.loop-focus-editor {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.loop-focus-item {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.loop-focus-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.loop-focus-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.loop-focus-value {
  font-size: 14px;
  font-weight: 700;
  color: var(--color-accent);
}

.loop-focus-slider {
  width: 100%;
  height: 6px;
  border-radius: 3px;
  background: var(--color-gray-700);
  outline: none;
  -webkit-appearance: none;
  appearance: none;
  cursor: pointer;
}

.loop-focus-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--color-accent);
  cursor: pointer;
  box-shadow: var(--shadow-glow-sm);
  transition: all 0.2s ease;
}

.loop-focus-slider::-webkit-slider-thumb:hover {
  background: var(--color-accent-light);
  transform: scale(1.1);
}

.loop-focus-slider::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--color-accent);
  cursor: pointer;
  border: none;
  box-shadow: var(--shadow-glow-sm);
  transition: all 0.2s ease;
}

.loop-focus-slider::-moz-range-thumb:hover {
  background: var(--color-accent-light);
  transform: scale(1.1);
}

.loop-focus-bar {
  height: 8px;
  background: var(--color-gray-200);
  border-radius: 4px;
  overflow: hidden;
}

.loop-focus-bar-fill {
  height: 100%;
  background: var(--color-black);
  transition: width 0.3s ease;
  border-radius: 4px;
}

.loop-focus-total {
  padding: 12px 16px;
  background: var(--color-gray-100);
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  text-align: center;
}

.text-success {
  color: var(--color-black);
  font-weight: 700;
}

.text-error {
  color: var(--color-red);
  font-weight: 700;
}

/* ========== Onboarding Modal ========== */
.modal-onboarding {
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
}

.onboarding-progress {
  margin-bottom: 32px;
}

.onboarding-progress-bar {
  height: 6px;
  background: var(--color-gray-200);
  border-radius: 3px;
  overflow: hidden;
  margin-bottom: 8px;
}

.onboarding-progress-fill {
  height: 100%;
  background: var(--color-red);
  transition: width 0.3s ease;
  border-radius: 3px;
}

.onboarding-progress-text {
  font-size: 12px;
  color: var(--color-gray-600);
  font-weight: 600;
}

.onboarding-step {
  display: flex;
  flex-direction: column;
  gap: 24px;
  animation: fadeInUp 0.3s ease;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.onboarding-title {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-black);
  margin: 0;
  line-height: 1.2;
}

.onboarding-description {
  font-size: 15px;
  color: var(--color-gray-600);
  line-height: 1.6;
  margin: -12px 0 0 0;
}

.onboarding-field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.onboarding-label {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-black);
}

.onboarding-input,
.onboarding-select {
  padding: 12px 16px;
  border: 2px solid var(--color-gray-300);
  border-radius: 8px;
  font-size: 14px;
  font-family: inherit;
  transition: all 0.2s ease;
  background: var(--color-white);
}

.onboarding-input:focus,
.onboarding-select:focus {
  outline: none;
  border-color: var(--color-red);
  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
}

.onboarding-textarea {
  padding: 12px 16px;
  border: 2px solid var(--color-gray-300);
  border-radius: 8px;
  font-size: 14px;
  font-family: inherit;
  resize: vertical;
  transition: all 0.2s ease;
  background: var(--color-white);
  line-height: 1.6;
}

.onboarding-textarea:focus {
  outline: none;
  border-color: var(--color-red);
  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
}

.onboarding-radio-group {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.onboarding-radio {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  border: 2px solid var(--color-gray-300);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  background: var(--color-white);
}

.onboarding-radio:hover {
  border-color: var(--color-gray-400);
  background: var(--color-gray-100);
}

.onboarding-radio input[type="radio"] {
  margin-top: 2px;
  width: 18px;
  height: 18px;
  cursor: pointer;
  accent-color: var(--color-red);
  flex-shrink: 0;
}

.onboarding-radio input[type="radio"]:checked ~ .onboarding-radio-content {
  color: var(--color-black);
}

.onboarding-radio:has(input:checked) {
  border-color: var(--color-red);
  background: var(--color-red-light);
}

.onboarding-radio-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
}

.onboarding-radio-content strong {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-black);
}

.onboarding-radio-content span {
  font-size: 13px;
  color: var(--color-gray-600);
}

.onboarding-checkbox-group {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.onboarding-checkbox {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  border: 2px solid var(--color-gray-300);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  background: var(--color-white);
}

.onboarding-checkbox:hover {
  border-color: var(--color-gray-400);
  background: var(--color-gray-100);
}

.onboarding-checkbox input[type="checkbox"] {
  margin-top: 2px;
  width: 18px;
  height: 18px;
  cursor: pointer;
  accent-color: var(--color-red);
  flex-shrink: 0;
}

.onboarding-checkbox:has(input:checked) {
  border-color: var(--color-red);
  background: var(--color-red-light);
}

.onboarding-checkbox-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
}

.onboarding-checkbox-content strong {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-black);
}

.onboarding-checkbox-content span {
  font-size: 12px;
  color: var(--color-gray-600);
  line-height: 1.4;
}

/* ========== Responsive ========== */

/* Mobile Header Bar */
.mobile-header {
  display: none;
}

@media (max-width: 768px) {
  .mobile-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 56px;
    padding: 0 16px;
    background: var(--color-bg);
    border-bottom: 1px solid var(--color-border);
    z-index: 1000;
  }

  .mobile-menu-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: transparent;
    border: none;
    color: var(--color-text);
    cursor: pointer;
    border-radius: 8px;
    transition: background 0.15s ease;
  }

  .mobile-menu-btn:hover {
    background: var(--color-surface);
  }

  .mobile-menu-btn svg {
    width: 24px;
    height: 24px;
  }

  .mobile-logo {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .mobile-logo-text {
    font-size: 18px;
    font-weight: 700;
    color: var(--color-text);
    letter-spacing: -0.02em;
  }

  .mobile-header-spacer {
    width: 40px;
  }

  /* Mobile Menu Overlay */
  .mobile-menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1001;
    animation: fadeIn 0.2s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .app-container {
    flex-direction: column;
  }

  /* Sidebar - Hidden by default, slides in from left */
  .sidebar {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 180px;
    transform: translateX(-100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1002;
    flex-direction: column;
    padding: 16px 20px 16px 16px;
    border-right: 1px solid var(--color-border);
    background: var(--color-bg);
  }

  .sidebar--mobile-open {
    transform: translateX(0);
  }

  .sidebar-header {
    display: flex;
    margin-bottom: 20px;
    padding-left: 4px;
  }

  .sidebar-nav {
    flex-direction: column;
    flex: 1;
    gap: 2px;
    padding: 0;
    overflow-y: auto;
  }

  .nav-item {
    flex-direction: row;
    padding: 14px 12px;
    gap: 12px;
    border-radius: 10px;
    justify-content: center;
    min-height: 48px;
  }

  .nav-item--active::before {
    display: none;
  }

  .nav-item--active {
    background: transparent !important;
    box-shadow: none !important;
    color: var(--color-text);
  }

  [data-theme="light"] .nav-item--active {
    background: transparent !important;
    box-shadow: none !important;
    color: var(--color-text);
  }

  .nav-item--active .nav-label {
    color: var(--color-text);
  }

  [data-theme="light"] .nav-item--active .nav-label {
    color: var(--color-text);
  }

  .nav-item--active .nav-icon {
    color: var(--looops-coral);
  }

  [data-theme="light"] .nav-item--active .nav-icon {
    color: var(--looops-coral);
  }

  .nav-icon {
    font-size: 20px;
  }

  .nav-icon svg {
    width: 22px;
    height: 22px;
  }

  .nav-label {
    display: block;
    font-size: 15px;
    font-weight: 500;
  }

  .sidebar-footer {
    display: flex;
    justify-content: center;
    margin-top: auto;
    padding-top: 16px;
    border-top: 1px solid var(--color-border);
  }

  .theme-toggle {
    width: 48px;
    height: 48px;
    justify-content: center;
    align-items: center;
    padding: 0;
    border-radius: 50%;
  }

  .theme-toggle-label {
    display: none;
  }

  .theme-toggle svg {
    width: 24px;
    height: 24px;
  }

  /* Hide scrollbar on sidebar nav */
  .sidebar-nav::-webkit-scrollbar {
    display: none;
  }

  .sidebar-nav {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Main content - Full width with top padding for header */
  .app-main {
    margin-left: 0;
    padding: 16px;
    padding-top: 72px; /* Header height + padding */
    padding-bottom: 24px;
    min-height: 100vh;
    overflow-y: auto;
    width: 100%;
  }

  /* Tasks screen mobile - full screen takeover */
  .tasks-screen {
    position: fixed !important;
    top: 56px !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    display: flex;
    flex-direction: column;
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    height: calc(100vh - 56px) !important;
    background: var(--color-bg);
    z-index: 100;
  }

  .tasks-sidebar {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 280px;
    min-width: 0;
    max-width: 85vw;
    transform: translateX(-100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1002;
    background: var(--color-bg);
    border-right: 1px solid var(--color-border);
    overflow-y: auto;
    padding-top: 56px;
  }

  .tasks-sidebar.mobile-open {
    display: flex;
    transform: translateX(0);
  }

  .tasks-sidebar .sidebar-toggle {
    display: none;
  }

  .tasks-sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1001;
    animation: fadeIn 0.2s ease;
  }

  .tasks-mobile-menu-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background: transparent;
    border: none;
    color: var(--color-text);
    cursor: pointer;
    border-radius: 8px;
    flex-shrink: 0;
  }

  .tasks-mobile-menu-btn:hover {
    background: var(--color-surface);
  }

  .tasks-main {
    width: 100%;
    padding: 0;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: stretch;
    flex: 1;
    overflow-y: auto;
  }

  .tasks-header {
    padding: 12px;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    flex-shrink: 0;
    background: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
  }

  .tasks-header-left {
    display: flex;
    align-items: center;
    gap: 8px;
    min-width: 0;
  }

  .tasks-header-left h2 {
    font-size: 18px;
    font-weight: 600;
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--color-text);
  }

  .tasks-description {
    display: none;
  }

  .tasks-header-right {
    display: flex;
    align-items: center;
    gap: 6px;
    flex-shrink: 0;
  }

  .tasks-header-right .view-toggle {
    display: flex;
  }

  .tasks-header-right .header-control {
    display: none;
  }

  /* Loop filter visible and compact on mobile */
  .loop-filter-control {
    display: flex;
  }

  .loop-filter-select {
    padding: 6px 8px;
    font-size: 12px;
    min-width: 90px;
    max-width: 110px;
  }

  .view-toggle-btn {
    padding: 6px 8px;
    font-size: 11px;
  }

  .view-toggle-btn svg {
    width: 14px;
    height: 14px;
  }

  .task-list-header {
    padding: 8px 12px;
  }

  .task-item {
    padding: 12px;
  }

  .task-content {
    gap: 6px;
  }

  .task-meta {
    flex-wrap: wrap;
    gap: 6px;
  }

  .task-actions {
    opacity: 1;
    position: static;
    flex-shrink: 0;
  }

  /* Kanban on mobile - horizontal scroll */
  .kanban-view {
    overflow-x: auto;
    padding: 12px;
  }

  .kanban-column {
    min-width: 260px;
  }

  /* Screen headers */
  .screen-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .screen h2 {
    font-size: 24px;
  }

  .loop-card__columns {
    grid-template-columns: 1fr;
  }

  .screen h2 {
    font-size: 28px;
  }

  .screen h3 {
    font-size: 16px;
  }

  .loop-card {
    padding: 24px;
  }

  .loop-card__header h3 {
    font-size: 18px;
  }

  .archetype-item {
    grid-template-columns: 90px 1fr 50px;
    gap: 12px;
  }

  .modal__header,
  .modal__body,
  .modal__footer {
    padding: 24px;
  }

  .card {
    padding: 24px;
  }

  .task-row {
    padding: 16px 20px;
  }

  .profile-grid {
    grid-template-columns: 1fr;
  }

  .onboarding-checkbox-group {
    grid-template-columns: 1fr;
  }

  .modal-onboarding {
    max-width: 95vw;
    margin: 20px;
  }
}

/* ========== View Toggle ========== */
.view-toggle {
  display: flex;
  gap: 4px;
  background: var(--color-surface);
  border-radius: 12px;
  padding: 4px;
  border: 1px solid var(--color-border);
}

.view-toggle-btn {
  padding: 10px 18px;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  font-size: 13px;
  font-weight: 600;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: inherit;
  display: flex;
  align-items: center;
  gap: 6px;
}

.view-toggle-btn.active {
  background: var(--looops-navy);
  color: var(--color-white);
  box-shadow: 0 2px 8px rgba(26, 26, 46, 0.5);
}

.view-toggle-btn:not(.active):hover {
  color: var(--color-text);
  background: var(--color-surface-hover);
}

/* ========== Loops Visualization - Full Screen ========== */
.loops-viz-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  position: relative;
  background: radial-gradient(ellipse at center, var(--color-gray-900) 0%, var(--color-bg) 70%);
}

/* Circular layout container */
.loops-circular {
  position: relative;
  width: 100%;
  height: 100%;
  min-height: 600px;
  aspect-ratio: 1 / 1;
  max-width: 800px;
  margin: 0 auto;
}

/* Individual loop item - positioned absolutely in circle */
.loop-circle-item {
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  cursor: pointer;
  transition: transform 0.3s ease, filter 0.3s ease;
  transform: translate(-50%, -50%);
  width: min(180px, 26vw);
  height: min(220px, 30vw);
}

.loop-circle-item:hover {
  transform: translate(-50%, -50%) scale(1.08);
  z-index: 10;
}

.loop-circle-item.selected {
  transform: translate(-50%, -50%) scale(1.12);
  z-index: 10;
}

/* Legacy grid styles kept for compatibility */
.loops-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap: 16px;
  padding: 24px;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  align-items: center;
  justify-items: center;
}

@media (min-width: 900px) {
  .loops-grid {
    grid-template-columns: repeat(6, 1fr);
    grid-template-rows: 1fr;
    gap: 32px;
    padding: 48px;
  }
}

/* Individual loop item - fills cell */
.loop-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  cursor: pointer;
  transition: transform 0.2s ease;
  width: 100%;
  height: 100%;
}

.loop-item:hover {
  transform: scale(1.05);
}

.loop-item.selected {
  transform: scale(1.08);
}

/* SVG container - maximize size */
.loop-svg {
  width: 100%;
  height: auto;
  flex: 1;
  max-height: calc(100% - 40px);
  filter: drop-shadow(0 0 8px rgba(26, 26, 46, 0.2));
  transition: filter 0.3s ease, transform 0.3s ease;
}

.loop-item:hover .loop-svg,
.loop-circle-item:hover .loop-svg {
  filter: drop-shadow(0 0 20px rgba(26, 26, 46, 0.4));
}

.loop-item.selected .loop-svg,
.loop-circle-item.selected .loop-svg {
  filter: drop-shadow(0 0 30px rgba(26, 26, 46, 0.5));
}

.loop-outer-circle {
  fill: var(--color-dark);
  transition: stroke-width 0.2s ease, fill 0.2s ease;
}

/* ========== Outer Meaning Loop (encircles all) ========== */
.loop-outer-meaning {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 0;
  pointer-events: none;
}

.meaning-outer-svg {
  width: 100%;
  height: 100%;
  max-width: min(600px, 90vw);
  max-height: min(600px, 90vh);
  transition: filter 0.3s ease;
  pointer-events: auto;
}

.loop-outer-meaning:hover .meaning-outer-svg {
  filter: drop-shadow(0 0 10px rgba(107, 114, 128, 0.3));
}

.loop-outer-meaning.selected .meaning-outer-svg {
  filter: drop-shadow(0 0 20px rgba(107, 114, 128, 0.4));
}

/* Inner loops positioned above meaning ring */
.loop-circle-item {
  z-index: 2;
}

.loop-icon {
  pointer-events: none;
  user-select: none;
}

.task-circle {
  transition: opacity 0.2s ease;
}

/* Loop label */
.loop-label {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  text-align: center;
  flex-shrink: 0;
}

.loop-label .loop-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  letter-spacing: 0.5px;
}

.loop-label .loop-state {
  font-size: 10px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 1px;
  opacity: 0.8;
}

/* Mobile adjustments - Keep circular layout but scale down */
@media (max-width: 768px) {
  .loops-circular {
    min-height: 300px;
    height: 300px;
    max-height: 300px;
    aspect-ratio: 1 / 1;
    width: 300px;
    max-width: 100vw;
    margin: 0 auto;
  }

  .loop-outer-meaning {
    display: flex;
  }

  .meaning-outer-svg {
    max-width: 290px;
    max-height: 290px;
  }

  /* Hide meaning text labels on mobile - too cramped */
  .meaning-outer-svg text {
    display: none;
  }

  .loop-circle-item {
    width: 50px;
    height: 50px;
    gap: 0;
  }

  .loop-circle-item:hover {
    transform: translate(-50%, -50%) scale(1.08);
  }

  .loop-circle-item.selected {
    transform: translate(-50%, -50%) scale(1.12);
  }

  .loop-svg {
    width: 44px;
    height: 44px;
    max-height: 44px;
  }

  /* Hide all text labels on mobile - just show emoji icons */
  .loop-label {
    display: none;
  }

  /* Loop detail panel on mobile */
  .loop-detail {
    position: fixed;
    top: auto;
    bottom: 0;
    left: 0;
    right: 0;
    transform: none;
    width: 100%;
    max-width: 100%;
    border-radius: 16px 16px 0 0;
    max-height: 60vh;
    overflow-y: auto;
  }
}

@media (max-width: 400px) {
  .loops-circular {
    min-height: 240px;
    height: 240px;
    max-height: 240px;
    width: 240px;
  }

  .meaning-outer-svg {
    max-width: 230px;
    max-height: 230px;
  }

  .loop-circle-item {
    width: 42px;
    height: 42px;
  }

  .loop-svg {
    width: 38px;
    height: 38px;
    max-height: 38px;
  }
}

/* Larger screens - bigger circles */
@media (min-width: 900px) {
  .loop-circle-item {
    width: min(200px, 18vw);
    height: min(240px, 22vw);
  }

  .meaning-svg {
    width: min(320px, 35vw);
    height: min(320px, 35vw);
  }
}

@media (min-width: 1200px) {
  .loop-circle-item {
    width: min(220px, 16vw);
    height: min(260px, 20vw);
  }

  .meaning-svg {
    width: min(360px, 30vw);
    height: min(360px, 30vw);
  }
}

/* ========== Loop Detail Panel ========== */
.loop-detail {
  background: var(--color-surface);
  border-radius: 16px;
  border: 1px solid var(--color-border);
  box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
  overflow: hidden;
  animation: fadeIn 0.25s ease;
  max-width: 400px;
  width: 90%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 100;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

.loop-detail-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  background: var(--color-surface-hover);
  border-left: 4px solid;
}

.loop-detail-info {
  display: flex;
  align-items: center;
  gap: 16px;
}

.loop-detail-icon {
  font-size: 32px;
}

.loop-detail-header h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 4px 0;
  color: var(--color-text);
}

.loop-detail-state {
  font-size: 13px;
  font-weight: 500;
}

.loop-detail-close {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  font-size: 24px;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s ease, color 0.15s ease;
}

.loop-detail-close:hover {
  background: var(--color-border);
  color: var(--color-text);
}

.loop-detail-tasks {
  padding: 16px 24px 24px;
}

.loop-detail-tasks ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

.loop-detail-task {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 0;
  border-bottom: 1px solid var(--color-border-light);
  cursor: pointer;
  transition: background 0.15s ease;
}

.loop-detail-task:last-child {
  border-bottom: none;
}

.loop-detail-task:hover {
  background: #fafafa;
  margin: 0 -24px;
  padding-left: 24px;
  padding-right: 24px;
}

.loop-detail-task .task-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.loop-detail-task .task-title {
  flex: 1;
  font-size: 14px;
  color: var(--color-text);
}

.loop-detail-task .task-due {
  font-size: 12px;
  color: #999;
}

.loop-detail-empty {
  color: #999;
  font-size: 14px;
  text-align: center;
  padding: 24px 0;
}

.loop-detail-title {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.loop-detail-icon {
  font-size: 28px;
  line-height: 1;
}

.loop-detail-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: var(--color-black);
}

.loop-detail-desc {
  margin: 4px 0 0;
  font-size: 12px;
  color: var(--color-text-secondary);
}

.loop-detail-close {
  background: transparent;
  border: none;
  font-size: 24px;
  color: var(--color-gray-500);
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
}

.loop-detail-close:hover {
  background: var(--color-gray-200);
  color: var(--color-black);
}

.loop-detail-content {
  padding: 0 16px 16px;
  max-height: 400px;
  overflow-y: auto;
}

/* Empty state */
.loop-empty-state {
  text-align: center;
  padding: 32px 16px;
  color: var(--color-text-secondary);
}

.loop-empty-state p {
  margin: 0;
  font-size: 14px;
  font-weight: 500;
}

.loop-empty-hint {
  display: block;
  margin-top: 8px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

/* Task sections by sub-loop */
.loop-task-sections {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.loop-subloop-section {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.subloop-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.subloop-count {
  font-size: 10px;
  background: var(--color-gray-200);
  padding: 2px 6px;
  border-radius: 10px;
  color: var(--color-text-secondary);
}

/* Task list in loop detail */
.loop-task-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.loop-task-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.loop-task-item:hover {
  background: var(--color-gray-200);
}

.task-priority-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.task-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.loop-task-item .task-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.loop-task-item .task-due {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.loop-task-item .task-due.overdue {
  color: var(--looops-coral);
  font-weight: 500;
}

.loop-task-item .task-due.today {
  color: var(--looops-sage);
  font-weight: 500;
}

.loop-task-item .task-due.tomorrow {
  color: var(--looops-amber);
}

.task-doing-badge {
  font-size: 10px;
  background: var(--looops-amber);
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: 500;
  flex-shrink: 0;
}

/* Mobile: full-width detail panel */
@media (max-width: 600px) {
  .loops-viz-container {
    padding: 8px;
  }

  .loop-circle-btn {
    padding: 12px 6px;
    min-height: 85px;
  }

  .loop-circle-btn .loop-icon {
    font-size: 20px;
  }

  .loop-circle-btn .loop-name {
    font-size: 10px;
  }

  .loop-circle-btn .loop-state {
    font-size: 9px;
  }

  .loop-detail-content {
    max-height: 300px;
  }

  .legend-item {
    font-size: 10px;
  }

  .legend-color {
    width: 10px;
    height: 10px;
  }
}

.button-close {
  background: transparent;
  border: none;
  font-size: 24px;
  color: var(--color-gray-600);
  cursor: pointer;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: all 0.2s ease;
  line-height: 1;
  padding: 0;
}

.button-close:hover {
  background: var(--color-gray-200);
  color: var(--color-black);
}

.loop-detail-tasks {
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow-y: auto;
  flex: 1;
  max-height: 500px;
  padding-right: 4px;
}

.loop-detail-tasks::-webkit-scrollbar {
  width: 6px;
}

.loop-detail-tasks::-webkit-scrollbar-track {
  background: var(--color-gray-100);
  border-radius: 3px;
}

.loop-detail-tasks::-webkit-scrollbar-thumb {
  background: var(--color-gray-400);
  border-radius: 3px;
}

.loop-detail-tasks::-webkit-scrollbar-thumb:hover {
  background: var(--color-gray-600);
}

.loop-detail-task {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px;
  background: var(--color-gray-100);
  border-radius: 8px;
  transition: all 0.2s ease;
}

.loop-detail-task:hover {
  background: var(--color-gray-200);
  transform: translateX(4px);
}

.task-status-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  flex-shrink: 0;
  margin-top: 4px;
  border: 2px solid var(--color-white);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.task-detail-content {
  flex: 1;
  min-width: 0;
}

.task-detail-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-black);
  line-height: 1.4;
  margin-bottom: 4px;
}

.task-detail-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  font-size: 12px;
  color: var(--color-gray-600);
}

.task-detail-meta span {
  background: var(--color-white);
  padding: 2px 8px;
  border-radius: 4px;
}

/* ========== Loop Detail View ========== */
.loop-detail-view {
  width: 100%;
  animation: fadeIn 0.3s ease;
}

.loop-detail-header {
  margin-bottom: 32px;
}

.back-button {
  margin-bottom: 16px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.loop-detail-subtitle {
  color: var(--color-gray-600);
  font-size: 16px;
  margin-top: 8px;
}

.loop-detail-breakdown {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 24px;
  margin-top: 32px;
}

.subloop-section {
  background: var(--color-white);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.subloop-section h3 {
  margin: 0 0 16px 0;
  font-size: 18px;
  font-weight: 700;
}

.subloop-tasks {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Responsive adjustments for visualization */
@media (max-width: 768px) {
  .loop-detail-panel {
    position: fixed;
    right: 12px;
    left: 12px;
    top: auto;
    bottom: 12px;
    transform: none;
    width: auto;
    max-height: 50vh;
  }

  .loops-legend {
    flex-direction: column;
    gap: 12px;
  }

  .loop-detail-breakdown {
    grid-template-columns: 1fr;
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

/* ========== State Colors - Looops Brand ========== */
:root {
  --state-build: #73A58C;     /* Sage - active growth (Go) */
  --state-maintain: #5a7fb8;   /* Muted Blue - steady state */
  --state-recover: #F4B942;    /* Amber - restoration (Wait) */
  --state-hibernate: #737390;  /* Navy Gray - dormant */
}

/* ========== State Indicator ========== */
.state-indicator {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.state-indicator__dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.state-indicator--small .state-indicator__dot {
  width: 6px;
  height: 6px;
}

.state-indicator--small {
  font-size: 10px;
}

.state-indicator--large .state-indicator__dot {
  width: 12px;
  height: 12px;
}

.state-indicator--large {
  font-size: 14px;
}

/* ========== State Selector ========== */
.state-selector {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.state-selector__btn {
  padding: 8px 16px;
  border: 2px solid var(--color-gray-200);
  border-radius: 8px;
  background: var(--color-white);
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.state-selector__btn:hover {
  background: var(--color-gray-50);
}

.state-selector__btn--active {
  border-color: currentColor;
  background: currentColor;
  color: white;
}

.state-selector__btn--BUILD {
  color: var(--state-build);
}

.state-selector__btn--BUILD.state-selector__btn--active {
  background: var(--state-build);
  border-color: var(--state-build);
  color: white;
}

.state-selector__btn--MAINTAIN {
  color: var(--state-maintain);
}

.state-selector__btn--MAINTAIN.state-selector__btn--active {
  background: var(--state-maintain);
  border-color: var(--state-maintain);
  color: white;
}

.state-selector__btn--RECOVER {
  color: var(--state-recover);
}

.state-selector__btn--RECOVER.state-selector__btn--active {
  background: var(--state-recover);
  border-color: var(--state-recover);
  color: white;
}

.state-selector__btn--HIBERNATE {
  color: var(--state-hibernate);
}

.state-selector__btn--HIBERNATE.state-selector__btn--active {
  background: var(--state-hibernate);
  border-color: var(--state-hibernate);
  color: white;
}

/* ========== Trait Slider ========== */
.trait-slider {
  padding: 16px 0;
  border-bottom: 1px solid var(--color-gray-100);
}

.trait-slider:last-child {
  border-bottom: none;
}

.trait-slider__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.trait-slider__poles {
  display: flex;
  justify-content: space-between;
  font-size: 14px;
  font-weight: 600;
}

.trait-slider__pole {
  max-width: 45%;
}

.trait-slider__pole--left {
  color: var(--color-gray-600);
}

.trait-slider__pole--right {
  color: var(--color-gray-600);
  text-align: right;
}

.trait-slider__value {
  font-size: 14px;
  font-weight: 700;
  color: var(--color-primary);
  min-width: 40px;
  text-align: center;
}

.trait-slider__track {
  position: relative;
  height: 8px;
  background: linear-gradient(to right, var(--color-gray-300), var(--color-primary));
  border-radius: 4px;
  margin: 12px 0;
}

.trait-slider__input {
  width: 100%;
  height: 8px;
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  cursor: pointer;
  position: relative;
  z-index: 1;
}

.trait-slider__input::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--color-white);
  border: 3px solid var(--color-primary);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  cursor: grab;
  transition: transform 0.15s ease;
}

.trait-slider__input::-webkit-slider-thumb:hover {
  transform: scale(1.1);
}

.trait-slider__input::-webkit-slider-thumb:active {
  cursor: grabbing;
  transform: scale(0.95);
}

.trait-slider__input::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--color-white);
  border: 3px solid var(--color-primary);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  cursor: grab;
}

.trait-slider__descriptions {
  display: flex;
  justify-content: space-between;
  font-size: 11px;
  color: var(--color-gray-500);
  margin-top: 4px;
}

.trait-slider__desc {
  max-width: 45%;
  line-height: 1.3;
}

.trait-slider__desc--right {
  text-align: right;
}

/* ========== Value Selector ========== */
.value-selector {
  padding: 16px 0;
}

.value-selector__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.value-selector__title {
  font-size: 18px;
  font-weight: 700;
  margin: 0;
}

.value-selector__count {
  font-size: 14px;
  color: var(--color-gray-600);
}

.value-selector__count--warning {
  color: var(--color-warning);
}

.value-selector__count--success {
  color: var(--state-build);
}

.value-selector__categories {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.value-category {
  background: var(--color-gray-50);
  border-radius: 12px;
  padding: 16px;
}

.value-category__title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-600);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 12px 0;
}

.value-category__grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.value-chip {
  padding: 8px 16px;
  background: var(--color-white);
  border: 2px solid var(--color-gray-200);
  border-radius: 20px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.value-chip:hover {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

.value-chip--selected {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

.value-chip--disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.value-chip--disabled:hover {
  border-color: var(--color-gray-200);
  background: var(--color-white);
}

/* ========== Inspiration Picker ========== */
.inspiration-picker {
  padding: 16px 0;
}

.inspiration-picker__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.inspiration-picker__title {
  font-size: 18px;
  font-weight: 700;
  margin: 0;
}

.inspiration-picker__count {
  font-size: 14px;
  color: var(--color-gray-600);
}

.inspiration-picker__count--warning {
  color: var(--color-warning);
}

.inspiration-picker__count--success {
  color: var(--state-build);
}

.inspiration-picker__filters {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  flex-wrap: wrap;
}

.inspiration-filter {
  padding: 6px 14px;
  background: var(--color-gray-100);
  border: none;
  border-radius: 16px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: capitalize;
}

.inspiration-filter:hover {
  background: var(--color-gray-200);
}

.inspiration-filter--active {
  background: var(--color-primary);
  color: white;
}

.inspiration-picker__grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 12px;
}

.inspiration-card {
  background: var(--color-white);
  border: 2px solid var(--color-gray-200);
  border-radius: 12px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: center;
}

.inspiration-card:hover {
  border-color: var(--color-primary);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.inspiration-card--selected {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

.inspiration-card__avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--color-gray-200);
  margin: 0 auto 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  font-weight: 700;
  color: var(--color-gray-600);
}

.inspiration-card--selected .inspiration-card__avatar {
  background: var(--color-primary);
  color: white;
}

.inspiration-card__name {
  font-size: 14px;
  font-weight: 600;
  margin: 0 0 4px 0;
}

.inspiration-card__tagline {
  font-size: 12px;
  color: var(--color-gray-500);
  margin: 0;
  line-height: 1.3;
}

.inspiration-card__category {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-gray-400);
  margin-top: 8px;
}

/* ========== Onboarding Flow ========== */
.onboarding-flow {
  min-height: 100vh;
  background: linear-gradient(135deg, var(--color-gray-50) 0%, var(--color-white) 100%);
  display: flex;
  flex-direction: column;
}

.onboarding-flow__header {
  padding: 24px 32px;
  background: var(--color-white);
  border-bottom: 1px solid var(--color-gray-100);
}

.onboarding-flow__logo {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-primary);
  margin: 0;
}

.onboarding-flow__progress {
  display: flex;
  gap: 8px;
  margin-top: 16px;
}

.onboarding-flow__progress-step {
  flex: 1;
  height: 4px;
  background: var(--color-gray-200);
  border-radius: 2px;
  transition: background 0.3s ease;
}

.onboarding-flow__progress-step--active {
  background: var(--color-primary);
}

.onboarding-flow__progress-step--completed {
  background: var(--state-build);
}

.onboarding-flow__content {
  flex: 1;
  padding: 32px;
  max-width: 800px;
  margin: 0 auto;
  width: 100%;
}

.onboarding-flow__step-title {
  font-size: 28px;
  font-weight: 700;
  margin: 0 0 8px 0;
}

.onboarding-flow__step-subtitle {
  font-size: 16px;
  color: var(--color-gray-600);
  margin: 0 0 32px 0;
}

.onboarding-flow__footer {
  padding: 24px 32px;
  background: var(--color-white);
  border-top: 1px solid var(--color-gray-100);
  display: flex;
  justify-content: space-between;
}

.onboarding-flow__btn {
  padding: 12px 32px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.onboarding-flow__btn--secondary {
  background: transparent;
  border: 2px solid var(--color-gray-300);
  color: var(--color-gray-600);
}

.onboarding-flow__btn--secondary:hover {
  border-color: var(--color-gray-400);
  color: var(--color-gray-800);
}

.onboarding-flow__btn--primary {
  background: var(--color-primary);
  border: 2px solid var(--color-primary);
  color: white;
}

.onboarding-flow__btn--primary:hover {
  background: var(--color-primary-dark);
  border-color: var(--color-primary-dark);
}

.onboarding-flow__btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Onboarding Step: Basics */
.basics-step {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.basics-step__field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.basics-step__label {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-700);
}

.basics-step__input {
  padding: 12px 16px;
  border: 2px solid var(--color-gray-200);
  border-radius: 8px;
  font-size: 16px;
  transition: border-color 0.2s ease;
}

.basics-step__input:focus {
  outline: none;
  border-color: var(--color-primary);
}

.basics-step__select {
  padding: 12px 16px;
  border: 2px solid var(--color-gray-200);
  border-radius: 8px;
  font-size: 16px;
  background: var(--color-white);
  cursor: pointer;
}

.basics-step__select:focus {
  outline: none;
  border-color: var(--color-primary);
}

/* Onboarding Step: Loops */
.loops-step {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.loops-step__item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background: var(--color-white);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.loops-step__loop-info {
  display: flex;
  align-items: center;
  gap: 12px;
}

.loops-step__loop-icon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
}

.loops-step__loop-name {
  font-size: 16px;
  font-weight: 600;
  margin: 0;
}

.loops-step__loop-desc {
  font-size: 12px;
  color: var(--color-gray-500);
  margin: 2px 0 0 0;
}

/* Onboarding Step: Results */
.results-step {
  text-align: center;
}

.results-step__archetype {
  background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-white) 100%);
  border-radius: 20px;
  padding: 40px;
  margin-bottom: 32px;
}

.results-step__archetype-name {
  font-size: 36px;
  font-weight: 800;
  color: var(--color-primary);
  margin: 0 0 8px 0;
}

.results-step__archetype-tagline {
  font-size: 18px;
  color: var(--color-gray-600);
  margin: 0;
}

.results-step__blend {
  margin-top: 32px;
}

.results-step__blend-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-500);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 16px 0;
}

.results-step__blend-bars {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.results-step__blend-bar {
  display: flex;
  align-items: center;
  gap: 12px;
}

.results-step__blend-label {
  font-size: 14px;
  font-weight: 500;
  width: 100px;
  text-align: right;
}

.results-step__blend-track {
  flex: 1;
  height: 8px;
  background: var(--color-gray-200);
  border-radius: 4px;
  overflow: hidden;
}

.results-step__blend-fill {
  height: 100%;
  background: var(--color-primary);
  border-radius: 4px;
  transition: width 0.5s ease;
}

.results-step__blend-value {
  font-size: 14px;
  font-weight: 600;
  width: 40px;
}

.results-step__voice {
  margin-top: 32px;
  padding: 24px;
  background: var(--color-gray-50);
  border-radius: 12px;
  text-align: left;
}

.results-step__voice-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-500);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 12px 0;
}

.results-step__voice-phrase {
  font-size: 16px;
  font-style: italic;
  color: var(--color-gray-700);
  margin: 8px 0;
  padding-left: 16px;
  border-left: 3px solid var(--color-primary);
}

/* ========== Today's Stack ========== */
.todays-stack {
  padding: 24px;
}

.todays-stack__header {
  margin-bottom: 24px;
}

.todays-stack__greeting {
  font-size: 14px;
  color: var(--color-gray-500);
  margin: 0 0 4px 0;
}

.todays-stack__title {
  font-size: 28px;
  font-weight: 700;
  margin: 0 0 4px 0;
}

.todays-stack__subtitle {
  font-size: 14px;
  color: var(--color-gray-600);
  margin: 0;
}

.todays-stack__list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.todays-stack__header h3 {
  font-size: 18px;
  font-weight: 700;
  margin: 0;
  color: var(--color-text);
}

.todays-stack__count {
  font-size: 12px;
  color: var(--color-text-tertiary);
  font-weight: 500;
}

.todays-stack__empty {
  text-align: center;
  padding: 48px 24px;
  background: var(--color-gray-50);
  border-radius: 16px;
}

.todays-stack__empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.todays-stack__empty-title {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 8px 0;
}

.todays-stack__empty-text {
  font-size: 14px;
  color: var(--color-gray-500);
  margin: 0;
}

.todays-stack__section {
  margin-bottom: 16px;
}

.todays-stack__section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  padding: 0 4px;
}

.todays-stack__section-icon {
  font-size: 16px;
}

.todays-stack__section-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.todays-stack--empty {
  padding: 48px 24px;
}

.todays-stack__empty-state {
  text-align: center;
}

.todays-stack__empty-state h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 12px 0 8px 0;
  color: var(--color-text);
}

.todays-stack__empty-state p {
  font-size: 14px;
  color: var(--color-text-tertiary);
  margin: 0;
}

/* Task Card - Compact design */
.task-card {
  background: var(--color-surface);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  margin-bottom: 12px;
}

.task-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}

.task-card__priority-bar {
  height: 4px;
}

.task-card__priority-bar--high {
  background: linear-gradient(90deg, var(--looops-coral), #ff8a6b);
}

.task-card__priority-bar--medium {
  background: linear-gradient(90deg, var(--looops-amber), #ffc85c);
}

.task-card__priority-bar--low {
  background: var(--color-gray-400);
}

.task-card__content {
  padding: 14px 16px;
}

.task-card__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
  gap: 12px;
}

.task-card__title {
  font-size: 15px;
  font-weight: 600;
  margin: 0;
  flex: 1;
  letter-spacing: -0.01em;
  line-height: 1.3;
}

.task-card__loop-badge {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: white;
  flex-shrink: 0;
}

.task-card__time,
.task-card__duration {
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-tertiary);
  flex-shrink: 0;
}

.task-card__meta {
  display: flex;
  gap: 12px;
  margin-bottom: 10px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.task-card__meta-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

.task-card__framing {
  padding: 10px 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  margin-bottom: 10px;
  border-left: 3px solid var(--color-accent);
}

.task-card__framing-label {
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
  margin: 0 0 4px 0;
}

.task-card__framing-text {
  font-size: 13px;
  font-style: italic;
  color: var(--color-text-secondary);
  margin: 0;
  line-height: 1.4;
}

.task-card__actions {
  display: flex;
  gap: 8px;
  padding: 0 16px 14px;
}

.task-card__btn {
  flex: 1;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.task-card__btn--complete {
  background: var(--looops-sage);
  border: none;
  color: white;
  box-shadow: 0 4px 12px rgba(115, 165, 140, 0.3);
}

.task-card__btn--complete:hover {
  background: #5a8a72;
  box-shadow: 0 6px 16px rgba(115, 165, 140, 0.4);
}

.task-card__btn--skip {
  background: transparent;
  border: 2px solid var(--color-border);
  color: var(--color-text-secondary);
}

.task-card__btn--skip:hover {
  border-color: var(--color-text-tertiary);
  color: var(--color-text);
  background: var(--color-surface-hover);
}

.task-card__description {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 8px 0;
  line-height: 1.4;
}

.task-card__motivation {
  font-size: 12px;
  font-style: italic;
  color: var(--color-text-tertiary);
  margin: 0 0 8px 0;
  padding: 8px 10px;
  background: var(--color-bg-secondary);
  border-radius: 6px;
  border-left: 2px solid var(--looops-sage);
}

.task-card__subloop,
.task-card__due {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* Task Card Mobile Styles */
@media (max-width: 768px) {
  .task-card {
    margin-bottom: 10px;
  }

  .task-card__content {
    padding: 12px 14px;
  }

  .task-card__header {
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 6px;
  }

  .task-card__loop-badge {
    padding: 3px 8px;
    font-size: 9px;
    order: -1;
  }

  .task-card__duration {
    font-size: 11px;
  }

  .task-card__title {
    font-size: 14px;
    width: 100%;
    order: 1;
  }

  .task-card__actions {
    padding: 0 12px 12px;
    gap: 6px;
  }

  .task-card__btn {
    padding: 10px;
    font-size: 16px;
    min-height: 44px;
  }

  .task-card__btn--complete,
  .task-card__btn--skip {
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

/* ========== Habit Card - Today's Stack ========== */
.habit-card {
  background: var(--color-surface);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  margin-bottom: 12px;
  display: flex;
  align-items: stretch;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.habit-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}

.habit-card--completed {
  opacity: 0.7;
}

.habit-card__type-bar {
  width: 4px;
  flex-shrink: 0;
}

.habit-card__content {
  flex: 1;
  padding: 14px 16px;
  min-width: 0;
}

.habit-card__header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}

.habit-card__loop-badge {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border: 1px solid;
  flex-shrink: 0;
}

.habit-card__streak {
  font-size: 12px;
  font-weight: 600;
  color: var(--looops-amber);
  display: flex;
  align-items: center;
  gap: 2px;
}

.habit-card__title {
  font-size: 15px;
  font-weight: 600;
  margin: 0 0 6px 0;
  letter-spacing: -0.01em;
  line-height: 1.3;
  color: var(--color-text);
}

.habit-card__title--completed {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

.habit-card__response {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 6px 0;
  line-height: 1.4;
  font-style: italic;
}

.habit-card__cue {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin: 0;
  line-height: 1.4;
}

.habit-card__cue-label {
  font-weight: 600;
  color: var(--color-text-secondary);
}

.habit-card__actions {
  display: flex;
  align-items: center;
  padding: 0 12px;
}

.habit-card__btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid var(--color-border);
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  color: var(--color-text-tertiary);
}

.habit-card__btn:hover {
  border-color: var(--looops-sage);
  color: var(--looops-sage);
  background: rgba(115, 165, 140, 0.1);
}

.habit-card__btn--completed {
  background: var(--looops-sage);
  border-color: var(--looops-sage);
  color: white;
}

.habit-card__btn--completed:hover {
  background: #5a8a72;
  border-color: #5a8a72;
}

/* Habit Card Mobile Styles */
@media (max-width: 768px) {
  .habit-card {
    margin-bottom: 10px;
  }

  .habit-card__content {
    padding: 12px 14px;
  }

  .habit-card__header {
    gap: 8px;
    margin-bottom: 6px;
  }

  .habit-card__loop-badge {
    padding: 3px 8px;
    font-size: 9px;
  }

  .habit-card__title {
    font-size: 14px;
  }

  .habit-card__btn {
    width: 44px;
    height: 44px;
  }
}

/* ========== Planning Screen ========== */
.planning-screen {
  padding: 24px;
}

.planning-screen__header {
  margin-bottom: 32px;
}

.planning-screen__title {
  font-size: 28px;
  font-weight: 700;
  margin: 0 0 8px 0;
}

.planning-screen__subtitle {
  font-size: 16px;
  color: var(--color-gray-600);
  margin: 0;
}

.planning-screen__loops {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.planning-loop-row {
  display: flex;
  align-items: center;
  padding: 20px;
  background: var(--color-white);
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.planning-loop-row__info {
  display: flex;
  align-items: center;
  gap: 16px;
  min-width: 200px;
}

.planning-loop-row__icon {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
}

.planning-loop-row__name {
  font-size: 18px;
  font-weight: 600;
  margin: 0;
}

.planning-loop-row__state-selector {
  flex: 1;
  display: flex;
  justify-content: center;
}

.planning-loop-row__tasks {
  min-width: 100px;
  text-align: right;
  font-size: 14px;
  color: var(--color-gray-500);
}

/* ========== Loops Kanban View ========== */
.loops-kanban {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  padding: 24px;
}

.loop-card {
  min-width: 280px;
  max-width: 320px;
  background: var(--color-white);
  border-radius: 16px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
  display: flex;
  flex-direction: column;
}

.loop-card__header {
  padding: 20px;
  border-bottom: 1px solid var(--color-gray-100);
}

.loop-card__title-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.loop-card__icon {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
}

.loop-card__name {
  font-size: 18px;
  font-weight: 700;
  margin: 0;
  flex: 1;
  margin-left: 12px;
}

.loop-card__state-selector {
  padding: 16px 20px;
  border-bottom: 1px solid var(--color-gray-100);
}

.loop-card__tasks {
  flex: 1;
  padding: 16px;
  overflow-y: auto;
  max-height: 400px;
}

.loop-card__task {
  padding: 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
  margin-bottom: 8px;
  cursor: pointer;
  transition: background 0.2s ease;
}

.loop-card__task:hover {
  background: var(--color-gray-100);
}

.loop-card__task:last-child {
  margin-bottom: 0;
}

.loop-card__task-title {
  font-size: 14px;
  font-weight: 500;
  margin: 0 0 4px 0;
}

.loop-card__task-meta {
  font-size: 12px;
  color: var(--color-gray-500);
}

.loop-card__add-task {
  padding: 16px;
  border-top: 1px solid var(--color-gray-100);
}

.loop-card__add-btn {
  width: 100%;
  padding: 10px;
  background: var(--color-gray-50);
  border: 2px dashed var(--color-gray-300);
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-gray-500);
  cursor: pointer;
  transition: all 0.2s ease;
}

.loop-card__add-btn:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
  background: var(--color-primary-light);
}

/* ========== History Screen ========== */
.history-screen {
  padding: 24px;
  max-width: 1000px;
}

/* Stats Grid */
.history-stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
  margin-bottom: 32px;
}

.history-stat-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  /* Soft 3D effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 4px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.history-stat-card.streak {
  background: linear-gradient(145deg, rgba(242, 112, 89, 0.15) 0%, var(--color-surface) 100%);
  border-color: rgba(242, 112, 89, 0.2);
}

.history-stat-value {
  font-size: 32px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1;
}

.history-stat-card.streak .history-stat-value {
  color: var(--looops-coral);
}

.history-stat-label {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-top: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.history-stat-best {
  font-size: 11px;
  color: var(--looops-amber);
  margin-top: 4px;
}

/* Section Headers */
.history-section {
  margin-bottom: 32px;
}

.history-section h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 16px 0;
}

/* 30-Day Chart */
.history-chart {
  display: flex;
  align-items: flex-end;
  gap: 4px;
  height: 120px;
  padding: 16px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 4px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.history-chart-bar {
  flex: 1;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: center;
  position: relative;
}

.history-chart-fill {
  width: 100%;
  background: linear-gradient(180deg, var(--looops-sage) 0%, rgba(115, 165, 140, 0.6) 100%);
  border-radius: 4px 4px 0 0;
  min-height: 2px;
  transition: height 0.3s ease;
}

.history-chart-bar.today .history-chart-fill {
  background: linear-gradient(180deg, var(--looops-coral) 0%, rgba(242, 112, 89, 0.6) 100%);
}

.history-chart-bar.weekend .history-chart-fill {
  opacity: 0.6;
}

.history-chart-label {
  position: absolute;
  bottom: -24px;
  font-size: 10px;
  color: var(--color-text-tertiary);
  white-space: nowrap;
}

/* Loop Breakdown Grid */
.history-loops-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.history-loop-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 14px;
  transition: all 0.25s ease;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 4px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.history-loop-card:hover {
  border-color: var(--loop-color);
  transform: translateY(-2px);
}

.history-loop-icon {
  font-size: 24px;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--loop-bg);
  border-radius: 10px;
  border: 1px solid var(--loop-color);
}

.history-loop-info {
  flex: 1;
  min-width: 0;
}

.history-loop-name {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.history-loop-stats {
  display: block;
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-top: 2px;
}

/* History List */
.history-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.history-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  transition: all 0.15s ease;
}

.history-item:hover {
  border-color: var(--color-border-hover);
  background: var(--color-surface-hover);
}

.history-check {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: linear-gradient(145deg, var(--looops-sage) 0%, rgba(115, 165, 140, 0.7) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 14px;
  flex-shrink: 0;
}

.history-content {
  flex: 1;
  min-width: 0;
}

.history-title {
  display: block;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.history-loop {
  display: block;
  font-size: 12px;
  margin-top: 2px;
}

.history-date {
  font-size: 12px;
  color: var(--color-text-tertiary);
  flex-shrink: 0;
}

/* Empty State */
.history-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 48px;
  text-align: center;
}

.history-empty-icon {
  font-size: 48px;
  opacity: 0.5;
  margin-bottom: 16px;
}

.history-empty-text {
  font-size: 16px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 8px;
}

.history-empty-hint {
  font-size: 14px;
  color: var(--color-text-tertiary);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .history-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .history-loops-grid {
    grid-template-columns: 1fr 1fr;
  }

  .history-chart {
    overflow-x: auto;
    padding-bottom: 32px;
  }
}

@media (max-width: 480px) {
  .history-loops-grid {
    grid-template-columns: 1fr;
  }
}

/* ========== Profile Screen ========== */
.profile-screen {
  padding: 24px;
  max-width: 800px;
  margin: 0 auto;
}

.profile-screen__header {
  text-align: center;
  margin-bottom: 40px;
}

.profile-screen__avatar {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
  margin: 0 auto 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36px;
  font-weight: 700;
  color: white;
}

.profile-screen__name {
  font-size: 28px;
  font-weight: 700;
  margin: 0 0 8px 0;
}

.profile-screen__archetype {
  font-size: 18px;
  color: var(--color-primary);
  font-weight: 600;
  margin: 0;
}

.profile-screen__section {
  background: var(--color-white);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.profile-screen__section-title {
  font-size: 14px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-gray-500);
  margin: 0 0 16px 0;
}

.archetype-display {
  text-align: center;
  padding: 24px;
  background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-white) 100%);
  border-radius: 12px;
}

.archetype-display__name {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-primary);
  margin: 0 0 16px 0;
}

.archetype-blend-bars {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-width: 400px;
  margin: 0 auto;
}

.archetype-blend-bar {
  display: flex;
  align-items: center;
  gap: 12px;
}

.archetype-blend-bar__label {
  font-size: 13px;
  font-weight: 500;
  width: 80px;
  text-align: right;
}

.archetype-blend-bar__track {
  flex: 1;
  height: 6px;
  background: var(--color-gray-200);
  border-radius: 3px;
  overflow: hidden;
}

.archetype-blend-bar__fill {
  height: 100%;
  background: var(--color-primary);
  border-radius: 3px;
}

.archetype-blend-bar__value {
  font-size: 13px;
  font-weight: 600;
  width: 35px;
}

.values-display {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.values-display__chip {
  padding: 6px 14px;
  background: var(--color-primary-light);
  border-radius: 16px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-primary);
}

.inspirations-display {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 12px;
}

.inspirations-display__item {
  text-align: center;
  padding: 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
}

.inspirations-display__avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--color-gray-200);
  margin: 0 auto 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  font-weight: 600;
  color: var(--color-gray-600);
}

.inspirations-display__name {
  font-size: 13px;
  font-weight: 500;
  margin: 0;
}

/* ========== Loop States Summary ========== */
.loop-states-summary {
  background: var(--color-surface);
  border-radius: 12px;
  padding: 16px;
  border: 1px solid var(--color-border-light);
}

.loop-states-summary h3 {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--color-text-tertiary);
  margin: 0 0 12px 0;
}

.loop-state-item__icon {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
}

.loop-state-item__info {
  flex: 1;
}

.loop-state-item__name {
  font-size: 13px;
  font-weight: 600;
  margin: 0 0 2px 0;
}

.loop-state-item__state {
  font-size: 11px;
  font-weight: 500;
}

/* ========== Today View Enhancements ========== */
.today-view {
  display: grid;
  grid-template-columns: 1fr 300px;
  gap: 24px;
  padding: 24px;
}

.today-view__main {
  min-width: 0;
}

.today-view__sidebar {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.today-sidebar-card {
  background: var(--color-white);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.today-sidebar-card__title {
  font-size: 14px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-gray-500);
  margin: 0 0 16px 0;
}

.archetype-summary {
  text-align: center;
}

.archetype-summary__name {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-primary);
  margin: 0 0 8px 0;
}

.archetype-summary__quote {
  font-size: 13px;
  font-style: italic;
  color: var(--color-gray-600);
  margin: 0;
  line-height: 1.4;
}

@media (max-width: 1024px) {
  .today-view {
    grid-template-columns: 1fr;
  }

  .today-view__sidebar {
    display: none;
  }
}

/* ========== Scrollbar Styling ========== */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-gray-100);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--color-gray-300);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-gray-400);
}

/* ========== Goal Suggestion Card ========== */
.goal-suggestion-card {
  background: var(--color-white);
  border: 2px solid var(--color-gray-200);
  border-radius: 16px;
  padding: 20px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.goal-suggestion-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.goal-suggestion-card--selected {
  border-width: 3px;
}

.goal-suggestion-card__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
}

.goal-suggestion-card__loop-badge {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  color: white;
  display: flex;
  align-items: center;
  gap: 4px;
}

.goal-suggestion-card__score {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.goal-suggestion-card__score-value {
  font-size: 20px;
  font-weight: 700;
  color: var(--color-primary);
}

.goal-suggestion-card__score-label {
  font-size: 10px;
  color: var(--color-gray-500);
  text-transform: uppercase;
}

.goal-suggestion-card__title {
  font-size: 18px;
  font-weight: 700;
  margin: 0 0 8px 0;
  color: var(--color-gray-900);
}

.goal-suggestion-card__description {
  font-size: 14px;
  color: var(--color-gray-600);
  margin: 0 0 12px 0;
  line-height: 1.4;
}

.goal-suggestion-card__reasoning {
  font-size: 13px;
  color: var(--color-gray-500);
  padding: 10px 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
  margin-bottom: 12px;
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.goal-suggestion-card__reasoning-icon {
  flex-shrink: 0;
}

.goal-suggestion-card__metrics {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}

.goal-suggestion-card__metrics-label {
  font-size: 12px;
  color: var(--color-gray-500);
}

.goal-suggestion-card__metric {
  font-size: 11px;
  padding: 4px 8px;
  background: var(--color-gray-100);
  border-radius: 4px;
  color: var(--color-gray-600);
}

.goal-suggestion-card__selected-indicator {
  margin-top: 12px;
  text-align: center;
  font-size: 14px;
  font-weight: 600;
  color: var(--state-build);
}

/* ========== Annual Goals Wizard ========== */
.annual-goals-wizard {
  min-height: 100vh;
  background: var(--color-gray-50);
  display: flex;
  flex-direction: column;
}

.annual-goals-wizard__header {
  padding: 24px 32px;
  background: var(--color-white);
  border-bottom: 1px solid var(--color-gray-100);
}

.annual-goals-wizard__title {
  font-size: 24px;
  font-weight: 700;
  margin: 0 0 16px 0;
}

.annual-goals-wizard__progress {
  display: flex;
  align-items: center;
  gap: 16px;
}

.annual-goals-wizard__progress-bar {
  flex: 1;
  height: 4px;
  background: var(--color-gray-200);
  border-radius: 2px;
  overflow: hidden;
}

.annual-goals-wizard__progress-fill {
  height: 100%;
  background: var(--color-primary);
  transition: width 0.3s ease;
}

.annual-goals-wizard__progress-text {
  font-size: 14px;
  color: var(--color-gray-500);
  white-space: nowrap;
}

.annual-goals-wizard__content {
  flex: 1;
  padding: 32px;
  overflow-y: auto;
}

.annual-goals-wizard__footer {
  padding: 24px 32px;
  background: var(--color-white);
  border-top: 1px solid var(--color-gray-100);
  display: flex;
  justify-content: space-between;
}

.annual-goals-wizard__btn {
  padding: 12px 32px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.annual-goals-wizard__btn--secondary {
  background: transparent;
  border: 2px solid var(--color-gray-300);
  color: var(--color-gray-600);
}

.annual-goals-wizard__btn--secondary:hover {
  border-color: var(--color-gray-400);
  color: var(--color-gray-800);
}

.annual-goals-wizard__btn--primary {
  background: var(--color-primary);
  border: 2px solid var(--color-primary);
  color: white;
}

.annual-goals-wizard__btn--primary:hover {
  background: var(--color-primary-dark);
  border-color: var(--color-primary-dark);
}

.annual-goals-wizard__btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Wizard Steps */
.wizard-step {
  max-width: 900px;
  margin: 0 auto;
}

.wizard-step__icon {
  font-size: 64px;
  text-align: center;
  margin-bottom: 24px;
}

.wizard-step__title {
  font-size: 32px;
  font-weight: 700;
  text-align: center;
  margin: 0 0 12px 0;
}

.wizard-step__description {
  font-size: 16px;
  color: var(--color-gray-600);
  text-align: center;
  margin: 0 0 32px 0;
}

.wizard-step__count {
  display: block;
  margin-top: 8px;
  font-weight: 600;
  color: var(--color-primary);
}

/* Intro Step */
.wizard-intro__archetype {
  background: var(--color-white);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 32px;
  text-align: center;
}

.wizard-intro__archetype-blend {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 16px;
  font-size: 24px;
  font-weight: 700;
}

.wizard-intro__archetype-primary {
  color: var(--color-primary);
}

.wizard-intro__archetype-secondary {
  color: var(--color-gray-600);
}

.wizard-intro__archetype-score {
  font-size: 14px;
  font-weight: 500;
  margin-left: 4px;
  opacity: 0.7;
}

.wizard-intro__archetype-separator {
  color: var(--color-gray-400);
}

.wizard-intro__loops h3 {
  text-align: center;
  font-size: 18px;
  margin: 0 0 16px 0;
}

.wizard-intro__loop-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 12px;
}

.wizard-intro__loop-item {
  background: var(--color-white);
  border: 2px solid var(--color-gray-200);
  border-radius: 12px;
  padding: 12px;
  text-align: center;
}

.wizard-intro__loop-icon {
  font-size: 24px;
  display: block;
  margin-bottom: 4px;
}

.wizard-intro__loop-name {
  font-size: 12px;
  font-weight: 600;
  display: block;
  margin-bottom: 4px;
}

.wizard-intro__loop-state {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  padding: 2px 8px;
  border-radius: 4px;
}

.wizard-intro__loop-state--build { background: var(--state-build); color: white; }
.wizard-intro__loop-state--maintain { background: var(--state-maintain); color: white; }
.wizard-intro__loop-state--recover { background: var(--state-recover); color: white; }
.wizard-intro__loop-state--hibernate { background: var(--state-hibernate); color: white; }

.wizard-intro__note {
  text-align: center;
  font-size: 14px;
  color: var(--color-gray-500);
  margin-top: 24px;
}

/* Suggestions Step */
.wizard-suggestions__tabs {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 24px;
}

.wizard-suggestions__tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  background: var(--color-white);
  border: 2px solid var(--color-gray-200);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.wizard-suggestions__tab:hover {
  border-color: var(--color-gray-300);
}

.wizard-suggestions__tab--active {
  border-width: 3px;
}

.wizard-suggestions__tab--selected {
  border-color: transparent;
}

.wizard-suggestions__tab-icon {
  font-size: 18px;
}

.wizard-suggestions__tab-name {
  font-size: 14px;
  font-weight: 600;
}

.wizard-suggestions__tab-check {
  color: var(--state-build);
  font-weight: 700;
}

.wizard-suggestions__loop-title {
  font-size: 20px;
  margin: 0 0 16px 0;
}

.wizard-suggestions__grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 16px;
}

.wizard-suggestions__prompt {
  text-align: center;
  padding: 64px;
  background: var(--color-white);
  border-radius: 16px;
  color: var(--color-gray-500);
}

.wizard-suggestions__summary {
  margin-top: 32px;
  padding: 20px;
  background: var(--color-white);
  border-radius: 12px;
}

.wizard-suggestions__summary h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-500);
  margin: 0 0 12px 0;
}

.wizard-suggestions__selected-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.wizard-suggestions__selected-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--color-gray-50);
  border: 2px solid;
  border-radius: 8px;
  font-size: 14px;
}

.wizard-suggestions__remove {
  background: none;
  border: none;
  font-size: 18px;
  color: var(--color-gray-400);
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

.wizard-suggestions__remove:hover {
  color: var(--color-danger);
}

/* Customize Step */
.wizard-customize__list {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.wizard-customize__goal {
  background: var(--color-white);
  border: 2px solid;
  border-radius: 16px;
  padding: 24px;
}

.wizard-customize__goal-header {
  margin-bottom: 16px;
}

.wizard-customize__goal-badge {
  padding: 4px 12px;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 600;
  color: white;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.wizard-customize__field {
  margin-bottom: 16px;
}

.wizard-customize__field label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-gray-600);
  margin-bottom: 6px;
}

.wizard-customize__field input,
.wizard-customize__field textarea {
  width: 100%;
  padding: 12px;
  border: 2px solid var(--color-gray-200);
  border-radius: 8px;
  font-size: 16px;
  transition: border-color 0.2s ease;
}

.wizard-customize__field input:focus,
.wizard-customize__field textarea:focus {
  outline: none;
  border-color: var(--color-primary);
}

.wizard-customize__metrics {
  background: var(--color-gray-50);
  border-radius: 8px;
  padding: 16px;
}

.wizard-customize__metrics > label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-gray-600);
  margin-bottom: 12px;
}

.wizard-customize__metric {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
}

.wizard-customize__metric:last-child {
  margin-bottom: 0;
}

.wizard-customize__metric-name {
  flex: 1;
  font-size: 14px;
}

.wizard-customize__metric input {
  width: 80px;
  padding: 8px;
  border: 2px solid var(--color-gray-200);
  border-radius: 6px;
  font-size: 14px;
  text-align: center;
}

.wizard-customize__metric-unit {
  font-size: 12px;
  color: var(--color-gray-500);
  min-width: 60px;
}

/* Decompose Step */
.wizard-decompose__list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.wizard-decompose__goal {
  background: var(--color-white);
  border: 2px solid;
  border-radius: 12px;
  overflow: hidden;
}

.wizard-decompose__goal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
}

.wizard-decompose__goal-info {
  display: flex;
  align-items: center;
  gap: 12px;
}

.wizard-decompose__goal-badge {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 14px;
}

.wizard-decompose__goal-title {
  font-size: 16px;
  font-weight: 600;
}

.wizard-decompose__toggle {
  padding: 8px 16px;
  background: var(--color-gray-100);
  border: none;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.wizard-decompose__toggle:hover {
  background: var(--color-gray-200);
}

.wizard-decompose__toggle--active {
  background: var(--color-primary);
  color: white;
}

.wizard-decompose__quarters {
  padding: 0 20px 20px;
}

.wizard-decompose__quarter {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
  margin-bottom: 8px;
}

.wizard-decompose__quarter:last-child {
  margin-bottom: 0;
}

.wizard-decompose__quarter-label {
  font-size: 12px;
  font-weight: 700;
  color: var(--color-primary);
  min-width: 30px;
}

.wizard-decompose__quarter-title {
  font-size: 14px;
  color: var(--color-gray-600);
}

/* Review Step */
.wizard-review__summary {
  display: flex;
  justify-content: center;
  gap: 48px;
  margin-bottom: 32px;
}

.wizard-review__stat {
  text-align: center;
}

.wizard-review__stat-value {
  display: block;
  font-size: 48px;
  font-weight: 700;
  color: var(--color-primary);
}

.wizard-review__stat-label {
  font-size: 14px;
  color: var(--color-gray-500);
}

.wizard-review__goals {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.wizard-review__goal {
  background: var(--color-white);
  border-left: 4px solid;
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.wizard-review__goal-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
}

.wizard-review__goal-badge {
  padding: 4px 10px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 600;
  color: white;
  display: flex;
  align-items: center;
  gap: 4px;
}

.wizard-review__goal-tag {
  font-size: 11px;
  color: var(--color-gray-500);
  background: var(--color-gray-100);
  padding: 2px 8px;
  border-radius: 4px;
}

.wizard-review__goal-title {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 8px 0;
}

.wizard-review__goal-description {
  font-size: 14px;
  color: var(--color-gray-600);
  margin: 0 0 12px 0;
}

.wizard-review__goal-metrics {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.wizard-review__goal-metric {
  font-size: 12px;
  padding: 4px 10px;
  background: var(--color-gray-100);
  border-radius: 4px;
  color: var(--color-gray-600);
}

/* ========== Goals Dashboard ========== */
.goals-dashboard {
  padding: 24px;
}

.goals-dashboard__header {
  margin-bottom: 24px;
}

.goals-dashboard__title-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.goals-dashboard__title {
  font-size: 28px;
  font-weight: 700;
  margin: 0;
}

.goals-dashboard__add-btn {
  padding: 10px 20px;
  background: var(--color-primary);
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
}

.goals-dashboard__add-btn:hover {
  background: var(--color-primary-dark);
}

.goals-dashboard__stats {
  display: flex;
  gap: 24px;
  margin-bottom: 24px;
}

.goals-dashboard__stat {
  background: var(--color-white);
  padding: 16px 24px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.goals-dashboard__stat-value {
  display: block;
  font-size: 28px;
  font-weight: 700;
  color: var(--color-primary);
}

.goals-dashboard__stat-label {
  font-size: 12px;
  color: var(--color-gray-500);
}

.goals-dashboard__controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.goals-dashboard__view-toggle {
  display: flex;
  background: var(--color-gray-100);
  border-radius: 8px;
  padding: 4px;
}

.goals-dashboard__view-btn {
  padding: 8px 16px;
  background: transparent;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-gray-600);
  cursor: pointer;
  transition: all 0.2s ease;
}

.goals-dashboard__view-btn:hover {
  color: var(--color-gray-800);
}

.goals-dashboard__view-btn--active {
  background: var(--color-white);
  color: var(--color-gray-900);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.goals-dashboard__filter-select {
  padding: 8px 16px;
  border: 2px solid var(--color-gray-200);
  border-radius: 8px;
  font-size: 14px;
  background: var(--color-white);
  cursor: pointer;
}

/* Goals Empty State */
.goals-dashboard__empty {
  text-align: center;
  padding: 64px 24px;
  background: var(--color-white);
  border-radius: 16px;
}

.goals-dashboard__empty-icon {
  font-size: 64px;
  margin-bottom: 16px;
}

.goals-dashboard__empty h3 {
  font-size: 20px;
  margin: 0 0 8px 0;
}

.goals-dashboard__empty p {
  color: var(--color-gray-500);
  margin: 0 0 24px 0;
}

/* Goal Card */
.goal-card-wrapper {
  margin-bottom: 12px;
}

.goal-card {
  background: var(--color-white);
  border-left: 4px solid;
  border-radius: 12px;
  padding: 16px 20px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.goal-card--completed {
  opacity: 0.7;
}

.goal-card__header {
  margin-bottom: 12px;
}

.goal-card__title-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.goal-card__expand {
  background: none;
  border: none;
  padding: 4px;
  cursor: pointer;
  color: var(--color-gray-400);
  font-size: 10px;
}

.goal-card__loop-badge {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  color: white;
}

.goal-card__title {
  flex: 1;
  font-size: 16px;
  font-weight: 600;
  margin: 0;
  cursor: pointer;
}

.goal-card__title:hover {
  color: var(--color-primary);
}

.goal-card__timeframe {
  font-size: 11px;
  text-transform: uppercase;
  color: var(--color-gray-400);
  padding: 2px 8px;
  background: var(--color-gray-100);
  border-radius: 4px;
}

.goal-card__progress-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.goal-card__progress-bar {
  flex: 1;
  height: 6px;
  background: var(--color-gray-100);
  border-radius: 3px;
  overflow: hidden;
}

.goal-card__progress-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.3s ease;
}

.goal-card__progress-slider {
  width: 60px;
  cursor: pointer;
}

.goal-card__progress-value {
  font-size: 14px;
  font-weight: 600;
  min-width: 40px;
  text-align: right;
}

.goal-card__metrics {
  display: flex;
  gap: 16px;
  margin-bottom: 12px;
}

.goal-card__metric {
  font-size: 12px;
}

.goal-card__metric-name {
  color: var(--color-gray-500);
  margin-right: 4px;
}

.goal-card__metric-value {
  font-weight: 600;
}

.goal-card__footer {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  color: var(--color-gray-400);
}

.goal-card__children {
  margin-top: 8px;
}

/* Timeline View */
.goals-dashboard__timeframe-section {
  margin-bottom: 32px;
}

.goals-dashboard__timeframe-title {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 16px 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.goals-dashboard__timeframe-count {
  font-size: 12px;
  background: var(--color-gray-200);
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 500;
}

.goals-dashboard__timeframe-goals {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.goals-timeline-card {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: var(--color-white);
  border: 2px solid;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.goals-timeline-card:hover {
  transform: translateX(4px);
}

.goals-timeline-card__badge {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: white;
}

.goals-timeline-card__content {
  flex: 1;
}

.goals-timeline-card__content h4 {
  font-size: 15px;
  font-weight: 600;
  margin: 0 0 8px 0;
}

.goals-timeline-card__progress {
  height: 4px;
  background: var(--color-gray-100);
  border-radius: 2px;
  overflow: hidden;
}

.goals-timeline-card__progress-fill {
  height: 100%;
  border-radius: 2px;
}

.goals-timeline-card__percent {
  font-size: 16px;
  font-weight: 700;
  color: var(--color-gray-600);
}

/* By Loop View */
.goals-dashboard__by-loop {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 16px;
}

.goals-loop-column {
  background: var(--color-white);
  border-top: 4px solid;
  border-radius: 12px;
  overflow: hidden;
}

.goals-loop-column__header {
  padding: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.goals-loop-column__icon {
  font-size: 20px;
}

.goals-loop-column__name {
  font-size: 16px;
  font-weight: 600;
  flex: 1;
}

.goals-loop-column__count {
  font-size: 12px;
  background: rgba(0, 0, 0, 0.1);
  padding: 2px 8px;
  border-radius: 10px;
}

.goals-loop-column__goals {
  padding: 0 16px 16px;
}

.goals-loop-column__empty {
  text-align: center;
  padding: 24px;
  color: var(--color-gray-400);
  font-size: 14px;
}

.goals-loop-card {
  padding: 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
  margin-bottom: 8px;
  cursor: pointer;
  transition: background 0.2s ease;
}

.goals-loop-card:hover {
  background: var(--color-gray-100);
}

.goals-loop-card:last-child {
  margin-bottom: 0;
}

.goals-loop-card__timeframe {
  font-size: 10px;
  text-transform: uppercase;
  color: var(--color-gray-400);
  display: block;
  margin-bottom: 4px;
}

.goals-loop-card__title {
  font-size: 14px;
  font-weight: 500;
  margin: 0 0 8px 0;
}

.goals-loop-card__progress {
  height: 4px;
  background: var(--color-gray-200);
  border-radius: 2px;
  overflow: hidden;
}

.goals-loop-card__progress-fill {
  height: 100%;
  border-radius: 2px;
}

/* ========== Modal Overlay ========== */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.2s ease;
}

.modal-overlay > * {
  max-height: 100vh;
  max-width: 100vw;
  overflow: auto;
}

/* ========== Planning Header ========== */
.planning-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.planning-header h2 {
  margin: 0;
}

.planning-view-toggle {
  display: flex;
  background: var(--color-gray-100);
  border-radius: 8px;
  padding: 4px;
}

.planning-view-btn {
  padding: 8px 20px;
  background: transparent;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-gray-600);
  cursor: pointer;
  transition: all 0.2s ease;
}

.planning-view-btn:hover {
  color: var(--color-gray-800);
}

.planning-view-btn.active {
  background: var(--color-white);
  color: var(--color-gray-900);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* ========== Weekly Planning Wizard ========== */
.weekly-planning-wizard {
  display: flex;
  flex-direction: column;
  gap: 24px;
  max-width: 900px;
}

/* Progress Steps */
.weekly-steps {
  display: flex;
  gap: 8px;
  padding: 16px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05);
  overflow-x: auto;
}

.weekly-step {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  flex: 1;
  min-width: 140px;
}

.weekly-step:hover {
  background: rgba(255, 255, 255, 0.05);
}

.weekly-step.active {
  background: linear-gradient(145deg, rgba(242, 112, 89, 0.15) 0%, var(--color-surface) 100%);
  border: 1px solid rgba(242, 112, 89, 0.3);
}

.weekly-step.completed {
  opacity: 0.7;
}

.weekly-step-indicator {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-size: 14px;
  font-weight: 600;
  background: var(--color-bg-secondary);
  border: 2px solid var(--color-border);
  color: var(--color-text-secondary);
}

.weekly-step.active .weekly-step-indicator {
  background: var(--looops-coral);
  border-color: var(--looops-coral);
  color: white;
}

.weekly-step.completed .weekly-step-indicator {
  background: var(--looops-sage);
  border-color: var(--looops-sage);
  color: white;
}

.weekly-step-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.weekly-step-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.weekly-step-desc {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* Step Content */
.weekly-content {
  padding: 24px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.weekly-step-content h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin: 24px 0 12px 0;
}

.weekly-step-content h4:first-child {
  margin-top: 0;
}

.weekly-step-intro {
  color: var(--color-text-secondary);
  margin-bottom: 20px;
}

/* Review Stats */
.weekly-review-stats {
  display: flex;
  gap: 16px;
  margin-bottom: 24px;
}

.weekly-stat-card {
  flex: 1;
  padding: 20px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 14px;
  text-align: center;
}

.weekly-stat-card.highlight {
  background: linear-gradient(145deg, rgba(115, 165, 140, 0.15) 0%, var(--color-bg-secondary) 100%);
  border-color: rgba(115, 165, 140, 0.3);
}

.weekly-stat-value {
  display: block;
  font-size: 36px;
  font-weight: 700;
  color: var(--color-text);
}

.weekly-stat-card.highlight .weekly-stat-value {
  color: var(--looops-sage);
}

.weekly-stat-label {
  display: block;
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-top: 4px;
}

/* Loop Summary */
.weekly-loop-summary {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.weekly-loop-stat {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
}

.weekly-loop-icon {
  font-size: 20px;
}

.weekly-loop-name {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.weekly-loop-count {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

/* Wins List */
.weekly-wins-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.weekly-win-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: var(--color-bg-secondary);
  border-radius: 10px;
}

.weekly-win-check {
  color: var(--looops-sage);
  font-weight: 600;
}

.weekly-win-title {
  flex: 1;
  font-size: 14px;
  color: var(--color-text);
}

.weekly-win-loop {
  font-size: 18px;
}

/* States Grid */
.weekly-states-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}

.weekly-state-card {
  padding: 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 14px;
}

.weekly-state-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}

.weekly-state-icon {
  font-size: 24px;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--loop-bg);
  border: 1px solid var(--loop-color);
  border-radius: 10px;
}

.weekly-state-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
}

/* Priorities */
.weekly-priorities-count {
  display: inline-block;
  padding: 6px 12px;
  background: var(--color-bg-secondary);
  border-radius: 16px;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-secondary);
  margin-bottom: 16px;
}

.weekly-goals-list,
.weekly-tasks-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.weekly-priority-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.weekly-priority-item:hover {
  border-color: var(--color-border-hover);
  background: var(--color-surface-hover);
}

.weekly-priority-item.selected {
  background: linear-gradient(145deg, rgba(242, 112, 89, 0.1) 0%, var(--color-bg-secondary) 100%);
  border-color: var(--looops-coral);
}

.weekly-priority-check {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-size: 14px;
  background: var(--color-surface);
  border: 2px solid var(--color-border);
  color: var(--color-text-tertiary);
}

.weekly-priority-item.selected .weekly-priority-check {
  background: var(--looops-coral);
  border-color: var(--looops-coral);
  color: white;
}

.weekly-priority-title {
  flex: 1;
  font-size: 14px;
  color: var(--color-text);
}

.weekly-priority-loop {
  font-size: 18px;
}

/* Schedule */
.weekly-schedule {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 8px;
}

.weekly-day-column {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  padding: 12px;
  min-height: 150px;
}

.weekly-day-header {
  text-align: center;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--color-border);
}

.weekly-day-name {
  display: block;
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.weekly-day-date {
  display: block;
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.weekly-day-tasks {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.weekly-day-task {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  background: var(--color-surface);
  border-radius: 6px;
  font-size: 11px;
}

.weekly-task-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
}

.weekly-task-title {
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.weekly-day-empty {
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-align: center;
  padding: 8px;
}

/* Complete Step */
.weekly-complete {
  text-align: center;
  padding: 48px 24px;
}

.weekly-complete-icon {
  font-size: 64px;
  margin-bottom: 16px;
}

.weekly-complete h3 {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.weekly-complete p {
  color: var(--color-text-secondary);
  margin-bottom: 32px;
}

.weekly-complete-summary {
  display: flex;
  justify-content: center;
  gap: 24px;
  margin-bottom: 32px;
}

.weekly-summary-item {
  text-align: center;
}

.weekly-summary-label {
  display: block;
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-bottom: 4px;
}

.weekly-summary-value {
  display: block;
  font-size: 28px;
  font-weight: 700;
  color: var(--looops-coral);
}

.weekly-done-btn {
  padding: 14px 32px;
  background: linear-gradient(145deg, var(--looops-coral) 0%, rgba(242, 112, 89, 0.85) 100%);
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  color: white;
  cursor: pointer;
  transition: all 0.25s ease;
  box-shadow: 0 4px 12px rgba(242, 112, 89, 0.3);
}

.weekly-done-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(242, 112, 89, 0.4);
}

/* Navigation */
.weekly-nav {
  display: flex;
  justify-content: space-between;
  gap: 16px;
}

.weekly-nav-btn {
  padding: 12px 24px;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.weekly-nav-btn.secondary {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  color: var(--color-text-secondary);
}

.weekly-nav-btn.secondary:hover:not(:disabled) {
  background: var(--color-surface-hover);
  border-color: var(--color-border-hover);
}

.weekly-nav-btn.secondary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.weekly-nav-btn.primary {
  background: linear-gradient(145deg, var(--looops-coral) 0%, rgba(242, 112, 89, 0.85) 100%);
  border: none;
  color: white;
  box-shadow: 0 2px 8px rgba(242, 112, 89, 0.25);
}

.weekly-nav-btn.primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(242, 112, 89, 0.35);
}

/* Mobile */
@media (max-width: 768px) {
  .weekly-steps {
    flex-direction: column;
  }

  .weekly-step {
    min-width: auto;
  }

  .weekly-loop-summary {
    grid-template-columns: repeat(2, 1fr);
  }

  .weekly-states-grid {
    grid-template-columns: 1fr;
  }

  .weekly-schedule {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .weekly-day-column {
    min-height: auto;
  }
}

/* Loop State Summary in Today sidebar */
.loop-states-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.loop-state-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
}

.loop-state-icon {
  font-size: 16px;
}

.loop-state-name {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
}

.loop-state-badge {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  padding: 2px 8px;
  border-radius: 4px;
  color: white;
}

/* Archetype Summary in Today sidebar */
.archetype-summary {
  background: var(--color-white);
  border-radius: 12px;
  padding: 16px;
  margin-top: 16px;
}

.archetype-summary h3 {
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--color-gray-500);
  margin: 0 0 12px 0;
}

.archetype-name-display {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-primary);
  margin: 0 0 4px 0;
}

.archetype-blend-display {
  font-size: 13px;
  color: var(--color-gray-500);
  margin: 0;
}

/* Today Screen Layout */
.today-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 32px;
  flex-wrap: wrap;
  gap: 16px;
}

.today-header-main h2 {
  font-size: 32px;
  font-weight: 700;
  margin: 0 0 8px 0;
  letter-spacing: -0.02em;
  line-height: 1.1;
}

.today-date {
  font-size: 15px;
  color: var(--color-gray-400);
  margin: 0;
  font-weight: 500;
}

.today-header-controls {
  display: flex;
  align-items: center;
  gap: 12px;
}

.today-filter .filter-select {
  background: var(--color-dark);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 13px;
  color: var(--color-text);
  cursor: pointer;
  min-width: 120px;
}

.today-filter .filter-select:focus {
  outline: none;
  border-color: var(--color-accent);
}

.quick-add-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border: none;
  border-radius: 12px;
  background: var(--looops-sage);
  color: white;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 24px;
  font-weight: 300;
  box-shadow: 0 4px 12px rgba(115, 165, 140, 0.4);
}

.quick-add-btn:hover {
  background: #5a8a72;
  transform: scale(1.08);
  box-shadow: 0 6px 20px rgba(115, 165, 140, 0.5);
}

.today-content {
  display: grid;
  grid-template-columns: 1fr 320px;
  gap: 32px;
}

.today-main {
  min-width: 0;
}

/* Today's Stack Section */
.today-main h3 {
  font-size: 14px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--color-text-tertiary);
  margin: 0 0 8px 0;
}

.today-main .task-count {
  font-size: 13px;
  color: var(--color-text-tertiary);
  margin-bottom: 24px;
}

.today-sidebar {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.today-sidebar h3 {
  font-size: 13px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--color-text-tertiary);
  margin: 0 0 16px 0;
  padding-bottom: 12px;
  border-bottom: 2px solid var(--color-border);
}

.loop-states-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.loop-state-item {
  cursor: pointer;
  transition: all 0.2s ease;
  border-radius: 10px;
  padding: 10px 14px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--color-surface);
  border: 1px solid transparent;
}

.loop-state-item:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border);
}

.loop-state-item.active {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
}

.loop-state-item__info {
  display: flex;
  align-items: center;
  gap: 10px;
}

.loop-state-item__icon {
  font-size: 18px;
}

.loop-state-item__name {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.loop-state-item__badge {
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: white;
}

/* Archetype Card */
.archetype-card {
  background: var(--color-surface);
  border-radius: 16px;
  padding: 20px;
  border: 1px solid var(--color-border);
}

.archetype-card h4 {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--color-text-tertiary);
  margin: 0 0 12px 0;
}

.archetype-card__name {
  font-size: 20px;
  font-weight: 700;
  color: var(--color-text);
  margin: 0 0 4px 0;
}

.archetype-card__traits {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0;
}

@media (max-width: 1024px) {
  .today-content {
    grid-template-columns: 1fr;
  }

  .today-sidebar {
    display: none;
  }
}

/* ========== Calendar View ========== */
.calendar-view {
  display: grid;
  grid-template-columns: 1fr 320px;
  gap: 24px;
  height: calc(100vh - 220px);
  min-height: 500px;
  max-height: 800px;
}

.calendar-container {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.calendar-nav-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border: none;
  border-radius: 8px;
  background: var(--color-bg);
  color: var(--color-text);
  cursor: pointer;
  transition: background 0.2s ease;
}

.calendar-nav-btn:hover {
  background: var(--color-border);
}

.calendar-title {
  display: flex;
  align-items: center;
  gap: 12px;
}

.calendar-title h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 0;
}

.calendar-today-btn {
  padding: 6px 12px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  background: transparent;
  color: var(--color-text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.calendar-today-btn:hover {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
}

.calendar-weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
  margin-bottom: 8px;
}

.calendar-weekday {
  text-align: center;
  font-size: 11px;
  font-weight: 600;
  color: var(--color-gray-500);
  text-transform: uppercase;
  padding: 8px 0;
}

.calendar-grid {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.calendar-week {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
  flex: 1;
}

.calendar-day {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 8px 4px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s ease;
  min-height: 60px;
}

.calendar-day:hover {
  background: var(--color-bg);
}

.calendar-day.other-month {
  opacity: 0.3;
}

.calendar-day.today {
  background: var(--color-accent-subtle);
}

.calendar-day.today .calendar-day-number {
  background: var(--color-accent);
  color: white;
  border-radius: 50%;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.calendar-day.selected {
  background: var(--color-accent-subtle);
  outline: 2px solid var(--color-accent);
}

.calendar-day-number {
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 4px;
}

.calendar-day-tasks {
  display: flex;
  gap: 3px;
  flex-wrap: wrap;
  justify-content: center;
}

.calendar-task-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
}

.calendar-task-more {
  font-size: 9px;
  color: var(--color-gray-500);
}

/* Calendar Detail Panel */
.calendar-detail-panel {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.calendar-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--color-border);
}

.calendar-detail-header h4 {
  font-size: 16px;
  font-weight: 600;
  margin: 0;
}

.calendar-add-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  border: none;
  border-radius: 8px;
  background: var(--color-accent);
  color: white;
  font-size: 13px;
  cursor: pointer;
  transition: background 0.2s ease;
}

.calendar-add-btn:hover {
  background: var(--color-accent-hover);
}

.calendar-detail-empty {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: var(--color-gray-500);
  text-align: center;
  gap: 12px;
}

.calendar-add-task-btn {
  padding: 10px 20px;
  border: 1px dashed var(--color-border);
  border-radius: 8px;
  background: transparent;
  color: var(--color-text-secondary);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.calendar-add-task-btn:hover {
  border-color: var(--color-accent);
  color: var(--color-accent);
}

.calendar-detail-tasks {
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow-y: auto;
}

.calendar-task-item {
  display: flex;
  gap: 12px;
  padding: 12px;
  background: var(--color-bg);
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s ease;
}

.calendar-task-item:hover {
  background: var(--color-border);
}

.calendar-task-urgency {
  width: 4px;
  border-radius: 2px;
  flex-shrink: 0;
}

.calendar-task-content {
  flex: 1;
  min-width: 0;
}

.calendar-task-title {
  font-size: 14px;
  font-weight: 500;
  display: block;
  margin-bottom: 6px;
}

.calendar-task-meta {
  display: flex;
  align-items: center;
  gap: 8px;
}

.calendar-task-loop {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 4px;
}

.calendar-task-duration {
  font-size: 11px;
  color: var(--color-gray-500);
}

@media (max-width: 900px) {
  .calendar-view {
    grid-template-columns: 1fr;
    height: auto;
  }

  .calendar-detail-panel {
    display: none;
  }
}

/* ========== Quick Add Modal ========== */
.quick-add-modal {
  background: var(--color-dark);
  border-radius: 16px;
  padding: 24px;
  width: 400px;
  max-width: 90vw;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.quick-add-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}

.quick-add-header h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 0;
}

.quick-add-date {
  font-size: 13px;
  color: var(--color-gray-500);
  flex: 1;
}

.quick-add-close {
  width: 32px;
  height: 32px;
  border: none;
  border-radius: 8px;
  background: var(--color-bg);
  color: var(--color-text-secondary);
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease;
}

.quick-add-close:hover {
  background: var(--color-border);
}

.quick-add-field {
  margin-bottom: 16px;
}

.quick-add-field label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-gray-500);
  margin-bottom: 8px;
  text-transform: uppercase;
}

.quick-add-input {
  width: 100%;
  padding: 12px 16px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-bg);
  color: var(--color-text);
  font-size: 16px;
  transition: border-color 0.2s ease;
}

.quick-add-input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.quick-add-input::placeholder {
  color: var(--color-gray-500);
}

.quick-add-loops {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 8px;
}

.quick-add-loop-btn {
  width: 40px;
  height: 40px;
  border: 2px solid;
  border-radius: 10px;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.quick-add-loop-btn:hover {
  transform: scale(1.1);
}

.quick-add-loop-btn.selected {
  transform: scale(1.1);
}

.quick-add-loop-name {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.quick-add-actions {
  display: flex;
  gap: 12px;
  margin-top: 24px;
}

.quick-add-cancel {
  flex: 1;
  padding: 12px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: transparent;
  color: var(--color-text-secondary);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.quick-add-cancel:hover {
  background: var(--color-bg);
}

.quick-add-submit {
  flex: 1;
  padding: 12px;
  border: none;
  border-radius: 8px;
  background: var(--color-accent);
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.quick-add-submit:hover:not(:disabled) {
  background: var(--color-accent-hover);
}

.quick-add-submit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Profile Screen Enhancements */
.profile-section {
  background: var(--color-white);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.profile-section h3 {
  font-size: 16px;
  font-weight: 600;
  margin: 0 0 16px 0;
}

.profile-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
}

.profile-field {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.profile-label {
  font-size: 12px;
  color: var(--color-gray-500);
}

.profile-value {
  font-size: 16px;
  font-weight: 500;
}

.archetype-display {
  text-align: center;
}

.archetype-name-large {
  font-size: 28px;
  font-weight: 800;
  color: var(--color-primary);
  margin: 0 0 24px 0;
}

.archetype-item {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
}

.archetype-item .archetype-name {
  width: 80px;
  font-size: 13px;
  font-weight: 500;
  text-align: right;
}

.archetype-bar {
  flex: 1;
  height: 8px;
  background: var(--color-gray-100);
  border-radius: 4px;
  overflow: hidden;
}

.archetype-bar__fill {
  height: 100%;
  background: var(--color-primary);
  border-radius: 4px;
}

.archetype-score {
  width: 40px;
  font-size: 13px;
  font-weight: 600;
}

.voice-profile-display {
  font-size: 14px;
  line-height: 1.6;
}

.voice-examples {
  margin-top: 12px;
}

.voice-examples ul {
  margin: 8px 0 0 20px;
  padding: 0;
}

.voice-examples li {
  margin-bottom: 4px;
  font-style: italic;
  color: var(--color-gray-600);
}

.profile-actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

/* Appearance Settings */
.appearance-settings {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.setting-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: 12px;
  border: 1px solid var(--color-border);
}

.setting-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.setting-label {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
}

.setting-description {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.theme-toggle-group {
  display: flex;
  gap: 8px;
}

.theme-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 12px 20px;
  background: var(--color-surface);
  border: 2px solid var(--color-border);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
  min-width: 80px;
}

.theme-option:hover {
  border-color: var(--color-text-tertiary);
}

.theme-option.active {
  border-color: var(--looops-coral);
  background: var(--looops-coral-subtle);
}

.theme-option-icon {
  font-size: 24px;
}

.theme-option-label {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.theme-option.active .theme-option-label {
  color: var(--looops-coral);
}

@media (max-width: 640px) {
  .setting-row {
    flex-direction: column;
    gap: 16px;
    align-items: flex-start;
  }

  .theme-toggle-group {
    width: 100%;
  }

  .theme-option {
    flex: 1;
  }
}

.button--danger {
  background: var(--color-danger);
  border-color: var(--color-danger);
}

.button--danger:hover {
  background: #b91c1c;
  border-color: #b91c1c;
}

/* ========== Tasks Screen ========== */
.tasks-screen {
  display: flex;
  height: 100%;
  width: 100%;
  background: var(--color-bg);
}

/* Hide mobile menu button on desktop */
.tasks-mobile-menu-btn {
  display: none;
}

/* Hide mobile overlay on desktop */
.tasks-sidebar-overlay {
  display: none;
}

/* Tasks Sidebar */
.tasks-sidebar {
  width: 240px;
  min-width: 240px;
  background: var(--color-surface);
  border-right: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  position: relative;
  transition: width 0.2s ease, min-width 0.2s ease;
  padding-top: 8px;
}

.tasks-sidebar.collapsed {
  width: 48px;
  min-width: 48px;
}

.sidebar-toggle {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 20px;
  height: 20px;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
}

.sidebar-toggle:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.sidebar-section {
  padding: 4px 8px;
}

.sidebar-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 8px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--color-text-tertiary);
  margin-top: 8px;
}

.sidebar-section-header .add-btn {
  width: 18px;
  height: 18px;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: 4px;
  font-size: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sidebar-section-header .add-btn:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.sidebar-item {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 6px 8px;
  border: none;
  background: transparent;
  color: var(--color-text);
  cursor: pointer;
  border-radius: 6px;
  font-size: 13px;
  text-align: left;
  transition: background 0.1s ease;
}

.sidebar-item:hover {
  background: var(--color-surface-hover);
}

.sidebar-item.active {
  background: var(--looops-navy);
  color: white;
}

.sidebar-icon {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-secondary);
  flex-shrink: 0;
}

.sidebar-item.active .sidebar-icon {
  color: white;
}

.sidebar-icon.today-icon {
  color: var(--looops-coral);
}

.sidebar-icon.loop-icon {
  font-size: 14px;
}

.sidebar-icon.project-dot,
.sidebar-icon.label-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  margin-left: 2px;
  margin-right: 2px;
}

.sidebar-badge {
  margin-left: auto;
  background: var(--color-bg-secondary);
  color: var(--color-text-tertiary);
  font-size: 10px;
  font-weight: 600;
  padding: 1px 6px;
  border-radius: 8px;
  min-width: 18px;
  text-align: center;
}

.sidebar-item.active .sidebar-badge {
  background: rgba(255, 255, 255, 0.2);
  color: white;
}

.sidebar-empty {
  padding: 8px 12px;
  font-size: 13px;
  color: var(--color-text-tertiary);
  font-style: italic;
}

/* Tasks Main */
.tasks-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  padding: 24px 32px;
}

.tasks-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 24px;
}

.tasks-header-left h2 {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
  margin-bottom: 4px;
}

.tasks-description {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.tasks-header-right {
  display: flex;
  gap: 16px;
}

.header-control {
  display: flex;
  align-items: center;
  gap: 8px;
}

.header-control label {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.header-control select {
  padding: 6px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  font-size: 13px;
  color: var(--color-text);
  cursor: pointer;
}

/* Loop Filter Control */
.loop-filter-control {
  display: flex;
  align-items: center;
}

.loop-filter-select {
  padding: 6px 10px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  font-size: 13px;
  color: var(--color-text);
  cursor: pointer;
  min-width: 100px;
}

.loop-filter-select:focus {
  outline: none;
  border-color: var(--looops-coral);
}

/* Task List Container */
.task-list-container {
  flex: 1;
}

.task-list-input {
  margin-bottom: 16px;
}

.task-list-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  margin-bottom: 8px;
}

.task-count {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.show-completed-btn {
  font-size: 13px;
  color: var(--color-text-secondary);
  background: transparent;
  border: none;
  cursor: pointer;
  text-decoration: underline;
}

.show-completed-btn:hover {
  color: var(--color-text);
}

.task-list-empty {
  text-align: center;
  padding: 48px 24px;
  color: var(--color-text-tertiary);
}

.task-list-empty .empty-icon {
  width: 48px;
  height: 48px;
  margin: 0 auto 16px;
  color: var(--color-gray-300);
}

.task-list-empty .empty-icon svg {
  width: 100%;
  height: 100%;
}

/* Task Group */
.task-group {
  margin-bottom: 24px;
}

.task-group-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 0;
  cursor: pointer;
  user-select: none;
}

.task-group-header:hover {
  opacity: 0.8;
}

.group-collapse-icon {
  font-size: 10px;
  color: var(--color-text-tertiary);
  transition: transform 0.2s ease;
}

.group-collapse-icon.collapsed {
  transform: rotate(-90deg);
}

.group-icon {
  font-size: 16px;
}

.group-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.group-count {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-left: auto;
}

.task-group-items {
  border-left: 2px solid var(--color-border);
  margin-left: 6px;
  padding-left: 12px;
}

/* Task Item */
.task-item-wrapper {
  position: relative;
}

.task-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 10px 12px;
  background: transparent;
  border-radius: 8px;
  margin-bottom: 1px;
  cursor: pointer;
  transition: background 0.1s ease;
  border-bottom: 1px solid var(--color-border-light);
}

.task-item:hover {
  background: var(--color-surface-hover);
}

.task-item.completed {
  opacity: 0.5;
}

.task-checkbox {
  width: 18px;
  height: 18px;
  min-width: 18px;
  border: 2px solid var(--color-gray-500);
  border-radius: 50%;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
  margin-top: 1px;
  flex-shrink: 0;
}

.task-checkbox:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-accent);
}

.task-item.completed .task-checkbox {
  background: var(--color-accent);
  border-color: var(--color-accent);
}

.check-icon {
  width: 12px;
  height: 12px;
  color: white;
}

.task-content {
  flex: 1;
  min-width: 0;
}

.task-title-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.task-title {
  font-size: 14px;
  color: var(--color-text);
  word-break: break-word;
}

.task-title.completed {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

.subtask-toggle {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: var(--color-text-tertiary);
  background: var(--color-surface-hover);
  border: none;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  cursor: pointer;
}

.subtask-toggle:hover {
  background: var(--color-border);
}

.toggle-arrow {
  font-size: 8px;
  transition: transform 0.2s ease;
}

.toggle-arrow.open {
  transform: rotate(90deg);
}

.task-description-preview {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-top: 4px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.task-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  flex-wrap: wrap;
}

.task-due {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
}

.task-due.due-overdue {
  color: var(--color-red);
  background: var(--color-red-light);
}

.task-due.due-today {
  color: var(--looops-sage);
  background: rgba(115, 165, 140, 0.15);
}

.task-due.due-tomorrow {
  color: var(--looops-amber);
  background: rgba(244, 185, 66, 0.15);
}

.task-due.due-week {
  color: var(--color-gray-400);
  background: var(--color-gray-100);
}

.task-due.due-later {
  color: var(--color-text-secondary);
  background: var(--color-gray-100);
}

.meta-icon {
  width: 12px;
  height: 12px;
}

.task-loop-badge {
  font-size: 12px;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
}

.task-project-badge {
  font-size: 12px;
  font-weight: 500;
}

.task-labels {
  display: flex;
  gap: 4px;
}

.task-label-badge {
  font-size: 11px;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  color: white;
}

.task-recurrence {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: var(--color-text-secondary);
  background: var(--color-bg-secondary);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
}

.task-recurrence .meta-icon {
  width: 12px;
  height: 12px;
}

.task-estimate {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.task-actions {
  display: flex;
  gap: 4px;
  opacity: 0;
  transition: opacity 0.1s ease;
}

.task-item:hover .task-actions {
  opacity: 1;
}

.task-action-btn {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
}

.task-action-btn:hover {
  background: var(--color-gray-100);
  color: var(--color-text);
}

.task-action-btn.task-action-delete:hover {
  color: var(--color-red);
}

.task-action-btn svg {
  width: 16px;
  height: 16px;
}

/* Task Subtasks */
.task-subtasks {
  margin-left: 32px;
  margin-top: 2px;
}

/* Task Input */
.task-input-container {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  overflow: hidden;
}

.task-input-main {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
}

.task-input-expand-btn {
  width: 24px;
  height: 24px;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: var(--radius-sm);
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.task-input-expand-btn:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.task-input-field {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 14px;
  color: var(--color-text);
  outline: none;
}

.task-input-field::placeholder {
  color: var(--color-text-tertiary);
}

.task-input-submit-btn {
  padding: 6px 16px;
  background: var(--color-accent);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.task-input-submit-btn:hover:not(:disabled) {
  background: var(--color-accent-light);
  box-shadow: 0 0 15px var(--color-accent-glow);
}

.task-input-submit-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.task-input-hints {
  display: flex;
  gap: 6px;
  padding: 0 12px 8px;
  flex-wrap: wrap;
}

.hint-tag {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  background: var(--color-gray-100);
  color: var(--color-text-secondary);
}

.hint-date {
  background: rgba(115, 165, 140, 0.15);
  color: var(--looops-sage);
}

.hint-label {
  background: rgba(244, 185, 66, 0.15);
  color: var(--looops-amber);
}

.task-input-expanded {
  border-top: 1px solid var(--color-border);
  padding: 12px;
}

.task-input-description {
  width: 100%;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  padding: 8px 12px;
  font-size: 13px;
  resize: vertical;
  margin-bottom: 12px;
  font-family: inherit;
}

.task-input-description:focus {
  outline: none;
  border-color: var(--color-red);
}

.task-input-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 12px;
  margin-bottom: 12px;
}

.task-input-option {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.task-input-option label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-text-secondary);
}

.task-input-select,
.task-input-date {
  padding: 6px 10px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
  background: var(--color-surface);
  color: var(--color-text);
}

.priority-buttons {
  display: flex;
  gap: 4px;
}

.priority-btn {
  width: 32px;
  height: 28px;
  border: 2px solid;
  border-radius: var(--radius-sm);
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.1s ease;
}

.task-input-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.task-input-cancel-btn {
  padding: 8px 16px;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.task-input-cancel-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-text-tertiary);
}

.task-input-add-btn {
  padding: 8px 16px;
  background: var(--color-accent);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.task-input-add-btn:hover:not(:disabled) {
  background: var(--color-accent-light);
  box-shadow: 0 0 15px var(--color-accent-glow);
}

.task-input-add-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ========== Kanban View ========== */
.kanban-view {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  height: calc(100vh - 220px);
  min-height: 400px;
}

.kanban-column {
  background: var(--color-surface);
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.kanban-column-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 3px solid var(--looops-coral);
  background: var(--color-bg-secondary);
}

.kanban-column-header--doing {
  border-bottom-color: var(--looops-amber);
}

.kanban-column-header--done {
  border-bottom-color: var(--looops-sage);
}

.kanban-column-title {
  font-size: 14px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text);
}

.kanban-column-count {
  background: var(--color-bg);
  padding: 2px 10px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-secondary);
}

.kanban-column-tasks {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.kanban-task-card {
  background: var(--color-bg-secondary);
  border-radius: 10px;
  padding: 14px 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-left: 4px solid var(--color-border);
}

.kanban-task-card:hover {
  background: var(--color-surface-hover);
  transform: translateX(4px);
}

.kanban-task-card--done {
  opacity: 0.6;
}

.kanban-task-card--done .kanban-task-title {
  text-decoration: line-through;
}

.kanban-task-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 8px;
  line-height: 1.4;
}

.kanban-task-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.kanban-task-loop {
  font-size: 14px;
}

.kanban-task-due {
  background: var(--color-bg);
  padding: 2px 8px;
  border-radius: 4px;
}

/* Task Detail Modal */
.task-detail-modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: var(--shadow-md);
}

.task-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid var(--color-border);
}

.task-detail-loop-badge {
  padding: 4px 12px;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
}

.task-detail-content {
  padding: 20px;
}

.task-detail-title {
  width: 100%;
  border: none;
  background: transparent;
  font-size: 20px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 12px;
  outline: none;
}

.task-detail-title::placeholder {
  color: var(--color-text-tertiary);
}

.task-detail-description {
  width: 100%;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  padding: 12px;
  font-size: 14px;
  resize: vertical;
  margin-bottom: 20px;
  font-family: inherit;
}

.task-detail-description:focus {
  outline: none;
  border-color: var(--color-red);
}

/* Subtasks in modal */
.task-detail-subtasks {
  margin-bottom: 20px;
}

.subtasks-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.subtasks-header h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.subtasks-count {
  font-size: 12px;
  color: var(--color-text-secondary);
}

.subtasks-list {
  margin-bottom: 12px;
}

.subtask-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 0;
  border-bottom: 1px solid var(--color-border-light);
}

.subtask-checkbox {
  width: 18px;
  height: 18px;
  border: 2px solid var(--color-gray-400);
  border-radius: 50%;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.subtask-checkbox.checked {
  background: var(--color-gray-400);
  border-color: var(--color-gray-400);
}

.subtask-checkbox svg {
  width: 10px;
  height: 10px;
  color: white;
}

.subtask-title {
  font-size: 14px;
  color: var(--color-text);
}

.subtask-title.completed {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

.add-subtask {
  display: flex;
  gap: 8px;
}

.add-subtask input {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
}

.add-subtask input:focus {
  outline: none;
  border-color: var(--color-red);
}

.add-subtask button {
  padding: 8px 16px;
  background: var(--color-gray-100);
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  cursor: pointer;
}

.add-subtask button:hover:not(:disabled) {
  background: var(--color-gray-200);
}

.add-subtask button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Properties */
.task-detail-properties {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.property-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.property-row label {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 120px;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.property-icon {
  width: 16px;
  height: 16px;
}

.property-row select,
.property-row input[type="date"] {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
  background: var(--color-surface);
  color: var(--color-text);
}

.priority-select {
  display: flex;
  gap: 6px;
  flex: 1;
}

.priority-option {
  width: 36px;
  height: 32px;
  border: 2px solid;
  border-radius: var(--radius);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.1s ease;
}

.estimate-input {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}

.estimate-input input {
  width: 80px;
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
}

.estimate-input span {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.property-row-labels {
  align-items: flex-start;
}

.property-row-labels label {
  padding-top: 8px;
}

.labels-picker {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  flex: 1;
}

.label-chip {
  padding: 4px 10px;
  border: 2px solid;
  border-radius: var(--radius);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.1s ease;
}

.no-labels {
  font-size: 13px;
  color: var(--color-text-tertiary);
  font-style: italic;
}

/* Task detail footer */
.task-detail-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-top: 1px solid var(--color-border);
  background: var(--color-bg-secondary);
}

.footer-left,
.footer-right {
  display: flex;
  gap: 8px;
}

.delete-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: transparent;
  border: none;
  color: var(--color-text-secondary);
  font-size: 13px;
  cursor: pointer;
  border-radius: var(--radius);
}

.delete-btn:hover {
  background: var(--color-red-light);
  color: var(--color-red);
}

.delete-btn svg {
  width: 16px;
  height: 16px;
}

.delete-confirm {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.confirm-yes {
  padding: 4px 12px;
  background: var(--color-red);
  color: white;
  border: none;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 12px;
}

.confirm-no {
  padding: 4px 12px;
  background: var(--color-gray-200);
  color: var(--color-text);
  border: none;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 12px;
}

.cancel-btn {
  padding: 8px 16px;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.cancel-btn:hover {
  background: var(--color-gray-100);
}

.save-btn {
  padding: 8px 20px;
  background: var(--color-red);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
}

.save-btn:hover:not(:disabled) {
  background: var(--color-red-hover);
}

.save-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* New Project Modal */
.new-project-modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 400px;
  padding: 24px;
  box-shadow: var(--shadow-md);
}

.new-project-modal h3 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 20px;
}

.new-project-modal .form-group {
  margin-bottom: 16px;
}

.new-project-modal .form-group label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  margin-bottom: 6px;
}

.new-project-modal .form-group input,
.new-project-modal .form-group select {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 14px;
}

.new-project-modal .form-group input:focus,
.new-project-modal .form-group select:focus {
  outline: none;
  border-color: var(--color-red);
}

.new-project-modal .modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 20px;
}

.new-project-modal .create-btn {
  padding: 10px 20px;
  background: var(--color-red);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.new-project-modal .create-btn:hover:not(:disabled) {
  background: var(--color-red-hover);
}

.new-project-modal .create-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ================================
   Quick Add Modal
   ================================ */

.quick-add-modal {
  background: var(--color-white);
  border-radius: 12px;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  width: 100%;
  max-width: 560px;
  max-height: 90vh;
  overflow: hidden;
  animation: slideUp 0.2s ease-out;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.quick-add-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--color-border);
}

.quick-add-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--color-gray-900);
}

.quick-add-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  border-radius: 6px;
  font-size: 24px;
  color: var(--color-gray-500);
  cursor: pointer;
  transition: background 0.15s ease, color 0.15s ease;
}

.quick-add-close:hover {
  background: var(--color-gray-100);
  color: var(--color-gray-700);
}

.quick-add-modal .task-input-container {
  padding: 20px;
  border: none;
  background: transparent;
}

.quick-add-modal .task-input-main {
  background: var(--color-gray-50);
  border-radius: 8px;
  padding: 4px;
}

.quick-add-modal .task-input-field {
  background: transparent;
  border: none;
  font-size: 15px;
}

.quick-add-modal .task-input-expanded {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid var(--color-border);
}

.quick-add-modal .task-input-actions {
  padding-top: 16px;
  margin-top: 16px;
  border-top: 1px solid var(--color-border);
}

/* Floating Action Button */
.fab-quick-add {
  position: fixed;
  bottom: 32px;
  right: 32px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: var(--color-red);
  color: white;
  border: none;
  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
  z-index: 100;
}

/* Position FAB above mobile nav */
@media (max-width: 768px) {
  .fab-quick-add {
    bottom: 80px;
    right: 16px;
    width: 50px;
    height: 50px;
  }

  .fab-quick-add svg {
    width: 24px;
    height: 24px;
  }
}

.fab-quick-add:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 20px rgba(220, 38, 38, 0.5);
  background: var(--color-red-hover);
}

.fab-quick-add:active {
  transform: scale(0.95);
}

.fab-quick-add svg {
  width: 28px;
  height: 28px;
}

/* Loop Prediction Indicator */
.loop-prediction {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
  margin-top: 12px;
}

.loop-prediction-label {
  font-size: 12px;
  color: var(--color-gray-500);
}

.loop-prediction-suggestion {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background: var(--color-white);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: border-color 0.15s ease, background 0.15s ease;
}

.loop-prediction-suggestion:hover {
  border-color: var(--color-accent);
  background: var(--color-accent-subtle);
}

.loop-prediction-suggestion.active {
  border-color: var(--color-accent);
  background: var(--color-accent-subtle);
}

.loop-prediction-confidence {
  font-size: 11px;
  color: var(--color-gray-400);
  margin-left: 4px;
}

/* Loop auto badge (shown when AI predicted the loop) */
.loop-auto-badge {
  display: inline-block;
  margin-left: 6px;
  padding: 2px 6px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-radius: 4px;
  vertical-align: middle;
}

/* Hint confidence percentage */
.hint-confidence {
  display: inline-block;
  margin-left: 4px;
  font-size: 10px;
  opacity: 0.7;
}

/* Predicted hint tag styling */
.hint-tag.hint-predicted {
  position: relative;
  animation: pulseHint 2s ease-in-out infinite;
}

@keyframes pulseHint {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.4);
  }
  50% {
    box-shadow: 0 0 0 4px rgba(102, 126, 234, 0);
  }
}

/* Recurrence clear button */
.recurrence-clear-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  margin-left: 4px;
  padding: 0;
  border: none;
  background: var(--color-gray-200);
  color: var(--color-text-secondary);
  border-radius: 50%;
  cursor: pointer;
  font-size: 12px;
  line-height: 1;
  vertical-align: middle;
}

.recurrence-clear-btn:hover {
  background: var(--color-error);
  color: white;
}

/* ========== Light Theme ========== */
[data-theme="light"] {
  /* Light Theme - Looops Brand */
  --color-black: #1a1a2e;
  --color-dark: #1a1a2e;
  --color-gray-900: #1a1a2e;
  --color-gray-800: #2d2d45;
  --color-gray-700: #454560;
  --color-gray-600: #5e5e78;
  --color-gray-500: #8080a0;
  --color-gray-400: #b0b0c5;
  --color-gray-300: #d4d4e0;
  --color-gray-200: #e8e8f0;
  --color-gray-100: #f5f5f8;
  --color-white: #ffffff;

  /* Accent - Looops Coral (Primary Action) */
  --color-accent: #d95a45;
  --color-accent-light: #F27059;
  --color-accent-dark: #c04a38;
  --color-accent-glow: rgba(217, 90, 69, 0.2);
  --color-accent-subtle: rgba(217, 90, 69, 0.08);
  --color-accent-hover: #F27059;

  /* Background - Clean white with slight warmth */
  --color-bg: #f8f8fa;
  --color-bg-secondary: #ffffff;
  --color-surface: #ffffff;
  --color-surface-hover: #f0f0f5;
  --color-border: #e0e0e8;
  --color-border-light: #f0f0f5;

  /* Text Colors - Looops Navy */
  --color-text: #1a1a2e;
  --color-text-secondary: #5e5e78;
  --color-text-tertiary: #8080a0;

  /* Shadows - Softer for light theme */
  --shadow-sm: 0 1px 3px rgba(26, 26, 46, 0.08);
  --shadow-md: 0 4px 12px rgba(26, 26, 46, 0.1);
  --shadow-glow: 0 0 20px var(--color-accent-glow);
  --shadow-glow-sm: 0 0 10px var(--color-accent-glow);
}

/* Light theme specific overrides */
[data-theme="light"] .sidebar {
  background: #ffffff;
  border-right-color: var(--color-border);
}

[data-theme="light"] .app-main {
  background: var(--color-bg);
}

[data-theme="light"] .loops-viz-container {
  background: radial-gradient(ellipse at center, var(--color-gray-100) 0%, var(--color-bg) 70%);
}

[data-theme="light"] .loop-outer-circle {
  fill: #ffffff;
}

[data-theme="light"] .loop-svg {
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

[data-theme="light"] .loop-circle-item:hover .loop-svg {
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
}

[data-theme="light"] .theme-toggle {
  background: var(--color-gray-100);
}

[data-theme="light"] .nav-item {
  color: var(--color-gray-600);
}

[data-theme="light"] .nav-item:hover {
  background: var(--color-gray-100);
  color: var(--color-gray-900);
}

[data-theme="light"] .nav-item--active {
  background: var(--color-accent);
  color: #ffffff;
}

[data-theme="light"] .loop-detail {
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
}

[data-theme="light"] .loop-detail-task:hover {
  background: var(--color-gray-100);
}

[data-theme="light"] .today-panel {
  box-shadow: var(--shadow-sm);
}

[data-theme="light"] .card:hover,
[data-theme="light"] .task-row:hover,
[data-theme="light"] .loop-card:hover {
  box-shadow: var(--shadow-md);
}

/* Light theme - Calendar View */
[data-theme="light"] .calendar-container {
  background: #ffffff;
  box-shadow: var(--shadow-sm);
}

[data-theme="light"] .calendar-nav-btn {
  background: var(--color-gray-100);
}

[data-theme="light"] .calendar-nav-btn:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .calendar-today-btn {
  border-color: var(--color-gray-300);
}

[data-theme="light"] .calendar-day:hover {
  background: var(--color-gray-100);
}

[data-theme="light"] .calendar-day.today {
  background: var(--color-accent-subtle);
}

[data-theme="light"] .calendar-day.selected {
  background: var(--color-accent-subtle);
}

[data-theme="light"] .calendar-detail-panel {
  background: #ffffff;
  box-shadow: var(--shadow-sm);
}

[data-theme="light"] .calendar-task-item {
  background: var(--color-gray-50);
}

[data-theme="light"] .calendar-task-item:hover {
  background: var(--color-gray-100);
}

/* Light theme - Quick Add Modal */
[data-theme="light"] .quick-add-modal {
  background: #ffffff;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
}

[data-theme="light"] .quick-add-close {
  background: var(--color-gray-100);
}

[data-theme="light"] .quick-add-close:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .quick-add-input {
  background: var(--color-gray-50);
  border-color: var(--color-gray-300);
}

[data-theme="light"] .quick-add-input:focus {
  border-color: var(--color-accent);
}

[data-theme="light"] .quick-add-cancel {
  border-color: var(--color-gray-300);
}

[data-theme="light"] .quick-add-cancel:hover {
  background: var(--color-gray-100);
}

/* Light theme - Today Header Controls */
[data-theme="light"] .filter-select {
  background: #ffffff;
  border-color: var(--color-gray-300);
}

[data-theme="light"] .filter-select:focus {
  border-color: var(--color-accent);
}

/* Light theme - View Toggle */
[data-theme="light"] .view-toggle {
  background: var(--color-gray-200);
}

[data-theme="light"] .view-toggle-btn {
  color: var(--color-gray-600);
}

[data-theme="light"] .view-toggle-btn:not(.active):hover {
  color: var(--color-gray-900);
  background: var(--color-gray-300);
}

[data-theme="light"] .view-toggle-btn.active {
  background: var(--looops-navy);
  color: white;
  box-shadow: 0 2px 4px rgba(26, 26, 46, 0.3);
}

/* Light theme - Goals Dashboard */
[data-theme="light"] .goals-dashboard__stat {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .goals-dashboard__stat-value {
  color: var(--color-accent);
}

[data-theme="light"] .goals-dashboard__add-btn {
  background: var(--color-accent);
}

[data-theme="light"] .goals-dashboard__add-btn:hover {
  background: var(--color-accent-dark);
}

[data-theme="light"] .goals-dashboard__view-toggle {
  background: var(--color-gray-100);
}

[data-theme="light"] .goals-dashboard__empty {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .goal-card {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .goal-suggestion-card {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .goal-suggestion-card:hover {
  border-color: var(--color-accent);
}

/* Light theme - Text visibility fixes for interactive states */
[data-theme="light"] .loop-state-item:hover {
  background: var(--color-gray-100);
}

[data-theme="light"] .loop-state-item.active {
  background: var(--color-accent-subtle);
}

[data-theme="light"] .loop-state-item .loop-state-name {
  color: var(--color-gray-800);
}

[data-theme="light"] .task-card {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .task-card:hover {
  background: var(--color-gray-50);
  border-color: var(--color-gray-300);
}

[data-theme="light"] .task-card__title {
  color: var(--color-gray-900);
}

[data-theme="light"] .task-card__meta-item {
  color: var(--color-gray-600);
}

[data-theme="light"] .task-card__framing-text {
  color: var(--color-gray-600);
}

[data-theme="light"] .task-card__btn {
  background: var(--color-gray-100);
  color: var(--color-gray-700);
}

[data-theme="light"] .task-card__btn:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .task-card__btn--complete:hover {
  background: var(--color-success);
  color: white;
}

[data-theme="light"] .task-card__btn--skip:hover {
  background: var(--color-gray-300);
}

[data-theme="light"] .todays-stack__header h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .todays-stack__count {
  color: var(--color-gray-600);
}

[data-theme="light"] .todays-stack__empty-state {
  color: var(--color-gray-600);
}

[data-theme="light"] .todays-stack__empty-state h3 {
  color: var(--color-gray-800);
}

[data-theme="light"] .loop-states-summary h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .archetype-summary {
  background: var(--color-gray-50);
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .archetype-summary h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .archetype-name-display {
  color: var(--color-gray-800);
}

[data-theme="light"] .archetype-blend-display {
  color: var(--color-gray-600);
}

[data-theme="light"] .today-header h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .today-date {
  color: var(--color-gray-600);
}

[data-theme="light"] .quick-add-btn {
  background: var(--color-accent);
  color: white;
}

[data-theme="light"] .quick-add-btn:hover {
  background: var(--color-accent-dark);
}

[data-theme="light"] .loop-card {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .loop-card__header h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .loop-card__empty {
  color: var(--color-gray-500);
}

[data-theme="light"] .loop-task-row {
  background: var(--color-gray-50);
}

[data-theme="light"] .loop-task-row:hover {
  background: var(--color-gray-100);
}

[data-theme="light"] .loop-task-title {
  color: var(--color-gray-800);
}

[data-theme="light"] .loop-task-subloop {
  color: var(--color-gray-500);
}

[data-theme="light"] .screen-header h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .planning-header h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .screen-description {
  color: var(--color-gray-600);
}

[data-theme="light"] .planning-loop-row {
  background: var(--color-gray-50);
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .planning-loop-info strong {
  color: var(--color-gray-900);
}

[data-theme="light"] .planning-loop-info span {
  color: var(--color-gray-600);
}

[data-theme="light"] .planning-view-btn {
  color: var(--color-gray-600);
}

[data-theme="light"] .planning-view-btn:hover {
  color: var(--color-gray-800);
}

[data-theme="light"] .planning-view-btn.active {
  background: #ffffff;
  color: var(--color-gray-900);
}

[data-theme="light"] .history-screen h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .history-item {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .history-title {
  color: var(--color-gray-800);
}

[data-theme="light"] .history-date {
  color: var(--color-gray-500);
}

[data-theme="light"] .profile-screen h2,
[data-theme="light"] .profile-section h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .profile-label {
  color: var(--color-gray-600);
}

[data-theme="light"] .profile-value {
  color: var(--color-gray-800);
}

[data-theme="light"] .archetype-name-large {
  color: var(--color-gray-900);
}

[data-theme="light"] .archetype-name {
  color: var(--color-gray-700);
}

[data-theme="light"] .archetype-score {
  color: var(--color-gray-600);
}

[data-theme="light"] .voice-profile-display {
  color: var(--color-gray-700);
}

[data-theme="light"] .profile-actions .button {
  background: var(--color-gray-100);
  color: var(--color-gray-800);
  border: 1px solid var(--color-gray-300);
}

[data-theme="light"] .profile-actions .button:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .profile-actions .button--danger {
  background: var(--color-error);
  color: white;
  border-color: var(--color-error);
}

[data-theme="light"] .goals-dashboard__title {
  color: var(--color-gray-900);
}

[data-theme="light"] .goals-dashboard__stat-label {
  color: var(--color-gray-600);
}

[data-theme="light"] .goals-dashboard__view-btn {
  color: var(--color-gray-600);
}

[data-theme="light"] .goals-dashboard__view-btn--active {
  background: #ffffff;
  color: var(--color-gray-900);
}

[data-theme="light"] .goals-dashboard__filter-select {
  background: #ffffff;
  color: var(--color-gray-800);
  border: 1px solid var(--color-gray-300);
}

[data-theme="light"] .goals-dashboard__timeframe-title {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-card__title {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-card__progress-value {
  color: var(--color-gray-700);
}

[data-theme="light"] .goal-card__date {
  color: var(--color-gray-500);
}

[data-theme="light"] .goal-card__children-count {
  color: var(--color-gray-500);
}

[data-theme="light"] .goals-timeline-card h4 {
  color: var(--color-gray-900);
}

[data-theme="light"] .goals-loop-column__name {
  color: var(--color-gray-900);
}

[data-theme="light"] .goals-loop-card__title {
  color: var(--color-gray-800);
}

[data-theme="light"] .goals-loop-card__timeframe {
  color: var(--color-gray-500);
}

[data-theme="light"] .goals-loop-column__empty {
  color: var(--color-gray-500);
}

[data-theme="light"] .goal-suggestion-card--selected {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
}

[data-theme="light"] .goal-detail-header h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-detail-description {
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-detail-progress-section h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-detail-progress-value {
  color: var(--color-accent);
}

[data-theme="light"] .goal-detail-metrics h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-detail-metric-name {
  color: var(--color-gray-800);
}

[data-theme="light"] .goal-detail-metric-value {
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-detail-date-label {
  color: var(--color-gray-500);
}

[data-theme="light"] .goal-detail-date-value {
  color: var(--color-gray-800);
}

[data-theme="light"] .goal-breakdown-header h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-breakdown-parent-title {
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-breakdown-suggestions h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-breakdown-hint {
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-breakdown-item-title {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-breakdown-item-date {
  color: var(--color-gray-500);
}

[data-theme="light"] .goal-breakdown-summary {
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-breakdown-tasks-count {
  color: var(--color-accent);
}

/* Loop labels in visualization - light theme */
[data-theme="light"] .loop-label .loop-name {
  color: var(--color-gray-800);
}

[data-theme="light"] .loop-label .loop-state {
  color: var(--color-gray-600);
}

[data-theme="light"] .meaning-label .meaning-name {
  color: var(--color-gray-800);
}

/* Dark theme - Goals Dashboard (fix colors) */
.goals-dashboard__stat {
  background: var(--color-dark);
  border: 1px solid var(--color-border);
}

.goals-dashboard__stat-value {
  color: var(--color-accent);
}

.goals-dashboard__add-btn {
  background: var(--color-accent);
}

.goals-dashboard__add-btn:hover {
  background: var(--color-accent-hover);
}

.goals-dashboard__view-toggle {
  background: var(--color-gray-800);
}

.goals-dashboard__view-btn--active {
  background: var(--color-dark);
  color: var(--color-text);
}

.goals-dashboard__empty {
  background: var(--color-dark);
  border: 1px solid var(--color-border);
}

.goal-card {
  background: var(--color-dark);
  border: 1px solid var(--color-border);
  box-shadow: none;
}

.goal-suggestion-card {
  background: var(--color-dark);
  border: 1px solid var(--color-border);
}

.goal-suggestion-card:hover {
  border-color: var(--color-accent);
  background: var(--color-gray-900);
}

.goal-suggestion-card--selected {
  border-color: var(--color-accent);
  background: var(--color-accent-subtle);
}

/* ========== Goal Detail Modal ========== */
.goal-detail-modal {
  background: var(--color-dark);
  border-radius: 16px;
  width: 90%;
  max-width: 520px;
  max-height: 85vh;
  overflow-y: auto;
  border: 1px solid var(--color-border);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

.goal-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 24px 24px 16px;
  border-bottom: 1px solid var(--color-border);
}

.goal-detail-title-row {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}

.goal-detail-loop-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 10px;
  font-size: 20px;
}

.goal-detail-header h2 {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
  line-height: 1.3;
}

.goal-detail-close {
  background: transparent;
  border: none;
  font-size: 28px;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: 0;
  line-height: 1;
  transition: color 0.2s;
}

.goal-detail-close:hover {
  color: var(--color-text);
}

.goal-detail-content {
  padding: 24px;
}

.goal-detail-meta {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  flex-wrap: wrap;
}

.goal-detail-timeframe,
.goal-detail-loop {
  background: var(--color-gray-800);
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 500;
  text-transform: capitalize;
  color: var(--color-text-secondary);
}

.goal-detail-status {
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  text-transform: capitalize;
}

.goal-detail-status--active {
  background: var(--color-accent-subtle);
  color: var(--color-accent);
}

.goal-detail-status--completed {
  background: rgba(115, 165, 140, 0.15);
  color: var(--looops-sage);
}

.goal-detail-status--paused {
  background: rgba(244, 185, 66, 0.15);
  color: var(--looops-amber);
}

.goal-detail-description {
  color: var(--color-text-secondary);
  font-size: 14px;
  line-height: 1.6;
  margin-bottom: 24px;
}

.goal-detail-progress-section {
  margin-bottom: 24px;
}

.goal-detail-progress-section h3 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 12px;
}

.goal-detail-progress-bar {
  height: 8px;
  background: var(--color-gray-800);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 12px;
}

.goal-detail-progress-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.3s ease;
}

.goal-detail-progress-controls {
  display: flex;
  align-items: center;
  gap: 16px;
}

.goal-detail-slider {
  flex: 1;
  height: 6px;
  -webkit-appearance: none;
  appearance: none;
  background: var(--color-gray-700);
  border-radius: 3px;
  cursor: pointer;
}

.goal-detail-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  background: var(--color-accent);
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(26, 26, 46, 0.4);
}

.goal-detail-slider::-moz-range-thumb {
  width: 18px;
  height: 18px;
  background: var(--color-accent);
  border-radius: 50%;
  cursor: pointer;
  border: none;
  box-shadow: 0 2px 6px rgba(26, 26, 46, 0.4);
}

.goal-detail-progress-value {
  font-size: 16px;
  font-weight: 700;
  color: var(--color-accent);
  min-width: 50px;
  text-align: right;
}

.goal-detail-metrics {
  margin-bottom: 24px;
}

.goal-detail-metrics h3 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 12px;
}

.goal-detail-metrics-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.goal-detail-metric {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--color-gray-900);
  border-radius: 8px;
}

.goal-detail-metric-name {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.goal-detail-metric-progress {
  width: 100px;
  height: 6px;
  background: var(--color-gray-700);
  border-radius: 3px;
  overflow: hidden;
}

.goal-detail-metric-fill {
  height: 100%;
  background: var(--color-accent);
  border-radius: 3px;
}

.goal-detail-metric-value {
  font-size: 12px;
  color: var(--color-text-secondary);
  min-width: 80px;
  text-align: right;
}

.goal-detail-dates {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 24px;
}

.goal-detail-date {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.goal-detail-date-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.goal-detail-date-value {
  font-size: 13px;
  color: var(--color-text);
}

.goal-detail-actions {
  display: flex;
  gap: 12px;
  padding-top: 16px;
  border-top: 1px solid var(--color-border);
}

.goal-detail-btn {
  flex: 1;
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.goal-detail-btn--complete {
  background: var(--color-accent);
  color: white;
}

.goal-detail-btn--complete:hover {
  background: var(--color-accent-light);
}

.goal-detail-btn--pause {
  background: var(--color-gray-800);
  color: var(--color-text);
}

.goal-detail-btn--pause:hover {
  background: var(--color-gray-700);
}

.goal-detail-btn--resume {
  background: var(--color-accent);
  color: white;
}

.goal-detail-btn--resume:hover {
  background: var(--color-accent-light);
}

.goal-detail-btn--reopen {
  background: var(--color-gray-800);
  color: var(--color-text);
}

.goal-detail-btn--reopen:hover {
  background: var(--color-gray-700);
}

/* Light theme for goal detail modal */
[data-theme="light"] .goal-detail-modal {
  background: white;
  border-color: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-header {
  border-bottom-color: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-timeframe,
[data-theme="light"] .goal-detail-loop {
  background: var(--color-gray-100);
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-detail-progress-bar,
[data-theme="light"] .goal-detail-slider {
  background: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-metric {
  background: var(--color-gray-50);
}

[data-theme="light"] .goal-detail-metric-progress {
  background: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-actions {
  border-top-color: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-btn--pause,
[data-theme="light"] .goal-detail-btn--reopen {
  background: var(--color-gray-100);
  color: var(--color-gray-800);
}

[data-theme="light"] .goal-detail-btn--pause:hover,
[data-theme="light"] .goal-detail-btn--reopen:hover {
  background: var(--color-gray-200);
}

/* Goal Detail Primary Actions */
.goal-detail-primary-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--color-border);
}

.goal-detail-btn--breakdown,
.goal-detail-btn--add-task {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 16px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-gray-900);
  color: var(--color-text);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.goal-detail-btn--breakdown:hover,
.goal-detail-btn--add-task:hover {
  background: var(--color-gray-800);
  border-color: var(--color-accent);
}

.goal-detail-btn--breakdown svg,
.goal-detail-btn--add-task svg {
  color: var(--color-accent);
}

[data-theme="light"] .goal-detail-btn--breakdown,
[data-theme="light"] .goal-detail-btn--add-task {
  background: var(--color-gray-50);
  border-color: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-btn--breakdown:hover,
[data-theme="light"] .goal-detail-btn--add-task:hover {
  background: var(--color-gray-100);
}

/* Mobile responsive for goal detail modal */
@media (max-width: 500px) {
  .goal-detail-modal {
    width: 95%;
    max-height: 90vh;
    border-radius: 12px;
  }

  .goal-detail-header {
    padding: 16px;
  }

  .goal-detail-content {
    padding: 16px;
  }

  .goal-detail-dates {
    grid-template-columns: 1fr;
  }

  .goal-detail-actions {
    flex-direction: column;
  }
}

/* ========== Goal Breakdown Wizard ========== */
.goal-breakdown-wizard {
  background: var(--color-dark);
  border-radius: 16px;
  width: 90%;
  max-width: 600px;
  max-height: 85vh;
  overflow-y: auto;
  border: 1px solid var(--color-border);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

.goal-breakdown-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 24px 24px 16px;
  border-bottom: 1px solid var(--color-border);
}

.goal-breakdown-title-row {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}

.goal-breakdown-loop-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border-radius: 10px;
  font-size: 22px;
}

.goal-breakdown-header h2 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.goal-breakdown-parent-title {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 4px 0 0;
}

.goal-breakdown-close {
  background: transparent;
  border: none;
  font-size: 28px;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: 0;
  line-height: 1;
  transition: color 0.2s;
}

.goal-breakdown-close:hover {
  color: var(--color-text);
}

.goal-breakdown-content {
  padding: 24px;
}

.goal-breakdown-info {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 16px;
  background: var(--color-gray-900);
  border-radius: 10px;
  margin-bottom: 24px;
}

.goal-breakdown-from,
.goal-breakdown-to {
  padding: 6px 16px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 600;
}

.goal-breakdown-from {
  background: var(--color-gray-800);
  color: var(--color-text-secondary);
}

.goal-breakdown-to {
  background: var(--color-accent-subtle);
  color: var(--color-accent);
}

.goal-breakdown-info svg {
  color: var(--color-text-tertiary);
}

/* Archetype context section */
.goal-breakdown-archetype-context {
  padding: 16px;
  background: linear-gradient(135deg, var(--color-accent-subtle), var(--color-gray-900));
  border: 1px solid var(--color-accent);
  border-radius: 12px;
  margin-bottom: 20px;
}

.goal-breakdown-archetype-badge {
  font-size: 14px;
  color: var(--color-text);
  margin-bottom: 8px;
}

.goal-breakdown-archetype-badge strong {
  color: var(--color-accent);
}

.goal-breakdown-archetype-approach {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 12px;
  line-height: 1.5;
}

.goal-breakdown-motivation {
  font-size: 14px;
  font-style: italic;
  color: var(--color-accent);
  margin: 0;
  padding: 10px 14px;
  background: var(--color-dark);
  border-radius: 8px;
  border-left: 3px solid var(--color-accent);
}

.goal-breakdown-suggestions h3 {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px;
}

.goal-breakdown-hint {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 16px;
}

.goal-breakdown-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 16px;
}

.goal-breakdown-item {
  padding: 12px 16px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  transition: all 0.2s ease;
}

.goal-breakdown-item.selected {
  border-color: var(--color-accent);
  background: var(--color-accent-subtle);
}

.goal-breakdown-item-main {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.goal-breakdown-checkbox {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  cursor: pointer;
  flex-shrink: 0;
  margin-top: 2px;
}

.goal-breakdown-checkbox input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  width: 100%;
  height: 100%;
}

.goal-breakdown-checkmark {
  width: 22px;
  height: 22px;
  border: 2px solid var(--color-gray-600);
  border-radius: 6px;
  transition: all 0.2s ease;
}

.goal-breakdown-checkbox input:checked ~ .goal-breakdown-checkmark {
  background: var(--color-accent);
  border-color: var(--color-accent);
}

.goal-breakdown-checkbox input:checked ~ .goal-breakdown-checkmark::after {
  content: "âœ“";
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  color: white;
  font-weight: bold;
}

.goal-breakdown-item-content {
  flex: 1;
  min-width: 0;
}

.goal-breakdown-item-title {
  width: 100%;
  background: transparent;
  border: none;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  padding: 0;
  margin-bottom: 4px;
}

.goal-breakdown-item-title:focus {
  outline: none;
}

.goal-breakdown-item-meta {
  display: flex;
  align-items: center;
  gap: 8px;
}

.goal-breakdown-item-date {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.goal-breakdown-add-to-loop {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  margin-top: 10px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.goal-breakdown-add-to-loop:hover {
  background: var(--color-gray-700);
  color: var(--color-text);
}

.goal-breakdown-add-to-loop.active {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
}

.goal-breakdown-add-to-loop svg {
  opacity: 0.8;
}

.goal-breakdown-custom {
  display: flex;
  gap: 8px;
  margin-bottom: 20px;
}

.goal-breakdown-custom-input {
  flex: 1;
  padding: 10px 14px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 14px;
  color: var(--color-text);
}

.goal-breakdown-custom-input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.goal-breakdown-custom-input::placeholder {
  color: var(--color-text-tertiary);
}

.goal-breakdown-custom-add {
  padding: 10px 16px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  cursor: pointer;
  transition: all 0.2s ease;
}

.goal-breakdown-custom-add:hover:not(:disabled) {
  background: var(--color-gray-700);
}

.goal-breakdown-custom-add:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.goal-breakdown-summary {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px 16px;
  background: var(--color-gray-900);
  border-radius: 8px;
  margin-bottom: 20px;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.goal-breakdown-summary-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.goal-breakdown-summary-main {
  font-weight: 500;
  color: var(--color-text);
}

.goal-breakdown-summary-hint {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin: 0;
}

.goal-breakdown-tasks-count {
  color: var(--color-accent);
  font-weight: 500;
}

/* New breakdown wizard styles */
.goal-breakdown-item-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.goal-breakdown-effort-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  font-size: 11px;
  font-weight: bold;
  color: white;
  flex-shrink: 0;
}

.goal-breakdown-item-verb {
  font-size: 11px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 4px;
  background: var(--color-gray-800);
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.goal-breakdown-show-actions {
  background: transparent;
  border: none;
  font-size: 11px;
  color: var(--color-accent);
  cursor: pointer;
  padding: 0;
  margin-left: auto;
}

.goal-breakdown-show-actions:hover {
  text-decoration: underline;
}

.goal-breakdown-key-actions {
  margin: 10px 0 0;
  padding: 10px 14px;
  background: var(--color-gray-800);
  border-radius: 6px;
  list-style: none;
  font-size: 12px;
  color: var(--color-text-secondary);
}

.goal-breakdown-key-actions li {
  padding: 4px 0;
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.goal-breakdown-key-actions li::before {
  content: "â†’";
  color: var(--color-accent);
  font-weight: bold;
}

.goal-breakdown-actions {
  display: flex;
  gap: 12px;
}

.goal-breakdown-btn {
  flex: 1;
  padding: 14px 20px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.goal-breakdown-btn--primary {
  background: var(--color-accent);
  color: white;
}

.goal-breakdown-btn--primary:hover:not(:disabled) {
  background: var(--color-accent-light);
}

.goal-breakdown-btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.goal-breakdown-btn--secondary {
  background: var(--color-gray-800);
  color: var(--color-text);
}

.goal-breakdown-btn--secondary:hover {
  background: var(--color-gray-700);
}

/* Light theme for goal breakdown wizard */
[data-theme="light"] .goal-breakdown-wizard {
  background: white;
  border-color: var(--color-gray-200);
}

[data-theme="light"] .goal-breakdown-header {
  border-bottom-color: var(--color-gray-200);
}

[data-theme="light"] .goal-breakdown-info {
  background: var(--color-gray-50);
}

[data-theme="light"] .goal-breakdown-from {
  background: var(--color-gray-200);
  color: var(--color-gray-700);
}

[data-theme="light"] .goal-breakdown-item {
  background: var(--color-gray-50);
  border-color: var(--color-gray-200);
}

[data-theme="light"] .goal-breakdown-item.selected {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
}

[data-theme="light"] .goal-breakdown-custom-input {
  background: var(--color-gray-50);
  border-color: var(--color-gray-200);
}

[data-theme="light"] .goal-breakdown-custom-add {
  background: var(--color-gray-100);
  border-color: var(--color-gray-200);
}

[data-theme="light"] .goal-breakdown-add-to-loop {
  background: var(--color-gray-100);
  border-color: var(--color-gray-200);
}

[data-theme="light"] .goal-breakdown-summary {
  background: var(--color-gray-50);
}

[data-theme="light"] .goal-breakdown-btn--secondary {
  background: var(--color-gray-100);
  color: var(--color-gray-800);
}

/* ========== Light Theme - Tasks Screen ========== */
[data-theme="light"] .tasks-screen {
  background: #f8f9fa;
}

[data-theme="light"] .tasks-sidebar {
  background: #ffffff;
  border-right-color: var(--color-gray-200);
}

[data-theme="light"] .sidebar-toggle {
  color: var(--color-gray-500);
}

[data-theme="light"] .sidebar-toggle:hover {
  background: var(--color-gray-100);
  color: var(--color-gray-900);
}

[data-theme="light"] .sidebar-section-header {
  color: var(--color-gray-500);
}

[data-theme="light"] .sidebar-section-header .add-btn {
  color: var(--color-gray-500);
}

[data-theme="light"] .sidebar-section-header .add-btn:hover {
  background: var(--color-gray-100);
  color: var(--color-gray-900);
}

[data-theme="light"] .sidebar-item {
  color: var(--color-gray-800);
}

[data-theme="light"] .sidebar-item:hover {
  background: var(--color-gray-100);
}

[data-theme="light"] .sidebar-item.active {
  background: rgba(239, 68, 68, 0.1);
  color: var(--color-red);
}

[data-theme="light"] .sidebar-icon {
  color: var(--color-gray-500);
}

[data-theme="light"] .sidebar-badge {
  background: var(--color-gray-100);
  color: var(--color-gray-600);
}

[data-theme="light"] .sidebar-empty {
  color: var(--color-gray-400);
}

[data-theme="light"] .tasks-main {
  background: #f8f9fa;
}

[data-theme="light"] .tasks-header-left h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .tasks-description {
  color: var(--color-gray-500);
}

[data-theme="light"] .header-control label {
  color: var(--color-gray-600);
}

[data-theme="light"] .header-control select {
  background: #ffffff;
  border-color: var(--color-gray-300);
  color: var(--color-gray-800);
}

[data-theme="light"] .task-count {
  color: var(--color-gray-500);
}

[data-theme="light"] .show-completed-btn {
  color: var(--color-gray-500);
}

[data-theme="light"] .show-completed-btn:hover {
  color: var(--color-gray-800);
}

/* Task Row Light Theme */
[data-theme="light"] .task-row {
  background: #ffffff;
  border-color: var(--color-gray-200);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
}

[data-theme="light"] .task-row:hover {
  border-color: var(--color-accent);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .task-row__title {
  color: var(--color-gray-900);
}

[data-theme="light"] .task-row__description {
  color: var(--color-gray-500);
}

[data-theme="light"] .task-row__loop {
  background: var(--color-accent-subtle);
  color: var(--color-accent-dark);
}

[data-theme="light"] .task-row__due {
  color: var(--color-gray-500);
}

[data-theme="light"] .task-row__meta {
  color: var(--color-gray-500);
}

/* Task Item Light Theme */
[data-theme="light"] .task-item {
  background: #ffffff;
}

[data-theme="light"] .task-item:hover {
  background: var(--color-gray-50);
}

[data-theme="light"] .task-title {
  color: var(--color-gray-900);
}

[data-theme="light"] .task-title.completed {
  color: var(--color-gray-400);
}

[data-theme="light"] .task-checkbox {
  border-color: var(--color-gray-400);
}

[data-theme="light"] .task-checkbox:hover {
  background: var(--color-gray-50);
  border-color: var(--color-accent);
}

[data-theme="light"] .task-description {
  color: var(--color-gray-500);
}

[data-theme="light"] .task-meta {
  color: var(--color-gray-500);
}

[data-theme="light"] .task-meta span {
  color: var(--color-gray-500);
}

[data-theme="light"] .task-list-empty {
  color: var(--color-gray-400);
}

[data-theme="light"] .task-list-empty .empty-icon {
  color: var(--color-gray-300);
}

/* Task Group Light Theme */
[data-theme="light"] .group-title {
  color: var(--color-gray-800);
}

[data-theme="light"] .group-count {
  color: var(--color-gray-500);
}

[data-theme="light"] .group-collapse-icon {
  color: var(--color-gray-400);
}

[data-theme="light"] .task-group-items {
  border-left-color: var(--color-gray-200);
}

/* Mobile responsive for breakdown wizard */
@media (max-width: 500px) {
  .goal-breakdown-wizard {
    width: 95%;
    max-height: 90vh;
  }

  .goal-breakdown-header {
    padding: 16px;
  }

  .goal-breakdown-content {
    padding: 16px;
  }

  .goal-breakdown-actions {
    flex-direction: column;
  }

  .goal-breakdown-info {
    flex-direction: column;
    gap: 8px;
  }

  .goal-breakdown-info svg {
    transform: rotate(90deg);
  }
}

/* ========== Routines Screen ========== */
.routines-screen {
  display: flex;
  height: 100%;
  width: 100%;
  background: var(--color-bg);
}

/* Routines Sidebar */
.routines-sidebar {
  width: 240px;
  min-width: 240px;
  background: var(--color-surface);
  border-right: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  position: relative;
  transition: width 0.2s ease, min-width 0.2s ease;
  padding-top: 8px;
}

.routines-sidebar.collapsed {
  width: 48px;
  min-width: 48px;
}

/* Sidebar Stats */
.sidebar-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  padding: 8px;
}

.sidebar-stat-item {
  background: var(--color-bg);
  border-radius: var(--radius);
  padding: 10px 8px;
  text-align: center;
}

.sidebar-stat-value {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-accent);
  display: block;
}

.sidebar-stat-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
  margin-top: 2px;
}

/* Routines Main */
.routines-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  padding: 24px 32px;
}

.routines-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 24px;
}

.routines-header-left h2 {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
  margin: 0 0 4px 0;
}

.routines-description {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0;
}

.routines-header-right {
  display: flex;
  gap: 12px;
}

.routines-add-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.routines-add-btn:hover {
  background: var(--looops-coral-light);
}

.routines-add-btn svg {
  width: 16px;
  height: 16px;
}

/* Routines List */
.routines-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Routine Item (matches task-item style) */
.routine-item {
  background: var(--color-surface);
  border-radius: var(--radius);
  border-left: 3px solid var(--color-accent);
  padding: 12px 16px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-item:hover {
  background: var(--color-surface-hover);
}

.routine-item-main {
  display: flex;
  align-items: center;
  gap: 12px;
}

.routine-checkbox {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  border: 2px solid var(--color-border);
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all 0.15s ease;
  color: transparent;
}

.routine-checkbox:hover {
  border-color: var(--looops-sage);
  background: var(--looops-sage-subtle);
  color: var(--looops-sage);
}

.routine-checkbox svg {
  width: 14px;
  height: 14px;
}

.routine-item-content {
  flex: 1;
  min-width: 0;
}

.routine-item-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 4px;
}

.routine-item-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.routine-item-loop {
  font-weight: 500;
}

.routine-item-schedule {
  color: var(--color-text-tertiary);
}

.routine-item-duration {
  color: var(--color-text-tertiary);
}

.routine-item-right {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-shrink: 0;
}

.routine-item-streak {
  display: flex;
  align-items: center;
  gap: 4px;
}

.routine-streak-fire {
  font-size: 14px;
}

.routine-streak-count {
  font-size: 13px;
  font-weight: 600;
  color: var(--looops-amber);
}

.routine-skip-btn {
  padding: 4px 10px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: transparent;
  color: var(--color-text-tertiary);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-skip-btn:hover {
  border-color: var(--color-text-secondary);
  color: var(--color-text-secondary);
  background: var(--color-surface-hover);
}

/* Empty State */
.routines-empty {
  text-align: center;
  padding: 60px 20px;
  color: var(--color-text-secondary);
}

.routines-empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.routines-empty h3 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.routines-empty p {
  font-size: 14px;
  margin: 0 0 20px 0;
}

/* Add Routine Modal */
.routine-add-modal,
.routine-edit-modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  width: 90%;
  max-width: 520px;
  max-height: 85vh;
  overflow-y: auto;
  box-shadow: var(--shadow-lg);
}

.routine-edit-modal .modal-header {
  padding: 20px 24px;
  border-bottom: 1px solid var(--color-border);
}

.routine-edit-modal .modal-header-title {
  display: flex;
  align-items: center;
  gap: 10px;
}

.routine-edit-modal .modal-header-icon {
  font-size: 24px;
}

.routine-edit-modal .modal-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
}

/* Routine Add Tabs */
.routine-add-tabs {
  display: flex;
  border-bottom: 1px solid var(--color-border);
  padding: 0 20px;
}

.routine-add-tab {
  flex: 1;
  padding: 12px 16px;
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--color-text-secondary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-add-tab:hover {
  color: var(--color-text);
}

.routine-add-tab.active {
  color: var(--looops-coral);
  border-bottom-color: var(--looops-coral);
}

/* Template Section */
.routine-templates {
  padding: 16px 20px;
}

.routine-templates-filter {
  margin-bottom: 12px;
}

.routine-templates-filter select {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-bg);
  color: var(--color-text);
  font-size: 13px;
  cursor: pointer;
}

.routine-templates-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 320px;
  overflow-y: auto;
}

.routine-template-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: var(--color-bg);
  border-left: 3px solid var(--color-border);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-template-item:hover {
  background: var(--color-surface-hover);
}

.routine-template-item.selected {
  background: var(--looops-coral-subtle);
  border-left-color: var(--looops-coral);
}

.routine-template-icon {
  font-size: 20px;
  flex-shrink: 0;
}

.routine-template-info {
  flex: 1;
  min-width: 0;
}

.routine-template-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 3px;
}

.routine-template-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.routine-template-check {
  width: 20px;
  height: 20px;
  color: var(--looops-coral);
  flex-shrink: 0;
}

/* Custom Form */
.routine-custom-form {
  padding: 16px 20px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: 60vh;
  overflow-y: auto;
}

.routine-custom-form .form-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.routine-custom-form .form-field label {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
}

.routine-custom-form .form-field input[type="text"],
.routine-custom-form .form-field textarea,
.routine-custom-form .form-field select {
  padding: 10px 12px;
  font-size: 14px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  color: var(--text-primary);
  width: 100%;
  box-sizing: border-box;
}

.routine-custom-form .form-field input:focus,
.routine-custom-form .form-field textarea:focus,
.routine-custom-form .form-field select:focus {
  outline: none;
  border-color: var(--coral);
}

.routine-custom-row {
  margin-bottom: 0;
}

/* Edit Modal Content */
.routine-edit-content {
  padding: 24px;
}

.routine-edit-content .form-field {
  margin-bottom: 20px;
}

.routine-edit-content .form-field label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-secondary);
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.routine-edit-content .form-field input[type="text"],
.routine-edit-content .form-field textarea,
.routine-edit-content .form-field select {
  width: 100%;
  padding: 12px 14px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-bg);
  color: var(--color-text);
  font-size: 14px;
  font-family: inherit;
  transition: all 0.15s ease;
}

.routine-edit-content .form-field input[type="text"]:focus,
.routine-edit-content .form-field textarea:focus,
.routine-edit-content .form-field select:focus {
  outline: none;
  border-color: var(--looops-coral);
  box-shadow: 0 0 0 3px var(--looops-coral-subtle);
}

.routine-edit-content .form-field textarea {
  resize: vertical;
  min-height: 70px;
}

.routine-edit-content .form-field select {
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23888' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 36px;
}

.routine-edit-info {
  margin-top: 24px;
  padding: 16px;
  background: var(--color-bg);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border-light);
}

.routine-edit-info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid var(--color-border-light);
}

.routine-edit-info-row:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.routine-edit-info-row:first-child {
  padding-top: 0;
}

.routine-edit-info-label {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.routine-edit-info-value {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

/* Edit Stats Grid */
.routine-edit-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  margin-top: 24px;
  padding: 16px;
  background: var(--color-bg);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border-light);
}

.routine-edit-stat {
  text-align: center;
  padding: 8px 4px;
}

.routine-edit-stat-value {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
  display: block;
}

.routine-edit-stat-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
  margin-top: 4px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

/* Modal Actions for Edit */
.routine-edit-modal .modal-actions {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 24px;
  border-top: 1px solid var(--color-border);
  background: var(--color-bg);
}

.modal-actions-right {
  display: flex;
  gap: 8px;
  margin-left: auto;
}

/* Modal Buttons */
.modal-btn {
  padding: 10px 18px;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
  border: none;
}

.modal-btn--primary {
  background: var(--looops-coral);
  color: white;
}

.modal-btn--primary:hover:not(:disabled) {
  background: var(--looops-coral-light);
}

.modal-btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.modal-btn--secondary {
  background: transparent;
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
}

.modal-btn--secondary:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.modal-btn--danger {
  background: transparent;
  color: #dc3545;
  border: 1px solid rgba(220, 53, 69, 0.3);
}

.modal-btn--danger:hover {
  background: rgba(220, 53, 69, 0.1);
  border-color: #dc3545;
}

/* Time Badge */
.routine-time-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  padding: 3px 8px;
  background: var(--color-bg);
  border-radius: var(--radius-full);
  color: var(--color-text-secondary);
}

.routine-time-badge--morning {
  background: rgba(244, 185, 66, 0.15);
  color: #c99a35;
}

.routine-time-badge--afternoon {
  background: rgba(90, 127, 184, 0.15);
  color: #4a6a9a;
}

.routine-time-badge--evening {
  background: rgba(184, 127, 168, 0.15);
  color: #9a6a8a;
}

.routine-time-badge--night {
  background: rgba(115, 115, 144, 0.15);
  color: #5e5e78;
}

/* Light Theme Overrides */
[data-theme="light"] .routines-screen {
  background: #f8f9fa;
}

[data-theme="light"] .routines-sidebar {
  background: #ffffff;
  border-right-color: var(--color-gray-200);
}

[data-theme="light"] .routines-main {
  background: #f8f9fa;
}

[data-theme="light"] .routine-item {
  background: #ffffff;
  box-shadow: var(--shadow-sm);
}

[data-theme="light"] .routine-item:hover {
  background: var(--color-gray-50);
}

[data-theme="light"] .routine-add-modal,
[data-theme="light"] .routine-edit-modal {
  background: #ffffff;
}

[data-theme="light"] .routine-template-item {
  background: #ffffff;
}

[data-theme="light"] .routine-edit-info,
[data-theme="light"] .routine-edit-stat,
[data-theme="light"] .sidebar-stat-item {
  background: var(--color-gray-50);
}

/* =====================================================
   ROUTINE CARD - Multi-step routine cards
   ===================================================== */

.routine-card {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  border-left: 4px solid var(--looops-coral);
  padding: 16px;
  cursor: pointer;
  transition: all 0.15s ease;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.routine-card:hover {
  background: var(--color-surface-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.routine-card-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.routine-card-icon {
  font-size: 24px;
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg);
  border-radius: var(--radius);
}

.routine-card-info {
  flex: 1;
  min-width: 0;
}

.routine-card-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 4px;
}

.routine-card-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.routine-card-meta span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.routine-card-schedule {
  color: var(--color-text-secondary);
}

.routine-card-duration {
  color: var(--looops-amber);
  font-weight: 500;
}

.routine-card-steps {
  color: var(--color-text-tertiary);
}

.routine-card-streak {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
  padding: 4px 8px;
  background: rgba(244, 185, 66, 0.1);
  border-radius: var(--radius);
}

/* Loop Badges */
.routine-card-loops {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.routine-loop-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: var(--radius-full);
  font-size: 11px;
  font-weight: 500;
  text-transform: capitalize;
}

.routine-loop-badge-sm {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: var(--radius-full);
  font-size: 12px;
}

/* Steps Preview */
.routine-card-steps-preview {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 12px;
  background: var(--color-bg);
  border-radius: var(--radius);
}

.routine-step-preview {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.routine-step-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.routine-step-title {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.routine-step-optional {
  font-size: 10px;
  color: var(--color-text-tertiary);
  background: var(--color-surface);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
}

.routine-steps-more {
  font-size: 11px;
  color: var(--color-text-tertiary);
  padding-left: 16px;
  font-style: italic;
}

/* Start Routine Button */
.routine-start-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px 16px;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-start-btn:hover {
  background: var(--looops-coral-light);
  transform: translateY(-1px);
}

/* =====================================================
   ACTIVE ROUTINE MODAL - Step-by-step completion
   ===================================================== */

.routine-active-modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  width: 90%;
  max-width: 520px;
  max-height: 85vh;
  overflow-y: auto;
}

/* Progress Bar */
.routine-progress {
  padding: 16px 20px;
  display: flex;
  align-items: center;
  gap: 12px;
}

.routine-progress-bar {
  flex: 1;
  height: 8px;
  background: var(--color-bg);
  border-radius: var(--radius-full);
  overflow: hidden;
}

.routine-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--looops-coral) 0%, var(--looops-amber) 100%);
  border-radius: var(--radius-full);
  transition: width 0.3s ease;
}

.routine-progress-text {
  font-size: 12px;
  color: var(--color-text-secondary);
  white-space: nowrap;
}

/* Steps Checklist */
.routine-steps-list {
  padding: 0 20px 20px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.routine-step-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px;
  background: var(--color-bg);
  border-radius: var(--radius);
  border-left: 3px solid var(--color-border);
  transition: all 0.15s ease;
}

.routine-step-item.completed {
  opacity: 0.7;
  background: rgba(115, 165, 140, 0.1);
}

.routine-step-item.completed .routine-step-title {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

.routine-step-item.skipped {
  opacity: 0.5;
  background: var(--color-bg);
}

.routine-step-item.skipped .routine-step-title {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

.routine-step-checkbox {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 2px solid var(--color-border);
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all 0.15s ease;
  color: transparent;
}

.routine-step-checkbox:hover {
  border-color: var(--looops-sage);
  background: var(--looops-sage-subtle);
}

.routine-step-checkbox.checked {
  background: var(--looops-sage);
  border-color: var(--looops-sage);
  color: white;
}

.routine-step-checkbox svg {
  width: 14px;
  height: 14px;
}

.routine-step-content {
  flex: 1;
  min-width: 0;
}

.routine-step-content .routine-step-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 4px;
  overflow: visible;
  text-overflow: initial;
  white-space: normal;
}

.routine-step-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.routine-step-meta .optional-tag {
  background: var(--color-surface);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  font-size: 10px;
}

.routine-step-skip {
  padding: 4px 10px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: transparent;
  color: var(--color-text-tertiary);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-step-skip:hover {
  border-color: var(--color-text-secondary);
  color: var(--color-text-secondary);
}

.routine-step-skipped-badge {
  font-size: 10px;
  color: var(--color-text-tertiary);
  background: var(--color-surface);
  padding: 2px 8px;
  border-radius: var(--radius-sm);
}

/* =====================================================
   TEMPLATE CARDS - Add Routine Modal
   ===================================================== */

.routine-template-card {
  padding: 14px;
  background: var(--color-bg);
  border-left: 3px solid var(--color-border);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-template-card:hover {
  background: var(--color-surface-hover);
}

.routine-template-card.selected {
  background: var(--looops-coral-subtle);
  border-left-color: var(--looops-coral);
}

.routine-template-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.routine-template-info {
  flex: 1;
  min-width: 0;
}

.routine-template-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.routine-template-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 11px;
  color: var(--color-text-tertiary);
  margin-top: 4px;
}

.routine-template-description {
  font-size: 12px;
  color: var(--color-text-secondary);
  margin: 10px 0;
  line-height: 1.4;
}

.routine-template-loops {
  display: flex;
  gap: 4px;
  margin-top: 10px;
}

.routine-template-steps {
  margin-top: 12px;
  padding: 10px;
  background: var(--color-surface);
  border-radius: var(--radius);
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.routine-template-step {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--color-text-secondary);
}

.routine-template-step .optional-badge {
  font-size: 9px;
  color: var(--color-text-tertiary);
  background: var(--color-bg);
  padding: 1px 5px;
  border-radius: var(--radius-sm);
}

.routine-template-check {
  width: 20px;
  height: 20px;
  color: var(--looops-coral);
  flex-shrink: 0;
}

/* =====================================================
   EDIT ROUTINE - Loops and Steps
   ===================================================== */

.routine-edit-loops {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 20px;
}

.routine-edit-steps {
  margin-top: 24px;
}

.routine-edit-steps > label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-secondary);
  margin-bottom: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.routine-edit-steps-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 220px;
  overflow-y: auto;
  padding: 4px;
  margin: -4px;
}

.routine-edit-step {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px 14px;
  background: var(--color-bg);
  border-radius: var(--radius);
  border-left: 3px solid var(--color-border);
  transition: all 0.15s ease;
}

.routine-edit-step:hover {
  background: var(--color-surface-hover);
}

.routine-edit-step-num {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--color-surface);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 700;
  color: var(--color-text-tertiary);
  flex-shrink: 0;
}

.routine-edit-step-content {
  flex: 1;
  min-width: 0;
}

.routine-edit-step-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  display: block;
  margin-bottom: 3px;
}

.routine-edit-step-meta {
  font-size: 11px;
  display: block;
}

/* =====================================================
   LIGHT THEME OVERRIDES
   ===================================================== */

[data-theme="light"] .routine-card {
  background: #ffffff;
  box-shadow: var(--shadow-sm);
}

[data-theme="light"] .routine-card:hover {
  background: var(--color-gray-50);
}

[data-theme="light"] .routine-card-icon {
  background: var(--color-gray-100);
}

[data-theme="light"] .routine-card-steps-preview {
  background: var(--color-gray-50);
}

[data-theme="light"] .routine-active-modal {
  background: #ffffff;
}

[data-theme="light"] .routine-step-item {
  background: var(--color-gray-50);
}

[data-theme="light"] .routine-template-card {
  background: var(--color-gray-50);
}

[data-theme="light"] .routine-template-card:hover {
  background: var(--color-gray-100);
}

[data-theme="light"] .routine-template-steps {
  background: #ffffff;
}

[data-theme="light"] .routine-edit-step {
  background: var(--color-gray-50);
}

/* Mobile responsive */
@media (max-width: 768px) {
  .routines-screen {
    flex-direction: column;
  }

  .routines-sidebar {
    display: none;
  }

  .routines-main {
    width: 100%;
    padding: 16px;
  }

  .routines-header {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }

  .routine-edit-stats {
    grid-template-columns: repeat(2, 1fr);
  }

  .form-row {
    grid-template-columns: 1fr;
  }

  .routine-card {
    padding: 14px;
  }

  .routine-card-meta {
    flex-wrap: wrap;
    gap: 8px;
  }

  .routine-progress {
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
  }

  .routine-progress-text {
    text-align: center;
  }

  .routine-edit-steps-list {
    max-height: 180px;
  }
}

/* ===========================================
   Custom Routine Form Styles
   =========================================== */

/* Icon Picker */
.routine-custom-icon-picker {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.routine-custom-icon-picker > label {
  font-size: 13px;
  color: var(--text-secondary);
  font-weight: 500;
}

.icon-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
}

.icon-option {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  font-size: 20px;
  background: var(--bg-secondary);
  border: 2px solid transparent;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.icon-option:hover {
  background: var(--bg-tertiary);
  transform: scale(1.1);
}

.icon-option.selected {
  border-color: var(--coral);
  background: rgba(242, 112, 89, 0.15);
}

/* Schedule Row (frequency, time of day, status) */
.routine-custom-schedule {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 12px;
}

.routine-custom-schedule .form-field {
  margin-bottom: 0;
}

/* Custom Steps Section */
.routine-custom-steps {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 8px;
}

.routine-custom-steps > label {
  font-size: 13px;
  color: var(--text-secondary);
  font-weight: 500;
  margin-bottom: 4px;
}

.routine-custom-steps-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 200px;
  overflow-y: auto;
  padding-right: 4px;
}

.routine-custom-step {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--bg-secondary);
  border-radius: 8px;
  border: 1px solid var(--border-color);
}

.routine-custom-step-num {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  background: var(--bg-tertiary);
  border-radius: 50%;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-tertiary);
  flex-shrink: 0;
}

.routine-custom-step-content {
  flex: 1;
  min-width: 0;
}

.routine-custom-step-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.routine-custom-step-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  color: var(--text-tertiary);
  margin-top: 2px;
}

.routine-custom-step-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}

/* Custom step optional/remove buttons (Add modal) */
.routine-custom-step-optional {
  padding: 4px 8px;
  font-size: 10px;
  font-weight: 500;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  cursor: pointer;
  color: var(--text-tertiary);
  transition: all 0.15s ease;
}

.routine-custom-step-optional:hover {
  border-color: var(--coral);
  color: var(--coral);
}

.routine-custom-step-remove {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: transparent;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  color: var(--text-tertiary);
  font-size: 16px;
  transition: all 0.15s ease;
}

.routine-custom-step-remove:hover {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

/* Reorder Buttons */
.routine-edit-step-reorder {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-right: 4px;
}

.reorder-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 16px;
  background: var(--bg-tertiary);
  border: none;
  border-radius: 3px;
  cursor: pointer;
  font-size: 10px;
  color: var(--text-tertiary);
  transition: all 0.15s ease;
  padding: 0;
}

.reorder-btn:hover:not(:disabled) {
  background: var(--coral);
  color: white;
}

.reorder-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* Optional Toggle Button */
.routine-step-optional-btn {
  padding: 4px 8px;
  font-size: 10px;
  font-weight: 500;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  cursor: pointer;
  color: var(--text-tertiary);
  transition: all 0.15s ease;
}

.routine-step-optional-btn:hover {
  border-color: var(--coral);
  color: var(--coral);
}

.routine-step-optional-btn.is-optional {
  background: rgba(242, 112, 89, 0.15);
  border-color: var(--coral);
  color: var(--coral);
}

/* Remove Step Button */
.routine-step-remove-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: transparent;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  color: var(--text-tertiary);
  font-size: 14px;
  transition: all 0.15s ease;
}

.routine-step-remove-btn:hover {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

/* Add Step Form - Two Row Layout */
.routine-add-step-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 12px;
  background: var(--bg-tertiary);
  border-radius: 8px;
  border: 1px dashed var(--border-color);
  margin-top: 8px;
}

.routine-add-step-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.routine-add-step-row input[type="text"] {
  flex: 1;
  min-width: 100px;
  padding: 10px 12px;
  font-size: 14px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
}

.routine-add-step-row input[type="text"]:focus {
  outline: none;
  border-color: var(--coral);
}

.routine-add-step-row select {
  padding: 10px 12px;
  font-size: 14px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  min-width: 120px;
}

.routine-add-step-row select:focus {
  outline: none;
  border-color: var(--coral);
}

.routine-add-step-row input[type="number"] {
  width: 60px;
  padding: 10px 12px;
  font-size: 14px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  text-align: center;
}

.routine-add-step-row input[type="number"]:focus {
  outline: none;
  border-color: var(--coral);
}

/* Legacy single-row form (for edit modal) */
.routine-add-step {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
  padding: 12px;
  background: var(--bg-tertiary);
  border-radius: 8px;
  border: 1px dashed var(--border-color);
}

.routine-add-step > * {
  flex-shrink: 0;
}

.routine-add-step input[type="text"] {
  flex: 1;
  min-width: 150px;
  padding: 8px 10px;
  font-size: 13px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
}

.routine-add-step input[type="text"]:focus {
  outline: none;
  border-color: var(--coral);
}

.routine-add-step select {
  padding: 8px 10px;
  font-size: 13px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  min-width: 100px;
}

.routine-add-step select:focus {
  outline: none;
  border-color: var(--coral);
}

.routine-add-step input[type="number"] {
  width: 70px;
  padding: 8px 10px;
  font-size: 13px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  text-align: center;
}

.routine-add-step input[type="number"]:focus {
  outline: none;
  border-color: var(--coral);
}

.routine-add-step-btn {
  padding: 8px 14px;
  font-size: 13px;
  font-weight: 500;
  background: var(--coral);
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-add-step-btn:hover:not(:disabled) {
  background: #e05a45;
}

.routine-add-step-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.routine-step-minutes-label {
  font-size: 12px;
  color: var(--text-tertiary);
  align-self: center;
}

/* Duration Badge */
.routine-duration-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: var(--bg-secondary);
  border-radius: 12px;
  font-size: 12px;
  color: var(--text-secondary);
  margin-top: 8px;
}

/* Empty Steps State */
.routine-custom-steps-empty {
  padding: 24px;
  text-align: center;
  color: var(--text-tertiary);
  font-size: 13px;
  background: var(--bg-secondary);
  border-radius: 8px;
  border: 1px dashed var(--border-color);
}

/* Light Theme Adjustments */
[data-theme="light"] .icon-option {
  background: var(--bg-tertiary);
}

[data-theme="light"] .icon-option:hover {
  background: var(--bg-secondary);
}

[data-theme="light"] .routine-custom-step {
  background: var(--bg-tertiary);
}

[data-theme="light"] .routine-add-step {
  background: var(--bg-secondary);
}

[data-theme="light"] .reorder-btn {
  background: var(--bg-secondary);
}

/* Responsive adjustments for custom routine forms */
@media (max-width: 600px) {
  .icon-grid {
    grid-template-columns: repeat(7, 1fr);
    gap: 4px;
  }

  .icon-option {
    width: 32px;
    height: 32px;
    font-size: 18px;
  }

  .routine-custom-schedule {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .routine-add-step {
    flex-direction: column;
  }

  .routine-add-step input[type="text"] {
    min-width: auto;
    width: 100%;
  }

  .routine-add-step select,
  .routine-add-step input[type="number"] {
    width: 100%;
  }

  .routine-custom-step-actions {
    flex-wrap: wrap;
  }
}

/* ===========================================
   SYSTEMS & HABITS
   =========================================== */

/* Systems Screen - Matches Tasks/Routines layout */
.systems-screen {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  background: var(--color-bg);
}

/* Systems Header */
.systems-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
  border-bottom: 1px solid var(--color-border);
  background: var(--color-surface);
}

.systems-header-content h1 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.systems-subtitle {
  font-size: 12px;
  color: var(--color-text-secondary);
  margin: 4px 0 0 0;
}

.systems-add-btn {
  padding: 8px 16px;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.systems-add-btn:hover {
  background: var(--color-accent-dark);
}

/* Systems Stats Row */
.systems-stats {
  display: flex;
  gap: 1px;
  background: var(--color-border);
  border-bottom: 1px solid var(--color-border);
}

.systems-stat {
  flex: 1;
  background: var(--color-surface);
  padding: 12px 16px;
  text-align: center;
}

.systems-stat-value {
  display: block;
  font-size: 20px;
  font-weight: 700;
  color: var(--color-text);
  margin-bottom: 2px;
}

.systems-stat-label {
  font-size: 10px;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.systems-stat-bar {
  height: 3px;
  background: var(--color-border);
  border-radius: 2px;
  margin-top: 8px;
  overflow: hidden;
}

.systems-stat-fill {
  height: 100%;
  background: var(--looops-coral);
  border-radius: 2px;
  transition: width 0.3s ease;
}

/* Systems Tabs */
.systems-tabs {
  display: flex;
  gap: 0;
  background: var(--color-surface);
  border-bottom: 1px solid var(--color-border);
  padding: 0 24px;
}

.systems-tab {
  padding: 12px 20px;
  background: none;
  border: none;
  color: var(--color-text-secondary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  position: relative;
  transition: color 0.15s ease;
}

.systems-tab:hover {
  color: var(--color-text);
}

.systems-tab.active {
  color: var(--looops-coral);
}

.systems-tab.active::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--looops-coral);
}

/* Systems Content Area */
.systems-content {
  flex: 1;
  overflow-y: auto;
  padding: 20px 24px;
}

/* Systems Overview - Two column layout */
.systems-overview {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  align-items: start;
}

/* Systems Section - Card Style */
.systems-section {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  overflow: hidden;
}

.systems-section h2 {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
  padding: 12px 16px;
  background: var(--color-bg-secondary);
  border-bottom: 1px solid var(--color-border);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Systems Grid */
.systems-grid {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* System Card - Compact */
.system-card {
  background: var(--color-bg-secondary);
  border-radius: 8px;
  padding: 12px;
  cursor: pointer;
  border: 1px solid var(--color-border);
  transition: all 0.15s ease;
  display: flex;
  align-items: center;
  gap: 12px;
}

.system-card:hover {
  border-color: var(--loop-color, var(--looops-coral));
  background: var(--color-surface);
}

.system-card-header {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
}

.system-card-loop {
  font-size: 11px;
  color: var(--loop-color, var(--looops-coral));
  font-weight: 500;
}

.system-card-health {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  min-width: 36px;
  text-align: right;
}

.system-card-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.system-card-goal {
  font-size: 12px;
  color: var(--color-text-secondary);
  margin: 0;
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.system-card-stats {
  display: none;
}

.system-card-health-bar {
  width: 60px;
  height: 4px;
  background: var(--color-border);
  border-radius: 2px;
  overflow: hidden;
}

.system-card-health-fill {
  height: 100%;
  background: var(--loop-color, var(--looops-coral));
  border-radius: 2px;
  transition: width 0.3s ease;
}

/* Systems Empty State */
.systems-empty {
  text-align: center;
  padding: 24px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  border: 1px dashed var(--color-border);
}

.systems-empty-icon {
  font-size: 28px;
  display: block;
  margin-bottom: 8px;
}

.systems-empty h3 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 4px 0;
}

.systems-empty p {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin: 0 0 12px 0;
}

.systems-empty-btn {
  padding: 8px 16px;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s ease;
}

.systems-empty-btn:hover {
  background: var(--color-accent-dark);
}

/* Loop Filter Bar */
.loop-filter-bar {
  display: flex;
  gap: 8px;
  margin-bottom: 20px;
  overflow-x: auto;
  padding-bottom: 8px;
}

.loop-filter-btn {
  padding: 8px 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 20px;
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.15s ease;
}

.loop-filter-btn:hover {
  border-color: var(--loop-color, var(--color-text-tertiary));
  background: var(--color-surface);
}

.loop-filter-btn.active {
  background: var(--loop-color, var(--looops-coral));
  color: white;
  border-color: var(--loop-color, var(--looops-coral));
}

/* Templates Scroll */
.templates-scroll {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  padding-bottom: 8px;
}

.template-quick-card {
  flex-shrink: 0;
  width: 160px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  text-align: center;
  cursor: pointer;
  transition: all 0.15s ease;
}

.template-quick-card:hover {
  border-color: var(--loop-color, var(--looops-coral));
  transform: translateY(-2px);
  background: var(--color-surface);
}

.template-quick-loop {
  font-size: 24px;
  display: block;
  margin-bottom: 8px;
}

.template-quick-title {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 4px;
}

.template-quick-duration {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* ===========================================
   SYSTEM BUILDER WIZARD
   =========================================== */

.system-builder {
  position: fixed;
  inset: 0;
  background: var(--color-bg);
  z-index: 100;
  display: flex;
  flex-direction: column;
}

.system-builder-header {
  padding: 16px 24px;
  border-bottom: 1px solid var(--color-border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--color-surface);
}

.system-builder-progress {
  flex: 1;
  max-width: 400px;
}

.step-indicator {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-bottom: 8px;
  display: block;
}

.progress-bar {
  height: 4px;
  background: var(--color-border);
  border-radius: 2px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: var(--looops-coral);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.system-builder-close {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  font-size: 24px;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: 8px;
}

.system-builder-close:hover {
  background: var(--color-bg-secondary);
  color: var(--color-text);
}

.system-builder-content {
  flex: 1;
  overflow-y: auto;
  padding: 32px 24px;
}

.system-builder-footer {
  padding: 16px 24px;
  border-top: 1px solid var(--color-border);
  display: flex;
  align-items: center;
  gap: 12px;
  background: var(--color-surface);
  flex-shrink: 0;
  min-height: 70px;
}

.footer-spacer {
  flex: 1;
}

/* Wizard Step */
.wizard-step {
  max-width: 700px;
  margin: 0 auto;
}

.wizard-step h2 {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.wizard-subtitle {
  font-size: 15px;
  color: var(--color-text-secondary);
  margin: 0 0 32px 0;
  line-height: 1.5;
}

/* Wizard Buttons */
.wizard-btn {
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  min-width: 100px;
}

.wizard-btn--primary {
  background: var(--looops-coral);
  color: white;
  border: none;
}

.wizard-btn--primary:hover:not(:disabled) {
  background: var(--color-accent-dark);
}

.wizard-btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.wizard-btn--secondary {
  background: var(--color-bg-secondary);
  color: var(--color-text);
  border: 1px solid var(--color-border);
}

.wizard-btn--secondary:hover {
  background: var(--color-surface);
}

/* Loop Filter (in wizard) */
.loop-filter {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 24px;
}

/* Template Grid */
.template-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 16px;
}

.template-card {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 20px;
  text-align: left;
  cursor: pointer;
  transition: all 0.15s ease;
}

.template-card:hover {
  border-color: var(--looops-coral);
  transform: translateY(-2px);
  background: var(--color-surface);
}

.template-card-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 12px;
}

.template-difficulty {
  font-size: 11px;
  text-transform: uppercase;
  color: var(--looops-sage);
  font-weight: 500;
}

.template-duration {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.template-card h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.template-card p {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 16px 0;
  line-height: 1.4;
}

.template-habits {
  font-size: 12px;
  color: var(--looops-coral);
  font-weight: 500;
}

.template-card--custom {
  border-style: dashed;
  text-align: center;
}

.custom-icon {
  font-size: 32px;
  color: var(--color-text-tertiary);
  margin-bottom: 12px;
}

/* Goal Input */
.goal-input-section {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.goal-input {
  width: 100%;
  padding: 16px;
  font-size: 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  color: var(--color-text);
  resize: vertical;
  min-height: 100px;
}

.goal-input:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.goal-tips {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  padding: 16px;
}

.goal-tips h4 {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.goal-tips ul {
  margin: 0;
  padding-left: 20px;
}

.goal-tips li {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin-bottom: 4px;
}

/* Identity Section */
.identity-section {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.identity-prompt {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.identity-prefix {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
}

.identity-input {
  width: 100%;
  padding: 16px;
  font-size: 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  color: var(--color-text);
  resize: vertical;
}

.identity-input:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.identity-examples {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  padding: 16px;
}

.identity-examples h4 {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.identity-examples ul {
  margin: 0;
  padding-left: 20px;
}

.identity-examples li {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin-bottom: 4px;
  font-style: italic;
}

/* Archetype context banner for SystemBuilder */
.archetype-context-banner {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: linear-gradient(135deg, var(--looops-coral-10) 0%, var(--looops-sage-10) 100%);
  border-radius: 12px;
  margin-bottom: 16px;
}

.archetype-badge {
  font-size: 13px;
  font-weight: 600;
  color: var(--looops-coral);
  padding: 4px 10px;
  background: var(--color-bg);
  border-radius: 20px;
}

.archetype-hint {
  font-size: 13px;
  color: var(--color-text-secondary);
  font-style: italic;
}

/* Identity example buttons */
.identity-example-btn {
  background: none;
  border: none;
  color: var(--color-text-secondary);
  font-size: 13px;
  font-style: italic;
  cursor: pointer;
  text-align: left;
  padding: 2px 0;
  transition: color 0.2s;
}

.identity-example-btn:hover {
  color: var(--looops-coral);
}

/* Archetype obstacle suggestions */
.archetype-obstacles-suggestions {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 20px;
}

.archetype-obstacles-suggestions h4 {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 12px 0;
}

.obstacle-suggestion-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.obstacle-suggestion {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
}

.obstacle-suggestion:hover {
  border-color: var(--looops-coral);
  background: var(--looops-coral-10);
}

.suggestion-obstacle {
  font-size: 12px;
  color: var(--color-text);
  flex: 1;
}

.suggestion-arrow {
  color: var(--color-text-tertiary);
  font-size: 12px;
}

.suggestion-strategy {
  font-size: 12px;
  color: var(--looops-sage);
  flex: 1;
}

/* Habits Section */
.habits-section {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.suggested-habits h4,
.add-custom-habit h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 12px 0;
}

.habit-card {
  display: flex;
  gap: 12px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: 12px;
  margin-bottom: 12px;
  border: 1px solid var(--color-border);
}

.habit-card.disabled {
  opacity: 0.5;
}

.habit-toggle {
  display: flex;
  align-items: flex-start;
  padding-top: 2px;
}

.habit-toggle input {
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.habit-card-content {
  flex: 1;
}

.habit-card-content h5 {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  margin: 0 0 4px 0;
}

.habit-response {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 8px 0;
}

.habit-meta {
  display: flex;
  gap: 12px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

/* Custom Habit Form */
.custom-habit-form {
  background: var(--color-bg-secondary);
  border: 1px dashed var(--color-border);
  border-radius: 12px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.custom-habit-form input,
.custom-habit-form select {
  padding: 10px 12px;
  font-size: 14px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  color: var(--color-text);
}

.custom-habit-form input:focus,
.custom-habit-form select:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.custom-habit-row {
  display: flex;
  gap: 12px;
}

.custom-habit-row select {
  flex: 1;
}

.add-habit-btn {
  padding: 10px 16px;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.add-habit-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Environment Section */
.environment-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.environment-tweak {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
}

.tweak-type {
  font-size: 12px;
  font-weight: 500;
  padding: 4px 8px;
  border-radius: 4px;
  white-space: nowrap;
}

.tweak-type--add {
  background: rgba(115, 165, 140, 0.2);
  color: var(--looops-sage);
}

.tweak-type--remove {
  background: rgba(242, 112, 89, 0.2);
  color: var(--looops-coral);
}

.tweak-type--modify {
  background: rgba(244, 185, 66, 0.2);
  color: var(--looops-amber);
}

.environment-tweak input {
  flex: 1;
  padding: 8px 12px;
  font-size: 14px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  color: var(--color-text);
}

.environment-tweak input:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.remove-tweak {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: 4px;
}

.remove-tweak:hover {
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
}

.add-tweak-buttons {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.add-tweak-buttons button {
  padding: 10px 16px;
  background: var(--color-bg-secondary);
  border: 1px dashed var(--color-border);
  border-radius: 8px;
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.add-tweak-buttons button:hover {
  border-style: solid;
  border-color: var(--looops-coral);
  color: var(--looops-coral);
}

/* Obstacles Section */
.obstacles-section {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.obstacle-item {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  position: relative;
}

.obstacle-if,
.obstacle-then {
  display: flex;
  align-items: center;
  gap: 12px;
}

.obstacle-label {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-tertiary);
  min-width: 80px;
}

.obstacle-item input {
  flex: 1;
  padding: 10px 12px;
  font-size: 14px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  color: var(--color-text);
}

.obstacle-item input:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.remove-obstacle {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: 4px;
}

.remove-obstacle:hover {
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
}

.add-obstacle-btn {
  padding: 12px;
  background: var(--color-bg-secondary);
  border: 1px dashed var(--color-border);
  border-radius: 8px;
  font-size: 14px;
  color: var(--color-text-secondary);
  cursor: pointer;
  text-align: center;
}

.add-obstacle-btn:hover {
  border-style: solid;
  border-color: var(--looops-coral);
  color: var(--looops-coral);
}

/* Review Section */
.review-section {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.review-card {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  padding: 16px;
}

.review-card h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.review-card p {
  font-size: 14px;
  color: var(--color-text-secondary);
  margin: 0;
}

.review-card ul {
  margin: 0;
  padding-left: 20px;
}

.review-card li {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin-bottom: 4px;
}

/* ===========================================
   HABITS TRACKER
   =========================================== */

.habits-tracker {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.habits-tracker--empty {
  text-align: center;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
}

.habits-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.habits-empty-icon {
  font-size: 24px;
}

.habits-empty-state p {
  font-size: 12px;
  color: var(--color-text-secondary);
  margin: 0;
}

.habits-empty-hint {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* Habit Item - Compact */
.habit-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  border: 1px solid var(--color-border);
  transition: all 0.15s ease;
}

.habit-item.completed {
  background: rgba(115, 165, 140, 0.1);
  border-color: var(--looops-sage);
}

.habit-check {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-surface);
  border: 2px solid var(--color-border);
  border-radius: 50%;
  cursor: pointer;
  flex-shrink: 0;
  transition: all 0.15s ease;
}

.habit-item.completed .habit-check {
  background: var(--looops-sage);
  border-color: var(--looops-sage);
}

.check-icon {
  color: white;
  font-size: 14px;
  font-weight: 700;
}

.check-empty {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--color-border);
}

.habit-content {
  flex: 1;
  min-width: 0;
  cursor: pointer;
}

.habit-title-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 0;
}

.habit-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.habit-item.completed .habit-title {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

/* Habit celebration animation */
.habit-item.celebrating {
  animation: habitCelebrate 0.5s ease-out;
}

@keyframes habitCelebrate {
  0% { transform: scale(1); }
  25% { transform: scale(1.02); }
  50% { transform: scale(1); }
  75% { transform: scale(1.01); }
  100% { transform: scale(1); }
}

.habit-celebration {
  font-size: 12px;
  color: var(--looops-sage);
  font-style: italic;
  padding: 4px 0;
  animation: fadeInUp 0.3s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.habit-streak {
  font-size: 11px;
  color: var(--looops-coral);
  font-weight: 500;
}

.habit-meta {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 0;
}

.habit-loop-tag {
  font-size: 10px;
  padding: 1px 6px;
  border-radius: 10px;
  font-weight: 500;
}

.habit-cue {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* Habit Week Mini Calendar - Compact */
.habit-week {
  display: flex;
  gap: 2px;
  margin-left: auto;
}

.habit-day {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1px;
  padding: 2px;
  border-radius: 3px;
}

.habit-day.today {
  background: var(--color-surface);
}

.day-letter {
  font-size: 9px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
}

.day-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--color-border);
}

.habit-day.completed .day-dot {
  background: var(--looops-sage);
}

/* Habits Widget (compact) */
.habits-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.habits-widget-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.habits-widget-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.habits-widget-count {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.habits-widget-progress {
  height: 4px;
  background: var(--color-border);
  border-radius: 2px;
  overflow: hidden;
}

.habits-widget-progress-fill {
  height: 100%;
  background: var(--looops-coral);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.habits-widget-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.habits-widget-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px;
  background: none;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  text-align: left;
  transition: background 0.15s ease;
}

.habits-widget-item:hover {
  background: var(--color-surface);
}

.habits-widget-item.completed {
  opacity: 0.6;
}

.habits-widget-check {
  font-size: 14px;
  color: var(--color-text-tertiary);
}

.habits-widget-item.completed .habits-widget-check {
  color: var(--looops-sage);
}

.habits-widget-name {
  flex: 1;
  font-size: 13px;
  color: var(--color-text);
}

.habits-widget-item.completed .habits-widget-name {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

.habits-widget-streak {
  font-size: 11px;
  color: var(--looops-coral);
}

.habits-widget-empty {
  font-size: 13px;
  color: var(--color-text-tertiary);
  text-align: center;
  padding: 16px;
}

/* ===========================================
   LOOP DASHBOARD
   =========================================== */

.loop-dashboard {
  padding: 24px;
  max-width: 1200px;
  margin: 0 auto;
}

.loop-dashboard-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.loop-dashboard-title {
  display: flex;
  align-items: center;
  gap: 12px;
}

.loop-icon {
  font-size: 32px;
}

.loop-dashboard-title h1 {
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
  margin: 0;
}

.dashboard-action-btn {
  padding: 10px 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.dashboard-action-btn:hover {
  border-color: var(--loop-color, var(--looops-coral));
  color: var(--loop-color, var(--looops-coral));
}

/* Dashboard Stats */
.loop-dashboard-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 12px;
  margin-bottom: 24px;
}

.stat-card {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  padding: 16px;
  text-align: center;
}

.stat-card--health {
  background: linear-gradient(135deg, rgba(115, 165, 140, 0.2), rgba(115, 165, 140, 0.1));
}

.stat-value {
  display: block;
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
}

.stat-label {
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Dashboard Widgets Grid */
.loop-dashboard-widgets {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 16px;
}

/* Widget Container */
.widget-container {
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  /* Soft 3D raised effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 8px 16px rgba(0, 0, 0, 0.06),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.widget-container:hover {
  transform: translateY(-2px);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.12),
    0 8px 16px rgba(0, 0, 0, 0.1),
    0 16px 24px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.widget-small {
  min-height: 150px;
}

.widget-medium {
  min-height: 250px;
}

.widget-large {
  min-height: 350px;
  grid-column: span 2;
}

.widget-full {
  grid-column: 1 / -1;
  min-height: 300px;
}

.widget-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--color-border);
}

.widget-icon {
  font-size: 16px;
}

.widget-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  flex: 1;
}

.widget-remove-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: var(--color-text-tertiary);
  font-size: 18px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.widget-remove-btn:hover {
  background: var(--color-bg);
  color: var(--looops-coral);
}

/* Widget Controls Group */
.widget-controls {
  display: flex;
  align-items: center;
  gap: 8px;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.widget-container:hover .widget-controls {
  opacity: 1;
}

/* Widget Size Controls */
.widget-size-controls {
  display: flex;
  gap: 2px;
  background: var(--color-bg-secondary);
  border-radius: 6px;
  padding: 2px;
}

.widget-size-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: var(--color-text-tertiary);
  font-size: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.widget-size-btn:hover {
  background: var(--color-surface);
  color: var(--color-text);
}

.widget-size-btn.active {
  background: var(--looops-coral);
  color: white;
}

.widget-content {
  padding: 16px;
}

/* Widget Placeholder */
.widget-placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  min-height: 120px;
  gap: 8px;
}

.widget-placeholder-icon {
  font-size: 32px;
  opacity: 0.5;
}

.widget-placeholder-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.widget-placeholder-hint {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

/* Widget Picker Modal */
.widget-picker-modal {
  background: var(--color-bg);
  border-radius: 12px;
  width: 90%;
  max-width: 500px;
  max-height: 80vh;
  overflow: hidden;
}

.widget-picker-grid {
  padding: 16px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 12px;
  max-height: 400px;
  overflow-y: auto;
}

.widget-picker-item {
  padding: 16px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 14px;
  text-align: center;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  /* Soft 3D raised effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 4px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.widget-picker-item:hover {
  border-color: rgba(242, 112, 89, 0.4);
  transform: translateY(-3px) scale(1.02);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.12),
    0 8px 16px rgba(0, 0, 0, 0.1),
    0 0 0 1px var(--looops-coral),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.widget-picker-item:active {
  transform: translateY(-1px) scale(0.99);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.widget-picker-icon {
  font-size: 24px;
  display: block;
  margin-bottom: 8px;
}

.widget-picker-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  display: block;
  margin-bottom: 4px;
}

.widget-picker-desc {
  font-size: 11px;
  color: var(--color-text-tertiary);
  line-height: 1.3;
}

.widget-picker-empty {
  padding: 32px;
  text-align: center;
  color: var(--color-text-tertiary);
}

/* Tasks Widget */
.tasks-widget {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.tasks-widget-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 0;
  border-bottom: 1px solid var(--color-border);
}

.tasks-widget-item:last-child {
  border-bottom: none;
}

.tasks-widget-check {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: 1.5px solid var(--border-color);
  border-radius: 50%;
  cursor: pointer;
  font-size: 12px;
  color: var(--text-tertiary);
}

.tasks-widget-check:hover {
  border-color: var(--coral);
  color: var(--coral);
}

.tasks-widget-title {
  flex: 1;
  font-size: 13px;
  color: var(--text-primary);
}

.tasks-widget-empty,
.tasks-widget-more {
  font-size: 12px;
  color: var(--text-tertiary);
  text-align: center;
  padding: 8px;
}

/* System Health Widget */
.system-health-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.system-health-widget--empty {
  text-align: center;
  padding: 16px;
}

.system-health-widget--empty p {
  font-size: 13px;
  color: var(--text-tertiary);
  margin: 0 0 12px 0;
}

.create-system-btn {
  padding: 8px 16px;
  background: var(--coral);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  cursor: pointer;
}

.system-health-item {
  padding: 12px;
  background: var(--bg-tertiary);
  border-radius: 8px;
}

.system-health-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
}

.system-health-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}

.system-health-score {
  font-size: 13px;
  font-weight: 600;
  color: var(--sage);
}

.system-health-bar {
  height: 4px;
  background: var(--bg-secondary);
  border-radius: 2px;
  overflow: hidden;
  margin-bottom: 4px;
}

.system-health-fill {
  height: 100%;
  background: var(--sage);
  border-radius: 2px;
}

.system-health-habits {
  font-size: 11px;
  color: var(--text-tertiary);
}

/* Goals Widget */
.goals-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.goals-widget--empty {
  text-align: center;
  padding: 16px;
  color: var(--text-tertiary);
  font-size: 13px;
}

.goals-widget-item {
  display: flex;
  align-items: center;
  gap: 12px;
}

.goals-widget-title {
  flex: 1;
  font-size: 13px;
  color: var(--text-primary);
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.goals-widget-progress {
  width: 60px;
  height: 4px;
  background: var(--bg-tertiary);
  border-radius: 2px;
  overflow: hidden;
}

.goals-widget-progress-fill {
  height: 100%;
  background: var(--coral);
  border-radius: 2px;
}

.goals-widget-percent {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  min-width: 36px;
  text-align: right;
}

/* Notes Widget */
.notes-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.notes-widget-input {
  display: flex;
  gap: 8px;
}

.notes-widget-input textarea {
  flex: 1;
  padding: 8px 10px;
  font-size: 13px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  resize: none;
}

.notes-widget-input textarea:focus {
  outline: none;
  border-color: var(--coral);
}

.notes-widget-add {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--coral);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 18px;
  cursor: pointer;
}

.notes-widget-add:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.notes-widget-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.notes-widget-item {
  padding: 10px;
  background: var(--bg-tertiary);
  border-radius: 6px;
}

.notes-widget-content {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.4;
}

.notes-widget-empty {
  font-size: 12px;
  color: var(--text-tertiary);
  text-align: center;
  padding: 16px;
}

/* ========== Timer Widget ========== */
.timer-widget {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 16px;
}

.timer-display {
  margin-bottom: 8px;
}

.timer-progress-ring {
  position: relative;
  width: 120px;
  height: 120px;
}

.timer-progress-ring svg {
  width: 100%;
  height: 100%;
}

.timer-bg-circle {
  stroke: var(--color-bg-secondary);
}

.timer-progress-circle {
  stroke: var(--looops-coral);
  transition: stroke-dasharray 0.3s ease;
}

.timer-time {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
  font-variant-numeric: tabular-nums;
}

.timer-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-secondary);
  margin-bottom: 16px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.timer-controls {
  display: flex;
  gap: 12px;
}

.timer-btn {
  width: 44px;
  height: 44px;
  border: none;
  border-radius: 50%;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.timer-btn.start {
  background: linear-gradient(145deg, var(--looops-coral) 0%, rgba(242, 112, 89, 0.8) 100%);
  color: white;
  box-shadow: 0 2px 8px rgba(242, 112, 89, 0.3);
}

.timer-btn.start:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(242, 112, 89, 0.4);
}

.timer-btn.pause {
  background: linear-gradient(145deg, var(--looops-amber) 0%, rgba(244, 185, 66, 0.8) 100%);
  color: white;
  box-shadow: 0 2px 8px rgba(244, 185, 66, 0.3);
}

.timer-btn.pause:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(244, 185, 66, 0.4);
}

.timer-btn.reset {
  background: var(--color-bg-secondary);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
}

.timer-btn.reset:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

/* ========== Calendar Widget - Month View ========== */
.calendar-widget {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.calendar-widget--month {
  min-height: 220px;
}

.calendar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 4px 0;
}

.calendar-nav-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  color: var(--color-text);
  font-size: 16px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.calendar-nav-btn:hover {
  background: var(--color-surface);
  border-color: var(--looops-coral);
  color: var(--looops-coral);
}

.calendar-month-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 6px;
  transition: background 0.15s ease;
}

.calendar-month-title:hover {
  background: var(--color-bg-secondary);
}

.calendar-weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
  padding: 8px 0 4px;
}

.calendar-weekday {
  text-align: center;
  font-size: 10px;
  font-weight: 600;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
}

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
}

.calendar-cell {
  aspect-ratio: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
  min-height: 32px;
}

.calendar-cell:hover {
  background: var(--color-bg-secondary);
}

.calendar-cell.today {
  background: var(--looops-coral);
}

.calendar-cell.today .calendar-day-number {
  color: white;
  font-weight: 700;
}

.calendar-cell.other-month {
  opacity: 0.3;
}

.calendar-day-number {
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text);
  line-height: 1;
}

.calendar-task-dots {
  display: flex;
  gap: 2px;
  margin-top: 2px;
  align-items: center;
}

.calendar-task-dot {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--looops-coral);
}

.calendar-cell.today .calendar-task-dot {
  background: white;
}

.calendar-task-more {
  font-size: 8px;
  color: var(--looops-coral);
  font-weight: 600;
}

.calendar-cell.today .calendar-task-more {
  color: white;
}

.calendar-empty {
  text-align: center;
  padding: 24px;
  color: var(--color-text-tertiary);
  font-size: 13px;
}

/* ========== Quick Links Widget ========== */
.quicklinks-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.quicklinks-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.quicklink-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  transition: all 0.15s ease;
}

.quicklink-item:hover {
  background: var(--color-surface-hover);
}

.quicklink-link {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
  text-decoration: none;
  min-width: 0;
}

.quicklink-icon {
  font-size: 14px;
  flex-shrink: 0;
}

.quicklink-title {
  font-size: 13px;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.quicklink-link:hover .quicklink-title {
  color: var(--looops-coral);
}

.quicklink-remove {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: var(--color-text-tertiary);
  font-size: 16px;
  cursor: pointer;
  opacity: 0;
  transition: all 0.15s ease;
}

.quicklink-item:hover .quicklink-remove {
  opacity: 1;
}

.quicklink-remove:hover {
  background: rgba(242, 112, 89, 0.1);
  color: var(--looops-coral);
}

.quicklink-add-btn {
  padding: 10px;
  background: transparent;
  border: 1px dashed var(--color-border);
  border-radius: 8px;
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.quicklink-add-btn:hover {
  border-color: var(--looops-coral);
  color: var(--looops-coral);
  background: rgba(242, 112, 89, 0.05);
}

.quicklink-add-form {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
}

.quicklink-input {
  padding: 8px 10px;
  font-size: 13px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  color: var(--color-text);
}

.quicklink-input:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.quicklink-add-actions {
  display: flex;
  gap: 8px;
  margin-top: 4px;
}

.quicklink-save {
  flex: 1;
  padding: 8px;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
}

.quicklink-save:hover {
  background: var(--color-accent-light);
}

.quicklink-cancel {
  padding: 8px 12px;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.quicklink-cancel:hover {
  background: var(--color-surface-hover);
}

.quicklinks-empty {
  text-align: center;
  padding: 16px;
  color: var(--color-text-tertiary);
  font-size: 13px;
}

/* ===========================================
   RESPONSIVE ADJUSTMENTS
   =========================================== */

@media (max-width: 768px) {
  .systems-screen {
    padding: 12px;
    height: auto;
  }

  .systems-header {
    flex-direction: row;
    gap: 12px;
    align-items: center;
  }

  .systems-header h1 {
    font-size: 18px;
  }

  .systems-add-btn {
    padding: 6px 12px;
    font-size: 12px;
  }

  .systems-stats {
    flex-direction: row;
    gap: 8px;
  }

  .systems-stat {
    padding: 8px 10px;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 2px;
  }

  .systems-stat-value {
    font-size: 16px;
  }

  .systems-stat-label {
    font-size: 9px;
  }

  .systems-stat-bar {
    display: none;
  }

  .systems-tabs {
    overflow-x: auto;
  }

  .systems-tab {
    padding: 6px 12px;
    font-size: 12px;
  }

  /* Mobile: Stack sections vertically */
  .systems-overview {
    grid-template-columns: 1fr;
    gap: 10px;
  }

  .systems-section {
    padding: 12px;
  }

  .systems-section h2 {
    font-size: 13px;
    margin-bottom: 8px;
    padding-bottom: 6px;
  }

  .systems-grid {
    gap: 6px;
  }

  .system-card {
    padding: 10px;
    gap: 10px;
  }

  .system-card-title {
    font-size: 13px;
  }

  .system-card-goal {
    font-size: 11px;
  }

  .loop-dashboard {
    padding: 16px;
  }

  .loop-dashboard-header {
    flex-direction: column;
    gap: 12px;
    align-items: stretch;
  }

  .loop-dashboard-widgets {
    grid-template-columns: 1fr;
  }

  .widget-large,
  .widget-full {
    grid-column: span 1;
  }

  .system-builder-content {
    padding: 24px 16px;
  }

  .template-grid {
    grid-template-columns: 1fr;
  }

  .custom-habit-row {
    flex-direction: column;
  }

  .add-tweak-buttons {
    flex-direction: column;
  }
}

/* ========== BABYSITTER WIDGET ========== */
/* TODO: Widget styling needs redesign (noted for future pass) */

.babysitter-widget {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border);
}

/* Weekly Grid */
.babysitter-week-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
}

.babysitter-day {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 8px 4px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.15s ease;
  min-height: 70px;
}

.babysitter-day:hover {
  background: var(--color-bg-tertiary);
  transform: translateY(-1px);
}

.babysitter-day--today {
  border: 2px solid var(--loop-family);
}

.babysitter-day--has-sessions {
  background: rgba(242, 112, 89, 0.1);
}

.babysitter-day-name {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
}

.babysitter-day-hours {
  font-size: 16px;
  font-weight: 700;
  color: var(--color-text);
  margin-top: 4px;
}

.babysitter-day-caregiver {
  font-size: 10px;
  color: var(--color-text-tertiary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.babysitter-day-empty {
  font-size: 14px;
  color: var(--color-text-tertiary);
  margin-top: 4px;
}

/* Summary */
.babysitter-summary {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.babysitter-summary-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 12px 8px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius);
}

.babysitter-summary-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
}

.babysitter-summary-value {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  margin-top: 4px;
  text-align: center;
}

/* Filter */
.babysitter-filter {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.babysitter-filter-label {
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.babysitter-filter-select {
  flex: 1;
  padding: 6px 10px;
  font-size: 13px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
}

.babysitter-filter-select:focus {
  outline: none;
  border-color: var(--loop-family);
}

.babysitter-history-filter-label {
  font-size: 12px;
  font-weight: 400;
  color: var(--color-text-secondary);
}

/* Actions */
.babysitter-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.babysitter-btn {
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
  transition: all 0.15s ease;
}

.babysitter-btn:hover {
  background: var(--color-bg-secondary);
}

.babysitter-btn--primary {
  background: var(--loop-family);
  border-color: var(--loop-family);
  color: white;
}

.babysitter-btn--primary:hover {
  opacity: 0.9;
}

/* History */
.babysitter-history {
  border-top: 1px solid var(--color-border);
  padding-top: 16px;
}

.babysitter-history h4 {
  margin: 0 0 12px 0;
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.babysitter-history-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 200px;
  overflow-y: auto;
}

.babysitter-history-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius);
  font-size: 13px;
}

.babysitter-history-date {
  color: var(--color-text-secondary);
  min-width: 80px;
}

.babysitter-history-caregiver {
  color: var(--color-text);
  flex: 1;
}

.babysitter-history-hours {
  color: var(--color-text);
  font-weight: 500;
}

.babysitter-history-amount {
  color: var(--color-text);
  font-weight: 600;
  min-width: 60px;
  text-align: right;
}

.babysitter-history-edit {
  padding: 2px 8px;
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: var(--radius);
  font-size: 11px;
  margin-right: 4px;
}

.babysitter-history-edit:hover {
  background: var(--color-bg-tertiary);
  color: var(--color-primary);
  border-color: var(--color-primary);
}

.babysitter-history-delete {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: var(--radius);
  font-size: 16px;
}

.babysitter-history-delete:hover {
  background: var(--color-bg-tertiary);
  color: var(--color-danger);
}

/* Edit Session Row */
.babysitter-history-item--editing {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius);
  flex-wrap: wrap;
}

.babysitter-edit-date {
  padding: 4px 6px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 12px;
  width: 110px;
}

.babysitter-edit-caregiver {
  padding: 4px 6px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 12px;
  flex: 1;
  min-width: 80px;
}

.babysitter-edit-hours {
  padding: 4px 6px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 12px;
  width: 50px;
  text-align: center;
}

.babysitter-edit-amount {
  font-size: 12px;
  color: var(--color-text-secondary);
  min-width: 50px;
  text-align: right;
}

.babysitter-empty {
  color: var(--color-text-tertiary);
  font-size: 13px;
  text-align: center;
  padding: 16px;
}

/* Modal */
.babysitter-modal-overlay {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 99999;
  padding: 16px;
  pointer-events: auto;
  backdrop-filter: blur(2px);
}

.babysitter-modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 400px;
  max-height: 90vh;
  overflow-y: auto;
  z-index: 100000;
  position: relative;
  pointer-events: auto;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

.babysitter-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  border-bottom: 1px solid var(--color-border);
}

.babysitter-modal-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
}

.babysitter-modal-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: var(--radius);
  font-size: 20px;
}

.babysitter-modal-close:hover {
  background: var(--color-bg-secondary);
}

.babysitter-modal form {
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.babysitter-form-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.babysitter-form-group label {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.babysitter-form-group input,
.babysitter-form-group select {
  padding: 10px 12px;
  font-size: 14px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-bg-secondary);
  color: var(--color-text);
}

.babysitter-form-group input:focus,
.babysitter-form-group select:focus {
  outline: none;
  border-color: var(--loop-family);
}

.babysitter-calculated {
  padding: 12px;
  background: rgba(242, 112, 89, 0.1);
  border-radius: var(--radius);
  font-size: 16px;
  font-weight: 600;
  color: var(--loop-family);
  text-align: center;
}

.babysitter-modal-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  padding-top: 8px;
}

.babysitter-modal-empty {
  padding: 24px 16px;
  text-align: center;
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}

.babysitter-modal-empty p {
  margin: 0;
  color: var(--color-text-secondary);
  font-size: 14px;
}

.babysitter-modal-empty p:first-child {
  font-weight: 500;
  color: var(--color-text);
}

/* Caregiver Manager */
.babysitter-manager {
  border-top: 1px solid var(--color-border);
  padding-top: 16px;
}

.babysitter-manager-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.babysitter-manager-header h4 {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
}

.babysitter-btn-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: var(--radius);
  font-size: 18px;
}

.babysitter-btn-icon:hover {
  background: var(--color-bg-secondary);
}

.babysitter-manager-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 12px;
}

.babysitter-manager-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius);
}

.babysitter-manager-item--inactive {
  opacity: 0.5;
}

.babysitter-manager-name {
  font-weight: 500;
  color: var(--color-text);
}

.babysitter-manager-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.babysitter-manager-rate {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.babysitter-manager-edit {
  display: flex;
  align-items: center;
  gap: 6px;
}

.babysitter-manager-input {
  width: 70px;
  padding: 4px 8px;
  font-size: 13px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
}

.babysitter-btn-small {
  padding: 4px 8px;
  font-size: 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
}

.babysitter-btn-small:hover {
  background: var(--color-bg-secondary);
}

.babysitter-btn-small--danger {
  color: var(--color-danger);
  border-color: var(--color-danger);
}

.babysitter-btn-small--danger:hover {
  background: rgba(239, 68, 68, 0.1);
}

.babysitter-manager-add {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.babysitter-manager-add input {
  flex: 1;
  min-width: 100px;
  padding: 8px 12px;
  font-size: 13px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-bg-secondary);
  color: var(--color-text);
}

.babysitter-manager-add input[type="number"] {
  width: 80px;
  flex: none;
}

/* Mobile adjustments */
@media (max-width: 640px) {
  .babysitter-week-grid {
    gap: 2px;
  }

  .babysitter-day {
    padding: 6px 2px;
    min-height: 60px;
  }

  .babysitter-day-name {
    font-size: 10px;
  }

  .babysitter-day-hours {
    font-size: 14px;
  }

  .babysitter-day-caregiver {
    font-size: 9px;
  }

  .babysitter-summary {
    grid-template-columns: 1fr;
  }

  .babysitter-summary-item {
    flex-direction: row;
    justify-content: space-between;
  }

  .babysitter-history-item {
    flex-wrap: wrap;
  }

  .babysitter-history-date {
    min-width: 70px;
  }
}

/* ========== HEALTH WIDGET ========== */
/* TODO: Widget styling needs redesign (noted for future pass) */

.health-widget {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border);
}

.health-widget--loading,
.health-widget--error,
.health-widget--empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px 16px;
  text-align: center;
  gap: 12px;
  min-height: 200px;
}

.health-loading-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--color-border);
  border-top-color: var(--loop-health);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.health-error-icon,
.health-empty-icon {
  font-size: 32px;
}

.health-error-message {
  color: var(--color-text-secondary);
  font-size: 13px;
  margin: 0;
}

.health-hint {
  color: var(--color-text-tertiary);
  font-size: 12px;
  margin: 0;
}

.health-btn {
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
}

.health-btn:hover {
  background: var(--color-bg-secondary);
}

/* Readiness Score */
.health-readiness {
  display: flex;
  justify-content: center;
}

.health-readiness-score {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100px;
  height: 100px;
  border-radius: 50%;
  background: var(--color-bg-secondary);
  border: 4px solid currentColor;
}

.health-readiness-value {
  font-size: 32px;
  font-weight: 700;
  line-height: 1;
}

.health-readiness-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--color-text-secondary);
  margin-top: 4px;
}

/* Status Colors */
.health-status--green {
  color: var(--looops-sage);
}

.health-status--yellow {
  color: var(--looops-amber);
}

.health-status--red {
  color: var(--looops-coral);
}

.health-status--gray {
  color: var(--color-text-tertiary);
}

/* Metrics Grid */
.health-metrics {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.health-metric {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius);
  border-left: 3px solid currentColor;
}

.health-metric-icon {
  font-size: 20px;
}

.health-metric-content {
  display: flex;
  flex-direction: column;
}

.health-metric-value {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.health-metric-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--color-text-secondary);
}

.health-metric-subtext {
  font-size: 11px;
  color: var(--color-text-tertiary);
  margin-top: 2px;
}

/* Additional Stats */
.health-stats {
  display: flex;
  justify-content: center;
  gap: 20px;
  padding: 12px 0;
  border-top: 1px solid var(--color-border);
}

.health-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.health-stat-icon {
  font-size: 16px;
}

.health-stat-value {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.health-stat-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
}

/* Footer */
.health-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 8px;
  border-top: 1px solid var(--color-border);
}

.health-synced {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.health-sync-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: var(--radius);
  font-size: 16px;
}

.health-sync-btn:hover {
  background: var(--color-bg-secondary);
}

.health-sync-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Mobile adjustments */
@media (max-width: 640px) {
  .health-metrics {
    grid-template-columns: 1fr;
  }

  .health-readiness-score {
    width: 80px;
    height: 80px;
  }

  .health-readiness-value {
    font-size: 24px;
  }

  .health-stats {
    flex-wrap: wrap;
    gap: 16px;
  }
}

/* ========== MOBILE TASKS SCREEN FIX - MUST BE LAST ========== */
@media (max-width: 768px) {
  .tasks-screen {
    position: fixed;
    top: 56px;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    flex-direction: column;
    margin: 0;
    padding: 0;
    width: 100%;
    height: calc(100vh - 56px);
    background: var(--color-bg);
    z-index: 100;
  }

  .tasks-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 0;
    overflow-y: auto;
  }

  .tasks-header {
    padding: 12px;
    background: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
  }
}

/* =============================================================================
   GOOGLE CALENDAR WIDGET
   TODO: Widget styles need redesign
   ============================================================================= */

.calendar-widget--disconnected,
.calendar-widget--loading,
.calendar-widget--error {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

.calendar-widget-empty {
  text-align: center;
  padding: 24px;
}

.calendar-widget-empty-icon {
  font-size: 48px;
  margin-bottom: 12px;
  display: block;
}

.calendar-widget-empty p {
  color: var(--color-text-secondary);
  margin: 0 0 16px 0;
}

.calendar-widget-connect-btn {
  background: var(--color-primary);
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.calendar-widget-connect-btn:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

.calendar-widget-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  color: var(--color-text-secondary);
}

.calendar-widget-spinner {
  width: 24px;
  height: 24px;
  border: 3px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.calendar-widget-error {
  text-align: center;
  padding: 24px;
}

.calendar-widget-error-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: var(--color-danger);
  color: white;
  border-radius: 50%;
  font-weight: bold;
  margin-bottom: 12px;
}

.calendar-widget-error p {
  color: var(--color-text-secondary);
  margin: 0 0 16px 0;
}

.calendar-widget-retry-btn {
  background: var(--color-surface-elevated);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.calendar-widget-retry-btn:hover {
  background: var(--color-surface-hover);
}

.calendar-widget-tabs {
  display: flex;
  gap: 4px;
  padding: 4px;
  background: var(--color-surface);
  border-radius: 8px;
  margin-bottom: 12px;
}

.calendar-widget-tab {
  flex: 1;
  padding: 8px 12px;
  background: transparent;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.calendar-widget-tab:hover {
  background: var(--color-surface-hover);
}

.calendar-widget-tab.active {
  background: var(--color-surface-elevated);
  color: var(--color-text);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.calendar-widget-events {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 300px;
  overflow-y: auto;
}

.calendar-widget-no-events {
  text-align: center;
  padding: 32px 16px;
  color: var(--color-text-tertiary);
  font-size: 13px;
}

.calendar-event-card {
  display: flex;
  gap: 12px;
  padding: 12px;
  background: var(--color-surface);
  border-radius: 8px;
  border: 1px solid var(--color-border);
  position: relative;
  overflow: hidden;
}

.calendar-event-card:hover {
  background: var(--color-surface-hover);
}

.calendar-event-time {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  min-width: 60px;
  font-size: 12px;
}

.calendar-event-date {
  color: var(--color-text-tertiary);
  font-size: 10px;
  margin-bottom: 2px;
}

.calendar-event-hour {
  font-weight: 600;
  color: var(--color-text);
}

.calendar-event-duration {
  color: var(--color-text-tertiary);
  font-size: 11px;
}

.calendar-event-details {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.calendar-event-title {
  font-weight: 500;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.calendar-event-location {
  font-size: 12px;
  color: var(--color-text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.calendar-event-calendar {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.calendar-event-color {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
}

.calendar-widget-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: 12px;
  margin-top: 12px;
  border-top: 1px solid var(--color-border);
}

.calendar-widget-synced {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.calendar-widget-refresh {
  background: none;
  border: none;
  font-size: 16px;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.calendar-widget-refresh:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

/* =============================================================================
   SPOTIFY WIDGET
   TODO: Widget styles need redesign
   ============================================================================= */

.spotify-widget--disconnected,
.spotify-widget--loading,
.spotify-widget--error {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

.spotify-widget-empty {
  text-align: center;
  padding: 24px;
}

.spotify-widget-logo {
  font-size: 48px;
  margin-bottom: 12px;
  display: block;
}

.spotify-widget-empty p {
  color: var(--color-text-secondary);
  margin: 0 0 16px 0;
}

.spotify-widget-connect-btn {
  background: #1DB954;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 20px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.spotify-widget-connect-btn:hover {
  background: #1ed760;
  transform: translateY(-1px);
}

.spotify-widget-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  color: var(--color-text-secondary);
}

.spotify-widget-spinner {
  width: 24px;
  height: 24px;
  border: 3px solid var(--color-border);
  border-top-color: #1DB954;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.spotify-widget-error {
  text-align: center;
  padding: 24px;
}

.spotify-widget-error-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: var(--color-danger);
  color: white;
  border-radius: 50%;
  font-weight: bold;
  margin-bottom: 12px;
}

.spotify-widget-error p {
  color: var(--color-text-secondary);
  margin: 0 0 16px 0;
}

.spotify-widget-retry-btn {
  background: var(--color-surface-elevated);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
}

.spotify-now-playing {
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--color-border);
}

.spotify-now-playing-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #1DB954;
  margin-bottom: 12px;
}

.spotify-equalizer {
  display: flex;
  align-items: flex-end;
  gap: 2px;
  height: 12px;
}

.spotify-equalizer span {
  width: 3px;
  background: #1DB954;
  animation: equalizer 0.5s ease-in-out infinite alternate;
}

.spotify-equalizer span:nth-child(1) { animation-delay: 0s; height: 4px; }
.spotify-equalizer span:nth-child(2) { animation-delay: 0.15s; height: 8px; }
.spotify-equalizer span:nth-child(3) { animation-delay: 0.3s; height: 6px; }

@keyframes equalizer {
  from { height: 4px; }
  to { height: 12px; }
}

.spotify-track-card--large {
  display: flex;
  gap: 12px;
  align-items: center;
}

.spotify-album-art {
  width: 56px;
  height: 56px;
  border-radius: 6px;
  object-fit: cover;
}

.spotify-track-info {
  flex: 1;
  min-width: 0;
}

.spotify-track-name {
  display: block;
  font-weight: 600;
  color: var(--color-text);
  text-decoration: none;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.spotify-track-name:hover {
  text-decoration: underline;
}

.spotify-track-artist {
  display: block;
  font-size: 13px;
  color: var(--color-text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.spotify-widget-tabs {
  display: flex;
  gap: 4px;
  padding: 4px;
  background: var(--color-surface);
  border-radius: 8px;
  margin-bottom: 12px;
}

.spotify-widget-tab {
  flex: 1;
  padding: 8px 12px;
  background: transparent;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.spotify-widget-tab:hover {
  background: var(--color-surface-hover);
}

.spotify-widget-tab.active {
  background: var(--color-surface-elevated);
  color: var(--color-text);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.spotify-track-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 250px;
  overflow-y: auto;
}

.spotify-track-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px;
  background: var(--color-surface);
  border-radius: 6px;
  transition: background 0.2s ease;
}

.spotify-track-item:hover {
  background: var(--color-surface-hover);
}

.spotify-track-rank {
  width: 20px;
  text-align: center;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-tertiary);
}

.spotify-track-thumb {
  width: 40px;
  height: 40px;
  border-radius: 4px;
  object-fit: cover;
}

.spotify-track-details {
  flex: 1;
  min-width: 0;
}

.spotify-track-details .spotify-track-name {
  font-size: 13px;
}

.spotify-track-details .spotify-track-artist {
  font-size: 11px;
}

.spotify-track-time {
  font-size: 11px;
  color: var(--color-text-tertiary);
  white-space: nowrap;
}

.spotify-stats {
  display: flex;
  justify-content: space-around;
  padding-top: 12px;
  margin-top: 12px;
  border-top: 1px solid var(--color-border);
}

.spotify-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.spotify-stat-value {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.spotify-stat-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

/* =============================================================================
   WEALTH WIDGET - Tiller Money Financial Data
   ============================================================================= */

.wealth-widget {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  height: 100%;
}

.wealth-widget--loading,
.wealth-widget--error,
.wealth-widget--disconnected {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

.wealth-widget-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  color: var(--color-text-secondary);
}

.wealth-widget-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.wealth-widget-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  text-align: center;
  color: var(--color-text-secondary);
}

.wealth-widget-icon {
  font-size: 32px;
}

.wealth-widget-empty p {
  margin: 0;
  font-size: 14px;
}

.wealth-widget-empty small {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.wealth-widget-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  text-align: center;
}

.wealth-widget-error-icon {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-danger);
  color: white;
  border-radius: 50%;
  font-weight: 700;
  font-size: 20px;
}

.wealth-widget-error p {
  margin: 0;
  color: var(--color-text-secondary);
  font-size: 14px;
}

.wealth-widget-retry-btn {
  padding: 8px 16px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  cursor: pointer;
  transition: background 0.2s;
}

.wealth-widget-retry-btn:hover {
  background: var(--color-primary-hover);
}

/* Net Worth Header */
.wealth-net-worth {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--color-border);
}

.wealth-net-worth-label {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.wealth-net-worth-value {
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
}

.wealth-net-worth-value.positive {
  color: var(--color-success);
}

.wealth-net-worth-value.negative {
  color: var(--color-danger);
}

/* View Toggle Tabs */
.wealth-widget-tabs {
  display: flex;
  gap: 4px;
  background: var(--color-bg-tertiary);
  padding: 4px;
  border-radius: var(--radius-md);
}

.wealth-widget-tab {
  flex: 1;
  padding: 8px 12px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.wealth-widget-tab:hover {
  color: var(--color-text);
  background: var(--color-bg-secondary);
}

.wealth-widget-tab.active {
  background: var(--color-bg);
  color: var(--color-text);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Overview View */
.wealth-overview {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.wealth-stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.wealth-stat {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.wealth-stat-label {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.wealth-stat-value {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
}

.wealth-stat-value.positive {
  color: var(--color-success);
}

.wealth-stat-value.negative {
  color: var(--color-danger);
}

.wealth-stat--income .wealth-stat-value {
  color: var(--color-success);
}

.wealth-stat--expenses .wealth-stat-value {
  color: var(--color-danger);
}

/* Recent Transactions */
.wealth-recent {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.wealth-recent h4 {
  margin: 0;
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.wealth-transactions-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.wealth-transaction {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.wealth-transaction-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
  flex: 1;
}

.wealth-transaction-desc {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.wealth-transaction-category {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.wealth-transaction-amount {
  font-size: 13px;
  font-weight: 600;
  white-space: nowrap;
  margin-left: 12px;
}

.wealth-transaction-amount.positive {
  color: var(--color-success);
}

.wealth-transaction-amount.negative {
  color: var(--color-danger);
}

/* Spending View */
.wealth-spending {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.wealth-no-data {
  text-align: center;
  color: var(--color-text-tertiary);
  font-size: 14px;
  padding: 24px;
}

.wealth-categories-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.wealth-category {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.wealth-category-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.wealth-category-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.wealth-category-amount {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-danger);
}

.wealth-category-bar {
  height: 8px;
  background: var(--color-bg-tertiary);
  border-radius: 4px;
  overflow: hidden;
}

.wealth-category-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-primary), var(--color-primary-hover));
  border-radius: 4px;
  transition: width 0.3s ease;
}

/* Accounts View */
.wealth-accounts {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.wealth-accounts-summary {
  display: flex;
  gap: 12px;
}

.wealth-accounts-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.wealth-accounts-label {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.wealth-accounts-value {
  font-size: 18px;
  font-weight: 600;
}

.wealth-accounts-value.positive {
  color: var(--color-success);
}

.wealth-accounts-value.negative {
  color: var(--color-danger);
}

.wealth-accounts-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.wealth-account {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.wealth-account-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.wealth-account-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.wealth-account-type {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.wealth-account-balance {
  font-size: 14px;
  font-weight: 600;
}

.wealth-account-balance.positive {
  color: var(--color-success);
}

.wealth-account-balance.negative {
  color: var(--color-danger);
}

/* Footer */
.wealth-widget-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 12px;
  margin-top: auto;
  border-top: 1px solid var(--color-border);
}

.wealth-widget-updated {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.wealth-widget-refresh {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  color: var(--color-text-secondary);
  font-size: 16px;
  cursor: pointer;
  transition: all 0.2s;
}

.wealth-widget-refresh:hover {
  background: var(--color-bg-tertiary);
  color: var(--color-text);
}

/* =============================================================================
   MEDIA WIDGET - Movie, TV, Book, Game Logging
   ============================================================================= */

.media-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  height: 100%;
}

.media-widget-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.media-widget-title {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.media-add-btn {
  padding: 6px 12px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
}

.media-add-btn:hover {
  background: var(--color-primary-hover);
}

/* Tabs */
.media-widget-tabs {
  display: flex;
  gap: 4px;
  background: var(--color-bg-tertiary);
  padding: 4px;
  border-radius: var(--radius-md);
}

.media-tab {
  flex: 1;
  padding: 6px 12px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.media-tab:hover {
  color: var(--color-text);
}

.media-tab.active {
  background: var(--color-bg);
  color: var(--color-text);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Entry List */
.media-entries-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 300px;
  overflow-y: auto;
}

.media-entry {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.media-entry-main {
  flex: 1;
  min-width: 0;
}

.media-entry-type {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
  margin-bottom: 2px;
}

.media-entry-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.media-entry-creator {
  font-size: 11px;
  color: var(--color-text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.media-entry-service {
  font-size: 10px;
  color: var(--color-text-tertiary);
  display: flex;
  align-items: center;
  gap: 4px;
}

.media-entry-meta {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
}

.media-entry-status {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.media-entry-actions {
  display: flex;
  gap: 4px;
}

.media-action-btn {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  color: var(--color-text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.media-action-btn:hover {
  background: var(--color-bg-secondary);
  color: var(--color-text);
}

.media-action-btn--danger:hover {
  background: var(--color-danger);
  border-color: var(--color-danger);
  color: white;
}

/* Star Rating */
.media-stars {
  display: flex;
  gap: 2px;
}

.media-star {
  font-size: 14px;
  color: var(--color-text-tertiary);
  line-height: 1;
}

.media-star.filled {
  color: #fbbf24;
}

.media-star.clickable {
  cursor: pointer;
  transition: transform 0.1s;
}

.media-star.clickable:hover {
  transform: scale(1.2);
}

/* Empty State */
.media-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 24px;
  text-align: center;
  color: var(--color-text-secondary);
}

.media-empty p {
  margin: 0;
  font-size: 14px;
}

.media-empty small {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

/* Filters */
.media-filters {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
}

.media-filter-select {
  flex: 1;
  padding: 6px 10px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 12px;
  color: var(--color-text);
  cursor: pointer;
}

/* Stats */
.media-stats {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.media-stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.media-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.media-stat-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
}

.media-stat-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.media-stats-breakdown h4 {
  margin: 0 0 8px;
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.media-type-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.media-type-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
  font-size: 13px;
}

.media-type-name {
  color: var(--color-text);
}

.media-type-count {
  font-weight: 600;
  color: var(--color-primary);
}

/* Add/Edit Form */
.media-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.media-form-row {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.media-form-label {
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.media-form-input,
.media-form-select,
.media-form-textarea {
  padding: 8px 12px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 13px;
  color: var(--color-text);
}

.media-form-input:focus,
.media-form-select:focus,
.media-form-textarea:focus {
  outline: none;
  border-color: var(--color-primary);
}

.media-form-textarea {
  resize: vertical;
  min-height: 60px;
}

.media-form-submit {
  padding: 10px 16px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  margin-top: 4px;
}

.media-form-submit:hover {
  background: var(--color-primary-hover);
}

/* ========== Fitbit Widgets (Sleep, Activity, Nutrition) ========== */

.fitbit-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 4px;
  height: 100%;
}

.fitbit-widget--loading,
.fitbit-widget--error,
.fitbit-widget--empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-align: center;
  color: var(--color-text-secondary);
  padding: 24px;
}

.fitbit-loading-spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.fitbit-error-icon,
.fitbit-empty-icon {
  font-size: 32px;
  opacity: 0.6;
}

.fitbit-retry-btn {
  padding: 6px 12px;
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.fitbit-retry-btn:hover {
  background: var(--color-bg-secondary);
  border-color: var(--color-primary);
}

/* Hero Section - Main metric */
.fitbit-hero {
  display: flex;
  justify-content: center;
  padding: 8px 0;
}

.fitbit-hero-score {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: var(--color-bg-tertiary);
  border: 3px solid var(--color-border);
}

.fitbit-hero-score.fitbit-status--green {
  border-color: var(--color-success);
  background: rgba(115, 165, 140, 0.1);
}

.fitbit-hero-score.fitbit-status--yellow {
  border-color: var(--color-warning);
  background: rgba(244, 185, 66, 0.1);
}

.fitbit-hero-score.fitbit-status--red {
  border-color: var(--color-error);
  background: rgba(242, 112, 89, 0.1);
}

.fitbit-hero-value {
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1;
}

.fitbit-hero-label {
  font-size: 10px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-secondary);
  margin-top: 2px;
}

/* Activity Ring */
.fitbit-hero-ring {
  position: relative;
  width: 90px;
  height: 90px;
}

.fitbit-hero-ring svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.fitbit-ring-bg {
  stroke: var(--color-bg-tertiary);
  stroke-width: 8;
}

.fitbit-ring-fill {
  stroke: var(--color-primary);
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 0.5s ease;
}

.fitbit-status--green .fitbit-ring-fill {
  stroke: var(--color-success);
}

.fitbit-status--yellow .fitbit-ring-fill {
  stroke: var(--color-warning);
}

.fitbit-status--red .fitbit-ring-fill {
  stroke: var(--color-error);
}

.fitbit-hero-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
}

.fitbit-hero-content .fitbit-hero-value {
  font-size: 22px;
}

.fitbit-hero-content .fitbit-hero-label {
  font-size: 9px;
}

/* Metrics Grid */
.fitbit-metrics {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
  gap: 8px;
}

.fitbit-metric {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 10px 8px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
  border: 1px solid transparent;
  transition: border-color 0.2s;
}

.fitbit-metric.fitbit-status--green {
  border-color: rgba(115, 165, 140, 0.3);
}

.fitbit-metric.fitbit-status--yellow {
  border-color: rgba(244, 185, 66, 0.3);
}

.fitbit-metric.fitbit-status--red {
  border-color: rgba(242, 112, 89, 0.3);
}

.fitbit-metric-icon {
  font-size: 18px;
}

.fitbit-metric-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.fitbit-metric-value {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.fitbit-metric-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.fitbit-metric-subtext {
  font-size: 9px;
  color: var(--color-text-tertiary);
  margin-top: 2px;
}

/* Progress Bar */
.fitbit-metric-bar {
  width: 100%;
  height: 4px;
  background: var(--color-bg-secondary);
  border-radius: 2px;
  overflow: hidden;
  margin-top: 4px;
}

.fitbit-metric-bar-fill {
  height: 100%;
  background: var(--color-primary);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.fitbit-metric-bar--water .fitbit-metric-bar-fill {
  background: #60a5fa;
}

/* Footer */
.fitbit-footer {
  display: flex;
  justify-content: center;
  padding-top: 4px;
  border-top: 1px solid var(--color-border);
}

.fitbit-avg {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* Nutrition Widget Specific */
.nutrition-balance {
  display: flex;
  flex-direction: column;
  gap: 6px;
  width: 100%;
  max-width: 160px;
}

.nutrition-balance-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 4px 8px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-sm);
}

.nutrition-label {
  font-size: 11px;
  font-weight: 500;
  color: var(--color-text-secondary);
  text-transform: uppercase;
}

.nutrition-value {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.nutrition-value--in {
  color: var(--color-success);
}

.nutrition-value--out {
  color: var(--color-error);
}

.nutrition-balance-total {
  border: 1px solid var(--color-border);
  font-weight: 600;
}

.nutrition-balance--balanced .nutrition-value {
  color: var(--color-success);
}

.nutrition-balance--over .nutrition-value {
  color: var(--color-warning);
}

.nutrition-balance--under .nutrition-value {
  color: var(--color-info);
}

/* ========== Hooomz OS Widget ========== */

.hooomz-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 4px;
  height: 100%;
}

.hooomz-header {
  display: flex;
  justify-content: flex-end;
}

.hooomz-status {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: var(--color-text-secondary);
}

.hooomz-status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--color-text-tertiary);
}

.hooomz-status--online {
  background: var(--color-success);
  box-shadow: 0 0 6px var(--color-success);
}

.hooomz-quick-actions {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
  flex: 1;
}

.hooomz-action-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 16px 12px;
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s;
}

.hooomz-action-btn:hover {
  background: var(--color-bg-secondary);
  border-color: var(--color-primary);
  transform: translateY(-1px);
}

.hooomz-action-icon {
  font-size: 24px;
}

.hooomz-action-label {
  font-size: 11px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.hooomz-footer {
  display: flex;
  justify-content: center;
}

.hooomz-open-btn {
  padding: 8px 16px;
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text);
  cursor: pointer;
  transition: all 0.2s;
}

.hooomz-open-btn:hover {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

/* ========== Meditation Widget ========== */

.meditation-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 4px;
  height: 100%;
}

.meditation-widget--loading,
.meditation-widget--error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-align: center;
  color: var(--color-text-secondary);
  padding: 24px;
}

.meditation-loading-spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--color-border);
  border-top-color: #a78bfa;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.meditation-error-icon {
  font-size: 32px;
  opacity: 0.6;
}

.meditation-retry-btn {
  padding: 6px 12px;
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text);
  font-size: 12px;
  cursor: pointer;
}

.meditation-hero {
  display: flex;
  justify-content: center;
  padding: 8px 0;
}

.meditation-circle {
  position: relative;
  width: 100px;
  height: 100px;
}

.meditation-circle svg {
  width: 100%;
  height: 100%;
}

.meditation-circle-bg {
  fill: none;
  stroke: var(--color-bg-tertiary);
  stroke-width: 8;
}

.meditation-circle-fill {
  fill: none;
  stroke: #a78bfa;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 0.5s ease;
}

.meditation-circle-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
}

.meditation-minutes {
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1;
}

.meditation-label {
  font-size: 10px;
  color: var(--color-text-secondary);
  text-transform: uppercase;
}

.meditation-stats {
  display: flex;
  justify-content: center;
  gap: 24px;
}

.meditation-stat {
  display: flex;
  align-items: center;
  gap: 8px;
}

.meditation-stat-icon {
  font-size: 18px;
}

.meditation-stat-content {
  display: flex;
  flex-direction: column;
}

.meditation-stat-value {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.meditation-stat-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
}

.meditation-actions {
  display: flex;
  justify-content: center;
}

.meditation-start-btn {
  padding: 10px 20px;
  background: linear-gradient(135deg, #a78bfa 0%, #818cf8 100%);
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
}

.meditation-start-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(167, 139, 250, 0.3);
}

.meditation-encouragement {
  text-align: center;
  font-size: 12px;
  color: var(--color-text-tertiary);
  font-style: italic;
}

.meditation-encouragement--success {
  color: var(--color-success);
  font-style: normal;
}

/* ========== Weather Widget ========== */

.weather-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 4px;
  height: 100%;
}

.weather-widget--loading,
.weather-widget--error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-align: center;
  color: var(--color-text-secondary);
  padding: 24px;
}

.weather-loading-spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--color-border);
  border-top-color: #60a5fa;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.weather-error-icon {
  font-size: 32px;
  opacity: 0.6;
}

.weather-location {
  display: flex;
  align-items: center;
  gap: 6px;
  justify-content: center;
}

.weather-location-icon {
  font-size: 14px;
}

.weather-location-name {
  font-size: 13px;
  color: var(--color-text-secondary);
  font-weight: 500;
}

.weather-current {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 8px 0;
}

.weather-current-icon {
  font-size: 48px;
  line-height: 1;
}

.weather-current-temp {
  display: flex;
  align-items: flex-start;
}

.weather-temp-value {
  font-size: 36px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1;
}

.weather-temp-symbol {
  font-size: 16px;
  font-weight: 500;
  color: var(--color-text-secondary);
  margin-top: 4px;
}

.weather-current-desc {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.weather-details {
  display: flex;
  justify-content: center;
  gap: 16px;
  padding: 8px 0;
  border-top: 1px solid var(--color-border);
  border-bottom: 1px solid var(--color-border);
}

.weather-detail {
  display: flex;
  align-items: center;
  gap: 4px;
}

.weather-detail-icon {
  font-size: 14px;
}

.weather-detail-value {
  font-size: 12px;
  color: var(--color-text-secondary);
}

.weather-forecast {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  padding-top: 4px;
}

.weather-forecast-day {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  flex: 1;
}

.weather-forecast-name {
  font-size: 11px;
  font-weight: 500;
  color: var(--color-text-secondary);
  text-transform: uppercase;
}

.weather-forecast-icon {
  font-size: 20px;
}

.weather-forecast-temps {
  display: flex;
  gap: 4px;
  font-size: 11px;
}

.weather-forecast-high {
  color: var(--color-text);
  font-weight: 600;
}

.weather-forecast-low {
  color: var(--color-text-tertiary);
}

/* Weather Settings */
.weather-location {
  position: relative;
}

.weather-settings-btn {
  background: none;
  border: none;
  font-size: 14px;
  cursor: pointer;
  opacity: 0.5;
  transition: opacity 0.2s;
  padding: 2px;
  margin-left: auto;
}

.weather-settings-btn:hover {
  opacity: 1;
}

.weather-settings {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  padding: 12px;
  z-index: 10;
  box-shadow: var(--shadow-md);
}

.weather-settings-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
  font-weight: 600;
  color: var(--color-text);
}

.weather-settings-close {
  background: none;
  border: none;
  font-size: 18px;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

.weather-settings-close:hover {
  color: var(--color-text);
}

.weather-settings-section {
  margin-bottom: 12px;
}

.weather-settings-label {
  display: block;
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
  color: var(--color-text-secondary);
  margin-bottom: 6px;
}

.weather-units-toggle {
  display: flex;
  gap: 4px;
}

.weather-unit-btn {
  flex: 1;
  padding: 6px 12px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  color: var(--color-text-secondary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.weather-unit-btn:hover {
  border-color: var(--color-primary);
}

.weather-unit-btn.active {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

.weather-location-search {
  display: flex;
  align-items: center;
  gap: 8px;
}

.weather-search-input {
  flex: 1;
  padding: 8px 10px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  color: var(--color-text);
  font-size: 13px;
}

.weather-search-input:focus {
  outline: none;
  border-color: var(--color-primary);
}

.weather-search-spinner {
  color: var(--color-text-secondary);
  font-size: 12px;
}

.weather-search-results {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-top: 6px;
  max-height: 150px;
  overflow-y: auto;
}

.weather-search-result {
  padding: 8px 10px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  color: var(--color-text);
  font-size: 12px;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s;
}

.weather-search-result:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-primary);
}

.weather-use-current {
  width: 100%;
  padding: 8px;
  margin-top: 8px;
  background: none;
  border: 1px dashed var(--color-border);
  border-radius: var(--radius);
  color: var(--color-text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.weather-use-current:hover {
  border-color: var(--color-primary);
  color: var(--color-text);
}

.weather-saved-location {
  margin-top: 8px;
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-align: center;
}

/* ========== Good Times Widget ========== */

.goodtimes-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 4px;
  height: 100%;
}

.goodtimes-stats {
  display: flex;
  justify-content: space-around;
  padding: 8px 0;
  border-bottom: 1px solid var(--color-border);
}

.goodtimes-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.goodtimes-stat-value {
  font-size: 20px;
  font-weight: 700;
  color: var(--color-text);
}

.goodtimes-stat-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
}

.goodtimes-add-btn {
  padding: 10px 16px;
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
}

.goodtimes-add-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
}

.goodtimes-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.goodtimes-input,
.goodtimes-textarea {
  padding: 10px 12px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 13px;
  color: var(--color-text);
  resize: none;
}

.goodtimes-input:focus,
.goodtimes-textarea:focus {
  outline: none;
  border-color: var(--color-primary);
}

.goodtimes-mood-picker {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.goodtimes-mood-label {
  font-size: 12px;
  color: var(--color-text-secondary);
}

.goodtimes-mood-options {
  display: flex;
  gap: 8px;
}

.goodtimes-mood-btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  background: var(--color-bg);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s;
}

.goodtimes-mood-btn:hover {
  border-color: var(--color-primary);
  transform: scale(1.1);
}

.goodtimes-mood-btn.active {
  border-color: #f59e0b;
  background: rgba(245, 158, 11, 0.1);
}

.goodtimes-form-actions {
  display: flex;
  gap: 8px;
}

.goodtimes-save-btn {
  flex: 1;
  padding: 10px;
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  color: white;
  cursor: pointer;
}

.goodtimes-save-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.goodtimes-cancel-btn {
  padding: 10px 16px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.goodtimes-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow-y: auto;
  max-height: 300px;
}

.goodtimes-entry {
  padding: 10px 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
}

.goodtimes-entry-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.goodtimes-entry-mood {
  font-size: 18px;
}

.goodtimes-entry-title {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.goodtimes-entry-delete {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--color-text-tertiary);
  font-size: 16px;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.2s;
}

.goodtimes-entry:hover .goodtimes-entry-delete {
  opacity: 1;
}

.goodtimes-entry-delete:hover {
  color: var(--color-danger);
}

.goodtimes-entry-desc {
  margin: 6px 0 0 26px;
  font-size: 12px;
  color: var(--color-text-secondary);
  line-height: 1.4;
}

.goodtimes-entry-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  padding-left: 26px;
}

.goodtimes-entry-date {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.goodtimes-entry-tags {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.goodtimes-tag {
  padding: 2px 6px;
  background: rgba(245, 158, 11, 0.15);
  border-radius: 4px;
  font-size: 10px;
  color: #f59e0b;
}

.goodtimes-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 24px;
  text-align: center;
  color: var(--color-text-secondary);
}

.goodtimes-empty-icon {
  font-size: 32px;
  opacity: 0.6;
}

.goodtimes-empty-hint {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

/* ========== Today Widgets ========== */

.today-widgets {
  margin-top: 8px;
}

.today-widgets-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.today-widgets-header h3 {
  margin: 0;
  padding: 0;
  border: none;
}

.add-widget-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s;
}

.add-widget-btn:hover {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

.today-widgets-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.today-widget-container {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.today-widget-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: var(--color-bg-tertiary);
  border-bottom: 1px solid var(--color-border);
}

.today-widget-icon {
  font-size: 14px;
}

.today-widget-title {
  flex: 1;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text);
}

.today-widget-remove {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--color-text-tertiary);
  font-size: 16px;
  cursor: pointer;
  opacity: 0;
  transition: all 0.2s;
}

.today-widget-container:hover .today-widget-remove {
  opacity: 1;
}

.today-widget-remove:hover {
  color: var(--color-danger);
}

.today-widget-content {
  padding: 12px;
  max-height: 300px;
  overflow-y: auto;
}

/* ========== Steps Widget ========== */
.steps-widget {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 8px;
  height: 100%;
}

.steps-widget--loading,
.steps-widget--error,
.steps-widget--empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-align: center;
  color: var(--color-text-secondary);
  padding: 24px;
  height: 100%;
}

.steps-loading-spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.steps-error-icon,
.steps-empty-icon {
  font-size: 28px;
  opacity: 0.6;
}

.steps-retry-btn {
  padding: 6px 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  color: var(--color-text);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.steps-retry-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-primary);
}

/* Ring container */
.steps-ring-container {
  position: relative;
  width: 100px;
  height: 100px;
}

.steps-ring {
  width: 100%;
  height: 100%;
}

.steps-ring-bg {
  stroke: var(--color-border);
  fill: none;
}

.steps-ring-fill {
  stroke: var(--color-primary);
  fill: none;
  transition: stroke-dasharray 0.5s ease;
}

.steps-status--green .steps-ring-fill {
  stroke: var(--color-success);
}

.steps-status--yellow .steps-ring-fill {
  stroke: var(--color-warning);
}

.steps-status--red .steps-ring-fill {
  stroke: var(--color-error);
}

.steps-status--gray .steps-ring-fill {
  stroke: var(--color-text-tertiary);
}

.steps-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.steps-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1;
}

.steps-label {
  font-size: 10px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-secondary);
  margin-top: 2px;
}

/* Details section */
.steps-details {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  font-size: 12px;
}

.steps-goal {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.steps-goal-percent {
  font-weight: 600;
  color: var(--color-text);
}

.steps-goal-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
}

.steps-distance {
  display: flex;
  align-items: baseline;
  gap: 2px;
}

.steps-distance-value {
  font-weight: 600;
  color: var(--color-text);
}

.steps-distance-unit {
  font-size: 10px;
  color: var(--color-text-tertiary);
}

/* Footer */
.steps-footer {
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-align: center;
}

.steps-avg {
  opacity: 0.8;
}

/* ========== Sync Status Indicator ========== */
.sync-status {
  position: fixed;
  bottom: 16px;
  right: 16px;
  z-index: 1000;
  font-size: 12px;
  font-weight: 500;
}

.sync-status span {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 20px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.sync-status svg {
  flex-shrink: 0;
}

.sync-status-syncing {
  color: var(--color-warning);
}

.sync-status-synced {
  color: var(--color-success);
}

.sync-status-error {
  color: var(--color-error);
}

.sync-icon.spinning {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
