/* ========== Reset & Base ========== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  overflow: hidden;
}

#root {
  height: 100%;
  overflow: hidden;
}

:root {
  /* Looops Brand Colors */
  --looops-navy: #1a1a2e;
  --looops-coral: #F27059;    /* To Do / Stop */
  --looops-amber: #F4B942;    /* In Progress / Wait */
  --looops-sage: #73A58C;     /* Done / Go */
  --looops-white: #FFFFFF;

  /* Dark Theme - Looops Navy Base */
  --color-black: #0d0d17;
  --color-dark: #12121f;
  --color-gray-900: #1a1a2e;
  --color-gray-800: #252540;
  --color-gray-700: #353552;
  --color-gray-600: #525270;
  --color-gray-500: #737390;
  --color-gray-400: #a3a3b8;
  --color-gray-300: #d4d4e0;
  --color-gray-200: #e5e5ed;
  --color-gray-100: #f5f5f8;
  --color-white: #ffffff;

  /* Accent - Looops Coral (Primary Action) */
  --color-accent: #F27059;
  --color-accent-light: #f58d7a;
  --color-accent-dark: #d95a45;
  --color-accent-glow: rgba(242, 112, 89, 0.3);
  --color-accent-subtle: rgba(242, 112, 89, 0.1);
  --color-accent-hover: #f58d7a;

  /* Looops Coral variants */
  --looops-coral-light: #f58d7a;
  --looops-coral-subtle: rgba(242, 112, 89, 0.1);

  /* Looops Sage variants */
  --looops-sage-subtle: rgba(115, 165, 140, 0.15);

  /* Looops Amber variants */
  --looops-amber-subtle: rgba(244, 185, 66, 0.15);

  /* Status colors - Traffic Light System */
  --color-success: #73A58C;   /* Looops Sage - Done/Go */
  --color-warning: #F4B942;   /* Looops Amber - In Progress/Wait */
  --color-error: #F27059;     /* Looops Coral - To Do/Stop */
  --color-red: #F27059;
  --color-red-light: rgba(242, 112, 89, 0.1);

  /* Primary Colors */
  --color-primary: var(--color-accent);
  --color-primary-hover: var(--color-accent-light);
  --color-primary-glow: var(--color-accent-glow);

  /* Background - Looops Navy */
  --color-bg: #0d0d17;
  --color-bg-secondary: #12121f;
  --color-surface: #1a1a2e;
  --color-surface-hover: #252540;
  --color-border: #353552;
  --color-border-light: #252540;

  /* Text Colors */
  --color-text: #ffffff;
  --color-text-secondary: #a3a3b8;
  --color-text-tertiary: #737390;

  /* Loop Colors - Using brand palette */
  --loop-health: #73A58C;     /* Sage */
  --loop-wealth: #F4B942;     /* Amber */
  --loop-family: #F27059;     /* Coral */
  --loop-work: #5a7fb8;       /* Muted blue to complement */
  --loop-fun: #b87fa8;        /* Muted purple to complement */
  --loop-maintenance: #737390;

  /* Spacing */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 12px;
  --spacing-lg: 24px;
  --spacing-xl: 40px;
  --spacing-2xl: 60px;

  /* Border Radius */
  --radius-sm: 4px;
  --radius: 8px;
  --radius-lg: 16px;
  --radius-full: 9999px;

  /* Shadows - Subtle glow effects */
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.4);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.5);
  --shadow-glow: 0 0 20px var(--color-accent-glow);
  --shadow-glow-sm: 0 0 10px var(--color-accent-glow);

  /* Semantic aliases (used by Meal Prep module) */
  --bg-primary: #1a1a2e;
  --bg-secondary: #12121f;
  --bg-tertiary: #252540;
  --text-primary: #ffffff;
  --text-secondary: #a3a3b8;
  --border-primary: #353552;
  --border-secondary: #252540;
}

body {
  font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background-color: var(--color-bg);
  color: var(--color-text);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  font-size: 14px;
}

/* Modal root - dedicated portal container outside React tree */
#modal-root {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 999999;
}

#modal-root:empty {
  display: none;
}

#modal-root > * {
  pointer-events: auto;
}

/* Disable transforms when modal is open to fix stacking context issues */
body.modal-open .widget-container,
body.modal-open .widget-container:hover {
  transform: none !important;
}

body.modal-open {
  overflow: hidden;
}

/* ========== Login Screen ========== */
.login-screen {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--color-black) 0%, var(--color-dark) 50%, var(--color-gray-900) 100%);
  padding: 20px;
}

.login-container {
  width: 100%;
  max-width: 420px;
  background: var(--color-surface);
  border-radius: 24px;
  padding: 48px 40px;
  box-shadow:
    0 4px 6px rgba(0, 0, 0, 0.1),
    0 20px 40px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.login-header {
  text-align: center;
  margin-bottom: 40px;
}

.login-logo {
  margin-bottom: 20px;
}

.login-logo svg {
  filter: drop-shadow(0 4px 12px rgba(99, 102, 241, 0.3));
}

.login-title {
  font-size: 32px;
  font-weight: 700;
  color: var(--color-text);
  margin-bottom: 8px;
  letter-spacing: -0.5px;
}

.login-subtitle {
  font-size: 15px;
  color: var(--color-text-secondary);
}

.login-options {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.login-btn {
  display: flex;
  align-items: center;
  gap: 16px;
  width: 100%;
  padding: 20px 24px;
  border: 1px solid var(--color-border);
  border-radius: 16px;
  background: var(--color-bg-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
}

.login-btn:hover {
  background: var(--color-bg-tertiary);
  border-color: var(--color-primary);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
}

.login-btn-icon {
  font-size: 28px;
  flex-shrink: 0;
}

.login-btn-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.login-btn-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.login-btn-desc {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.login-btn--demo:hover {
  border-color: var(--color-success);
}

.login-btn--private:hover {
  border-color: var(--color-primary);
}

.login-btn--google {
  background: white;
  border-color: rgba(0, 0, 0, 0.1);
}

.login-btn--google:hover {
  background: #f8f9fa;
  border-color: rgba(0, 0, 0, 0.2);
}

.login-btn--google .login-btn-title {
  color: #3c4043;
}

.login-btn--google .login-btn-icon {
  display: flex;
  align-items: center;
  justify-content: center;
}

.login-btn--email:hover,
.login-btn--signup:hover {
  border-color: var(--color-primary);
}

.login-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.login-divider {
  display: flex;
  align-items: center;
  gap: 16px;
  margin: 8px 0;
}

.login-divider::before,
.login-divider::after {
  content: "";
  flex: 1;
  height: 1px;
  background: var(--color-border);
}

.login-divider span {
  font-size: 13px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.login-form {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.login-back {
  background: none;
  border: none;
  color: var(--color-text-secondary);
  font-size: 14px;
  cursor: pointer;
  padding: 0;
  text-align: left;
  transition: color 0.2s;
}

.login-back:hover {
  color: var(--color-text);
}

.login-form-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.login-form-group label {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.login-form-group input {
  padding: 14px 16px;
  border: 1px solid var(--color-border);
  border-radius: 12px;
  background: var(--color-bg-secondary);
  color: var(--color-text);
  font-size: 16px;
  transition: all 0.2s;
}

.login-form-group input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
}

.login-form-group input::placeholder {
  color: var(--color-text-tertiary);
}

.login-error {
  padding: 12px 16px;
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.3);
  border-radius: 8px;
  color: #ef4444;
  font-size: 14px;
}

.login-submit {
  padding: 14px 24px;
  background: var(--color-primary);
  border: none;
  border-radius: 12px;
  color: white;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.login-submit:hover:not(:disabled) {
  background: var(--color-primary-hover);
  transform: translateY(-1px);
}

.login-submit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.login-form-title {
  font-size: 24px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
  text-align: center;
}

.login-form-description {
  font-size: 14px;
  color: var(--color-text-secondary);
  text-align: center;
  margin: 0 0 16px 0;
  line-height: 1.5;
}

.login-link {
  background: none;
  border: none;
  color: var(--color-primary);
  font-size: 14px;
  cursor: pointer;
  padding: 0;
  text-align: center;
  transition: color 0.2s;
  text-decoration: underline;
  text-underline-offset: 2px;
}

.login-link:hover {
  color: var(--color-primary-hover);
}

.login-link:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.login-switch {
  font-size: 14px;
  color: var(--color-text-secondary);
  text-align: center;
  margin-top: 8px;
}

.login-link-inline {
  background: none;
  border: none;
  color: var(--color-primary);
  font-size: 14px;
  cursor: pointer;
  padding: 0;
  font-weight: 600;
  transition: color 0.2s;
}

.login-link-inline:hover {
  color: var(--color-primary-hover);
  text-decoration: underline;
}

.login-link-inline:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.login-success {
  text-align: center;
  padding: 24px 0;
}

.login-success p {
  margin: 0 0 12px 0;
  font-size: 16px;
  color: var(--color-text);
  font-weight: 500;
}

.login-success-hint {
  font-size: 14px !important;
  color: var(--color-text-secondary) !important;
  font-weight: 400 !important;
  margin-bottom: 24px !important;
}

.login-footer {
  margin-top: 32px;
  text-align: center;
}

.login-footer p {
  font-size: 13px;
  color: var(--color-text-tertiary);
}

/* Demo mode banner */
.demo-banner {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(90deg, var(--color-warning), #e5a83d);
  color: #1a1a2e;
  padding: 10px 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  font-size: 14px;
  font-weight: 500;
  z-index: 1000;
}

.demo-banner-logout {
  padding: 6px 16px;
  background: rgba(0, 0, 0, 0.2);
  border: none;
  border-radius: 6px;
  color: inherit;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}

.demo-banner-logout:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* ========== App Container ========== */
.app-container {
  display: flex;
  height: 100vh;
  width: 100%;
}

/* ========== Sidebar ========== */
.sidebar {
  width: 80px;
  background: var(--color-black);
  border-right: 1px solid var(--color-gray-900);
  display: flex;
  flex-direction: column;
  position: fixed;
  height: 100vh;
  left: 0;
  top: 0;
  z-index: 100;
  align-items: center;
  padding: 20px 0;
}

.sidebar-header {
  padding: 0;
  border-bottom: none;
  margin-bottom: 32px;
}

.logo {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0;
  padding: 0;
  border-radius: 0;
  transition: none;
}

.logo:hover {
  background: transparent;
}

.logo svg {
  flex-shrink: 0;
  width: 40px;
  height: 40px;
}

.logo-text {
  display: none;
}

.sidebar-nav {
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 12px;
  width: 100%;
  align-items: center;
}

.nav-item {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0;
  padding: 0;
  background: linear-gradient(145deg, var(--color-surface) 0%, rgba(0, 0, 0, 0.2) 100%);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  color: rgba(255, 255, 255, 0.6);
  font-size: 24px;
  font-weight: 400;
  text-align: center;
  width: 48px;
  height: 48px;
  position: relative;
  /* Soft 3D raised effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.15),
    0 4px 8px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.nav-item:hover {
  background: linear-gradient(145deg, rgba(115, 165, 140, 0.15) 0%, var(--color-surface) 100%);
  border-color: rgba(115, 165, 140, 0.3);
  color: rgba(255, 255, 255, 0.95);
  transform: translateY(-2px) scale(1.05);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.2),
    0 8px 16px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

.nav-item:active {
  transform: translateY(0) scale(0.98);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.nav-item--active {
  background: linear-gradient(145deg, var(--looops-navy) 0%, rgba(26, 26, 46, 0.9) 100%);
  border-color: rgba(242, 112, 89, 0.4);
  color: #ffffff;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.2),
    0 4px 8px rgba(0, 0, 0, 0.15),
    0 0 12px rgba(242, 112, 89, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.nav-item--active::before {
  content: '';
  position: absolute;
  left: -20px;
  width: 4px;
  height: 24px;
  background: linear-gradient(180deg, var(--looops-coral) 0%, var(--looops-amber) 100%);
  border-radius: 0 4px 4px 0;
  box-shadow: 0 0 8px rgba(242, 112, 89, 0.4);
}

.nav-icon {
  font-size: 24px;
  flex-shrink: 0;
  line-height: 1;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.nav-icon svg {
  width: 100%;
  height: 100%;
}

.nav-label {
  display: none;
}

/* ========== Sidebar Footer & Theme Toggle ========== */
.sidebar-footer {
  margin-top: auto;
  padding: 20px 0;
  display: flex;
  justify-content: center;
}

.theme-toggle {
  width: 40px;
  height: 40px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: linear-gradient(145deg, var(--color-surface) 0%, rgba(0, 0, 0, 0.2) 100%);
  color: var(--color-text-secondary);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px;
  /* Soft 3D raised effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.15),
    0 4px 8px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.theme-toggle:hover {
  background: linear-gradient(145deg, rgba(244, 185, 66, 0.15) 0%, var(--color-surface) 100%);
  border-color: rgba(244, 185, 66, 0.3);
  color: var(--looops-amber);
  transform: translateY(-2px) scale(1.05);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.2),
    0 8px 16px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

.theme-toggle:active {
  transform: translateY(0) scale(0.98);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.theme-toggle svg {
  width: 100%;
  height: 100%;
}

/* ========== Main Content ========== */
.app-main {
  flex: 1;
  margin-left: 80px;
  padding: 32px 40px;
  max-width: 100%;
  background: var(--color-bg-secondary);
  overflow-y: auto;
}


/* ========== Screen Layout ========== */
.screen {
  animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Loops screen - scrollable to access dashboards below */
.loops-screen {
  min-height: 100%;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
}

.loops-screen .screen-header {
  flex-shrink: 0;
  padding: 16px 24px;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  border-bottom: 1px solid var(--color-border);
  gap: 16px;
}

.loops-screen .screen-header h2 {
  margin: 0;
  font-size: 20px;
}

.screen-header-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.screen-header-content h2 {
  margin: 0;
}

/* Generic screen description styling */
.screen-description {
  font-size: 14px;
  color: var(--color-gray-400);
  margin: 0;
  font-weight: 400;
  line-height: 1.4;
}

.loops-screen .loops-viz-container {
  flex-shrink: 0;
  min-height: 500px;
  max-height: 600px;
}

/* Loop Cards Grid - Navigation cards below visualization */
.loop-cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
  padding: 24px;
  background: linear-gradient(180deg, var(--color-bg) 0%, var(--color-bg-secondary) 100%);
  border-top: 1px solid var(--color-border);
  overflow-y: auto;
  max-height: 320px;
}

.loop-nav-card {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 18px 20px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  text-align: left;
  width: 100%;
  /* Soft 3D raised effect - multiple layered shadows */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 8px 16px rgba(0, 0, 0, 0.06),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.loop-nav-card:hover {
  background: linear-gradient(145deg, var(--loop-bg) 0%, var(--color-surface) 100%);
  border-color: var(--loop-color);
  transform: translateY(-4px) scale(1.02);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.12),
    0 8px 16px rgba(0, 0, 0, 0.1),
    0 16px 32px rgba(0, 0, 0, 0.08),
    0 0 0 1px var(--loop-color),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.loop-nav-card:active {
  transform: translateY(-1px) scale(0.99);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.1),
    0 2px 4px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.loop-nav-card__icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 52px;
  height: 52px;
  font-size: 26px;
  flex-shrink: 0;
  /* Icon gets its own raised block effect */
  background: linear-gradient(145deg, var(--loop-bg) 0%, rgba(0,0,0,0.1) 100%);
  border-radius: 14px;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.15),
    0 4px 8px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.05);
  border: 1px solid var(--loop-color);
}

.loop-nav-card__content {
  flex: 1;
  min-width: 0;
}

.loop-nav-card__name {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 4px 0;
}

.loop-nav-card__state {
  display: inline-block;
  font-size: 10px;
  font-weight: 500;
  padding: 2px 8px;
  border-radius: 10px;
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.loop-nav-card__stats {
  display: flex;
  flex-direction: column;
  gap: 2px;
  align-items: flex-end;
}

.loop-nav-card__stat {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.loop-nav-card__arrow {
  font-size: 18px;
  color: var(--color-text-tertiary);
  margin-left: 8px;
}

.loop-nav-card:hover .loop-nav-card__arrow {
  color: var(--loop-color);
}

/* Loop Card View Dashboard Button */
.loop-card__view-btn {
  margin-top: 12px;
  padding: 8px 12px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 12px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
  width: 100%;
}

.loop-card__view-btn:hover {
  border-color: var(--looops-coral);
  color: var(--looops-coral);
}

/* ========== Loops List View ========== */
.loops-list-view {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 0 16px 16px;
}

.loops-list-section {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  border: 1px solid var(--color-border);
  overflow: hidden;
}

.loops-list-section.expanded {
  border-color: var(--loop-color);
}

.loops-list-header {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: transparent;
  border: none;
  cursor: pointer;
  text-align: left;
  transition: background-color 0.15s ease;
}

.loops-list-header:hover {
  background: var(--color-bg-tertiary);
}

.loops-list-header__left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.loops-list-header__right {
  display: flex;
  align-items: center;
  gap: 12px;
}

.loops-list-chevron {
  font-size: 18px;
  color: var(--color-text-tertiary);
  transition: transform 0.2s ease;
  width: 16px;
}

.loops-list-chevron.expanded {
  transform: rotate(90deg);
}

.loops-list-icon {
  font-size: 20px;
}

.loops-list-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text-primary);
}

.loops-list-state {
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.loops-list-badge {
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
}

.loops-list-badge.overdue {
  background: rgba(242, 112, 89, 0.2);
  color: var(--looops-coral);
}

.loops-list-badge.today {
  background: rgba(244, 185, 66, 0.2);
  color: var(--looops-amber);
}

.loops-list-count {
  font-size: 13px;
  color: var(--color-text-tertiary);
}

.loops-list-content {
  padding: 0 16px 16px;
  border-top: 1px solid var(--color-border);
}

.loops-list-empty {
  padding: 24px;
  text-align: center;
  color: var(--color-text-tertiary);
  font-size: 13px;
}

.loops-list-dashboard {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px dashed var(--color-border);
}

.loops-list-stats {
  display: flex;
  gap: 16px;
}

.loops-list-stat {
  font-size: 12px;
  color: var(--color-text-secondary);
}

.loops-list-dashboard-link {
  background: transparent;
  border: none;
  font-size: 12px;
  color: var(--loop-color, var(--looops-coral));
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: background-color 0.15s ease;
}

.loops-list-dashboard-link:hover {
  background: var(--loop-bg, rgba(242, 112, 89, 0.1));
}

/* Back button for dashboards */
.back-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  background: linear-gradient(145deg, var(--color-surface) 0%, rgba(0, 0, 0, 0.15) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 10px;
  font-size: 18px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  margin-right: 12px;
  /* Soft 3D raised effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.12),
    0 4px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.back-btn:hover {
  background: linear-gradient(145deg, rgba(242, 112, 89, 0.15) 0%, var(--color-surface) 100%);
  border-color: rgba(242, 112, 89, 0.4);
  color: var(--looops-coral);
  transform: translateY(-2px) scale(1.05);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.15),
    0 8px 16px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

.back-btn:active {
  transform: translateY(0) scale(0.98);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

@media (max-width: 768px) {
  .loop-cards-grid {
    grid-template-columns: 1fr;
    max-height: none;
    padding: 16px;
    gap: 12px;
  }

  .loop-nav-card {
    padding: 14px 16px;
  }

  .loop-nav-card__icon {
    width: 44px;
    height: 44px;
    font-size: 22px;
    border-radius: 12px;
  }

  .loop-nav-card__stats {
    display: none;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.screen h2 {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 24px;
  color: var(--color-text);
  letter-spacing: -0.02em;
  line-height: 1.2;
}

.screen h3 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 16px;
  margin-top: 32px;
  color: var(--color-text);
}

.screen-section {
  margin-bottom: var(--spacing-2xl);
}

.placeholder-text {
  color: var(--color-text-tertiary);
  font-size: 14px;
  padding: 40px;
  text-align: center;
  background: transparent;
  border-radius: 3px;
  border: none;
}

/* ========== Today Screen Grid ========== */
.today-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-bottom: 32px;
}

.today-panel {
  background: var(--color-surface);
  border-radius: 16px;
  padding: 24px;
  box-shadow: var(--shadow-md);
  border: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  min-height: 500px;
}

.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--color-border);
}

.panel-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.panel-date {
  font-size: 13px;
  color: var(--color-gray-600);
  font-weight: 500;
}

.task-count {
  font-size: 13px;
  color: var(--color-text-secondary);
  background: var(--color-gray-800);
  padding: 4px 12px;
  border-radius: 12px;
  font-weight: 500;
}

/* ========== Calendar Panel ========== */
.calendar-events {
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow-y: auto;
}

.calendar-event {
  display: flex;
  gap: 16px;
  padding: 12px 16px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  border-left: 3px solid var(--color-accent);
  transition: all 0.2s ease;
  border: 1px solid var(--color-border);
  border-left-width: 3px;
}

.calendar-event:hover {
  background: var(--color-surface-hover);
  border-left-color: var(--color-accent-light);
  transform: translateX(4px);
}

.event-time {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  min-width: 70px;
}

.event-details {
  flex: 1;
}

.event-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 2px;
}

.event-duration {
  font-size: 12px;
  color: var(--color-gray-600);
}

/* ========== Todo Panel ========== */
.add-todo-btn {
  width: 100%;
  padding: 12px 16px;
  border: 2px dashed var(--color-border);
  background: transparent;
  color: var(--color-text-secondary);
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-bottom: 16px;
  text-align: left;
}

.add-todo-btn:hover {
  border-color: var(--color-accent);
  background: var(--color-accent-subtle);
  color: var(--color-accent-light);
}

.todo-form {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 16px;
}

.todo-form-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 8px;
  margin-top: 8px;
}

.todo-input-small {
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 13px;
  font-family: inherit;
  background: var(--color-surface);
  color: var(--color-text);
}

.todo-select {
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 13px;
  font-family: inherit;
  background: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
}

.todo-form-actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.btn-todo-add {
  padding: 8px 16px;
  background: var(--color-accent);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-todo-add:hover {
  background: var(--color-accent-light);
  box-shadow: var(--shadow-glow-sm);
}

.btn-todo-cancel {
  padding: 8px 16px;
  background: transparent;
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-todo-cancel:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.todo-input-wrapper {
  margin-bottom: 16px;
}

.todo-input {
  width: 100%;
  padding: 12px 16px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 14px;
  font-family: inherit;
  transition: all 0.2s ease;
  background: var(--color-surface);
  color: var(--color-text);
}

.todo-input:focus {
  outline: none;
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px var(--color-accent-glow);
}

.todo-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow-y: auto;
}

.todo-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 12px 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  transition: all 0.2s ease;
  border: 1px solid var(--color-border-light);
  border-left-width: 3px;
  position: relative;
}

.todo-item:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border);
}

.todo-item:hover .todo-delete {
  opacity: 1;
}

.todo-item.completed {
  opacity: 0.5;
}

.todo-item.completed .todo-text {
  text-decoration: line-through;
  color: var(--color-gray-500);
}

.todo-priority-indicator {
  width: 3px;
  height: 100%;
  position: absolute;
  left: -1px;
  top: 0;
  border-radius: 8px 0 0 8px;
}

.todo-checkbox {
  width: 18px;
  height: 18px;
  cursor: pointer;
  accent-color: var(--color-accent);
  border-radius: 4px;
  margin-top: 2px;
  flex-shrink: 0;
}

.todo-content-wrapper {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
}

.todo-text {
  font-size: 14px;
  color: var(--color-text);
  font-weight: 500;
  line-height: 1.4;
}

.todo-meta {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  align-items: center;
}

.todo-project {
  font-size: 10px;
  color: var(--color-text-secondary);
  background: var(--color-gray-800);
  padding: 3px 8px;
  border-radius: 4px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.todo-due-date {
  font-size: 11px;
  color: var(--color-gray-600);
  display: flex;
  align-items: center;
  gap: 4px;
}

.todo-due-date::before {
  content: 'ðŸ“…';
  font-size: 10px;
}

.todo-label {
  font-size: 10px;
  color: var(--color-accent);
  background: var(--color-accent-subtle);
  padding: 3px 8px;
  border-radius: 4px;
  font-weight: 600;
}

.todo-delete {
  width: 24px;
  height: 24px;
  border: none;
  background: transparent;
  color: var(--color-gray-500);
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
  border-radius: 4px;
  opacity: 0;
  transition: all 0.2s ease;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: -2px;
}

.todo-delete:hover {
  background: rgba(239, 68, 68, 0.2);
  color: var(--color-error);
}

/* ========== Notes Panel ========== */
.add-note-btn {
  background: var(--color-accent);
  color: white;
  border: none;
  padding: 6px 16px;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.add-note-btn:hover {
  background: var(--color-accent-light);
  box-shadow: var(--shadow-glow);
  transform: translateY(-1px);
}

.note-input-card {
  background: var(--color-bg-secondary);
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 16px;
  border: 1px solid var(--color-border);
}

.note-title-input {
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: transparent;
  font-size: 15px;
  font-weight: 600;
  font-family: inherit;
  margin-bottom: 8px;
  color: var(--color-text);
}

.note-title-input:focus {
  outline: none;
}

.note-content-input {
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: transparent;
  font-size: 14px;
  font-family: inherit;
  resize: vertical;
  margin-bottom: 12px;
  color: var(--color-text);
}

.note-content-input:focus {
  outline: none;
}

.note-input-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.btn-note-action {
  padding: 6px 14px;
  border: none;
  background: var(--color-accent);
  color: white;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-note-action:hover {
  background: var(--color-accent-light);
  box-shadow: var(--shadow-glow-sm);
}

.btn-note-action:last-child {
  background: transparent;
  color: var(--color-text-secondary);
}

.btn-note-action:last-child:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.notes-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
  overflow-y: auto;
}

.note-card {
  padding: 16px;
  border-radius: 8px;
  border: 1px solid var(--color-border);
  transition: all 0.2s ease;
  cursor: pointer;
  position: relative;
  background: var(--color-bg-secondary);
}

.note-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  transform: translateY(-2px);
  border-color: var(--color-accent);
}

.note-pin {
  position: absolute;
  top: 12px;
  right: 12px;
  font-size: 14px;
  color: var(--color-accent);
}

.note-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.note-content {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0;
  line-height: 1.5;
  word-wrap: break-word;
}

.challenge-section {
  margin-top: 32px;
}

@media (max-width: 1200px) {
  .today-grid {
    grid-template-columns: 1fr;
  }

  .today-panel {
    min-height: 400px;
  }
}

/* ========== Card ========== */
.card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 16px;
  transition: all 0.3s ease;
  box-shadow: var(--shadow-sm);
}

.card:hover {
  box-shadow: var(--shadow-md);
  border-color: var(--color-accent);
  transform: translateY(-2px);
}

/* ========== Challenge Card ========== */
.challenge-card {
  cursor: pointer;
  position: relative;
  overflow: hidden;
  border-radius: 20px;
}

.challenge-card--primary {
  background: var(--color-surface);
  border: 2px solid var(--color-accent);
  color: white;
}

.challenge-card--primary:hover {
  box-shadow: var(--shadow-glow);
  transform: translateY(-4px);
  border-color: var(--color-accent-light);
}

.challenge-card__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
  gap: 12px;
}

.challenge-card__header h3 {
  font-size: 20px;
  font-weight: 700;
  margin: 0;
  line-height: 1.3;
  color: white;
}

.challenge-card__loop {
  background: var(--color-accent);
  color: white;
  padding: 6px 14px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  white-space: nowrap;
  flex-shrink: 0;
  border: none;
}

.challenge-card__description {
  color: rgba(255, 255, 255, 0.9);
  font-size: 14px;
  line-height: 1.6;
  margin-bottom: 16px;
}

.challenge-card__footer {
  display: flex;
  gap: 16px;
  font-size: 13px;
  color: rgba(255, 255, 255, 0.8);
  flex-wrap: wrap;
}

.challenge-card__duration,
.challenge-card__difficulty {
  background: transparent;
  padding: 0;
  border-radius: 0;
  font-weight: 500;
}

/* ========== Task List ========== */
.task-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.task-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 20px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  transition: all 0.2s ease;
  cursor: pointer;
  min-height: auto;
  box-shadow: var(--shadow-sm);
}

.task-row:hover {
  box-shadow: var(--shadow-md);
  border-color: var(--color-accent);
  transform: translateY(-2px);
}

.task-row--compact {
  padding: 12px 16px;
  gap: 10px;
}

.task-row__checkbox {
  width: 20px;
  height: 20px;
  cursor: pointer;
  flex-shrink: 0;
  margin: 0;
  accent-color: var(--color-primary);
  border-radius: 4px;
}

.task-row__content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.task-row__title {
  font-size: 15px;
  font-weight: 500;
  color: var(--color-text);
  line-height: 1.4;
}

.task-row__description {
  font-size: 13px;
  color: var(--color-text-secondary);
  line-height: 1.4;
}

.task-row__meta {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-shrink: 0;
  flex-wrap: wrap;
}

.task-row__loop {
  background: var(--color-accent-subtle);
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-accent);
}

.task-row__due {
  font-size: 12px;
  color: var(--color-text-secondary);
  font-weight: 400;
}

/* ========== Loop Card ========== */
.loop-list {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.loop-card {
  padding: 24px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  box-shadow: var(--shadow-sm);
  transition: all 0.3s ease;
}

.loop-card:hover {
  box-shadow: var(--shadow-md);
  border-color: var(--color-accent);
}

.loop-card__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--color-border);
}

.loop-card__header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.loop-card__focus {
  background: var(--color-black);
  color: white;
  padding: 6px 14px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  border: 1px solid var(--color-gray-700);
}

.loop-card__columns {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
}

/* ========== Loop Column ========== */
.loop-column {
  background: var(--color-bg-secondary);
  padding: 16px;
  border-radius: 12px;
  min-height: 200px;
  border: 1px solid var(--color-border);
}

.loop-column__title {
  font-size: 12px;
  font-weight: 700;
  margin-bottom: 12px;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.loop-column__empty {
  font-size: 13px;
  color: var(--color-text-tertiary);
  text-align: center;
  padding: 32px 0;
}

.loop-column__list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* ========== Challenge List ========== */
.challenge-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

/* ========== Profile Screen ========== */
.profile-section {
  margin-bottom: 24px;
  padding: 24px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  box-shadow: var(--shadow-sm);
}

.profile-section h3 {
  margin-bottom: 16px;
  font-size: 18px;
  font-weight: 700;
}

.season-badge {
  display: inline-block;
  background: var(--color-surface);
  color: var(--color-text);
  padding: 10px 20px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  box-shadow: var(--shadow-sm);
  border: 2px solid var(--color-accent);
}

/* ========== Archetype List ========== */
.archetype-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.archetype-item {
  display: grid;
  grid-template-columns: 120px 1fr 60px;
  align-items: center;
  gap: 16px;
}

.archetype-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
}

.archetype-bar {
  height: 10px;
  background: var(--color-gray-800);
  border-radius: 10px;
  overflow: hidden;
}

.archetype-bar__fill {
  height: 100%;
  background: var(--color-accent);
  transition: width 0.5s ease;
  border-radius: 10px;
}

.archetype-score {
  text-align: right;
  font-size: 14px;
  font-weight: 700;
  color: var(--color-text);
}

/* ========== Inspiration List ========== */
.inspiration-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.inspiration-item {
  background: transparent;
  padding: 4px 8px;
  border-radius: 3px;
  border: none;
  font-size: 14px;
  font-weight: 400;
  transition: background 20ms ease-in;
  color: var(--color-text);
}

.inspiration-item:hover {
  background: var(--color-surface-hover);
}

/* ========== Modal ========== */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--looops-navy);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  padding: var(--spacing-lg);
}

.modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  max-width: 600px;
  width: 100%;
  max-height: 85vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.modal__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-xl);
  border-bottom: 1px solid var(--color-border);
  flex-shrink: 0;
}

.modal__header h2 {
  margin: 0;
  font-size: 24px;
  font-weight: 700;
  letter-spacing: -0.01em;
}

.modal__header-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.theme-toggle-btn {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text-secondary);
  cursor: pointer;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: all 0.15s ease;
}

.theme-toggle-btn:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
  border-color: var(--color-gray-500);
}

.theme-toggle-btn svg {
  width: 18px;
  height: 18px;
}

.modal__close {
  background: transparent;
  border: none;
  font-size: 24px;
  color: var(--color-text-secondary);
  cursor: pointer;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: all 0.15s ease;
  line-height: 1;
}

.modal__close:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.modal__body {
  padding: var(--spacing-xl);
  overflow-y: auto;
  flex: 1;
}

.modal__description {
  margin-bottom: var(--spacing-xl);
  font-size: 15px;
  line-height: 1.6;
  color: var(--color-text);
}

.modal__meta {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  background: var(--color-bg-secondary);
  padding: var(--spacing-lg);
  border-radius: var(--radius);
}

.modal__meta p {
  font-size: 14px;
  color: var(--color-text-secondary);
  line-height: 1.6;
}

.modal__meta strong {
  color: var(--color-text);
  font-weight: 600;
}

.modal__footer {
  padding: var(--spacing-xl);
  border-top: 1px solid var(--color-border);
  display: flex;
  gap: var(--spacing-md);
  justify-content: flex-end;
  flex-shrink: 0;
  background: var(--color-bg-secondary);
}

/* ========== Button ========== */
.button {
  padding: 10px 20px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: linear-gradient(145deg, var(--color-surface) 0%, rgba(0, 0, 0, 0.15) 100%);
  color: var(--color-text);
  font-size: 14px;
  font-weight: 600;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  font-family: inherit;
  /* Soft 3D raised effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.12),
    0 4px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.button:hover {
  background: linear-gradient(145deg, var(--color-surface-hover) 0%, var(--color-surface) 100%);
  border-color: rgba(115, 165, 140, 0.3);
  transform: translateY(-2px) scale(1.02);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.15),
    0 8px 16px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

.button:active {
  transform: translateY(0) scale(0.98);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.button--primary {
  background: linear-gradient(145deg, var(--color-accent) 0%, rgba(242, 112, 89, 0.85) 100%);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.15);
  box-shadow:
    0 2px 4px rgba(242, 112, 89, 0.25),
    0 4px 8px rgba(242, 112, 89, 0.15),
    0 0 16px rgba(242, 112, 89, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.button--primary:hover {
  background: linear-gradient(145deg, var(--color-accent-light) 0%, var(--color-accent) 100%);
  transform: translateY(-3px) scale(1.02);
  box-shadow:
    0 4px 8px rgba(242, 112, 89, 0.3),
    0 8px 16px rgba(242, 112, 89, 0.2),
    0 0 24px rgba(242, 112, 89, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.button--primary:active {
  transform: translateY(-1px) scale(0.99);
  box-shadow:
    0 1px 2px rgba(242, 112, 89, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.button--text {
  background: transparent;
  border: none;
  color: var(--color-text-secondary);
  padding: 8px 16px;
  font-size: 14px;
  cursor: pointer;
  transition: color 0.2s;
}

.button--text:hover {
  color: var(--color-text);
}

/* ========== Profile Grid ========== */
.profile-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 24px;
}

.profile-field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.profile-label {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-gray-700);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.profile-value {
  font-size: 15px;
  color: var(--color-text);
  font-weight: 500;
  margin: 0;
}

.profile-input,
.profile-select {
  padding: 10px 14px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 14px;
  font-family: inherit;
  transition: all 0.2s ease;
  background: var(--color-surface);
  color: var(--color-text);
}

.profile-input:focus,
.profile-select:focus {
  outline: none;
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px var(--color-accent-glow);
}

.profile-input-small {
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 14px;
  font-family: inherit;
  flex: 1;
  background: var(--color-surface);
  color: var(--color-text);
}

.profile-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin: 0;
  padding: 0;
}

.profile-list-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  font-size: 14px;
  color: var(--color-gray-800);
  line-height: 1.6;
}

.profile-bullet {
  color: var(--color-accent);
  font-weight: bold;
  font-size: 18px;
  line-height: 1.4;
}

/* ========== Loop Focus Editor ========== */
.loop-focus-editor {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.loop-focus-item {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.loop-focus-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.loop-focus-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.loop-focus-value {
  font-size: 14px;
  font-weight: 700;
  color: var(--color-accent);
}

.loop-focus-slider {
  width: 100%;
  height: 6px;
  border-radius: 3px;
  background: var(--color-gray-700);
  outline: none;
  -webkit-appearance: none;
  appearance: none;
  cursor: pointer;
}

.loop-focus-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--color-accent);
  cursor: pointer;
  box-shadow: var(--shadow-glow-sm);
  transition: all 0.2s ease;
}

.loop-focus-slider::-webkit-slider-thumb:hover {
  background: var(--color-accent-light);
  transform: scale(1.1);
}

.loop-focus-slider::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--color-accent);
  cursor: pointer;
  border: none;
  box-shadow: var(--shadow-glow-sm);
  transition: all 0.2s ease;
}

.loop-focus-slider::-moz-range-thumb:hover {
  background: var(--color-accent-light);
  transform: scale(1.1);
}

.loop-focus-bar {
  height: 8px;
  background: var(--color-gray-200);
  border-radius: 4px;
  overflow: hidden;
}

.loop-focus-bar-fill {
  height: 100%;
  background: var(--color-black);
  transition: width 0.3s ease;
  border-radius: 4px;
}

.loop-focus-total {
  padding: 12px 16px;
  background: var(--color-gray-100);
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  text-align: center;
}

.text-success {
  color: var(--color-black);
  font-weight: 700;
}

.text-error {
  color: var(--color-red);
  font-weight: 700;
}

/* ========== Onboarding Modal ========== */
.modal-onboarding {
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
}

.onboarding-progress {
  margin-bottom: 32px;
}

.onboarding-progress-bar {
  height: 6px;
  background: var(--color-gray-200);
  border-radius: 3px;
  overflow: hidden;
  margin-bottom: 8px;
}

.onboarding-progress-fill {
  height: 100%;
  background: var(--color-red);
  transition: width 0.3s ease;
  border-radius: 3px;
}

.onboarding-progress-text {
  font-size: 12px;
  color: var(--color-gray-600);
  font-weight: 600;
}

.onboarding-step {
  display: flex;
  flex-direction: column;
  gap: 24px;
  animation: fadeInUp 0.3s ease;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.onboarding-title {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-black);
  margin: 0;
  line-height: 1.2;
}

.onboarding-description {
  font-size: 15px;
  color: var(--color-gray-600);
  line-height: 1.6;
  margin: -12px 0 0 0;
}

.onboarding-field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.onboarding-label {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-black);
  display: flex;
  align-items: baseline;
  gap: 8px;
  flex-wrap: wrap;
}

.onboarding-label-hint {
  font-size: 12px;
  font-weight: 400;
  color: var(--color-text-secondary);
}

.onboarding-input--nested {
  margin-top: 12px;
}

.onboarding-input,
.onboarding-select {
  padding: 12px 16px;
  border: 2px solid var(--color-gray-300);
  border-radius: 8px;
  font-size: 14px;
  font-family: inherit;
  transition: all 0.2s ease;
  background: var(--color-white);
}

.onboarding-input:focus,
.onboarding-select:focus {
  outline: none;
  border-color: var(--color-red);
  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
}

.onboarding-textarea {
  padding: 12px 16px;
  border: 2px solid var(--color-gray-300);
  border-radius: 8px;
  font-size: 14px;
  font-family: inherit;
  resize: vertical;
  transition: all 0.2s ease;
  background: var(--color-white);
  line-height: 1.6;
}

.onboarding-textarea:focus {
  outline: none;
  border-color: var(--color-red);
  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
}

.onboarding-radio-group {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.onboarding-radio {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  border: 2px solid var(--color-gray-300);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  background: var(--color-white);
}

.onboarding-radio:hover {
  border-color: var(--color-gray-400);
  background: var(--color-gray-100);
}

.onboarding-radio input[type="radio"] {
  margin-top: 2px;
  width: 18px;
  height: 18px;
  cursor: pointer;
  accent-color: var(--color-red);
  flex-shrink: 0;
}

.onboarding-radio input[type="radio"]:checked ~ .onboarding-radio-content {
  color: var(--color-black);
}

.onboarding-radio:has(input:checked) {
  border-color: var(--color-red);
  background: var(--color-red-light);
}

.onboarding-radio-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
}

.onboarding-radio-content strong {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-black);
}

.onboarding-radio-content span {
  font-size: 13px;
  color: var(--color-gray-600);
}

.onboarding-checkbox-group {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.onboarding-checkbox {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  border: 2px solid var(--color-gray-300);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  background: var(--color-white);
}

.onboarding-checkbox:hover {
  border-color: var(--color-gray-400);
  background: var(--color-gray-100);
}

.onboarding-checkbox input[type="checkbox"] {
  margin-top: 2px;
  width: 18px;
  height: 18px;
  cursor: pointer;
  accent-color: var(--color-red);
  flex-shrink: 0;
}

.onboarding-checkbox:has(input:checked),
.onboarding-checkbox--selected {
  border-color: var(--color-red);
  background: var(--color-red-light);
}

.onboarding-checkbox input:disabled + .onboarding-checkbox-content {
  opacity: 0.5;
}

.onboarding-checkbox-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
}

.onboarding-checkbox-content strong {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-black);
}

.onboarding-checkbox-content span {
  font-size: 12px;
  color: var(--color-gray-600);
  line-height: 1.4;
}

/* ========== Trait Assessment Section ========== */
.trait-assessment-section {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.trait-assessment-section__progress {
  display: flex;
  align-items: center;
  gap: 12px;
}

.trait-assessment-section__progress-bar {
  flex: 1;
  height: 6px;
  background: var(--color-border);
  border-radius: 3px;
  overflow: hidden;
}

.trait-assessment-section__progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--looops-coral), var(--looops-sage));
  border-radius: 3px;
  transition: width 0.3s ease;
}

.trait-assessment-section__progress-text {
  font-size: 12px;
  color: var(--color-text-secondary);
  white-space: nowrap;
}

.trait-assessment-section__framing {
  padding: 12px 16px;
  background: var(--looops-amber-subtle);
  border: 1px solid var(--looops-amber);
  border-radius: var(--radius);
  font-size: 14px;
  color: var(--color-text);
  text-align: center;
}

.trait-assessment-section__framing strong {
  color: var(--looops-amber);
}

.trait-assessment-section__header {
  text-align: center;
}

.trait-assessment-section__header h3 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 4px;
}

.trait-assessment-section__subtitle {
  font-size: 14px;
  color: var(--color-text-secondary);
  margin: 0;
}

.trait-assessment-section__dots {
  display: flex;
  justify-content: center;
  gap: 8px;
}

.trait-assessment-section__dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--color-border);
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
}

.trait-assessment-section__dot:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.trait-assessment-section__dot--active {
  background: var(--looops-coral);
  transform: scale(1.2);
}

.trait-assessment-section__dot--completed {
  background: var(--looops-sage);
}

.trait-assessment-section__statements {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.trait-assessment-section__clarifications {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.trait-assessment-section__nav {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  margin-top: 8px;
}

/* ========== Trait Statement Pair ========== */
.trait-statement-pair {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 20px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
}

.trait-statement-pair__divider {
  height: 1px;
  background: var(--color-border);
}

.trait-statement {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.trait-statement__text {
  font-size: 15px;
  line-height: 1.5;
  color: var(--color-text);
  margin: 0;
}

.trait-statement__ratings {
  display: flex;
  justify-content: space-between;
  gap: 8px;
}

.trait-rating-btn {
  position: relative;
  flex: 1;
  height: 48px;
  min-width: 48px;
  max-width: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text-secondary);
  background: var(--color-bg-secondary);
  border: 2px solid var(--color-border);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.15s ease;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

.trait-rating-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-gray-500);
  color: var(--color-text);
}

.trait-rating-btn--selected {
  background: var(--looops-coral);
  border-color: var(--looops-coral);
  color: white;
}

.trait-rating-btn--selected:hover {
  background: var(--looops-coral-light);
  border-color: var(--looops-coral-light);
}

.trait-rating-input {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
  pointer-events: none;
}

.trait-statement__scale-labels {
  display: flex;
  justify-content: space-between;
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* ========== Traits Completed Banner ========== */
.traits-completed-banner {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--looops-sage-subtle);
  border: 1px solid var(--looops-sage);
  border-radius: var(--radius);
}

.traits-completed-icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--looops-sage);
  color: white;
  border-radius: 50%;
  font-size: 14px;
  font-weight: 600;
}

.traits-completed-banner span:not(.traits-completed-icon) {
  flex: 1;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
}

.traits-edit-btn {
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 500;
  color: var(--looops-sage);
  background: transparent;
  border: 1px solid var(--looops-sage);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 0.15s ease;
}

.traits-edit-btn:hover {
  background: var(--looops-sage);
  color: white;
}

/* Light theme overrides for trait assessment */
[data-theme="light"] .trait-assessment-section__framing {
  background: rgba(244, 185, 66, 0.1);
  border-color: var(--looops-amber);
}

[data-theme="light"] .trait-statement-pair {
  background: var(--color-white);
}

[data-theme="light"] .trait-rating-btn {
  background: var(--color-gray-100);
  border-color: var(--color-gray-300);
  color: var(--color-gray-600);
}

[data-theme="light"] .trait-rating-btn:hover {
  background: var(--color-gray-200);
  border-color: var(--color-gray-400);
  color: var(--color-gray-800);
}

[data-theme="light"] .trait-rating-btn--selected {
  background: var(--looops-coral);
  border-color: var(--looops-coral);
  color: white;
}

[data-theme="light"] .trait-rating-btn--selected:hover {
  background: var(--looops-coral-light);
  border-color: var(--looops-coral-light);
  color: white;
}

/* ========== System Suggestions Modal ========== */
.modal-system-suggestions {
  max-width: 700px;
  max-height: 90vh;
  overflow-y: auto;
}

.system-suggestions-welcome {
  font-size: 16px;
  color: var(--color-black);
  margin-bottom: 16px;
  padding: 16px;
  background: var(--color-gray-100);
  border-radius: 8px;
  border-left: 4px solid var(--color-red);
}

.system-suggestions-intro {
  font-size: 14px;
  color: var(--color-gray-600);
  margin-bottom: 24px;
  line-height: 1.5;
}

.system-suggestions-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.system-suggestion-card {
  background: var(--color-gray-50);
  border: 1px solid var(--color-gray-200);
  border-radius: 12px;
  padding: 20px;
  transition: all 0.2s ease;
}

.system-suggestion-card:hover {
  border-color: var(--color-gray-300);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.system-suggestion-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.system-suggestion-loop {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-red);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.system-suggestion-difficulty {
  font-size: 11px;
  font-weight: 500;
  padding: 4px 8px;
  border-radius: 4px;
  text-transform: capitalize;
}

.system-suggestion-difficulty--beginner {
  background: #dcfce7;
  color: #166534;
}

.system-suggestion-difficulty--intermediate {
  background: #fef3c7;
  color: #92400e;
}

.system-suggestion-difficulty--advanced {
  background: #fce7f3;
  color: #9d174d;
}

.system-suggestion-title {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-black);
  margin: 0 0 8px 0;
}

.system-suggestion-desc {
  font-size: 14px;
  color: var(--color-gray-600);
  line-height: 1.5;
  margin: 0 0 16px 0;
}

.system-suggestion-meta {
  display: flex;
  gap: 16px;
  margin-bottom: 16px;
}

.system-suggestion-meta span {
  font-size: 12px;
  color: var(--color-gray-500);
}

.system-suggestion-duration::before {
  content: "â± ";
}

.system-suggestion-habits::before {
  content: "ðŸ”„ ";
}

.system-suggestion-start {
  width: 100%;
  padding: 12px;
  background: var(--color-red);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.system-suggestion-start:hover {
  background: var(--color-red-dark, #c73e1d);
  transform: translateY(-1px);
}

/* Light theme adjustments */
[data-theme="light"] .system-suggestions-welcome {
  background: #fff5f5;
}

[data-theme="light"] .system-suggestion-card {
  background: white;
}

/* ========== Integrations Screen ========== */
.integrations-screen {
  padding: 24px;
  max-width: 1200px;
  margin: 0 auto;
}

.integrations-screen--embedded {
  padding: 0;
  margin-top: 16px;
}

.integrations-screen--embedded .integrations-grid {
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
  margin-bottom: 0;
}

.integrations-screen .screen-header {
  margin-bottom: 24px;
}

.integrations-screen .screen-description {
  color: var(--color-text-secondary);
  margin-top: 8px;
}

.integrations-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
  gap: 20px;
  margin-bottom: 32px;
}

.integration-card {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: 20px;
  transition: all 0.2s ease;
}

.integration-card:hover {
  border-color: var(--color-border-hover);
}

.integration-card--connected {
  border-color: var(--looops-sage);
}

.integration-card__header {
  display: flex;
  align-items: flex-start;
  gap: 16px;
  margin-bottom: 16px;
}

.integration-card__icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius);
  flex-shrink: 0;
}

.integration-card__icon svg {
  width: 24px;
  height: 24px;
}

.integration-card__info {
  flex: 1;
  min-width: 0;
}

.integration-card__title-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.integration-card__name {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.integration-card__loop-badge {
  font-size: 10px;
  font-weight: 600;
  color: white;
  padding: 2px 8px;
  border-radius: 10px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.integration-card__description {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0;
  line-height: 1.4;
}

.integration-card__status {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
}

.integration-card__status-connected {
  color: var(--looops-sage);
}

.integration-card__status-configured {
  color: var(--looops-amber);
}

.integration-card__status-disconnected {
  color: var(--color-text-tertiary);
}

.integration-card__status-loading {
  color: var(--color-text-secondary);
}

.integration-card__status-loading svg {
  animation: spin 1s linear infinite;
}

.integration-card__preview {
  background: var(--color-bg-tertiary);
  border-radius: var(--radius);
  padding: 16px;
  margin-bottom: 16px;
}

.integration-preview-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.integration-preview-stat {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.integration-preview-label {
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.integration-preview-value {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
}

.integration-preview-value--positive {
  color: var(--looops-sage);
}

.integration-preview-value--negative {
  color: var(--looops-coral);
}

.integration-preview-simple {
  font-size: 14px;
  color: var(--color-text-secondary);
  text-align: center;
}

.integration-card__actions {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.integration-card__btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.15s ease;
  border: none;
}

.integration-card__btn--primary {
  background: var(--looops-sage);
  color: white;
}

.integration-card__btn--primary:hover {
  background: var(--looops-sage-dark);
}

.integration-card__btn--secondary {
  background: var(--color-bg-tertiary);
  color: var(--color-text);
  border: 1px solid var(--color-border);
}

.integration-card__btn--secondary:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border-hover);
}

.integration-card__btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.integration-card__last-sync {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.integration-card__message {
  margin-top: 12px;
  padding: 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius);
  font-size: 13px;
  color: var(--color-text-secondary);
}

/* Calendar Embed Section */
.integrations-embed-section {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: 24px;
  margin-bottom: 24px;
}

.integrations-embed-section h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.integrations-embed-description {
  font-size: 14px;
  color: var(--color-text-secondary);
  margin: 0 0 16px 0;
}

.integrations-embed-form {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap;
}

.integrations-embed-input {
  flex: 1;
  min-width: 300px;
  padding: 12px 16px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  color: var(--color-text);
  font-size: 14px;
  font-family: inherit;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

.integrations-embed-input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
}

.integrations-embed-input::placeholder {
  color: var(--color-text-tertiary);
}

.integrations-embed-save {
  padding: 12px 24px;
  background: var(--color-primary);
  border: none;
  border-radius: var(--radius);
  color: white;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
  white-space: nowrap;
}

.integrations-embed-save:hover {
  background: var(--color-primary-hover);
}

.integrations-embed-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 12px;
  flex-wrap: wrap;
  gap: 8px;
}

.integrations-embed-help {
  font-size: 13px;
  color: var(--color-primary);
  text-decoration: none;
  white-space: nowrap;
}

.integrations-embed-help:hover {
  text-decoration: underline;
}

.integrations-embed-hint {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin: 0;
}

/* Integrations Help Section */
.integrations-help {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: 24px;
}

.integrations-help h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 16px 0;
}

.integrations-help__content {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.integrations-help__item {
  background: var(--color-bg-tertiary);
  border-radius: var(--radius);
  overflow: hidden;
}

.integrations-help__item summary {
  padding: 12px 16px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  cursor: pointer;
  transition: background 0.15s ease;
}

.integrations-help__item summary:hover {
  background: var(--color-surface-hover);
}

.integrations-help__item[open] summary {
  border-bottom: 1px solid var(--color-border);
}

.integrations-help__item ol {
  margin: 0;
  padding: 16px 16px 16px 32px;
  font-size: 13px;
  color: var(--color-text-secondary);
  line-height: 1.8;
}

.integrations-help__item code {
  background: var(--color-bg-secondary);
  padding: 2px 6px;
  border-radius: 4px;
  font-family: monospace;
  font-size: 12px;
}

.integrations-help__item a {
  color: var(--looops-sage);
}

.integrations-help__item a:hover {
  text-decoration: underline;
}

/* Light theme overrides */
[data-theme="light"] .integration-card {
  background: var(--color-white);
}

[data-theme="light"] .integration-card__icon {
  background: var(--color-gray-100);
}

[data-theme="light"] .integration-card__preview {
  background: var(--color-gray-50);
}

[data-theme="light"] .integrations-help {
  background: var(--color-white);
}

[data-theme="light"] .integrations-help__item {
  background: var(--color-gray-50);
}

[data-theme="light"] .integrations-help__item code {
  background: var(--color-gray-100);
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@media (max-width: 768px) {
  .integrations-grid {
    grid-template-columns: 1fr;
  }

  .integration-preview-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* ========== Responsive ========== */

/* Mobile Header Bar */
.mobile-header {
  display: none;
}

@media (max-width: 768px) {
  .mobile-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 56px;
    padding: 0 16px;
    background: var(--color-bg);
    border-bottom: 1px solid var(--color-border);
    z-index: 1000;
  }

  .mobile-menu-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: transparent;
    border: none;
    color: var(--color-text);
    cursor: pointer;
    border-radius: 8px;
    transition: background 0.15s ease;
  }

  .mobile-menu-btn:hover {
    background: var(--color-surface);
  }

  .mobile-menu-btn svg {
    width: 24px;
    height: 24px;
  }

  .mobile-logo {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .mobile-logo-text {
    font-size: 18px;
    font-weight: 700;
    color: var(--color-text);
    letter-spacing: -0.02em;
  }

  .mobile-header-spacer {
    width: 40px;
  }

  /* Mobile Menu Overlay */
  .mobile-menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1001;
    animation: fadeIn 0.2s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .app-container {
    flex-direction: column;
  }

  /* Sidebar - Hidden by default, slides in from left */
  .sidebar {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 180px;
    transform: translateX(-100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1002;
    flex-direction: column;
    padding: 16px 20px 16px 16px;
    border-right: 1px solid var(--color-border);
    background: var(--color-bg);
  }

  .sidebar--mobile-open {
    transform: translateX(0);
  }

  .sidebar-header {
    display: flex;
    margin-bottom: 20px;
    padding-left: 4px;
  }

  .sidebar-nav {
    flex-direction: column;
    flex: 1;
    gap: 2px;
    padding: 0;
    overflow-y: auto;
  }

  .nav-item {
    flex-direction: row;
    padding: 14px 12px;
    gap: 12px;
    border-radius: 10px;
    justify-content: center;
    min-height: 48px;
  }

  .nav-item--active::before {
    display: none;
  }

  .nav-item--active {
    background: transparent !important;
    box-shadow: none !important;
    color: var(--color-text);
  }

  [data-theme="light"] .nav-item--active {
    background: transparent !important;
    box-shadow: none !important;
    color: var(--color-text);
  }

  .nav-item--active .nav-label {
    color: var(--color-text);
  }

  [data-theme="light"] .nav-item--active .nav-label {
    color: var(--color-text);
  }

  .nav-item--active .nav-icon {
    color: var(--looops-coral);
  }

  [data-theme="light"] .nav-item--active .nav-icon {
    color: var(--looops-coral);
  }

  .nav-icon {
    font-size: 20px;
  }

  .nav-icon svg {
    width: 22px;
    height: 22px;
  }

  .nav-label {
    display: block;
    font-size: 15px;
    font-weight: 500;
  }

  .sidebar-footer {
    display: flex;
    justify-content: center;
    margin-top: auto;
    padding-top: 16px;
    border-top: 1px solid var(--color-border);
  }

  .theme-toggle {
    width: 48px;
    height: 48px;
    justify-content: center;
    align-items: center;
    padding: 0;
    border-radius: 50%;
  }

  .theme-toggle-label {
    display: none;
  }

  .theme-toggle svg {
    width: 24px;
    height: 24px;
  }

  /* Hide scrollbar on sidebar nav */
  .sidebar-nav::-webkit-scrollbar {
    display: none;
  }

  .sidebar-nav {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Main content - Full width with top padding for header */
  .app-main {
    margin-left: 0;
    padding: 16px;
    padding-top: 72px; /* Header height + padding */
    padding-bottom: 24px;
    height: calc(100vh - 0px);
    height: calc(100dvh - 0px);
    max-height: 100vh;
    max-height: 100dvh;
    overflow-y: auto;
    overflow-x: hidden;
    width: 100%;
  }

  /* Tasks screen mobile - full screen takeover */
  .tasks-screen {
    position: fixed !important;
    top: 56px !important; /* Start below mobile header */
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    margin: 0 !important;
    padding: 0 !important;
    width: 100vw !important;
    height: auto !important;
    background: var(--color-bg) !important;
    z-index: 999 !important;
    overflow: hidden !important;
    box-sizing: border-box !important;
  }

  .tasks-sidebar {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 280px;
    min-width: 0;
    max-width: 85vw;
    transform: translateX(-100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1002;
    background: var(--color-bg);
    border-right: 1px solid var(--color-border);
    overflow-y: auto;
    padding-top: 56px;
  }

  .tasks-sidebar.mobile-open {
    display: flex;
    transform: translateX(0);
  }

  .tasks-sidebar .sidebar-toggle {
    display: none;
  }

  .tasks-sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1001;
    animation: fadeIn 0.2s ease;
  }

  .tasks-mobile-menu-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background: transparent;
    border: none;
    color: var(--color-text);
    cursor: pointer;
    border-radius: 8px;
    flex-shrink: 0;
  }

  .tasks-mobile-menu-btn:hover {
    background: var(--color-surface);
  }

  .tasks-main {
    width: 100%;
    padding: 0;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: stretch;
    flex: 1;
    overflow-y: auto;
  }

  .tasks-header {
    padding: 12px;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    flex-shrink: 0;
    background: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
  }

  .tasks-header-left {
    display: flex;
    align-items: center;
    gap: 8px;
    min-width: 0;
  }

  .tasks-header-left h2 {
    font-size: 18px;
    font-weight: 600;
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--color-text);
  }

  .tasks-description {
    display: none;
  }

  .tasks-header-right {
    display: flex;
    align-items: center;
    gap: 6px;
    flex-shrink: 0;
  }

  .tasks-header-right .view-toggle {
    display: flex;
  }

  .tasks-header-right .header-control {
    display: none;
  }

  /* Loop filter visible and compact on mobile */
  .loop-filter-control {
    display: flex;
  }

  .loop-filter-select {
    padding: 6px 8px;
    font-size: 12px;
    min-width: 90px;
    max-width: 110px;
  }

  .view-toggle-btn {
    padding: 6px 8px;
    font-size: 11px;
  }

  .view-toggle-btn svg {
    width: 14px;
    height: 14px;
  }

  .task-list-header {
    padding: 8px 12px;
  }

  .task-item {
    padding: 12px;
  }

  .task-content {
    gap: 6px;
  }

  .task-meta {
    flex-wrap: wrap;
    gap: 6px;
  }

  .task-actions {
    opacity: 1;
    position: static;
    flex-shrink: 0;
  }

  /* Kanban on mobile - horizontal scroll */
  .kanban-view {
    overflow-x: auto;
    padding: 12px;
  }

  .kanban-column {
    min-width: 260px;
  }

  /* Screen headers */
  .screen-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .screen h2 {
    font-size: 24px;
  }

  .loop-card__columns {
    grid-template-columns: 1fr;
  }

  .screen h2 {
    font-size: 28px;
  }

  .screen h3 {
    font-size: 16px;
  }

  .loop-card {
    padding: 24px;
  }

  .loop-card__header h3 {
    font-size: 18px;
  }

  .archetype-item {
    grid-template-columns: 90px 1fr 50px;
    gap: 12px;
  }

  .modal__header,
  .modal__body,
  .modal__footer {
    padding: 24px;
  }

  .card {
    padding: 24px;
  }

  .task-row {
    padding: 16px 20px;
  }

  .profile-grid {
    grid-template-columns: 1fr;
  }

  .onboarding-checkbox-group {
    grid-template-columns: 1fr;
  }

  .modal-onboarding {
    max-width: 95vw;
    margin: 20px;
  }
}

/* ========== View Toggle ========== */
.view-toggle {
  display: flex;
  gap: 4px;
  background: var(--color-surface);
  border-radius: 12px;
  padding: 4px;
  border: 1px solid var(--color-border);
}

.view-toggle-btn {
  padding: 10px 18px;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  font-size: 13px;
  font-weight: 600;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: inherit;
  display: flex;
  align-items: center;
  gap: 6px;
}

.view-toggle-btn.active {
  background: var(--looops-navy);
  color: var(--color-white);
  box-shadow: 0 2px 8px rgba(26, 26, 46, 0.5);
}

.view-toggle-btn:not(.active):hover {
  color: var(--color-text);
  background: var(--color-surface-hover);
}

/* ========== Loops Visualization - Full Screen ========== */
.loops-viz-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  position: relative;
  background: radial-gradient(ellipse at center, var(--color-gray-900) 0%, var(--color-bg) 70%);
}

/* Circular layout container */
.loops-circular {
  position: relative;
  width: 100%;
  height: 100%;
  min-height: 600px;
  aspect-ratio: 1 / 1;
  max-width: 800px;
  margin: 0 auto;
}

/* Individual loop item - positioned absolutely in circle */
.loop-circle-item {
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  cursor: pointer;
  transition: transform 0.3s ease, filter 0.3s ease;
  transform: translate(-50%, -50%);
  width: min(180px, 26vw);
  height: min(220px, 30vw);
}

.loop-circle-item:hover {
  transform: translate(-50%, -50%) scale(1.08);
  z-index: 10;
}

.loop-circle-item.selected {
  transform: translate(-50%, -50%) scale(1.12);
  z-index: 10;
}

/* Legacy grid styles kept for compatibility */
.loops-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap: 16px;
  padding: 24px;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  align-items: center;
  justify-items: center;
}

@media (min-width: 900px) {
  .loops-grid {
    grid-template-columns: repeat(6, 1fr);
    grid-template-rows: 1fr;
    gap: 32px;
    padding: 48px;
  }
}

/* Individual loop item - fills cell */
.loop-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  cursor: pointer;
  transition: transform 0.2s ease;
  width: 100%;
  height: 100%;
}

.loop-item:hover {
  transform: scale(1.05);
}

.loop-item.selected {
  transform: scale(1.08);
}

/* SVG container - maximize size */
.loop-svg {
  width: 100%;
  height: auto;
  flex: 1;
  max-height: calc(100% - 40px);
  filter: drop-shadow(0 0 8px rgba(26, 26, 46, 0.2));
  transition: filter 0.3s ease, transform 0.3s ease;
}

.loop-item:hover .loop-svg,
.loop-circle-item:hover .loop-svg {
  filter: drop-shadow(0 0 20px rgba(26, 26, 46, 0.4));
}

.loop-item.selected .loop-svg,
.loop-circle-item.selected .loop-svg {
  filter: drop-shadow(0 0 30px rgba(26, 26, 46, 0.5));
}

.loop-outer-circle {
  fill: var(--color-dark);
  transition: stroke-width 0.2s ease, fill 0.2s ease;
  /* Let inline styles control stroke color - don't set any default */
}

/* ========== Outer Meaning Loop (encircles all) ========== */
.loop-outer-meaning {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 0;
  pointer-events: none;
}

.meaning-outer-svg {
  width: 100%;
  height: 100%;
  max-width: min(600px, 90vw);
  max-height: min(600px, 90vh);
  transition: filter 0.3s ease;
  pointer-events: auto;
}

.loop-outer-meaning:hover .meaning-outer-svg {
  filter: drop-shadow(0 0 10px rgba(107, 114, 128, 0.3));
}

.loop-outer-meaning.selected .meaning-outer-svg {
  filter: drop-shadow(0 0 20px rgba(107, 114, 128, 0.4));
}

/* Inner loops positioned above meaning ring */
.loop-circle-item {
  z-index: 2;
}

.loop-icon {
  pointer-events: none;
  user-select: none;
}

.task-circle {
  transition: opacity 0.2s ease;
}

/* Loop label */
.loop-label {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  text-align: center;
  flex-shrink: 0;
}

.loop-label .loop-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  letter-spacing: 0.5px;
}

.loop-label .loop-state {
  font-size: 10px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 1px;
  opacity: 0.8;
}

/* Mobile adjustments - Keep circular layout but scale down */
@media (max-width: 768px) {
  .loops-circular {
    min-height: 300px;
    height: 300px;
    max-height: 300px;
    aspect-ratio: 1 / 1;
    width: 300px;
    max-width: 100vw;
    margin: 0 auto;
  }

  .loop-outer-meaning {
    display: flex;
  }

  .meaning-outer-svg {
    max-width: 290px;
    max-height: 290px;
  }

  /* Hide meaning text labels on mobile - too cramped */
  .meaning-outer-svg text {
    display: none;
  }

  .loop-circle-item {
    width: 50px;
    height: 50px;
    gap: 0;
  }

  .loop-circle-item:hover {
    transform: translate(-50%, -50%) scale(1.08);
  }

  .loop-circle-item.selected {
    transform: translate(-50%, -50%) scale(1.12);
  }

  .loop-svg {
    width: 44px;
    height: 44px;
    max-height: 44px;
  }

  /* Hide all text labels on mobile - just show emoji icons */
  .loop-label {
    display: none;
  }

  /* Loop detail backdrop on mobile */
  .loop-detail-backdrop {
    display: block;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
  }

  /* Loop detail panel on mobile - centered modal */
  .loop-detail {
    position: fixed !important;
    top: 50% !important;
    left: 50% !important;
    right: auto !important;
    bottom: auto !important;
    transform: translate(-50%, -50%) !important;
    width: calc(100vw - 32px) !important;
    max-width: 360px !important;
    max-height: 80vh !important;
    border-radius: 16px !important;
    z-index: 1001 !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
    background: var(--color-surface) !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
  }

  .loop-detail-header {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    border-bottom: 1px solid var(--color-border);
    background: var(--color-surface);
  }

  .loop-detail-info {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .loop-detail-icon {
    font-size: 28px;
  }

  .loop-detail-header h3 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
    color: var(--color-text);
  }

  .loop-detail-state {
    font-size: 13px;
    display: block;
  }

  .loop-detail-close {
    width: 36px;
    height: 36px;
    border: none;
    background: var(--color-gray-100);
    border-radius: 50%;
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-text);
  }

  .loop-detail-tasks {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    min-height: 100px;
    -webkit-overflow-scrolling: touch;
  }

  .loop-detail-tasks ul {
    margin: 0;
    padding: 0;
    list-style: none;
  }

  .loop-detail-task {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 14px 12px;
    background: var(--color-gray-100);
    border-radius: 8px;
    margin-bottom: 8px;
    cursor: pointer;
  }

  .loop-detail-task:active {
    background: var(--color-gray-200);
  }

  .loop-detail-task .task-title {
    flex: 1;
    font-size: 14px;
    line-height: 1.4;
    color: var(--color-text);
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  .loop-detail-task .task-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
    margin-top: 4px;
  }

  .loop-detail-task .task-due {
    font-size: 12px;
    color: var(--color-text-secondary);
    flex-shrink: 0;
    white-space: nowrap;
  }

  .loop-detail-empty {
    text-align: center;
    padding: 24px;
    color: var(--color-text-secondary);
  }
}

@media (max-width: 400px) {
  .loops-circular {
    min-height: 240px;
    height: 240px;
    max-height: 240px;
    width: 240px;
  }

  .meaning-outer-svg {
    max-width: 230px;
    max-height: 230px;
  }

  .loop-circle-item {
    width: 42px;
    height: 42px;
  }

  .loop-svg {
    width: 38px;
    height: 38px;
    max-height: 38px;
  }
}

/* Larger screens - bigger circles */
@media (min-width: 900px) {
  .loop-circle-item {
    width: min(200px, 18vw);
    height: min(240px, 22vw);
  }

  .meaning-svg {
    width: min(320px, 35vw);
    height: min(320px, 35vw);
  }
}

@media (min-width: 1200px) {
  .loop-circle-item {
    width: min(220px, 16vw);
    height: min(260px, 20vw);
  }

  .meaning-svg {
    width: min(360px, 30vw);
    height: min(360px, 30vw);
  }
}

/* ========== Loop Detail Panel ========== */

/* Hide backdrop on desktop - only show on mobile */
.loop-detail-backdrop {
  display: none;
}

.loop-detail {
  background: var(--color-surface);
  border-radius: 16px;
  border: 1px solid var(--color-border);
  box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
  overflow: hidden;
  animation: fadeIn 0.25s ease;
  max-width: 400px;
  width: 90%;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 100;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

.loop-detail-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  background: var(--color-surface-hover);
  border-left: 4px solid;
}

.loop-detail-info {
  display: flex;
  align-items: center;
  gap: 16px;
}

.loop-detail-icon {
  font-size: 32px;
}

.loop-detail-header h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 4px 0;
  color: var(--color-text);
}

.loop-detail-state {
  font-size: 13px;
  font-weight: 500;
}

.loop-detail-close {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  font-size: 24px;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s ease, color 0.15s ease;
}

.loop-detail-close:hover {
  background: var(--color-border);
  color: var(--color-text);
}

.loop-detail-tasks {
  padding: 16px 24px 24px;
}

.loop-detail-tasks ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

.loop-detail-task {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 0;
  border-bottom: 1px solid var(--color-border-light);
  cursor: pointer;
  transition: background 0.15s ease;
}

.loop-detail-task:last-child {
  border-bottom: none;
}

.loop-detail-task:hover {
  background: #fafafa;
  margin: 0 -24px;
  padding-left: 24px;
  padding-right: 24px;
}

.loop-detail-task .task-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.loop-detail-task .task-title {
  flex: 1;
  font-size: 14px;
  color: var(--color-text);
}

.loop-detail-task .task-due {
  font-size: 12px;
  color: #999;
}

.loop-detail-empty {
  color: #999;
  font-size: 14px;
  text-align: center;
  padding: 24px 0;
}

.loop-detail-title {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.loop-detail-icon {
  font-size: 28px;
  line-height: 1;
}

.loop-detail-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: var(--color-black);
}

.loop-detail-desc {
  margin: 4px 0 0;
  font-size: 12px;
  color: var(--color-text-secondary);
}

.loop-detail-close {
  background: transparent;
  border: none;
  font-size: 24px;
  color: var(--color-gray-500);
  cursor: pointer;
  padding: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
}

.loop-detail-close:hover {
  background: var(--color-gray-200);
  color: var(--color-black);
}

.loop-detail-content {
  padding: 0 16px 16px;
  max-height: 400px;
  overflow-y: auto;
}

/* Empty state */
.loop-empty-state {
  text-align: center;
  padding: 32px 16px;
  color: var(--color-text-secondary);
}

.loop-empty-state p {
  margin: 0;
  font-size: 14px;
  font-weight: 500;
}

.loop-empty-hint {
  display: block;
  margin-top: 8px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

/* Task sections by sub-loop */
.loop-task-sections {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.loop-subloop-section {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.subloop-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.subloop-count {
  font-size: 10px;
  background: var(--color-gray-200);
  padding: 2px 6px;
  border-radius: 10px;
  color: var(--color-text-secondary);
}

/* Task list in loop detail */
.loop-task-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.loop-task-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.loop-task-item:hover {
  background: var(--color-gray-200);
}

.task-priority-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.task-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.loop-task-item .task-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.loop-task-item .task-due {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.loop-task-item .task-due.overdue {
  color: var(--looops-coral);
  font-weight: 500;
}

.loop-task-item .task-due.today {
  color: var(--looops-sage);
  font-weight: 500;
}

.loop-task-item .task-due.tomorrow {
  color: var(--looops-amber);
}

.task-doing-badge {
  font-size: 10px;
  background: var(--looops-amber);
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: 500;
  flex-shrink: 0;
}

/* Mobile: full-width detail panel */
@media (max-width: 600px) {
  .loops-viz-container {
    padding: 8px;
  }

  .loop-circle-btn {
    padding: 12px 6px;
    min-height: 85px;
  }

  .loop-circle-btn .loop-icon {
    font-size: 20px;
  }

  .loop-circle-btn .loop-name {
    font-size: 10px;
  }

  .loop-circle-btn .loop-state {
    font-size: 9px;
  }

  .loop-detail-content {
    max-height: 300px;
  }

  .legend-item {
    font-size: 10px;
  }

  .legend-color {
    width: 10px;
    height: 10px;
  }
}

.button-close {
  background: transparent;
  border: none;
  font-size: 24px;
  color: var(--color-gray-600);
  cursor: pointer;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: all 0.2s ease;
  line-height: 1;
  padding: 0;
}

.button-close:hover {
  background: var(--color-gray-200);
  color: var(--color-black);
}

.loop-detail-tasks {
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow-y: auto;
  flex: 1;
  max-height: 500px;
  padding-right: 4px;
}

.loop-detail-tasks::-webkit-scrollbar {
  width: 6px;
}

.loop-detail-tasks::-webkit-scrollbar-track {
  background: var(--color-gray-100);
  border-radius: 3px;
}

.loop-detail-tasks::-webkit-scrollbar-thumb {
  background: var(--color-gray-400);
  border-radius: 3px;
}

.loop-detail-tasks::-webkit-scrollbar-thumb:hover {
  background: var(--color-gray-600);
}

.loop-detail-task {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px;
  background: var(--color-gray-100);
  border-radius: 8px;
  transition: all 0.2s ease;
}

.loop-detail-task:hover {
  background: var(--color-gray-200);
  transform: translateX(4px);
}

.task-status-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  flex-shrink: 0;
  margin-top: 4px;
  border: 2px solid var(--color-white);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.task-detail-content {
  flex: 1;
  min-width: 0;
}

.task-detail-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-black);
  line-height: 1.4;
  margin-bottom: 4px;
}

.task-detail-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  font-size: 12px;
  color: var(--color-gray-600);
}

.task-detail-meta span {
  background: var(--color-white);
  padding: 2px 8px;
  border-radius: 4px;
}

/* ========== Loop Detail View ========== */
.loop-detail-view {
  width: 100%;
  animation: fadeIn 0.3s ease;
}

.loop-detail-header {
  margin-bottom: 32px;
}

.back-button {
  margin-bottom: 16px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.loop-detail-subtitle {
  color: var(--color-gray-600);
  font-size: 16px;
  margin-top: 8px;
}

.loop-detail-breakdown {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 24px;
  margin-top: 32px;
}

.subloop-section {
  background: var(--color-white);
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.subloop-section h3 {
  margin: 0 0 16px 0;
  font-size: 18px;
  font-weight: 700;
}

.subloop-tasks {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Responsive adjustments for visualization */
@media (max-width: 768px) {
  .loop-detail-panel {
    position: fixed;
    right: 12px;
    left: 12px;
    top: auto;
    bottom: 12px;
    transform: none;
    width: auto;
    max-height: 50vh;
  }

  .loops-legend {
    flex-direction: column;
    gap: 12px;
  }

  .loop-detail-breakdown {
    grid-template-columns: 1fr;
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

/* ========== State Colors - Looops Brand ========== */
:root {
  --state-build: #73A58C;     /* Sage - active growth (Go) */
  --state-maintain: #5a7fb8;   /* Muted Blue - steady state */
  --state-recover: #F4B942;    /* Amber - restoration (Wait) */
  --state-hibernate: #737390;  /* Navy Gray - dormant */
}

/* ========== State Indicator ========== */
.state-indicator {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.state-indicator__dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.state-indicator--small .state-indicator__dot {
  width: 6px;
  height: 6px;
}

.state-indicator--small {
  font-size: 10px;
}

.state-indicator--large .state-indicator__dot {
  width: 12px;
  height: 12px;
}

.state-indicator--large {
  font-size: 14px;
}

/* ========== State Selector ========== */
.state-selector {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.state-selector__btn {
  padding: 8px 16px;
  border: 2px solid var(--color-gray-200);
  border-radius: 8px;
  background: var(--color-white);
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.state-selector__btn:hover {
  background: var(--color-gray-50);
}

.state-selector__btn--active {
  border-color: currentColor;
  background: currentColor;
  color: white;
}

.state-selector__btn--BUILD {
  color: var(--state-build);
}

.state-selector__btn--BUILD.state-selector__btn--active {
  background: var(--state-build);
  border-color: var(--state-build);
  color: white;
}

.state-selector__btn--MAINTAIN {
  color: var(--state-maintain);
}

.state-selector__btn--MAINTAIN.state-selector__btn--active {
  background: var(--state-maintain);
  border-color: var(--state-maintain);
  color: white;
}

.state-selector__btn--RECOVER {
  color: var(--state-recover);
}

.state-selector__btn--RECOVER.state-selector__btn--active {
  background: var(--state-recover);
  border-color: var(--state-recover);
  color: white;
}

.state-selector__btn--HIBERNATE {
  color: var(--state-hibernate);
}

.state-selector__btn--HIBERNATE.state-selector__btn--active {
  background: var(--state-hibernate);
  border-color: var(--state-hibernate);
  color: white;
}

/* ========== Trait Slider ========== */
.trait-slider {
  padding: 16px 0;
  border-bottom: 1px solid var(--color-gray-100);
}

.trait-slider:last-child {
  border-bottom: none;
}

.trait-slider__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.trait-slider__poles {
  display: flex;
  justify-content: space-between;
  font-size: 14px;
  font-weight: 600;
}

.trait-slider__pole {
  max-width: 45%;
}

.trait-slider__pole--left {
  color: var(--color-gray-600);
}

.trait-slider__pole--right {
  color: var(--color-gray-600);
  text-align: right;
}

.trait-slider__value {
  font-size: 14px;
  font-weight: 700;
  color: var(--color-primary);
  min-width: 40px;
  text-align: center;
}

.trait-slider__track {
  position: relative;
  height: 8px;
  background: linear-gradient(to right, var(--color-gray-300), var(--color-primary));
  border-radius: 4px;
  margin: 12px 0;
}

.trait-slider__input {
  width: 100%;
  height: 8px;
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  cursor: pointer;
  position: relative;
  z-index: 1;
}

.trait-slider__input::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--color-white);
  border: 3px solid var(--color-primary);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  cursor: grab;
  transition: transform 0.15s ease;
}

.trait-slider__input::-webkit-slider-thumb:hover {
  transform: scale(1.1);
}

.trait-slider__input::-webkit-slider-thumb:active {
  cursor: grabbing;
  transform: scale(0.95);
}

.trait-slider__input::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--color-white);
  border: 3px solid var(--color-primary);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  cursor: grab;
}

.trait-slider__descriptions {
  display: flex;
  justify-content: space-between;
  font-size: 11px;
  color: var(--color-gray-500);
  margin-top: 4px;
}

.trait-slider__desc {
  max-width: 45%;
  line-height: 1.3;
}

.trait-slider__desc--right {
  text-align: right;
}

/* ========== Value Selector ========== */
.value-selector {
  padding: 16px 0;
}

.value-selector__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.value-selector__title {
  font-size: 18px;
  font-weight: 700;
  margin: 0;
}

.value-selector__count {
  font-size: 14px;
  color: var(--color-gray-600);
}

.value-selector__count--warning {
  color: var(--color-warning);
}

.value-selector__count--success {
  color: var(--state-build);
}

.value-selector__categories {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.value-category {
  background: var(--color-gray-50);
  border-radius: 12px;
  padding: 16px;
}

.value-category__title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-600);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 12px 0;
}

.value-category__grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.value-chip {
  padding: 8px 16px;
  background: var(--color-white);
  border: 2px solid var(--color-gray-200);
  border-radius: 20px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.value-chip:hover {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

.value-chip--selected {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

.value-chip--disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.value-chip--disabled:hover {
  border-color: var(--color-gray-200);
  background: var(--color-white);
}

/* ========== Inspiration Picker ========== */
.inspiration-picker {
  padding: 16px 0;
}

.inspiration-picker__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.inspiration-picker__title {
  font-size: 18px;
  font-weight: 700;
  margin: 0;
}

.inspiration-picker__count {
  font-size: 14px;
  color: var(--color-gray-600);
}

.inspiration-picker__count--warning {
  color: var(--color-warning);
}

.inspiration-picker__count--success {
  color: var(--state-build);
}

.inspiration-picker__filters {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  flex-wrap: wrap;
}

.inspiration-filter {
  padding: 6px 14px;
  background: var(--color-gray-100);
  border: none;
  border-radius: 16px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: capitalize;
}

.inspiration-filter:hover {
  background: var(--color-gray-200);
}

.inspiration-filter--active {
  background: var(--color-primary);
  color: white;
}

.inspiration-picker__grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 12px;
}

.inspiration-card {
  background: var(--color-white);
  border: 2px solid var(--color-gray-200);
  border-radius: 12px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: center;
}

.inspiration-card:hover {
  border-color: var(--color-primary);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.inspiration-card--selected {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

.inspiration-card__avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--color-gray-200);
  margin: 0 auto 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  font-weight: 700;
  color: var(--color-gray-600);
}

.inspiration-card--selected .inspiration-card__avatar {
  background: var(--color-primary);
  color: white;
}

.inspiration-card__name {
  font-size: 14px;
  font-weight: 600;
  margin: 0 0 4px 0;
}

.inspiration-card__tagline {
  font-size: 12px;
  color: var(--color-gray-500);
  margin: 0;
  line-height: 1.3;
}

.inspiration-card__category {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-gray-400);
  margin-top: 8px;
}

/* ========== Onboarding Flow ========== */
.onboarding-flow {
  min-height: 100vh;
  background: linear-gradient(135deg, var(--color-gray-50) 0%, var(--color-white) 100%);
  display: flex;
  flex-direction: column;
}

.onboarding-flow__header {
  padding: 24px 32px;
  background: var(--color-white);
  border-bottom: 1px solid var(--color-gray-100);
}

.onboarding-flow__logo {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-primary);
  margin: 0;
}

.onboarding-flow__progress {
  display: flex;
  gap: 8px;
  margin-top: 16px;
}

.onboarding-flow__progress-step {
  flex: 1;
  height: 4px;
  background: var(--color-gray-200);
  border-radius: 2px;
  transition: background 0.3s ease;
}

.onboarding-flow__progress-step--active {
  background: var(--color-primary);
}

.onboarding-flow__progress-step--completed {
  background: var(--state-build);
}

.onboarding-flow__content {
  flex: 1;
  padding: 32px;
  max-width: 800px;
  margin: 0 auto;
  width: 100%;
}

.onboarding-flow__step-title {
  font-size: 28px;
  font-weight: 700;
  margin: 0 0 8px 0;
}

.onboarding-flow__step-subtitle {
  font-size: 16px;
  color: var(--color-gray-600);
  margin: 0 0 32px 0;
}

.onboarding-flow__footer {
  padding: 24px 32px;
  background: var(--color-white);
  border-top: 1px solid var(--color-gray-100);
  display: flex;
  justify-content: space-between;
}

.onboarding-flow__btn {
  padding: 12px 32px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.onboarding-flow__btn--secondary {
  background: transparent;
  border: 2px solid var(--color-gray-300);
  color: var(--color-gray-600);
}

.onboarding-flow__btn--secondary:hover {
  border-color: var(--color-gray-400);
  color: var(--color-gray-800);
}

.onboarding-flow__btn--primary {
  background: var(--color-primary);
  border: 2px solid var(--color-primary);
  color: white;
}

.onboarding-flow__btn--primary:hover {
  background: var(--color-primary-dark);
  border-color: var(--color-primary-dark);
}

.onboarding-flow__btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Onboarding Step: Basics */
.basics-step {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.basics-step__field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.basics-step__label {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-700);
}

.basics-step__input {
  padding: 12px 16px;
  border: 2px solid var(--color-gray-200);
  border-radius: 8px;
  font-size: 16px;
  transition: border-color 0.2s ease;
}

.basics-step__input:focus {
  outline: none;
  border-color: var(--color-primary);
}

.basics-step__select {
  padding: 12px 16px;
  border: 2px solid var(--color-gray-200);
  border-radius: 8px;
  font-size: 16px;
  background: var(--color-white);
  cursor: pointer;
}

.basics-step__select:focus {
  outline: none;
  border-color: var(--color-primary);
}

/* Onboarding Step: Loops */
.loops-step {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.loops-step__item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background: var(--color-white);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.loops-step__loop-info {
  display: flex;
  align-items: center;
  gap: 12px;
}

.loops-step__loop-icon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
}

.loops-step__loop-name {
  font-size: 16px;
  font-weight: 600;
  margin: 0;
}

.loops-step__loop-desc {
  font-size: 12px;
  color: var(--color-gray-500);
  margin: 2px 0 0 0;
}

/* Onboarding Step: Results */
.results-step {
  text-align: center;
}

.results-step__archetype {
  background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-white) 100%);
  border-radius: 20px;
  padding: 40px;
  margin-bottom: 32px;
}

.results-step__archetype-name {
  font-size: 36px;
  font-weight: 800;
  color: var(--color-primary);
  margin: 0 0 8px 0;
}

.results-step__archetype-tagline {
  font-size: 18px;
  color: var(--color-gray-600);
  margin: 0;
}

.results-step__blend {
  margin-top: 32px;
}

.results-step__blend-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-500);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 16px 0;
}

.results-step__blend-bars {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.results-step__blend-bar {
  display: flex;
  align-items: center;
  gap: 12px;
}

.results-step__blend-label {
  font-size: 14px;
  font-weight: 500;
  width: 100px;
  text-align: right;
}

.results-step__blend-track {
  flex: 1;
  height: 8px;
  background: var(--color-gray-200);
  border-radius: 4px;
  overflow: hidden;
}

.results-step__blend-fill {
  height: 100%;
  background: var(--color-primary);
  border-radius: 4px;
  transition: width 0.5s ease;
}

.results-step__blend-value {
  font-size: 14px;
  font-weight: 600;
  width: 40px;
}

.results-step__voice {
  margin-top: 32px;
  padding: 24px;
  background: var(--color-gray-50);
  border-radius: 12px;
  text-align: left;
}

.results-step__voice-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-500);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 12px 0;
}

.results-step__voice-phrase {
  font-size: 16px;
  font-style: italic;
  color: var(--color-gray-700);
  margin: 8px 0;
  padding-left: 16px;
  border-left: 3px solid var(--color-primary);
}

/* ========== Today's Stack ========== */
.todays-stack {
  padding: 24px;
}

.todays-stack__header {
  margin-bottom: 24px;
}

.todays-stack__greeting {
  font-size: 14px;
  color: var(--color-gray-500);
  margin: 0 0 4px 0;
}

.todays-stack__title {
  font-size: 28px;
  font-weight: 700;
  margin: 0 0 4px 0;
}

.todays-stack__subtitle {
  font-size: 14px;
  color: var(--color-gray-600);
  margin: 0;
}

.todays-stack__list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.todays-stack__header h3 {
  font-size: 18px;
  font-weight: 700;
  margin: 0;
  color: var(--color-text);
}

.todays-stack__count {
  font-size: 12px;
  color: var(--color-text-tertiary);
  font-weight: 500;
}

.todays-stack__title-row {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.todays-stack__day-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
  color: white;
}

.todays-stack__empty {
  text-align: center;
  padding: 48px 24px;
  background: var(--color-gray-50);
  border-radius: 16px;
}

.todays-stack__empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.todays-stack__empty-title {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 8px 0;
}

.todays-stack__empty-text {
  font-size: 14px;
  color: var(--color-gray-500);
  margin: 0;
}

.todays-stack__section {
  margin-bottom: 16px;
}

.todays-stack__section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  padding: 8px 12px;
  background: transparent;
  border: none;
  width: 100%;
  text-align: left;
  font-family: inherit;
}

.todays-stack__section-header--clickable {
  cursor: pointer;
  border-radius: 8px;
  transition: background-color 0.15s ease;
}

.todays-stack__section-header--clickable:hover {
  background-color: var(--color-surface-hover);
}

.todays-stack__section-icon {
  font-size: 16px;
}

.todays-stack__section-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  flex: 1;
}

.todays-stack__section-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 36px;
  height: 22px;
  padding: 0 8px;
  border-radius: 11px;
  font-size: 12px;
  font-weight: 600;
  color: white;
  background-color: var(--color-text-tertiary);
}

.todays-stack__section-chevron {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-tertiary);
  transition: transform 0.2s ease;
}

.todays-stack__section-chevron.collapsed {
  transform: rotate(-90deg);
}

.todays-stack__section-content {
  animation: slideDown 0.2s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.todays-stack__section.collapsed .todays-stack__section-header {
  margin-bottom: 0;
}

.todays-stack--empty {
  padding: 48px 24px;
}

.todays-stack__empty-state {
  text-align: center;
}

.todays-stack__empty-state h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 12px 0 8px 0;
  color: var(--color-text);
}

.todays-stack__empty-state p {
  font-size: 14px;
  color: var(--color-text-tertiary);
  margin: 0;
}

/* Task Card - Compact design */
.task-card {
  background: var(--color-surface);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  margin-bottom: 12px;
}

.task-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}

.task-card__priority-bar {
  height: 4px;
}

.task-card__priority-bar--high {
  background: linear-gradient(90deg, var(--looops-coral), #ff8a6b);
}

.task-card__priority-bar--medium {
  background: linear-gradient(90deg, var(--looops-amber), #ffc85c);
}

.task-card__priority-bar--low {
  background: var(--color-gray-400);
}

.task-card__content {
  padding: 14px 16px;
}

.task-card__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
  gap: 12px;
}

.task-card__title {
  font-size: 15px;
  font-weight: 600;
  margin: 0;
  flex: 1;
  letter-spacing: -0.01em;
  line-height: 1.3;
}

.task-card__loop-badge {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: white;
  flex-shrink: 0;
}

.task-card__time,
.task-card__duration {
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-tertiary);
  flex-shrink: 0;
}

.task-card__meta {
  display: flex;
  gap: 12px;
  margin-bottom: 10px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.task-card__meta-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

.task-card__framing {
  padding: 10px 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  margin-bottom: 10px;
  border-left: 3px solid var(--color-accent);
}

.task-card__framing-label {
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
  margin: 0 0 4px 0;
}

.task-card__framing-text {
  font-size: 13px;
  font-style: italic;
  color: var(--color-text-secondary);
  margin: 0;
  line-height: 1.4;
}

.task-card__actions {
  display: flex;
  gap: 8px;
  padding: 0 16px 14px;
}

.task-card__btn {
  flex: 1;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.task-card__btn--complete {
  background: var(--looops-sage);
  border: none;
  color: white;
  box-shadow: 0 4px 12px rgba(115, 165, 140, 0.3);
}

.task-card__btn--complete:hover {
  background: #5a8a72;
  box-shadow: 0 6px 16px rgba(115, 165, 140, 0.4);
}

.task-card__btn--skip {
  background: transparent;
  border: 2px solid var(--color-border);
  color: var(--color-text-secondary);
}

.task-card__btn--skip:hover {
  border-color: var(--color-text-tertiary);
  color: var(--color-text);
  background: var(--color-surface-hover);
}

.task-card__description {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 8px 0;
  line-height: 1.4;
}

.task-card__motivation {
  font-size: 12px;
  font-style: italic;
  color: var(--color-text-tertiary);
  margin: 0 0 8px 0;
  padding: 8px 10px;
  background: var(--color-bg-secondary);
  border-radius: 6px;
  border-left: 2px solid var(--looops-sage);
}

.task-card__subloop,
.task-card__due {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* Task Card Mobile Styles */
@media (max-width: 768px) {
  .task-card {
    margin-bottom: 10px;
  }

  .task-card__content {
    padding: 12px 14px;
  }

  .task-card__header {
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 6px;
  }

  .task-card__loop-badge {
    padding: 3px 8px;
    font-size: 9px;
    order: -1;
  }

  .task-card__duration {
    font-size: 11px;
  }

  .task-card__title {
    font-size: 14px;
    width: 100%;
    order: 1;
  }

  .task-card__actions {
    padding: 0 12px 12px;
    gap: 6px;
  }

  .task-card__btn {
    padding: 10px;
    font-size: 16px;
    min-height: 44px;
  }

  .task-card__btn--complete,
  .task-card__btn--skip {
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

/* ========== Habit Card - Today's Stack ========== */
.habit-card {
  background: var(--color-surface);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  margin-bottom: 12px;
  display: flex;
  align-items: stretch;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.habit-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}

.habit-card--completed {
  opacity: 0.7;
}

.habit-card__type-bar {
  width: 4px;
  flex-shrink: 0;
}

.habit-card__content {
  flex: 1;
  padding: 14px 16px;
  min-width: 0;
}

.habit-card__header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}

.habit-card__loop-badge {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border: 1px solid;
  flex-shrink: 0;
}

.habit-card__streak {
  font-size: 12px;
  font-weight: 600;
  color: var(--looops-amber);
  display: flex;
  align-items: center;
  gap: 2px;
}

.habit-card__title {
  font-size: 15px;
  font-weight: 600;
  margin: 0 0 6px 0;
  letter-spacing: -0.01em;
  line-height: 1.3;
  color: var(--color-text);
}

.habit-card__title--completed {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

.habit-card__response {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 6px 0;
  line-height: 1.4;
  font-style: italic;
}

.habit-card__cue {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin: 0;
  line-height: 1.4;
}

.habit-card__cue-label {
  font-weight: 600;
  color: var(--color-text-secondary);
}

.habit-card__actions {
  display: flex;
  align-items: center;
  padding: 0 12px;
}

.habit-card__btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid var(--color-border);
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  color: var(--color-text-tertiary);
}

.habit-card__btn:hover {
  border-color: var(--looops-sage);
  color: var(--looops-sage);
  background: rgba(115, 165, 140, 0.1);
}

.habit-card__btn--completed {
  background: var(--looops-sage);
  border-color: var(--looops-sage);
  color: white;
}

.habit-card__btn--completed:hover {
  background: #5a8a72;
  border-color: #5a8a72;
}

/* Habit Card Mobile Styles */
@media (max-width: 768px) {
  .habit-card {
    margin-bottom: 10px;
  }

  .habit-card__content {
    padding: 12px 14px;
  }

  .habit-card__header {
    gap: 8px;
    margin-bottom: 6px;
  }

  .habit-card__loop-badge {
    padding: 3px 8px;
    font-size: 9px;
  }

  .habit-card__title {
    font-size: 14px;
  }

  .habit-card__btn {
    width: 44px;
    height: 44px;
  }
}

/* ========== Planning Screen ========== */
.planning-screen {
  padding: 24px;
}

.planning-screen__header {
  margin-bottom: 32px;
}

.planning-screen__title {
  font-size: 28px;
  font-weight: 700;
  margin: 0 0 8px 0;
}

.planning-screen__subtitle {
  font-size: 16px;
  color: var(--color-gray-600);
  margin: 0;
}

.planning-screen__loops {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.planning-loop-row {
  display: flex;
  align-items: center;
  padding: 20px;
  background: var(--color-white);
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.planning-loop-row__info {
  display: flex;
  align-items: center;
  gap: 16px;
  min-width: 200px;
}

.planning-loop-row__icon {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
}

.planning-loop-row__name {
  font-size: 18px;
  font-weight: 600;
  margin: 0;
}

.planning-loop-row__state-selector {
  flex: 1;
  display: flex;
  justify-content: center;
}

.planning-loop-row__tasks {
  min-width: 100px;
  text-align: right;
  font-size: 14px;
  color: var(--color-gray-500);
}

/* ========== Loops Kanban View ========== */
.loops-kanban {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  padding: 24px;
}

.loop-card {
  min-width: 280px;
  max-width: 320px;
  background: var(--color-white);
  border-radius: 16px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
  display: flex;
  flex-direction: column;
}

.loop-card__header {
  padding: 20px;
  border-bottom: 1px solid var(--color-gray-100);
}

.loop-card__title-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.loop-card__icon {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
}

.loop-card__name {
  font-size: 18px;
  font-weight: 700;
  margin: 0;
  flex: 1;
  margin-left: 12px;
}

.loop-card__state-selector {
  padding: 16px 20px;
  border-bottom: 1px solid var(--color-gray-100);
}

.loop-card__tasks {
  flex: 1;
  padding: 16px;
  overflow-y: auto;
  max-height: 400px;
}

.loop-card__task {
  padding: 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
  margin-bottom: 8px;
  cursor: pointer;
  transition: background 0.2s ease;
}

.loop-card__task:hover {
  background: var(--color-gray-100);
}

.loop-card__task:last-child {
  margin-bottom: 0;
}

.loop-card__task-title {
  font-size: 14px;
  font-weight: 500;
  margin: 0 0 4px 0;
}

.loop-card__task-meta {
  font-size: 12px;
  color: var(--color-gray-500);
}

.loop-card__add-task {
  padding: 16px;
  border-top: 1px solid var(--color-gray-100);
}

.loop-card__add-btn {
  width: 100%;
  padding: 10px;
  background: var(--color-gray-50);
  border: 2px dashed var(--color-gray-300);
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-gray-500);
  cursor: pointer;
  transition: all 0.2s ease;
}

.loop-card__add-btn:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
  background: var(--color-primary-light);
}

/* ========== History Screen ========== */
.history-screen {
  padding: 24px;
  max-width: 1000px;
}

/* Stats Grid */
.history-stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
  margin-bottom: 32px;
}

.history-stat-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  /* Soft 3D effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 4px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.history-stat-card.streak {
  background: linear-gradient(145deg, rgba(242, 112, 89, 0.15) 0%, var(--color-surface) 100%);
  border-color: rgba(242, 112, 89, 0.2);
}

.history-stat-value {
  font-size: 32px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1;
}

.history-stat-card.streak .history-stat-value {
  color: var(--looops-coral);
}

.history-stat-label {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-top: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.history-stat-best {
  font-size: 11px;
  color: var(--looops-amber);
  margin-top: 4px;
}

/* Section Headers */
.history-section {
  margin-bottom: 32px;
}

.history-section h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 16px 0;
}

/* 30-Day Chart */
.history-chart {
  display: flex;
  align-items: flex-end;
  gap: 4px;
  height: 120px;
  padding: 16px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 4px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.history-chart-bar {
  flex: 1;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: center;
  position: relative;
}

.history-chart-fill {
  width: 100%;
  background: linear-gradient(180deg, var(--looops-sage) 0%, rgba(115, 165, 140, 0.6) 100%);
  border-radius: 4px 4px 0 0;
  min-height: 2px;
  transition: height 0.3s ease;
}

.history-chart-bar.today .history-chart-fill {
  background: linear-gradient(180deg, var(--looops-coral) 0%, rgba(242, 112, 89, 0.6) 100%);
}

.history-chart-bar.weekend .history-chart-fill {
  opacity: 0.6;
}

.history-chart-label {
  position: absolute;
  bottom: -24px;
  font-size: 10px;
  color: var(--color-text-tertiary);
  white-space: nowrap;
}

/* Loop Breakdown Grid */
.history-loops-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.history-loop-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 14px;
  transition: all 0.25s ease;
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 4px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.history-loop-card:hover {
  border-color: var(--loop-color);
  transform: translateY(-2px);
}

.history-loop-icon {
  font-size: 24px;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--loop-bg);
  border-radius: 10px;
  border: 1px solid var(--loop-color);
}

.history-loop-info {
  flex: 1;
  min-width: 0;
}

.history-loop-name {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.history-loop-stats {
  display: block;
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-top: 2px;
}

/* History List */
.history-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.history-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  transition: all 0.15s ease;
}

.history-item:hover {
  border-color: var(--color-border-hover);
  background: var(--color-surface-hover);
}

.history-check {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: linear-gradient(145deg, var(--looops-sage) 0%, rgba(115, 165, 140, 0.7) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 14px;
  flex-shrink: 0;
}

.history-content {
  flex: 1;
  min-width: 0;
}

.history-title {
  display: block;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.history-loop {
  display: block;
  font-size: 12px;
  margin-top: 2px;
}

.history-date {
  font-size: 12px;
  color: var(--color-text-tertiary);
  flex-shrink: 0;
}

/* Empty State */
.history-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 48px;
  text-align: center;
}

.history-empty-icon {
  font-size: 48px;
  opacity: 0.5;
  margin-bottom: 16px;
}

.history-empty-text {
  font-size: 16px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 8px;
}

.history-empty-hint {
  font-size: 14px;
  color: var(--color-text-tertiary);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .history-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .history-loops-grid {
    grid-template-columns: 1fr 1fr;
  }

  .history-chart {
    overflow-x: auto;
    padding-bottom: 32px;
  }
}

@media (max-width: 480px) {
  .history-loops-grid {
    grid-template-columns: 1fr;
  }
}

/* ========== Profile Screen ========== */
.profile-screen {
  padding: 24px;
  max-width: 800px;
  margin: 0 auto;
}

.profile-screen__header {
  text-align: center;
  margin-bottom: 40px;
}

.profile-screen__avatar {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
  margin: 0 auto 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36px;
  font-weight: 700;
  color: white;
}

.profile-screen__name {
  font-size: 28px;
  font-weight: 700;
  margin: 0 0 8px 0;
}

.profile-screen__archetype {
  font-size: 18px;
  color: var(--color-primary);
  font-weight: 600;
  margin: 0;
}

.profile-screen__section {
  background: var(--color-white);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.profile-screen__section-title {
  font-size: 14px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-gray-500);
  margin: 0 0 16px 0;
}

.archetype-display {
  text-align: center;
  padding: 24px;
  background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-white) 100%);
  border-radius: 12px;
}

.archetype-display__name {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-primary);
  margin: 0 0 16px 0;
}

.archetype-blend-bars {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-width: 400px;
  margin: 0 auto;
}

.archetype-blend-bar {
  display: flex;
  align-items: center;
  gap: 12px;
}

.archetype-blend-bar__label {
  font-size: 13px;
  font-weight: 500;
  width: 80px;
  text-align: right;
}

.archetype-blend-bar__track {
  flex: 1;
  height: 6px;
  background: var(--color-gray-200);
  border-radius: 3px;
  overflow: hidden;
}

.archetype-blend-bar__fill {
  height: 100%;
  background: var(--color-primary);
  border-radius: 3px;
}

.archetype-blend-bar__value {
  font-size: 13px;
  font-weight: 600;
  width: 35px;
}

.values-display {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.values-display__chip {
  padding: 6px 14px;
  background: var(--color-primary-light);
  border-radius: 16px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-primary);
}

.inspirations-display {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 12px;
}

.inspirations-display__item {
  text-align: center;
  padding: 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
}

.inspirations-display__avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--color-gray-200);
  margin: 0 auto 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  font-weight: 600;
  color: var(--color-gray-600);
}

.inspirations-display__name {
  font-size: 13px;
  font-weight: 500;
  margin: 0;
}

/* ========== Loop States Summary ========== */
.loop-states-summary {
  background: var(--color-surface);
  border-radius: 12px;
  padding: 16px;
  border: 1px solid var(--color-border-light);
}

.loop-states-summary h3 {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--color-text-tertiary);
  margin: 0 0 12px 0;
}

.loop-state-item__icon {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
}

.loop-state-item__info {
  flex: 1;
}

.loop-state-item__name {
  font-size: 13px;
  font-weight: 600;
  margin: 0 0 2px 0;
}

.loop-state-item__state {
  font-size: 11px;
  font-weight: 500;
}

/* ========== Today View Enhancements ========== */
.today-view {
  display: grid;
  grid-template-columns: 1fr 300px;
  gap: 24px;
  padding: 24px;
}

.today-view__main {
  min-width: 0;
}

.today-view__sidebar {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.today-sidebar-card {
  background: var(--color-white);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.today-sidebar-card__title {
  font-size: 14px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-gray-500);
  margin: 0 0 16px 0;
}

.archetype-summary {
  text-align: center;
}

.archetype-summary__name {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-primary);
  margin: 0 0 8px 0;
}

.archetype-summary__quote {
  font-size: 13px;
  font-style: italic;
  color: var(--color-gray-600);
  margin: 0;
  line-height: 1.4;
}

@media (max-width: 1024px) {
  .today-view {
    grid-template-columns: 1fr;
  }

  .today-view__sidebar {
    display: none;
  }
}

/* ========== Scrollbar Styling ========== */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-gray-100);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--color-gray-300);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-gray-400);
}

/* ========== Goal Suggestion Card ========== */
.goal-suggestion-card {
  background: var(--looops-navy-light);
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.goal-suggestion-card:hover {
  transform: translateY(-2px);
  border-color: rgba(255, 255, 255, 0.3);
}

.goal-suggestion-card--selected {
  border-width: 3px;
}

.goal-suggestion-card__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
}

.goal-suggestion-card__loop-badge {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  color: white;
  display: flex;
  align-items: center;
  gap: 4px;
}

.goal-suggestion-card__score {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.goal-suggestion-card__score-value {
  font-size: 20px;
  font-weight: 700;
  color: var(--looops-coral);
}

.goal-suggestion-card__score-label {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.5);
  text-transform: uppercase;
}

.goal-suggestion-card__title {
  font-size: 18px;
  font-weight: 700;
  margin: 0 0 8px 0;
  color: white;
}

.goal-suggestion-card__description {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.7);
  margin: 0 0 12px 0;
  line-height: 1.4;
}

.goal-suggestion-card__reasoning {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.6);
  padding: 10px 12px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  margin-bottom: 12px;
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.goal-suggestion-card__reasoning-icon {
  flex-shrink: 0;
}

.goal-suggestion-card__metrics {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}

.goal-suggestion-card__metrics-label {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
}

.goal-suggestion-card__metric {
  font-size: 11px;
  padding: 4px 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  color: rgba(255, 255, 255, 0.7);
}

.goal-suggestion-card__selected-indicator {
  margin-top: 12px;
  text-align: center;
  font-size: 14px;
  font-weight: 600;
  color: var(--state-build);
}

/* ========== Annual Goals Wizard ========== */
.annual-goals-wizard {
  width: 100%;
  max-width: 1000px;
  max-height: 90vh;
  background: var(--looops-navy);
  border-radius: 16px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.annual-goals-wizard__header {
  padding: 24px 32px;
  background: var(--looops-navy-light);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.annual-goals-wizard__title {
  font-size: 24px;
  font-weight: 700;
  margin: 0 0 16px 0;
  color: white;
}

.annual-goals-wizard__progress {
  display: flex;
  align-items: center;
  gap: 16px;
}

.annual-goals-wizard__progress-bar {
  flex: 1;
  height: 4px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 2px;
  overflow: hidden;
}

.annual-goals-wizard__progress-fill {
  height: 100%;
  background: var(--looops-coral);
  transition: width 0.3s ease;
}

.annual-goals-wizard__progress-text {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.6);
  white-space: nowrap;
}

.annual-goals-wizard__content {
  flex: 1;
  padding: 32px;
  overflow-y: auto;
}

.annual-goals-wizard__footer {
  padding: 24px 32px;
  background: var(--looops-navy-light);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  justify-content: space-between;
}

.annual-goals-wizard__btn {
  padding: 12px 32px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.annual-goals-wizard__btn--secondary {
  background: transparent;
  border: 2px solid rgba(255, 255, 255, 0.3);
  color: rgba(255, 255, 255, 0.8);
}

.annual-goals-wizard__btn--secondary:hover {
  border-color: rgba(255, 255, 255, 0.5);
  color: white;
}

.annual-goals-wizard__btn--primary {
  background: var(--looops-coral);
  border: 2px solid var(--looops-coral);
  color: white;
}

.annual-goals-wizard__btn--primary:hover {
  background: var(--looops-coral-dark);
  border-color: var(--looops-coral-dark);
}

.annual-goals-wizard__btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Wizard Steps */
.wizard-step {
  max-width: 900px;
  margin: 0 auto;
}

.wizard-step__icon {
  font-size: 64px;
  text-align: center;
  margin-bottom: 24px;
}

.wizard-step__title {
  font-size: 32px;
  font-weight: 700;
  text-align: center;
  margin: 0 0 12px 0;
  color: white;
}

.wizard-step__description {
  font-size: 16px;
  color: rgba(255, 255, 255, 0.7);
  text-align: center;
  margin: 0 0 32px 0;
}

.wizard-step__count {
  display: block;
  margin-top: 8px;
  font-weight: 600;
  color: var(--looops-coral);
}

/* Intro Step */
.wizard-intro__archetype {
  background: var(--looops-navy-light);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 32px;
  text-align: center;
}

.wizard-intro__archetype-blend {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 16px;
  font-size: 24px;
  font-weight: 700;
}

.wizard-intro__archetype-primary {
  color: var(--looops-coral);
}

.wizard-intro__archetype-secondary {
  color: rgba(255, 255, 255, 0.8);
}

.wizard-intro__archetype-score {
  font-size: 14px;
  font-weight: 500;
  margin-left: 4px;
  opacity: 0.7;
}

.wizard-intro__archetype-separator {
  color: rgba(255, 255, 255, 0.4);
}

.wizard-intro__loops h3 {
  text-align: center;
  font-size: 18px;
  margin: 0 0 16px 0;
  color: white;
}

.wizard-intro__loop-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 12px;
}

.wizard-intro__loop-item {
  background: var(--looops-navy-light);
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 12px;
  text-align: center;
}

.wizard-intro__loop-icon {
  font-size: 24px;
  display: block;
  margin-bottom: 4px;
}

.wizard-intro__loop-name {
  font-size: 12px;
  font-weight: 600;
  display: block;
  margin-bottom: 4px;
}

.wizard-intro__loop-state {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  padding: 2px 8px;
  border-radius: 4px;
}

.wizard-intro__loop-state--build { background: var(--state-build); color: white; }
.wizard-intro__loop-state--maintain { background: var(--state-maintain); color: white; }
.wizard-intro__loop-state--recover { background: var(--state-recover); color: white; }
.wizard-intro__loop-state--hibernate { background: var(--state-hibernate); color: white; }

.wizard-intro__loop-name {
  color: white;
}

.wizard-intro__note {
  text-align: center;
  font-size: 14px;
  color: rgba(255, 255, 255, 0.5);
  margin-top: 24px;
}

/* Suggestions Step */
.wizard-suggestions__tabs {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 24px;
}

.wizard-suggestions__tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  background: var(--looops-navy-light);
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  color: white;
}

.wizard-suggestions__tab:hover {
  border-color: rgba(255, 255, 255, 0.4);
}

.wizard-suggestions__tab--active {
  border-width: 3px;
}

.wizard-suggestions__tab--selected {
  border-color: transparent;
}

.wizard-suggestions__tab-icon {
  font-size: 18px;
}

.wizard-suggestions__tab-name {
  font-size: 14px;
  font-weight: 600;
}

.wizard-suggestions__tab-check {
  color: var(--state-build);
  font-weight: 700;
}

.wizard-suggestions__loop-title {
  font-size: 20px;
  margin: 0 0 16px 0;
  color: white;
}

.wizard-suggestions__grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 16px;
}

.wizard-suggestions__prompt {
  text-align: center;
  padding: 64px;
  background: var(--looops-navy-light);
  border-radius: 16px;
  color: rgba(255, 255, 255, 0.5);
}

.wizard-suggestions__summary {
  margin-top: 32px;
  padding: 20px;
  background: var(--looops-navy-light);
  border-radius: 12px;
}

.wizard-suggestions__summary h4 {
  font-size: 14px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.6);
  margin: 0 0 12px 0;
}

.wizard-suggestions__selected-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.wizard-suggestions__selected-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid;
  border-radius: 8px;
  font-size: 14px;
  color: white;
}

.wizard-suggestions__remove {
  background: none;
  border: none;
  font-size: 18px;
  color: rgba(255, 255, 255, 0.4);
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

.wizard-suggestions__remove:hover {
  color: var(--looops-coral);
}

/* Customize Step */
.wizard-customize__list {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.wizard-customize__goal {
  background: var(--looops-navy-light);
  border: 2px solid;
  border-radius: 16px;
  padding: 24px;
}

.wizard-customize__goal-header {
  margin-bottom: 16px;
}

.wizard-customize__goal-badge {
  padding: 4px 12px;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 600;
  color: white;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.wizard-customize__field {
  margin-bottom: 16px;
}

.wizard-customize__field label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.6);
  margin-bottom: 6px;
}

.wizard-customize__field input,
.wizard-customize__field textarea {
  width: 100%;
  padding: 12px;
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 8px;
  font-size: 16px;
  transition: border-color 0.2s ease;
  background: rgba(0, 0, 0, 0.2);
  color: white;
}

.wizard-customize__field input:focus,
.wizard-customize__field textarea:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.wizard-customize__metrics {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  padding: 16px;
}

.wizard-customize__metrics > label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.6);
  margin-bottom: 12px;
}

.wizard-customize__metric {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
}

.wizard-customize__metric:last-child {
  margin-bottom: 0;
}

.wizard-customize__metric-name {
  flex: 1;
  font-size: 14px;
  color: white;
}

.wizard-customize__metric input {
  width: 80px;
  padding: 8px;
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  font-size: 14px;
  text-align: center;
  background: rgba(0, 0, 0, 0.2);
  color: white;
}

.wizard-customize__metric-unit {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
  min-width: 60px;
}

/* Decompose Step */
.wizard-decompose__list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.wizard-decompose__goal {
  background: var(--looops-navy-light);
  border: 2px solid;
  border-radius: 12px;
  overflow: hidden;
}

.wizard-decompose__goal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
}

.wizard-decompose__goal-info {
  display: flex;
  align-items: center;
  gap: 12px;
}

.wizard-decompose__goal-badge {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 14px;
}

.wizard-decompose__goal-title {
  font-size: 16px;
  font-weight: 600;
  color: white;
}

.wizard-decompose__toggle {
  padding: 8px 16px;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  color: rgba(255, 255, 255, 0.8);
}

.wizard-decompose__toggle:hover {
  background: rgba(255, 255, 255, 0.2);
}

.wizard-decompose__toggle--active {
  background: var(--looops-coral);
  color: white;
}

.wizard-decompose__quarters {
  padding: 0 20px 20px;
}

.wizard-decompose__hint {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.6);
  font-style: italic;
  margin: 0 0 12px;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 6px;
  border-left: 3px solid var(--looops-sage);
}

.wizard-decompose__quarter-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.wizard-decompose__quarter {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
}

.wizard-decompose__quarter-label {
  font-size: 12px;
  font-weight: 700;
  color: var(--looops-coral);
  min-width: 30px;
}

.wizard-decompose__quarter-title {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.7);
}

/* Review Step */
.wizard-review__summary {
  display: flex;
  justify-content: center;
  gap: 48px;
  margin-bottom: 32px;
}

.wizard-review__stat {
  text-align: center;
}

.wizard-review__stat-value {
  display: block;
  font-size: 48px;
  font-weight: 700;
  color: var(--looops-coral);
}

.wizard-review__stat-label {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.5);
}

.wizard-review__goals {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.wizard-review__goal {
  background: var(--looops-navy-light);
  border-left: 4px solid;
  border-radius: 12px;
  padding: 20px;
}

.wizard-review__goal-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
}

.wizard-review__goal-badge {
  padding: 4px 10px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 600;
  color: white;
  display: flex;
  align-items: center;
  gap: 4px;
}

.wizard-review__goal-tag {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.6);
  background: rgba(255, 255, 255, 0.1);
  padding: 2px 8px;
  border-radius: 4px;
}

.wizard-review__goal-title {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 8px 0;
  color: white;
}

.wizard-review__goal-description {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.7);
  margin: 0 0 12px 0;
}

.wizard-review__goal-metrics {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.wizard-review__goal-metric {
  font-size: 12px;
  padding: 4px 10px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  color: rgba(255, 255, 255, 0.7);
}

/* ========== Goals Dashboard ========== */
.goals-dashboard {
  padding: 24px;
}

.goals-dashboard__header {
  margin-bottom: 24px;
}

.goals-dashboard__title-row {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: flex-start;
  gap: 8px;
  margin-bottom: 16px;
}

.goals-dashboard__title {
  font-size: 28px;
  font-weight: 700;
  margin: 0;
}

.goals-dashboard__subtitle {
  width: 100%;
  font-size: 14px;
  color: var(--color-gray-400);
  margin: 0;
  order: 2;
}

.goals-dashboard__add-btn {
  padding: 10px 20px;
  background: var(--color-primary);
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
}

.goals-dashboard__add-btn:hover {
  background: var(--color-primary-dark);
}

.goals-dashboard__stats {
  display: flex;
  gap: 24px;
  margin-bottom: 24px;
}

.goals-dashboard__stat {
  background: var(--color-white);
  padding: 16px 24px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.goals-dashboard__stat-value {
  display: block;
  font-size: 28px;
  font-weight: 700;
  color: var(--color-primary);
}

.goals-dashboard__stat-label {
  font-size: 12px;
  color: var(--color-gray-500);
}

.goals-dashboard__controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.goals-dashboard__view-toggle {
  display: flex;
  background: var(--color-gray-100);
  border-radius: 8px;
  padding: 4px;
}

.goals-dashboard__view-btn {
  padding: 8px 16px;
  background: transparent;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-gray-600);
  cursor: pointer;
  transition: all 0.2s ease;
}

.goals-dashboard__view-btn:hover {
  color: var(--color-gray-800);
}

.goals-dashboard__view-btn--active {
  background: var(--color-white);
  color: var(--color-gray-900);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.goals-dashboard__filter-select {
  padding: 8px 16px;
  border: 2px solid var(--color-gray-200);
  border-radius: 8px;
  font-size: 14px;
  background: var(--color-white);
  cursor: pointer;
}

/* Goals Empty State */
.goals-dashboard__empty {
  text-align: center;
  padding: 64px 24px;
  background: var(--color-white);
  border-radius: 16px;
}

.goals-dashboard__empty-icon {
  font-size: 64px;
  margin-bottom: 16px;
}

.goals-dashboard__empty h3 {
  font-size: 20px;
  margin: 0 0 8px 0;
}

.goals-dashboard__empty p {
  color: var(--color-gray-500);
  margin: 0 0 24px 0;
}

/* Goal Card */
.goal-card-wrapper {
  margin-bottom: 12px;
}

.goal-card {
  background: var(--color-white);
  border-left: 4px solid;
  border-radius: 12px;
  padding: 16px 20px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.goal-card--completed {
  opacity: 0.7;
}

.goal-card__header {
  margin-bottom: 12px;
}

.goal-card__title-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.goal-card__expand {
  background: none;
  border: none;
  padding: 4px;
  cursor: pointer;
  color: var(--color-gray-400);
  font-size: 10px;
}

.goal-card__loop-badge {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  color: white;
}

.goal-card__title {
  flex: 1;
  font-size: 16px;
  font-weight: 600;
  margin: 0;
  cursor: pointer;
}

.goal-card__title:hover {
  color: var(--color-primary);
}

.goal-card__timeframe {
  font-size: 11px;
  text-transform: uppercase;
  color: var(--color-gray-400);
  padding: 2px 8px;
  background: var(--color-gray-100);
  border-radius: 4px;
}

.goal-card__progress-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.goal-card__progress-bar {
  flex: 1;
  height: 6px;
  background: var(--color-gray-100);
  border-radius: 3px;
  overflow: hidden;
}

.goal-card__progress-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.3s ease;
}

.goal-card__progress-slider {
  width: 60px;
  cursor: pointer;
}

.goal-card__progress-value {
  font-size: 14px;
  font-weight: 600;
  min-width: 40px;
  text-align: right;
}

.goal-card__metrics {
  display: flex;
  gap: 16px;
  margin-bottom: 12px;
}

.goal-card__metric {
  font-size: 12px;
}

.goal-card__metric-name {
  color: var(--color-gray-500);
  margin-right: 4px;
}

.goal-card__metric-value {
  font-weight: 600;
}

.goal-card__footer {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  color: var(--color-gray-400);
}

.goal-card__children {
  margin-top: 8px;
}

/* Timeline View */
.goals-dashboard__timeframe-section {
  margin-bottom: 32px;
}

.goals-dashboard__timeframe-title {
  font-size: 18px;
  font-weight: 600;
  margin: 0 0 16px 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.goals-dashboard__timeframe-count {
  font-size: 12px;
  background: var(--color-gray-200);
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 500;
}

.goals-dashboard__timeframe-goals {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.goals-timeline-card {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: var(--color-white);
  border: 2px solid;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.goals-timeline-card:hover {
  transform: translateX(4px);
}

.goals-timeline-card__badge {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: white;
}

.goals-timeline-card__content {
  flex: 1;
}

.goals-timeline-card__content h4 {
  font-size: 15px;
  font-weight: 600;
  margin: 0 0 8px 0;
}

.goals-timeline-card__progress {
  height: 4px;
  background: var(--color-gray-100);
  border-radius: 2px;
  overflow: hidden;
}

.goals-timeline-card__progress-fill {
  height: 100%;
  border-radius: 2px;
}

.goals-timeline-card__percent {
  font-size: 16px;
  font-weight: 700;
  color: var(--color-gray-600);
}

/* By Loop View */
.goals-dashboard__by-loop {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 16px;
}

.goals-loop-column {
  background: var(--color-white);
  border-top: 4px solid;
  border-radius: 12px;
  overflow: hidden;
}

.goals-loop-column__header {
  padding: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.goals-loop-column__icon {
  font-size: 20px;
}

.goals-loop-column__name {
  font-size: 16px;
  font-weight: 600;
  flex: 1;
}

.goals-loop-column__count {
  font-size: 12px;
  background: rgba(0, 0, 0, 0.1);
  padding: 2px 8px;
  border-radius: 10px;
}

.goals-loop-column__goals {
  padding: 0 16px 16px;
}

.goals-loop-column__empty {
  text-align: center;
  padding: 24px;
  color: var(--color-gray-400);
  font-size: 14px;
}

.goals-loop-card {
  padding: 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
  margin-bottom: 8px;
  cursor: pointer;
  transition: background 0.2s ease;
}

.goals-loop-card:hover {
  background: var(--color-gray-100);
}

.goals-loop-card:last-child {
  margin-bottom: 0;
}

.goals-loop-card__timeframe {
  font-size: 10px;
  text-transform: uppercase;
  color: var(--color-gray-400);
  display: block;
  margin-bottom: 4px;
}

.goals-loop-card__title {
  font-size: 14px;
  font-weight: 500;
  margin: 0 0 8px 0;
}

.goals-loop-card__progress {
  height: 4px;
  background: var(--color-gray-200);
  border-radius: 2px;
  overflow: hidden;
}

.goals-loop-card__progress-fill {
  height: 100%;
  border-radius: 2px;
}

/* ========== Planning Header ========== */
.planning-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 24px;
  gap: 16px;
  flex-wrap: wrap;
}

@media (max-width: 768px) {
  .planning-header {
    flex-direction: column;
    align-items: stretch;
  }

  .planning-view-toggle {
    width: 100%;
    justify-content: flex-start;
  }

  .planning-view-btn {
    padding: 8px 14px;
    font-size: 13px;
  }
}

.planning-header h2 {
  margin: 0;
}

.planning-header-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.planning-header-content h2 {
  margin: 0;
}

.planning-view-toggle {
  display: flex;
  background: var(--color-gray-100);
  border-radius: 8px;
  padding: 4px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  -ms-overflow-style: none;
  flex-shrink: 0;
}

.planning-view-toggle::-webkit-scrollbar {
  display: none;
}

.planning-view-btn {
  padding: 8px 20px;
  background: transparent;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-gray-600);
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
  flex-shrink: 0;
}

.planning-view-btn:hover {
  color: var(--color-gray-800);
}

.planning-view-btn.active {
  background: var(--color-white);
  color: var(--color-gray-900);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* ========== Weekly Planning Wizard ========== */
.weekly-planning-wizard {
  display: flex;
  flex-direction: column;
  gap: 24px;
  max-width: 900px;
}

/* Progress Steps */
.weekly-steps {
  display: flex;
  gap: 8px;
  padding: 16px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05);
  overflow-x: auto;
}

.weekly-step {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  flex: 1;
  min-width: 140px;
}

.weekly-step:hover {
  background: rgba(255, 255, 255, 0.05);
}

.weekly-step.active {
  background: linear-gradient(145deg, rgba(242, 112, 89, 0.15) 0%, var(--color-surface) 100%);
  border: 1px solid rgba(242, 112, 89, 0.3);
}

.weekly-step.completed {
  opacity: 0.7;
}

.weekly-step-indicator {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-size: 14px;
  font-weight: 600;
  background: var(--color-bg-secondary);
  border: 2px solid var(--color-border);
  color: var(--color-text-secondary);
}

.weekly-step.active .weekly-step-indicator {
  background: var(--looops-coral);
  border-color: var(--looops-coral);
  color: white;
}

.weekly-step.completed .weekly-step-indicator {
  background: var(--looops-sage);
  border-color: var(--looops-sage);
  color: white;
}

.weekly-step-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.weekly-step-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.weekly-step-desc {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* Step Content */
.weekly-content {
  padding: 24px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.weekly-step-content h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin: 24px 0 12px 0;
}

.weekly-step-content h4:first-child {
  margin-top: 0;
}

.weekly-step-intro {
  color: var(--color-text-secondary);
  margin-bottom: 20px;
}

/* Review Stats */
.weekly-review-stats {
  display: flex;
  gap: 16px;
  margin-bottom: 24px;
}

.weekly-stat-card {
  flex: 1;
  padding: 20px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 14px;
  text-align: center;
}

.weekly-stat-card.highlight {
  background: linear-gradient(145deg, rgba(115, 165, 140, 0.15) 0%, var(--color-bg-secondary) 100%);
  border-color: rgba(115, 165, 140, 0.3);
}

.weekly-stat-value {
  display: block;
  font-size: 36px;
  font-weight: 700;
  color: var(--color-text);
}

.weekly-stat-card.highlight .weekly-stat-value {
  color: var(--looops-sage);
}

.weekly-stat-label {
  display: block;
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-top: 4px;
}

/* Loop Summary */
.weekly-loop-summary {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.weekly-loop-stat {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
}

.weekly-loop-icon {
  font-size: 20px;
}

.weekly-loop-name {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.weekly-loop-count {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

/* Wins List */
.weekly-wins-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.weekly-win-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: var(--color-bg-secondary);
  border-radius: 10px;
}

.weekly-win-check {
  color: var(--looops-sage);
  font-weight: 600;
}

.weekly-win-title {
  flex: 1;
  font-size: 14px;
  color: var(--color-text);
}

.weekly-win-loop {
  font-size: 18px;
}

/* Someday Tasks Section */
.weekly-someday-hint {
  font-size: 13px;
  color: var(--color-text-muted);
  margin: 0 0 12px 0;
}

.weekly-someday-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.weekly-someday-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: var(--color-bg-tertiary);
  border-radius: 8px;
  border-left: 3px solid var(--color-text-muted);
}

.weekly-someday-loop {
  font-size: 16px;
}

.weekly-someday-title {
  flex: 1;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.weekly-someday-more {
  padding: 8px 12px;
  font-size: 12px;
  color: var(--color-text-muted);
  font-style: italic;
}

/* States Grid */
.weekly-states-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}

.weekly-state-card {
  padding: 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 14px;
}

.weekly-state-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}

.weekly-state-icon {
  font-size: 24px;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--loop-bg);
  border: 1px solid var(--loop-color);
  border-radius: 10px;
}

.weekly-state-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
}

/* Priorities */
.weekly-priorities-count {
  display: inline-block;
  padding: 6px 12px;
  background: var(--color-bg-secondary);
  border-radius: 16px;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-secondary);
  margin-bottom: 16px;
}

.weekly-goals-list,
.weekly-tasks-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.weekly-priority-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.weekly-priority-item:hover {
  border-color: var(--color-border-hover);
  background: var(--color-surface-hover);
}

.weekly-priority-item.selected {
  background: linear-gradient(145deg, rgba(242, 112, 89, 0.1) 0%, var(--color-bg-secondary) 100%);
  border-color: var(--looops-coral);
}

.weekly-priority-check {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  font-size: 14px;
  background: var(--color-surface);
  border: 2px solid var(--color-border);
  color: var(--color-text-tertiary);
}

.weekly-priority-item.selected .weekly-priority-check {
  background: var(--looops-coral);
  border-color: var(--looops-coral);
  color: white;
}

.weekly-priority-title {
  flex: 1;
  font-size: 14px;
  color: var(--color-text);
}

.weekly-priority-loop {
  font-size: 18px;
}

/* Day Types Step */
.weekly-daytype-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 8px;
  margin-bottom: 20px;
}

.weekly-daytype-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 12px 8px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  position: relative;
}

.weekly-daytype-date {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.weekly-daytype-day {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.weekly-daytype-num {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.weekly-daytype-badge {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 8px 12px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  min-width: 70px;
}

.weekly-daytype-badge:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.weekly-daytype-icon {
  font-size: 20px;
}

.weekly-daytype-label {
  font-size: 10px;
  font-weight: 600;
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.weekly-daytype-picker {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
  background: #1a1a2e;
  border: 2px solid rgba(255, 255, 255, 0.15);
  border-radius: 12px;
  padding: 12px;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 180px;
  margin-top: 8px;
}

.weekly-daytype-option {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  border: 1px solid transparent;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.05);
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
  font-family: inherit;
}

.weekly-daytype-option:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.2);
}

.weekly-daytype-option.selected {
  background: var(--dt-color);
  border-color: var(--dt-color);
}

.weekly-daytype-option.selected .weekly-daytype-option-label {
  color: white;
  font-weight: 600;
}

.weekly-daytype-option-icon {
  font-size: 18px;
}

.weekly-daytype-option-label {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.9);
}

.weekly-daytype-check {
  font-size: 14px;
  color: white;
}

/* Multi-select day type badges container */
.weekly-daytype-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  justify-content: center;
  padding: 8px;
  min-height: 36px;
  cursor: pointer;
  border-radius: 8px;
  transition: all 0.2s ease;
}

.weekly-daytype-badges:hover {
  background: var(--color-surface-hover);
}

.weekly-daytype-badge-mini {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 6px;
  font-size: 14px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.weekly-daytype-picker-header {
  font-size: 11px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.6);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 4px 12px 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  margin-bottom: 6px;
}

.weekly-daytype-option-check {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 4px;
  font-size: 12px;
  font-weight: 700;
  color: white;
  background: transparent;
  flex-shrink: 0;
}

.weekly-daytype-option.selected .weekly-daytype-option-check {
  background: white;
  border-color: white;
  color: var(--dt-color);
}

.weekly-daytype-add-new {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  border: 1px dashed rgba(255, 255, 255, 0.3);
  border-radius: 8px;
  background: transparent;
  cursor: pointer;
  transition: all 0.15s ease;
  font-family: inherit;
  font-size: 13px;
  color: rgba(255, 255, 255, 0.7);
  margin-top: 4px;
}

.weekly-daytype-add-new:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: var(--color-primary);
  color: white;
}

.weekly-daytype-done {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px;
  margin-top: 8px;
  border: none;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0 0 10px 10px;
  background: var(--color-primary);
  color: white;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.weekly-daytype-done:hover {
  background: var(--color-primary-hover);
}

/* Create Custom Day Type Modal */
.weekly-daytype-create-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: 16px;
}

.weekly-daytype-create-content {
  background: #1a1a2e;
  border: 2px solid rgba(255, 255, 255, 0.15);
  border-radius: 16px;
  padding: 28px;
  width: 100%;
  max-width: 380px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
}

.weekly-daytype-create-content h4 {
  margin: 0 0 24px;
  font-size: 20px;
  font-weight: 600;
  color: white;
}

.weekly-daytype-create-field {
  margin-bottom: 18px;
}

.weekly-daytype-create-field label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.6);
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.weekly-daytype-create-field input[type="text"] {
  width: 100%;
  padding: 12px 14px;
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.05);
  color: white;
  font-size: 15px;
  font-family: inherit;
}

.weekly-daytype-create-field input[type="text"]::placeholder {
  color: rgba(255, 255, 255, 0.4);
}

.weekly-daytype-create-field input[type="text"]:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
}

.weekly-daytype-create-row {
  display: flex;
  gap: 16px;
}

.weekly-daytype-create-row .weekly-daytype-create-field {
  flex: 1;
}

.weekly-daytype-icon-input {
  width: 60px !important;
  text-align: center;
  font-size: 20px !important;
}

.weekly-daytype-color-input {
  width: 100%;
  height: 44px;
  padding: 4px;
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.05);
  cursor: pointer;
}

.weekly-daytype-create-preview {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  margin-bottom: 24px;
}

.weekly-daytype-create-preview span:last-child {
  font-size: 15px;
  font-weight: 500;
  color: white;
}

.weekly-daytype-create-actions {
  display: flex;
  gap: 14px;
}

.weekly-daytype-create-cancel,
.weekly-daytype-create-save {
  flex: 1;
  padding: 14px;
  border: none;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
  font-family: inherit;
}

.weekly-daytype-create-cancel {
  background: rgba(255, 255, 255, 0.1);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.weekly-daytype-create-cancel:hover {
  background: rgba(255, 255, 255, 0.15);
}

.weekly-daytype-create-save {
  background: var(--color-primary);
  color: white;
}

.weekly-daytype-create-save:hover:not(:disabled) {
  background: var(--color-primary-hover);
}

.weekly-daytype-create-save:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Day types in schedule view */
.weekly-schedule-daytypes {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  justify-content: center;
  padding: 6px 4px;
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.15s ease;
  min-height: 32px;
}

.weekly-schedule-daytypes:hover {
  background: var(--color-surface-hover);
}

.weekly-day-column {
  position: relative;
}

.weekly-daytype-picker-schedule {
  position: absolute;
  top: auto;
  left: 50%;
  transform: translateX(-50%);
  z-index: 100;
  min-width: 160px;
}

/* Calendar events in weekly schedule */
.weekly-day-events {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 6px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  margin-bottom: 4px;
}

.weekly-day-event {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 6px 8px;
  background: rgba(99, 102, 241, 0.15);
  border-left: 3px solid var(--color-primary);
  border-radius: 4px;
  font-size: 11px;
}

.weekly-event-time {
  color: var(--color-primary);
  font-weight: 600;
  font-size: 10px;
}

.weekly-event-title {
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.weekly-day-more {
  font-size: 10px;
  color: var(--color-text-secondary);
  padding: 4px 8px;
  text-align: center;
}

.weekly-daytype-tips {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  padding: 16px;
}

.weekly-daytype-tips h4 {
  margin: 0 0 12px;
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.weekly-daytype-tips ul {
  margin: 0;
  padding-left: 20px;
}

.weekly-daytype-tips li {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 6px 0;
}

.weekly-daytype-tips li strong {
  color: var(--color-text);
}

/* Responsive - Day Types */
@media (max-width: 768px) {
  .weekly-daytype-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

@media (max-width: 480px) {
  .weekly-daytype-grid {
    grid-template-columns: repeat(3, 1fr);
  }

  .weekly-daytype-badge {
    min-width: 60px;
    padding: 6px 8px;
  }

  .weekly-daytype-label {
    font-size: 9px;
  }
}

/* Schedule */
.weekly-schedule {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 8px;
}

.weekly-day-column {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  padding: 12px;
  min-height: 150px;
}

.weekly-day-header {
  text-align: center;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--color-border);
}

.weekly-day-name {
  display: block;
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.weekly-day-date {
  display: block;
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.weekly-day-tasks {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.weekly-day-task {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  background: var(--color-surface);
  border-radius: 6px;
  font-size: 11px;
}

.weekly-task-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
}

.weekly-task-title {
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.weekly-day-empty {
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-align: center;
  padding: 8px;
}

/* Reflection Step */
.weekly-reflection-prompts {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-bottom: 24px;
}

.weekly-reflection-prompt {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.weekly-reflection-label {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.weekly-reflection-input {
  width: 100%;
  padding: 12px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  color: var(--color-text);
  font-size: 14px;
  resize: none;
  transition: border-color 0.2s ease;
}

.weekly-reflection-input:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.weekly-reflection-input::placeholder {
  color: var(--color-text-tertiary);
}

.weekly-intention-section {
  margin-bottom: 24px;
  padding: 20px;
  background: linear-gradient(135deg, rgba(242, 112, 89, 0.08) 0%, rgba(242, 112, 89, 0.02) 100%);
  border-radius: 12px;
  border: 1px solid rgba(242, 112, 89, 0.2);
}

.weekly-intention-section h4 {
  margin: 0 0 8px 0;
}

.weekly-intention-hint {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 12px 0;
}

.weekly-intention-input {
  width: 100%;
  padding: 12px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  color: var(--color-text);
  font-size: 15px;
  font-weight: 500;
  resize: none;
  transition: border-color 0.2s ease;
}

.weekly-intention-input:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.weekly-insights {
  padding: 20px;
  background: var(--color-bg-secondary);
  border-radius: 12px;
}

.weekly-insights h4 {
  margin: 0 0 16px 0;
  font-size: 14px;
}

.weekly-insights-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.weekly-insight {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  font-size: 14px;
  color: var(--color-text-secondary);
  line-height: 1.5;
}

.weekly-insight-icon {
  font-size: 16px;
  flex-shrink: 0;
}

.weekly-insight strong {
  color: var(--color-text);
}

/* Complete Step */
.weekly-complete {
  text-align: center;
  padding: 48px 24px;
}

.weekly-complete-icon {
  font-size: 64px;
  margin-bottom: 16px;
}

.weekly-complete h3 {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.weekly-complete p {
  color: var(--color-text-secondary);
  margin-bottom: 16px;
}

.weekly-complete-motivation {
  font-size: 18px;
  font-weight: 500;
  font-style: italic;
  color: var(--color-primary);
  margin-bottom: 12px;
}

.weekly-complete-celebration {
  font-size: 14px;
  color: var(--color-text-secondary);
  background: rgba(16, 185, 129, 0.1);
  padding: 8px 16px;
  border-radius: 8px;
  display: inline-block;
  margin-bottom: 24px;
}

.weekly-complete-summary {
  display: flex;
  justify-content: center;
  gap: 24px;
  margin-bottom: 32px;
}

.weekly-summary-item {
  text-align: center;
}

.weekly-summary-label {
  display: block;
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-bottom: 4px;
}

.weekly-summary-value {
  display: block;
  font-size: 28px;
  font-weight: 700;
  color: var(--looops-coral);
}

.weekly-done-btn {
  padding: 14px 32px;
  background: linear-gradient(145deg, var(--looops-coral) 0%, rgba(242, 112, 89, 0.85) 100%);
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  color: white;
  cursor: pointer;
  transition: all 0.25s ease;
  box-shadow: 0 4px 12px rgba(242, 112, 89, 0.3);
}

.weekly-done-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(242, 112, 89, 0.4);
}

/* Navigation */
.weekly-nav {
  display: flex;
  justify-content: space-between;
  gap: 16px;
}

.weekly-nav-btn {
  padding: 12px 24px;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.weekly-nav-btn.secondary {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  color: var(--color-text-secondary);
}

.weekly-nav-btn.secondary:hover:not(:disabled) {
  background: var(--color-surface-hover);
  border-color: var(--color-border-hover);
}

.weekly-nav-btn.secondary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.weekly-nav-btn.primary {
  background: linear-gradient(145deg, var(--looops-coral) 0%, rgba(242, 112, 89, 0.85) 100%);
  border: none;
  color: white;
  box-shadow: 0 2px 8px rgba(242, 112, 89, 0.25);
}

.weekly-nav-btn.primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(242, 112, 89, 0.35);
}

/* Weekly Planning Container with Calendar */
.weekly-planning-container {
  display: flex;
  gap: 24px;
  width: 100%;
}

.weekly-planning-container .weekly-planning-wizard {
  flex: 1;
  min-width: 0;
}

.weekly-planning-container.with-calendar .weekly-planning-wizard {
  max-width: 65%;
}

/* Google Calendar Embed */
.weekly-calendar-embed {
  flex: 0 0 400px;
  display: flex;
  flex-direction: column;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  overflow: hidden;
  height: fit-content;
  max-height: 700px;
  position: sticky;
  top: 24px;
}

.weekly-calendar-embed-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 16px 20px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border-bottom: 1px solid var(--color-border);
}

.weekly-calendar-embed-icon {
  font-size: 20px;
}

.weekly-calendar-embed-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.weekly-calendar-iframe {
  width: 100%;
  height: 600px;
  border: none;
  background: var(--color-bg);
}

/* Calendar Events Panel (synced events) */
.weekly-calendar-panel {
  flex: 0 0 380px;
  display: flex;
  flex-direction: column;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  overflow: hidden;
  height: fit-content;
  max-height: 800px;
  position: sticky;
  top: 24px;
}

.weekly-calendar-panel-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 16px 20px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border-bottom: 1px solid var(--color-border);
}

.weekly-calendar-panel-icon {
  font-size: 20px;
}

.weekly-calendar-panel-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.weekly-calendar-panel-content {
  overflow-y: auto;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.weekly-calendar-day {
  background: var(--color-bg-secondary);
  border-radius: 10px;
  overflow: hidden;
}

.weekly-calendar-day.today {
  border: 2px solid var(--looops-coral);
}

.weekly-calendar-day-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 14px;
  background: var(--color-bg-tertiary);
  border-bottom: 1px solid var(--color-border);
}

.weekly-calendar-day.today .weekly-calendar-day-header {
  background: rgba(242, 112, 89, 0.15);
}

.weekly-calendar-day-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.weekly-calendar-day.today .weekly-calendar-day-name {
  color: var(--looops-coral);
}

.weekly-calendar-day-date {
  font-size: 12px;
  color: var(--color-text-secondary);
}

.weekly-calendar-day-events {
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.weekly-calendar-no-events {
  font-size: 12px;
  color: var(--color-text-tertiary);
  text-align: center;
  padding: 8px;
}

.weekly-calendar-event {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 8px 10px;
  background: var(--color-surface);
  border-left: 3px solid var(--color-primary);
  border-radius: 6px;
}

.weekly-calendar-event-time {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-primary);
}

.weekly-calendar-event-title {
  font-size: 13px;
  color: var(--color-text);
  line-height: 1.3;
}

.weekly-calendar-event-location {
  font-size: 11px;
  color: var(--color-text-tertiary);
  margin-top: 2px;
}

/* Mobile */
@media (max-width: 1024px) {
  .weekly-planning-container {
    flex-direction: column;
  }

  .weekly-planning-container.with-calendar .weekly-planning-wizard {
    max-width: 100%;
  }

  .weekly-calendar-embed {
    flex: 0 0 auto;
    max-height: 500px;
    position: static;
  }

  .weekly-calendar-iframe {
    height: 400px;
  }

  .weekly-calendar-panel {
    flex: 0 0 auto;
    max-height: 500px;
    position: static;
  }
}

@media (max-width: 768px) {
  .weekly-steps {
    flex-direction: column;
  }

  .weekly-step {
    min-width: auto;
  }

  .weekly-loop-summary {
    grid-template-columns: repeat(2, 1fr);
  }

  .weekly-states-grid {
    grid-template-columns: 1fr;
  }

  .weekly-schedule {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .weekly-day-column {
    min-height: auto;
  }

  .weekly-calendar-embed {
    display: none;
  }

  .weekly-calendar-panel {
    display: none;
  }
}

/* Loop State Summary in Today sidebar */
.loop-states-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.loop-state-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
}

.loop-state-icon {
  font-size: 16px;
}

.loop-state-name {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
}

.loop-state-badge {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  padding: 2px 8px;
  border-radius: 4px;
  color: white;
}

/* Archetype Summary in Today sidebar */
.archetype-summary {
  background: var(--color-white);
  border-radius: 12px;
  padding: 16px;
  margin-top: 16px;
}

.archetype-summary h3 {
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--color-gray-500);
  margin: 0 0 12px 0;
}

.archetype-name-display {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-primary);
  margin: 0 0 4px 0;
}

.archetype-blend-display {
  font-size: 13px;
  color: var(--color-gray-500);
  margin: 0;
}

/* Today Screen Layout */
.today-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 32px;
  flex-wrap: wrap;
  gap: 16px;
}

.today-header-main h2 {
  font-size: 32px;
  font-weight: 700;
  margin: 0 0 4px 0;
  letter-spacing: -0.02em;
  line-height: 1.1;
}

.today-quote {
  font-size: 14px;
  color: var(--color-gray-300);
  margin: 8px 0 12px 0;
  font-style: italic;
  font-weight: 400;
  max-width: 600px;
  line-height: 1.5;
}

.today-subtitle {
  font-size: 14px;
  color: var(--color-gray-400);
  margin: 0 0 8px 0;
  font-weight: 400;
}

.today-date {
  font-size: 15px;
  color: var(--color-gray-400);
  margin: 0;
  font-weight: 500;
}

.today-header-controls {
  display: flex;
  align-items: center;
  gap: 12px;
}

.today-filter .filter-select {
  background: var(--color-dark);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 13px;
  color: var(--color-text);
  cursor: pointer;
  min-width: 120px;
}

.today-filter .filter-select:focus {
  outline: none;
  border-color: var(--color-accent);
}

.quick-add-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border: none;
  border-radius: 12px;
  background: var(--looops-sage);
  color: white;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 24px;
  font-weight: 300;
  box-shadow: 0 4px 12px rgba(115, 165, 140, 0.4);
}

.quick-add-btn:hover {
  background: #5a8a72;
  transform: scale(1.08);
  box-shadow: 0 6px 20px rgba(115, 165, 140, 0.5);
}

.today-content {
  display: grid;
  grid-template-columns: 1fr 320px;
  gap: 32px;
}

.today-main {
  min-width: 0;
}

/* Today's Stack Section */
.today-main h3 {
  font-size: 14px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--color-text-tertiary);
  margin: 0 0 8px 0;
}

.today-main .task-count {
  font-size: 13px;
  color: var(--color-text-tertiary);
  margin-bottom: 24px;
}

.today-sidebar {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.today-sidebar h3 {
  font-size: 13px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  color: var(--color-text-tertiary);
  margin: 0 0 16px 0;
  padding-bottom: 12px;
  border-bottom: 2px solid var(--color-border);
}

.loop-states-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.loop-state-item {
  cursor: pointer;
  transition: all 0.2s ease;
  border-radius: 10px;
  padding: 10px 14px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--color-surface);
  border: 1px solid transparent;
}

.loop-state-item:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-border);
}

.loop-state-item.active {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
}

.loop-state-item__info {
  display: flex;
  align-items: center;
  gap: 10px;
}

.loop-state-item__icon {
  font-size: 18px;
}

.loop-state-item__name {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.loop-state-item__badge {
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: white;
}

/* Archetype Card */
.archetype-card {
  background: var(--color-surface);
  border-radius: 16px;
  padding: 20px;
  border: 1px solid var(--color-border);
}

.archetype-card h4 {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--color-text-tertiary);
  margin: 0 0 12px 0;
}

.archetype-card__name {
  font-size: 20px;
  font-weight: 700;
  color: var(--color-text);
  margin: 0 0 4px 0;
}

.archetype-card__traits {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0;
}

@media (max-width: 1024px) {
  .today-content {
    grid-template-columns: 1fr;
  }

  .today-sidebar {
    display: none;
  }
}

/* ========== Calendar View - Side-by-Side Events + Tasks ========== */
.calendar-view {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 20px;
  height: 100%;
  overflow-y: auto;
}

.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
}

.calendar-header h3 {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  color: var(--color-text);
}

.calendar-open-btn {
  padding: 8px 16px;
  background: var(--color-surface);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.2s;
}

.calendar-open-btn:hover {
  background: var(--color-accent);
  color: white;
  border-color: var(--color-accent);
}

.calendar-connect-btn-small {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  background: var(--color-accent);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
}

.calendar-connect-btn-small:hover {
  background: var(--color-accent-hover);
}

.calendar-connect-icon-small {
  font-size: 16px;
}

.calendar-week-grid {
  display: flex;
  flex-direction: column;
  gap: 12px;
  flex: 1;
}

/* Day Row */
.calendar-day-row {
  display: grid;
  grid-template-columns: 100px 1fr;
  gap: 12px;
  background: var(--color-surface);
  border-radius: 12px;
  border: 1px solid var(--color-border);
  padding: 16px;
  transition: all 0.2s;
}

.calendar-day-row.today {
  border-color: var(--looops-sage);
  box-shadow: 0 0 0 1px var(--looops-sage);
}

.calendar-day-row.overdue {
  border-color: var(--looops-coral);
  background: rgba(242, 112, 89, 0.05);
}

/* Day Label */
.calendar-day-label {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding-top: 4px;
}

.calendar-day-name {
  font-weight: 600;
  font-size: 14px;
  color: var(--color-text);
}

.calendar-day-row.today .calendar-day-name {
  color: var(--looops-sage);
}

.calendar-day-name.overdue-label {
  color: var(--looops-coral);
}

.calendar-day-date {
  font-size: 12px;
  color: var(--color-text-secondary);
}

/* Day Content - Events + Tasks side by side */
.calendar-day-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

/* Column Headers */
.calendar-column-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding-bottom: 8px;
  margin-bottom: 8px;
  border-bottom: 1px solid var(--color-border);
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.calendar-column-icon {
  font-size: 14px;
}

.calendar-count {
  margin-left: auto;
  background: var(--color-gray-200);
  color: var(--color-text-secondary);
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 600;
}

.calendar-count.overdue {
  background: var(--looops-coral);
  color: white;
}

/* Events Column */
.calendar-events-column {
  min-height: 60px;
}

.calendar-events-column--disabled {
  opacity: 0.6;
}

/* Tasks Column */
.calendar-tasks-column {
  min-height: 60px;
}

.calendar-add-btn {
  margin-left: auto;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-accent);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.calendar-add-btn:hover {
  background: var(--color-accent-hover);
  transform: scale(1.1);
}

/* Empty States */
.calendar-empty-slot {
  font-size: 13px;
  color: var(--color-text-tertiary);
  padding: 8px 0;
}

.calendar-add-task-inline {
  background: none;
  border: 1px dashed var(--color-border);
  border-radius: 6px;
  padding: 8px 12px;
  color: var(--color-text-secondary);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s;
  width: 100%;
  text-align: left;
}

.calendar-add-task-inline:hover {
  background: var(--color-gray-100);
  border-color: var(--color-accent);
  color: var(--color-accent);
}

/* Items List */
.calendar-items {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* Event Item */
.calendar-event-item {
  padding: 8px 10px;
  background: var(--color-gray-100);
  border-radius: 6px;
  border-left: 3px solid #4285f4;
}

.calendar-event-time {
  font-size: 11px;
  color: var(--color-text-secondary);
  margin-bottom: 2px;
}

.calendar-event-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.calendar-event-location {
  font-size: 11px;
  color: var(--color-text-tertiary);
  margin-top: 2px;
}

/* Task Item */
.calendar-task-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  background: var(--color-gray-100);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s;
}

.calendar-task-item:hover {
  background: var(--color-gray-200);
  transform: translateX(2px);
}

.calendar-task-item.overdue {
  background: rgba(242, 112, 89, 0.1);
}

.calendar-task-priority {
  font-size: 10px;
  font-weight: 700;
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  flex-shrink: 0;
}

.calendar-task-title {
  font-size: 13px;
  color: var(--color-text);
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.calendar-task-loop {
  display: flex;
  align-items: center;
  gap: 2px;
  font-size: 14px;
  padding: 2px 6px;
  border-radius: 4px;
  flex-shrink: 0;
  border: 1px solid;
}

.calendar-task-state {
  font-size: 10px;
}

.calendar-more-tasks {
  font-size: 12px;
  color: var(--color-text-secondary);
  padding: 4px 0;
  text-align: center;
}

/* Loading State */
.calendar-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 48px;
  flex: 1;
}

/* Responsive */
@media (max-width: 768px) {
  .calendar-day-row {
    grid-template-columns: 1fr;
    gap: 8px;
  }

  .calendar-day-label {
    flex-direction: row;
    gap: 8px;
    align-items: baseline;
  }

  .calendar-day-content {
    grid-template-columns: 1fr;
  }
}

/* ========== Quick Add Modal ========== */
.quick-add-modal {
  background: var(--color-dark);
  border-radius: 16px;
  padding: 24px;
  width: 400px;
  max-width: 90vw;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.quick-add-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}

.quick-add-header h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 0;
}

.quick-add-date {
  font-size: 13px;
  color: var(--color-gray-500);
  flex: 1;
}

.quick-add-close {
  width: 32px;
  height: 32px;
  border: none;
  border-radius: 8px;
  background: var(--color-bg);
  color: var(--color-text-secondary);
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease;
}

.quick-add-close:hover {
  background: var(--color-border);
}

.quick-add-field {
  margin-bottom: 16px;
}

.quick-add-field label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-gray-500);
  margin-bottom: 8px;
  text-transform: uppercase;
}

.quick-add-input {
  width: 100%;
  padding: 12px 16px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-bg);
  color: var(--color-text);
  font-size: 16px;
  transition: border-color 0.2s ease;
}

.quick-add-input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.quick-add-input::placeholder {
  color: var(--color-gray-500);
}

.quick-add-loops {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 8px;
}

.quick-add-loop-btn {
  width: 40px;
  height: 40px;
  border: 2px solid;
  border-radius: 10px;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.quick-add-loop-btn:hover {
  transform: scale(1.1);
}

.quick-add-loop-btn.selected {
  transform: scale(1.1);
}

.quick-add-loop-name {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.quick-add-actions {
  display: flex;
  gap: 12px;
  margin-top: 24px;
}

.quick-add-cancel {
  flex: 1;
  padding: 12px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: transparent;
  color: var(--color-text-secondary);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.quick-add-cancel:hover {
  background: var(--color-bg);
}

.quick-add-submit {
  flex: 1;
  padding: 12px;
  border: none;
  border-radius: 8px;
  background: var(--color-accent);
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.quick-add-submit:hover:not(:disabled) {
  background: var(--color-accent-hover);
}

.quick-add-submit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Profile Screen Enhancements */
.profile-section {
  background: var(--color-white);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.profile-section h3 {
  font-size: 16px;
  font-weight: 600;
  margin: 0 0 16px 0;
}

.profile-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
}

.profile-field {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.profile-label {
  font-size: 12px;
  color: var(--color-gray-500);
}

.profile-value {
  font-size: 16px;
  font-weight: 500;
}

.archetype-display {
  text-align: center;
}

.archetype-name-large {
  font-size: 28px;
  font-weight: 800;
  color: var(--color-primary);
  margin: 0 0 24px 0;
}

.archetype-item {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
}

.archetype-item .archetype-name {
  width: 80px;
  font-size: 13px;
  font-weight: 500;
  text-align: right;
}

.archetype-bar {
  flex: 1;
  height: 8px;
  background: var(--color-gray-100);
  border-radius: 4px;
  overflow: hidden;
}

.archetype-bar__fill {
  height: 100%;
  background: var(--color-primary);
  border-radius: 4px;
}

.archetype-score {
  width: 40px;
  font-size: 13px;
  font-weight: 600;
}

.voice-profile-display {
  font-size: 14px;
  line-height: 1.6;
}

.voice-examples {
  margin-top: 12px;
}

.voice-examples ul {
  margin: 8px 0 0 20px;
  padding: 0;
}

.voice-examples li {
  margin-bottom: 4px;
  font-style: italic;
  color: var(--color-gray-600);
}

.profile-actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

/* Appearance Settings */
.appearance-settings {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.setting-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: 12px;
  border: 1px solid var(--color-border);
}

.setting-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.setting-label {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
}

.setting-description {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.theme-toggle-group {
  display: flex;
  gap: 8px;
}

.theme-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 12px 20px;
  background: var(--color-surface);
  border: 2px solid var(--color-border);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
  min-width: 80px;
}

.theme-option:hover {
  border-color: var(--color-text-tertiary);
}

.theme-option.active {
  border-color: var(--looops-coral);
  background: var(--looops-coral-subtle);
}

.theme-option-icon {
  font-size: 24px;
}

.theme-option-label {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.theme-option.active .theme-option-label {
  color: var(--looops-coral);
}

@media (max-width: 640px) {
  .setting-row {
    flex-direction: column;
    gap: 16px;
    align-items: flex-start;
  }

  .theme-toggle-group {
    width: 100%;
  }

  .theme-option {
    flex: 1;
  }
}

.button--danger {
  background: var(--color-danger);
  border-color: var(--color-danger);
}

.button--danger:hover {
  background: #b91c1c;
  border-color: #b91c1c;
}

/* ========== Tasks Screen ========== */
.tasks-screen {
  display: flex;
  height: 100%;
  width: 100%;
  background: var(--color-bg);
}

/* Hide mobile menu button on desktop */
.tasks-mobile-menu-btn {
  display: none;
}

/* Hide mobile overlay on desktop */
.tasks-sidebar-overlay {
  display: none;
}

/* Tasks Sidebar */
.tasks-sidebar {
  width: 240px;
  min-width: 240px;
  background: var(--color-surface);
  border-right: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  position: relative;
  transition: width 0.2s ease, min-width 0.2s ease;
  padding-top: 8px;
}

.tasks-sidebar.collapsed {
  width: 48px;
  min-width: 48px;
}

.sidebar-toggle {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 20px;
  height: 20px;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
}

.sidebar-toggle:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.sidebar-section {
  padding: 4px 8px;
}

.sidebar-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 8px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--color-text-tertiary);
  margin-top: 8px;
}

.sidebar-section-header .add-btn {
  width: 18px;
  height: 18px;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: 4px;
  font-size: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sidebar-section-header .add-btn:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.sidebar-item {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 6px 8px;
  border: none;
  background: transparent;
  color: var(--color-text);
  cursor: pointer;
  border-radius: 6px;
  font-size: 13px;
  text-align: left;
  transition: background 0.1s ease;
}

.sidebar-item:hover {
  background: var(--color-surface-hover);
}

.sidebar-item.active {
  background: var(--looops-navy);
  color: white;
}

.sidebar-icon {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-secondary);
  flex-shrink: 0;
}

.sidebar-item.active .sidebar-icon {
  color: white;
}

.sidebar-icon.today-icon {
  color: var(--looops-coral);
}

.sidebar-icon.loop-icon {
  font-size: 14px;
}

.sidebar-icon.project-dot,
.sidebar-icon.label-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  margin-left: 2px;
  margin-right: 2px;
}

.sidebar-badge {
  margin-left: auto;
  background: var(--color-bg-secondary);
  color: var(--color-text-tertiary);
  font-size: 10px;
  font-weight: 600;
  padding: 1px 6px;
  border-radius: 8px;
  min-width: 18px;
  text-align: center;
}

.sidebar-item.active .sidebar-badge {
  background: rgba(255, 255, 255, 0.2);
  color: white;
}

/* Sidebar item with delete action */
.sidebar-item-with-actions {
  display: flex;
  align-items: center;
  padding: 0;
  gap: 0;
}

.sidebar-item-with-actions .sidebar-item-main {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: none;
  border: none;
  cursor: pointer;
  font-size: 13px;
  color: inherit;
  text-align: left;
}

.sidebar-item-with-actions .sidebar-item-delete {
  opacity: 0;
  padding: 4px 8px;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--color-text-muted);
  font-size: 16px;
  line-height: 1;
  transition: opacity 0.15s, color 0.15s;
}

.sidebar-item-with-actions:hover .sidebar-item-delete {
  opacity: 1;
}

.sidebar-item-with-actions .sidebar-item-delete:hover {
  color: var(--color-red);
}

.sidebar-empty {
  padding: 8px 12px;
  font-size: 13px;
  color: var(--color-text-tertiary);
  font-style: italic;
}

/* Tasks Main */
.tasks-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  padding: 24px 32px;
}

.tasks-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 24px;
}

.tasks-header-left h2 {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
  margin-bottom: 4px;
}

.tasks-description {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.tasks-header-right {
  display: flex;
  gap: 16px;
}

.header-control {
  display: flex;
  align-items: center;
  gap: 8px;
}

.header-control label {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.header-control select {
  padding: 6px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  font-size: 13px;
  color: var(--color-text);
  cursor: pointer;
}

/* Loop Filter Control */
.loop-filter-control {
  display: flex;
  align-items: center;
}

.loop-filter-select {
  padding: 6px 10px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  font-size: 13px;
  color: var(--color-text);
  cursor: pointer;
  min-width: 100px;
}

.loop-filter-select:focus {
  outline: none;
  border-color: var(--looops-coral);
}

/* Task List Container */
.task-list-container {
  flex: 1;
}

.task-list-input {
  margin-bottom: 16px;
}

.task-list-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  margin-bottom: 8px;
}

.task-count {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.show-completed-btn {
  font-size: 13px;
  color: var(--color-text-secondary);
  background: transparent;
  border: none;
  cursor: pointer;
  text-decoration: underline;
}

.show-completed-btn:hover {
  color: var(--color-text);
}

.task-list-empty {
  text-align: center;
  padding: 48px 24px;
  color: var(--color-text-tertiary);
}

.task-list-empty .empty-icon {
  width: 48px;
  height: 48px;
  margin: 0 auto 16px;
  color: var(--color-gray-300);
}

.task-list-empty .empty-icon svg {
  width: 100%;
  height: 100%;
}

/* Task Group */
.task-group {
  margin-bottom: 24px;
}

.task-group-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 0;
  cursor: pointer;
  user-select: none;
}

.task-group-header:hover {
  opacity: 0.8;
}

.group-collapse-icon {
  font-size: 10px;
  color: var(--color-text-tertiary);
  transition: transform 0.2s ease;
}

.group-collapse-icon.collapsed {
  transform: rotate(-90deg);
}

.group-icon {
  font-size: 16px;
}

.group-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.group-count {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-left: auto;
}

.task-group-items {
  border-left: 2px solid var(--color-border);
  margin-left: 6px;
  padding-left: 12px;
}

/* Task Item */
.task-item-wrapper {
  position: relative;
}

.task-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 10px 12px;
  background: transparent;
  border-radius: 8px;
  margin-bottom: 1px;
  cursor: pointer;
  transition: background 0.1s ease;
  border-bottom: 1px solid var(--color-border-light);
}

.task-item:hover {
  background: var(--color-surface-hover);
}

.task-item.completed {
  opacity: 0.5;
}

.task-checkbox {
  width: 18px;
  height: 18px;
  min-width: 18px;
  border: 2px solid var(--color-gray-500);
  border-radius: 50%;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
  margin-top: 1px;
  flex-shrink: 0;
}

.task-checkbox:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-accent);
}

.task-item.completed .task-checkbox {
  background: var(--color-accent);
  border-color: var(--color-accent);
}

.check-icon {
  width: 12px;
  height: 12px;
  color: white;
}

.task-content {
  flex: 1;
  min-width: 0;
}

.task-title-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.task-title {
  font-size: 14px;
  color: var(--color-text);
  word-break: break-word;
}

.task-title.completed {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

.subtask-toggle {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: var(--color-text-tertiary);
  background: var(--color-surface-hover);
  border: none;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  cursor: pointer;
}

.subtask-toggle:hover {
  background: var(--color-border);
}

.toggle-arrow {
  font-size: 8px;
  transition: transform 0.2s ease;
}

.toggle-arrow.open {
  transform: rotate(90deg);
}

.task-description-preview {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-top: 4px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.task-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  flex-wrap: wrap;
}

.task-due {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
}

.task-due.due-overdue {
  color: var(--color-red);
  background: var(--color-red-light);
}

.task-due.due-today {
  color: var(--looops-sage);
  background: rgba(115, 165, 140, 0.15);
}

.task-due.due-tomorrow {
  color: var(--looops-amber);
  background: rgba(244, 185, 66, 0.15);
}

.task-due.due-week {
  color: var(--color-gray-400);
  background: var(--color-gray-100);
}

.task-due.due-later {
  color: var(--color-text-secondary);
  background: var(--color-gray-100);
}

.meta-icon {
  width: 12px;
  height: 12px;
}

.task-loop-badge {
  font-size: 12px;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
}

.task-project-badge {
  font-size: 12px;
  font-weight: 500;
}

.task-labels {
  display: flex;
  gap: 4px;
}

.task-label-badge {
  font-size: 11px;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  color: white;
}

.task-recurrence {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: var(--color-text-secondary);
  background: var(--color-bg-secondary);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
}

.task-recurrence .meta-icon {
  width: 12px;
  height: 12px;
}

.task-estimate {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.task-actions {
  display: flex;
  gap: 4px;
  opacity: 0;
  transition: opacity 0.1s ease;
}

.task-item:hover .task-actions {
  opacity: 1;
}

.task-action-btn {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
}

.task-action-btn:hover {
  background: var(--color-gray-100);
  color: var(--color-text);
}

.task-action-btn.task-action-delete:hover {
  color: var(--color-red);
}

.task-action-btn svg {
  width: 16px;
  height: 16px;
}

/* Task Subtasks */
.task-subtasks {
  margin-left: 32px;
  margin-top: 2px;
}

/* Task Input */
.task-input-container {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  overflow: hidden;
}

.task-input-main {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
}

.task-input-expand-btn {
  width: 24px;
  height: 24px;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: var(--radius-sm);
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.task-input-expand-btn:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.task-input-field {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 14px;
  color: var(--color-text);
  outline: none;
}

.task-input-field::placeholder {
  color: var(--color-text-tertiary);
}

.task-input-submit-btn {
  padding: 6px 16px;
  background: var(--color-accent);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.task-input-submit-btn:hover:not(:disabled) {
  background: var(--color-accent-light);
  box-shadow: 0 0 15px var(--color-accent-glow);
}

.task-input-submit-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.task-input-hints {
  display: flex;
  gap: 6px;
  padding: 0 12px 8px;
  flex-wrap: wrap;
}

.hint-tag {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  background: var(--color-gray-100);
  color: var(--color-text-secondary);
}

.hint-date {
  background: rgba(115, 165, 140, 0.15);
  color: var(--looops-sage);
}

.hint-label {
  background: rgba(244, 185, 66, 0.15);
  color: var(--looops-amber);
}

.task-input-expanded {
  border-top: 1px solid var(--color-border);
  padding: 12px;
}

.task-input-description {
  width: 100%;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  padding: 8px 12px;
  font-size: 13px;
  resize: vertical;
  margin-bottom: 12px;
  font-family: inherit;
}

.task-input-description:focus {
  outline: none;
  border-color: var(--color-red);
}

.task-input-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 12px;
  margin-bottom: 12px;
}

.task-input-option {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.task-input-option label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-text-secondary);
}

.task-input-select,
.task-input-date {
  padding: 6px 10px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
  background: var(--color-surface);
  color: var(--color-text);
}

.priority-buttons {
  display: flex;
  gap: 4px;
}

.priority-btn {
  width: 32px;
  height: 28px;
  border: 2px solid;
  border-radius: var(--radius-sm);
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.1s ease;
}

.task-input-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.task-input-cancel-btn {
  padding: 8px 16px;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.task-input-cancel-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-text-tertiary);
}

.task-input-add-btn {
  padding: 8px 16px;
  background: var(--color-accent);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.task-input-add-btn:hover:not(:disabled) {
  background: var(--color-accent-light);
  box-shadow: 0 0 15px var(--color-accent-glow);
}

.task-input-add-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ========== Kanban View ========== */
.kanban-view {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  height: calc(100vh - 220px);
  min-height: 400px;
}

.kanban-column {
  background: var(--color-surface);
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.kanban-column-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 3px solid var(--looops-coral);
  background: var(--color-bg-secondary);
}

.kanban-column-header--doing {
  border-bottom-color: var(--looops-amber);
}

.kanban-column-header--done {
  border-bottom-color: var(--looops-sage);
}

.kanban-column-title {
  font-size: 14px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text);
}

.kanban-column-count {
  background: var(--color-bg);
  padding: 2px 10px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-secondary);
}

.kanban-column-tasks {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.kanban-task-card {
  background: var(--color-bg-secondary);
  border-radius: 10px;
  padding: 14px 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-left: 4px solid var(--color-border);
}

.kanban-task-card:hover {
  background: var(--color-surface-hover);
  transform: translateX(4px);
}

.kanban-task-card--done {
  opacity: 0.6;
}

.kanban-task-card--done .kanban-task-title {
  text-decoration: line-through;
}

.kanban-task-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 8px;
  line-height: 1.4;
}

.kanban-task-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.kanban-task-loop {
  font-size: 14px;
}

.kanban-task-due {
  background: var(--color-bg);
  padding: 2px 8px;
  border-radius: 4px;
}

/* Task Detail Modal */
.task-detail-modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: var(--shadow-md);
}

.task-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid var(--color-border);
}

.task-detail-loop-badge {
  padding: 4px 12px;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
}

.task-detail-content {
  padding: 20px;
}

.task-detail-title {
  width: 100%;
  border: none;
  background: transparent;
  font-size: 20px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 12px;
  outline: none;
}

.task-detail-title::placeholder {
  color: var(--color-text-tertiary);
}

.task-detail-description {
  width: 100%;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  padding: 12px;
  font-size: 14px;
  resize: vertical;
  margin-bottom: 20px;
  font-family: inherit;
}

.task-detail-description:focus {
  outline: none;
  border-color: var(--color-red);
}

/* Generic section in modal */
.task-detail-section {
  margin-bottom: 20px;
}

.task-detail-section h4 {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 12px;
}

.task-detail-section h4 svg {
  color: var(--color-text-secondary);
}

/* Subtasks in modal */
.task-detail-subtasks {
  margin-bottom: 20px;
}

.subtasks-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.subtasks-header h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.subtasks-count {
  font-size: 12px;
  color: var(--color-text-secondary);
}

.subtasks-list {
  margin-bottom: 12px;
}

.subtask-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 0;
  border-bottom: 1px solid var(--color-border-light);
}

.subtask-checkbox {
  width: 18px;
  height: 18px;
  border: 2px solid var(--color-gray-400);
  border-radius: 50%;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.subtask-checkbox.checked {
  background: var(--color-gray-400);
  border-color: var(--color-gray-400);
}

.subtask-checkbox svg {
  width: 10px;
  height: 10px;
  color: white;
}

.subtask-title {
  font-size: 14px;
  color: var(--color-text);
}

.subtask-title.completed {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

.add-subtask {
  display: flex;
  gap: 8px;
}

.add-subtask input {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
}

.add-subtask input:focus {
  outline: none;
  border-color: var(--color-red);
}

.add-subtask button {
  padding: 8px 16px;
  background: var(--color-gray-100);
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  cursor: pointer;
}

.add-subtask button:hover:not(:disabled) {
  background: var(--color-gray-200);
}

.add-subtask button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Properties */
.task-detail-properties {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.property-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.property-row label {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 120px;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.property-icon {
  width: 16px;
  height: 16px;
}

.property-row select,
.property-row input[type="date"],
.property-row input[type="time"] {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
  background: var(--color-surface);
  color: var(--color-text);
}

.property-row-inputs {
  display: flex;
  flex: 1;
  gap: 8px;
}

.property-row-inputs input[type="date"] {
  flex: 1.5;
}

.property-row-inputs input[type="time"] {
  flex: 1;
  min-width: 100px;
}

.priority-select {
  display: flex;
  gap: 6px;
  flex: 1;
}

.priority-option {
  width: 36px;
  height: 32px;
  border: 2px solid;
  border-radius: var(--radius);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.1s ease;
}

.estimate-input {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}

.estimate-input input {
  width: 80px;
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
}

.estimate-input span {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.property-row-labels {
  align-items: flex-start;
}

.property-row-labels label {
  padding-top: 8px;
}

.labels-picker {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  flex: 1;
}

.label-chip {
  padding: 4px 10px;
  border: 2px solid;
  border-radius: var(--radius);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.1s ease;
}

.no-labels {
  font-size: 13px;
  color: var(--color-text-tertiary);
  font-style: italic;
}

/* Days picker for recurrence */
.property-row-days {
  align-items: flex-start;
}

.property-row-days label {
  padding-top: 8px;
}

.days-picker {
  display: flex;
  gap: 4px;
  flex: 1;
  flex-wrap: wrap;
}

.day-btn {
  width: 40px;
  height: 32px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  background: var(--color-surface);
  color: var(--color-text-secondary);
}

.day-btn:hover {
  border-color: var(--color-accent);
  color: var(--color-accent);
}

.day-btn.active {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
}

/* Recurrence info badge */
.recurrence-info {
  padding-left: 132px;
}

.recurrence-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 12px;
  background: var(--color-accent-subtle);
  border-radius: 12px;
  font-size: 12px;
  color: var(--color-accent);
  font-weight: 500;
}

/* Task detail footer */
.task-detail-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-top: 1px solid var(--color-border);
  background: var(--color-bg-secondary);
}

.footer-left,
.footer-right {
  display: flex;
  gap: 8px;
}

.delete-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: transparent;
  border: none;
  color: var(--color-text-secondary);
  font-size: 13px;
  cursor: pointer;
  border-radius: var(--radius);
}

.delete-btn:hover {
  background: var(--color-red-light);
  color: var(--color-red);
}

.delete-btn svg {
  width: 16px;
  height: 16px;
}

.delete-confirm {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.confirm-yes {
  padding: 4px 12px;
  background: var(--color-red);
  color: white;
  border: none;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 12px;
}

.confirm-no {
  padding: 4px 12px;
  background: var(--color-gray-200);
  color: var(--color-text);
  border: none;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 12px;
}

.cancel-btn {
  padding: 8px 16px;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.cancel-btn:hover {
  background: var(--color-gray-100);
}

.save-btn {
  padding: 8px 20px;
  background: var(--color-red);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
}

.save-btn:hover:not(:disabled) {
  background: var(--color-red-hover);
}

.save-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* New Project Modal */
.new-project-modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 400px;
  padding: 24px;
  box-shadow: var(--shadow-md);
}

.new-project-modal h3 {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 20px;
}

.new-project-modal .form-group {
  margin-bottom: 16px;
}

.new-project-modal .form-group label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  margin-bottom: 6px;
}

.new-project-modal .form-group input,
.new-project-modal .form-group select {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  font-size: 14px;
}

.new-project-modal .form-group input:focus,
.new-project-modal .form-group select:focus {
  outline: none;
  border-color: var(--color-red);
}

.new-project-modal .modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 20px;
}

.new-project-modal .create-btn {
  padding: 10px 20px;
  background: var(--color-red);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.new-project-modal .create-btn:hover:not(:disabled) {
  background: var(--color-red-hover);
}

.new-project-modal .create-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ================================
   Quick Add Modal
   ================================ */

.quick-add-modal {
  background: var(--color-white);
  border-radius: 12px;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  width: 100%;
  max-width: 560px;
  max-height: 90vh;
  overflow: hidden;
  animation: slideUp 0.2s ease-out;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.quick-add-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--color-border);
}

.quick-add-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--color-gray-900);
}

.quick-add-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  border-radius: 6px;
  font-size: 24px;
  color: var(--color-gray-500);
  cursor: pointer;
  transition: background 0.15s ease, color 0.15s ease;
}

.quick-add-close:hover {
  background: var(--color-gray-100);
  color: var(--color-gray-700);
}

.quick-add-modal .task-input-container {
  padding: 20px;
  border: none;
  background: transparent;
}

.quick-add-modal .task-input-main {
  background: var(--color-gray-50);
  border-radius: 8px;
  padding: 4px;
}

.quick-add-modal .task-input-field {
  background: transparent;
  border: none;
  font-size: 15px;
}

.quick-add-modal .task-input-expanded {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid var(--color-border);
}

.quick-add-modal .task-input-actions {
  padding-top: 16px;
  margin-top: 16px;
  border-top: 1px solid var(--color-border);
}

/* Floating Action Button */
.fab-quick-add {
  position: fixed;
  bottom: 32px;
  right: 32px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: var(--color-red);
  color: white;
  border: none;
  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
  z-index: 100;
}

/* Position FAB above mobile nav */
@media (max-width: 768px) {
  .fab-quick-add {
    bottom: 80px;
    right: 16px;
    width: 50px;
    height: 50px;
  }

  .fab-quick-add svg {
    width: 24px;
    height: 24px;
  }
}

.fab-quick-add:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 20px rgba(220, 38, 38, 0.5);
  background: var(--color-red-hover);
}

.fab-quick-add:active {
  transform: scale(0.95);
}

.fab-quick-add svg {
  width: 28px;
  height: 28px;
}

/* Loop Prediction Indicator */
.loop-prediction {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
  margin-top: 12px;
}

.loop-prediction-label {
  font-size: 12px;
  color: var(--color-gray-500);
}

.loop-prediction-suggestion {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background: var(--color-white);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: border-color 0.15s ease, background 0.15s ease;
}

.loop-prediction-suggestion:hover {
  border-color: var(--color-accent);
  background: var(--color-accent-subtle);
}

.loop-prediction-suggestion.active {
  border-color: var(--color-accent);
  background: var(--color-accent-subtle);
}

.loop-prediction-confidence {
  font-size: 11px;
  color: var(--color-gray-400);
  margin-left: 4px;
}

/* Loop auto badge (shown when AI predicted the loop) */
.loop-auto-badge {
  display: inline-block;
  margin-left: 6px;
  padding: 2px 6px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-radius: 4px;
  vertical-align: middle;
}

/* Hint confidence percentage */
.hint-confidence {
  display: inline-block;
  margin-left: 4px;
  font-size: 10px;
  opacity: 0.7;
}

/* Predicted hint tag styling */
.hint-tag.hint-predicted {
  position: relative;
  animation: pulseHint 2s ease-in-out infinite;
}

@keyframes pulseHint {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.4);
  }
  50% {
    box-shadow: 0 0 0 4px rgba(102, 126, 234, 0);
  }
}

/* Recurrence clear button */
.recurrence-clear-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  margin-left: 4px;
  padding: 0;
  border: none;
  background: var(--color-gray-200);
  color: var(--color-text-secondary);
  border-radius: 50%;
  cursor: pointer;
  font-size: 12px;
  line-height: 1;
  vertical-align: middle;
}

.recurrence-clear-btn:hover {
  background: var(--color-error);
  color: white;
}

/* ========== Light Theme ========== */
[data-theme="light"] {
  /* Light Theme - Looops Brand */
  --color-black: #1a1a2e;
  --color-dark: #1a1a2e;
  --color-gray-900: #1a1a2e;
  --color-gray-800: #2d2d45;
  --color-gray-700: #454560;
  --color-gray-600: #5e5e78;
  --color-gray-500: #8080a0;
  --color-gray-400: #b0b0c5;
  --color-gray-300: #d4d4e0;
  --color-gray-200: #e8e8f0;
  --color-gray-100: #f5f5f8;
  --color-white: #ffffff;

  /* Accent - Looops Coral (Primary Action) */
  --color-accent: #d95a45;
  --color-accent-light: #F27059;
  --color-accent-dark: #c04a38;
  --color-accent-glow: rgba(217, 90, 69, 0.2);
  --color-accent-subtle: rgba(217, 90, 69, 0.08);
  --color-accent-hover: #F27059;

  /* Background - Clean white with slight warmth */
  --color-bg: #f8f8fa;
  --color-bg-secondary: #ffffff;
  --color-surface: #ffffff;
  --color-surface-hover: #f0f0f5;
  --color-border: #e0e0e8;
  --color-border-light: #f0f0f5;

  /* Text Colors - Looops Navy */
  --color-text: #1a1a2e;
  --color-text-secondary: #5e5e78;
  --color-text-tertiary: #8080a0;

  /* Shadows - Softer for light theme */
  --shadow-sm: 0 1px 3px rgba(26, 26, 46, 0.08);
  --shadow-md: 0 4px 12px rgba(26, 26, 46, 0.1);
  --shadow-glow: 0 0 20px var(--color-accent-glow);
  --shadow-glow-sm: 0 0 10px var(--color-accent-glow);

  /* Semantic aliases (used by Meal Prep module) */
  --bg-primary: #ffffff;
  --bg-secondary: #f8f8fa;
  --bg-tertiary: #f0f0f5;
  --text-primary: #1a1a2e;
  --text-secondary: #5e5e78;
  --border-primary: #e0e0e8;
  --border-secondary: #f0f0f5;
}

/* Light theme specific overrides */
[data-theme="light"] .sidebar {
  background: #ffffff;
  border-right-color: var(--color-border);
}

[data-theme="light"] .app-main {
  background: var(--color-bg);
}

[data-theme="light"] .loops-viz-container {
  background: radial-gradient(ellipse at center, var(--color-gray-100) 0%, var(--color-bg) 70%);
}

[data-theme="light"] .loop-outer-circle {
  fill: #ffffff;
}

[data-theme="light"] .loop-svg {
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

[data-theme="light"] .loop-circle-item:hover .loop-svg {
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
}

[data-theme="light"] .theme-toggle {
  background: var(--color-gray-100);
}

[data-theme="light"] .nav-item {
  color: var(--color-gray-600);
}

[data-theme="light"] .nav-item:hover {
  background: var(--color-gray-100);
  color: var(--color-gray-900);
}

[data-theme="light"] .nav-item--active {
  background: var(--color-accent);
  color: #ffffff;
}

[data-theme="light"] .loop-detail {
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
}

[data-theme="light"] .loop-detail-task:hover {
  background: var(--color-gray-100);
}

[data-theme="light"] .today-panel {
  box-shadow: var(--shadow-sm);
}

[data-theme="light"] .card:hover,
[data-theme="light"] .task-row:hover,
[data-theme="light"] .loop-card:hover {
  box-shadow: var(--shadow-md);
}

/* Light theme - Calendar View */
[data-theme="light"] .calendar-container {
  background: #ffffff;
  box-shadow: var(--shadow-sm);
}

[data-theme="light"] .calendar-nav-btn {
  background: var(--color-gray-100);
}

[data-theme="light"] .calendar-nav-btn:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .calendar-today-btn {
  border-color: var(--color-gray-300);
}

[data-theme="light"] .calendar-day:hover {
  background: var(--color-gray-100);
}

[data-theme="light"] .calendar-day.today {
  background: var(--color-accent-subtle);
}

[data-theme="light"] .calendar-day.selected {
  background: var(--color-accent-subtle);
}

[data-theme="light"] .calendar-detail-panel {
  background: #ffffff;
  box-shadow: var(--shadow-sm);
}

[data-theme="light"] .calendar-task-item {
  background: var(--color-gray-50);
}

[data-theme="light"] .calendar-task-item:hover {
  background: var(--color-gray-100);
}

/* Light theme - Quick Add Modal */
[data-theme="light"] .quick-add-modal {
  background: #ffffff;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
}

[data-theme="light"] .quick-add-close {
  background: var(--color-gray-100);
}

[data-theme="light"] .quick-add-close:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .quick-add-input {
  background: var(--color-gray-50);
  border-color: var(--color-gray-300);
}

[data-theme="light"] .quick-add-input:focus {
  border-color: var(--color-accent);
}

[data-theme="light"] .quick-add-cancel {
  border-color: var(--color-gray-300);
}

[data-theme="light"] .quick-add-cancel:hover {
  background: var(--color-gray-100);
}

/* Light theme - Today Header Controls */
[data-theme="light"] .filter-select {
  background: #ffffff;
  border-color: var(--color-gray-300);
}

[data-theme="light"] .filter-select:focus {
  border-color: var(--color-accent);
}

/* Light theme - View Toggle */
[data-theme="light"] .view-toggle {
  background: var(--color-gray-200);
}

[data-theme="light"] .view-toggle-btn {
  color: var(--color-gray-600);
}

[data-theme="light"] .view-toggle-btn:not(.active):hover {
  color: var(--color-gray-900);
  background: var(--color-gray-300);
}

[data-theme="light"] .view-toggle-btn.active {
  background: var(--looops-navy);
  color: white;
  box-shadow: 0 2px 4px rgba(26, 26, 46, 0.3);
}

/* Light theme - Goals Dashboard */
[data-theme="light"] .goals-dashboard__stat {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .goals-dashboard__stat-value {
  color: var(--color-accent);
}

[data-theme="light"] .goals-dashboard__add-btn {
  background: var(--color-accent);
}

[data-theme="light"] .goals-dashboard__add-btn:hover {
  background: var(--color-accent-dark);
}

[data-theme="light"] .goals-dashboard__view-toggle {
  background: var(--color-gray-100);
}

[data-theme="light"] .goals-dashboard__empty {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .goal-card {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .goal-suggestion-card {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .goal-suggestion-card:hover {
  border-color: var(--color-accent);
}

/* Light theme - Text visibility fixes for interactive states */
[data-theme="light"] .loop-state-item:hover {
  background: var(--color-gray-100);
}

[data-theme="light"] .loop-state-item.active {
  background: var(--color-accent-subtle);
}

[data-theme="light"] .loop-state-item .loop-state-name {
  color: var(--color-gray-800);
}

[data-theme="light"] .task-card {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .task-card:hover {
  background: var(--color-gray-50);
  border-color: var(--color-gray-300);
}

[data-theme="light"] .task-card__title {
  color: var(--color-gray-900);
}

[data-theme="light"] .task-card__meta-item {
  color: var(--color-gray-600);
}

[data-theme="light"] .task-card__framing-text {
  color: var(--color-gray-600);
}

[data-theme="light"] .task-card__btn {
  background: var(--color-gray-100);
  color: var(--color-gray-700);
}

[data-theme="light"] .task-card__btn:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .task-card__btn--complete:hover {
  background: var(--color-success);
  color: white;
}

[data-theme="light"] .task-card__btn--skip:hover {
  background: var(--color-gray-300);
}

[data-theme="light"] .todays-stack__header h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .todays-stack__count {
  color: var(--color-gray-600);
}

[data-theme="light"] .todays-stack__empty-state {
  color: var(--color-gray-600);
}

[data-theme="light"] .todays-stack__empty-state h3 {
  color: var(--color-gray-800);
}

[data-theme="light"] .loop-states-summary h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .archetype-summary {
  background: var(--color-gray-50);
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .archetype-summary h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .archetype-name-display {
  color: var(--color-gray-800);
}

[data-theme="light"] .archetype-blend-display {
  color: var(--color-gray-600);
}

[data-theme="light"] .today-header h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .today-date {
  color: var(--color-gray-600);
}

[data-theme="light"] .quick-add-btn {
  background: var(--color-accent);
  color: white;
}

[data-theme="light"] .quick-add-btn:hover {
  background: var(--color-accent-dark);
}

[data-theme="light"] .loop-card {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .loop-card__header h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .loop-card__empty {
  color: var(--color-gray-500);
}

[data-theme="light"] .loop-task-row {
  background: var(--color-gray-50);
}

[data-theme="light"] .loop-task-row:hover {
  background: var(--color-gray-100);
}

[data-theme="light"] .loop-task-title {
  color: var(--color-gray-800);
}

[data-theme="light"] .loop-task-subloop {
  color: var(--color-gray-500);
}

[data-theme="light"] .screen-header h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .planning-header h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .screen-description {
  color: var(--color-gray-600);
}

[data-theme="light"] .today-subtitle {
  color: var(--color-gray-600);
}

[data-theme="light"] .today-quote {
  color: var(--color-gray-500);
}

[data-theme="light"] .goals-dashboard__subtitle {
  color: var(--color-gray-600);
}

[data-theme="light"] .planning-loop-row {
  background: var(--color-gray-50);
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .planning-loop-info strong {
  color: var(--color-gray-900);
}

[data-theme="light"] .planning-loop-info span {
  color: var(--color-gray-600);
}

[data-theme="light"] .planning-view-btn {
  color: var(--color-gray-600);
}

[data-theme="light"] .planning-view-btn:hover {
  color: var(--color-gray-800);
}

[data-theme="light"] .planning-view-btn.active {
  background: #ffffff;
  color: var(--color-gray-900);
}

[data-theme="light"] .history-screen h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .history-item {
  background: #ffffff;
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .history-title {
  color: var(--color-gray-800);
}

[data-theme="light"] .history-date {
  color: var(--color-gray-500);
}

[data-theme="light"] .profile-screen h2,
[data-theme="light"] .profile-section h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .profile-label {
  color: var(--color-gray-600);
}

[data-theme="light"] .profile-value {
  color: var(--color-gray-800);
}

[data-theme="light"] .archetype-name-large {
  color: var(--color-gray-900);
}

[data-theme="light"] .archetype-name {
  color: var(--color-gray-700);
}

[data-theme="light"] .archetype-score {
  color: var(--color-gray-600);
}

[data-theme="light"] .voice-profile-display {
  color: var(--color-gray-700);
}

[data-theme="light"] .profile-actions .button {
  background: var(--color-gray-100);
  color: var(--color-gray-800);
  border: 1px solid var(--color-gray-300);
}

[data-theme="light"] .profile-actions .button:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .profile-actions .button--danger {
  background: var(--color-error);
  color: white;
  border-color: var(--color-error);
}

[data-theme="light"] .goals-dashboard__title {
  color: var(--color-gray-900);
}

[data-theme="light"] .goals-dashboard__stat-label {
  color: var(--color-gray-600);
}

[data-theme="light"] .goals-dashboard__view-btn {
  color: var(--color-gray-600);
}

[data-theme="light"] .goals-dashboard__view-btn--active {
  background: #ffffff;
  color: var(--color-gray-900);
}

[data-theme="light"] .goals-dashboard__filter-select {
  background: #ffffff;
  color: var(--color-gray-800);
  border: 1px solid var(--color-gray-300);
}

[data-theme="light"] .goals-dashboard__timeframe-title {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-card__title {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-card__progress-value {
  color: var(--color-gray-700);
}

[data-theme="light"] .goal-card__date {
  color: var(--color-gray-500);
}

[data-theme="light"] .goal-card__children-count {
  color: var(--color-gray-500);
}

[data-theme="light"] .goals-timeline-card h4 {
  color: var(--color-gray-900);
}

[data-theme="light"] .goals-loop-column__name {
  color: var(--color-gray-900);
}

[data-theme="light"] .goals-loop-card__title {
  color: var(--color-gray-800);
}

[data-theme="light"] .goals-loop-card__timeframe {
  color: var(--color-gray-500);
}

[data-theme="light"] .goals-loop-column__empty {
  color: var(--color-gray-500);
}

[data-theme="light"] .goal-suggestion-card--selected {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
}

[data-theme="light"] .goal-detail-header h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-detail-description {
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-detail-progress-section h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-detail-progress-value {
  color: var(--color-accent);
}

[data-theme="light"] .goal-detail-metrics h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-detail-metric-name {
  color: var(--color-gray-800);
}

[data-theme="light"] .goal-detail-metric-value {
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-detail-date-label {
  color: var(--color-gray-500);
}

[data-theme="light"] .goal-detail-date-value {
  color: var(--color-gray-800);
}

[data-theme="light"] .goal-breakdown-header h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-breakdown-parent-title {
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-breakdown-suggestions h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-breakdown-hint {
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-breakdown-item-title {
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-breakdown-item-date {
  color: var(--color-gray-500);
}

[data-theme="light"] .goal-breakdown-summary {
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-breakdown-tasks-count {
  color: var(--color-accent);
}

/* Loop labels in visualization - light theme */
[data-theme="light"] .loop-label .loop-name {
  color: var(--color-gray-800);
}

[data-theme="light"] .loop-label .loop-state {
  color: var(--color-gray-600);
}

[data-theme="light"] .meaning-label .meaning-name {
  color: var(--color-gray-800);
}

/* Dark theme - Goals Dashboard (fix colors) */
.goals-dashboard__stat {
  background: var(--color-dark);
  border: 1px solid var(--color-border);
}

.goals-dashboard__stat-value {
  color: var(--color-accent);
}

.goals-dashboard__add-btn {
  background: var(--color-accent);
}

.goals-dashboard__add-btn:hover {
  background: var(--color-accent-hover);
}

.goals-dashboard__view-toggle {
  background: var(--color-gray-800);
}

.goals-dashboard__view-btn--active {
  background: var(--color-dark);
  color: var(--color-text);
}

.goals-dashboard__empty {
  background: var(--color-dark);
  border: 1px solid var(--color-border);
}

.goal-card {
  background: var(--color-dark);
  border: 1px solid var(--color-border);
  box-shadow: none;
}

.goal-suggestion-card {
  background: var(--color-dark);
  border: 1px solid var(--color-border);
}

.goal-suggestion-card:hover {
  border-color: var(--color-accent);
  background: var(--color-gray-900);
}

.goal-suggestion-card--selected {
  border-color: var(--color-accent);
  background: var(--color-accent-subtle);
}

/* ========== Goal Detail Modal ========== */
.goal-detail-modal {
  background: var(--color-dark);
  border-radius: 16px;
  width: 90%;
  max-width: 520px;
  max-height: 85vh;
  overflow-y: auto;
  border: 1px solid var(--color-border);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

.goal-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 24px 24px 16px;
  border-bottom: 1px solid var(--color-border);
}

.goal-detail-title-row {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}

.goal-detail-loop-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 10px;
  font-size: 20px;
}

.goal-detail-header h2 {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
  line-height: 1.3;
}

.goal-detail-close {
  background: transparent;
  border: none;
  font-size: 28px;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: 0;
  line-height: 1;
  transition: color 0.2s;
}

.goal-detail-close:hover {
  color: var(--color-text);
}

.goal-detail-content {
  padding: 24px;
}

.goal-detail-meta {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  flex-wrap: wrap;
}

.goal-detail-timeframe,
.goal-detail-loop {
  background: var(--color-gray-800);
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 500;
  text-transform: capitalize;
  color: var(--color-text-secondary);
}

.goal-detail-status {
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  text-transform: capitalize;
}

.goal-detail-status--active {
  background: var(--color-accent-subtle);
  color: var(--color-accent);
}

.goal-detail-status--completed {
  background: rgba(115, 165, 140, 0.15);
  color: var(--looops-sage);
}

.goal-detail-status--paused {
  background: rgba(244, 185, 66, 0.15);
  color: var(--looops-amber);
}

.goal-detail-description {
  color: var(--color-text-secondary);
  font-size: 14px;
  line-height: 1.6;
  margin-bottom: 24px;
}

.goal-detail-progress-section {
  margin-bottom: 24px;
}

.goal-detail-progress-section h3 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 12px;
}

.goal-detail-progress-bar {
  height: 8px;
  background: var(--color-gray-800);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 12px;
}

.goal-detail-progress-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.3s ease;
}

.goal-detail-progress-controls {
  display: flex;
  align-items: center;
  gap: 16px;
}

.goal-detail-slider {
  flex: 1;
  height: 6px;
  -webkit-appearance: none;
  appearance: none;
  background: var(--color-gray-700);
  border-radius: 3px;
  cursor: pointer;
}

.goal-detail-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  background: var(--color-accent);
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(26, 26, 46, 0.4);
}

.goal-detail-slider::-moz-range-thumb {
  width: 18px;
  height: 18px;
  background: var(--color-accent);
  border-radius: 50%;
  cursor: pointer;
  border: none;
  box-shadow: 0 2px 6px rgba(26, 26, 46, 0.4);
}

.goal-detail-progress-value {
  font-size: 16px;
  font-weight: 700;
  color: var(--color-accent);
  min-width: 50px;
  text-align: right;
}

.goal-detail-metrics {
  margin-bottom: 24px;
}

.goal-detail-metrics h3 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 12px;
}

.goal-detail-metrics-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.goal-detail-metric {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--color-gray-900);
  border-radius: 8px;
}

.goal-detail-metric-name {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.goal-detail-metric-progress {
  width: 100px;
  height: 6px;
  background: var(--color-gray-700);
  border-radius: 3px;
  overflow: hidden;
}

.goal-detail-metric-fill {
  height: 100%;
  background: var(--color-accent);
  border-radius: 3px;
}

.goal-detail-metric-value {
  font-size: 12px;
  color: var(--color-text-secondary);
  min-width: 80px;
  text-align: right;
}

/* Editable metrics */
.goal-detail-metrics-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.goal-detail-metrics-header h3 {
  margin: 0;
}

.goal-detail-add-metric-btn {
  padding: 6px 12px;
  background: transparent;
  border: 1px dashed var(--color-gray-600);
  border-radius: 6px;
  color: var(--color-text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.goal-detail-add-metric-btn:hover {
  border-color: var(--color-accent);
  color: var(--color-accent);
  background: rgba(0, 150, 136, 0.1);
}

.goal-detail-metric--editable {
  flex-direction: column;
  align-items: stretch;
  gap: 8px;
}

.goal-detail-metric-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.goal-detail-metric-name-input {
  flex: 1;
  padding: 6px 10px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 4px;
  color: var(--color-text);
  font-size: 13px;
  font-weight: 500;
}

.goal-detail-metric-name-input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.goal-detail-metric-delete {
  width: 24px;
  height: 24px;
  padding: 0;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: var(--color-gray-500);
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

.goal-detail-metric-delete:hover {
  color: #ef4444;
  background: rgba(239, 68, 68, 0.1);
}

.goal-detail-metric-values {
  display: flex;
  align-items: center;
  gap: 6px;
}

.goal-detail-metric-current,
.goal-detail-metric-target {
  width: 60px;
  padding: 4px 8px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 4px;
  color: var(--color-text);
  font-size: 12px;
  text-align: center;
}

.goal-detail-metric-current:focus,
.goal-detail-metric-target:focus {
  outline: none;
  border-color: var(--color-accent);
}

.goal-detail-metric-separator {
  color: var(--color-text-secondary);
  font-size: 12px;
}

.goal-detail-metric-unit {
  width: 70px;
  padding: 4px 8px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 4px;
  color: var(--color-text-secondary);
  font-size: 12px;
}

.goal-detail-metric-unit:focus {
  outline: none;
  border-color: var(--color-accent);
}

.goal-detail-no-metrics {
  color: var(--color-text-secondary);
  font-size: 13px;
  font-style: italic;
  padding: 12px;
  text-align: center;
  background: var(--color-gray-900);
  border-radius: 8px;
}

/* Danger zone - Delete button */
.goal-detail-danger-zone {
  margin-top: 24px;
  padding-top: 16px;
  border-top: 1px solid var(--color-gray-800);
}

.goal-detail-btn--delete {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 16px;
  background: transparent;
  border: 1px solid #ef4444;
  border-radius: 8px;
  color: #ef4444;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.goal-detail-btn--delete:hover {
  background: rgba(239, 68, 68, 0.1);
}

.goal-detail-btn--delete svg {
  flex-shrink: 0;
}

.goal-detail-dates {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 24px;
}

.goal-detail-date {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.goal-detail-date-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.goal-detail-date-value {
  font-size: 13px;
  color: var(--color-text);
}

.goal-detail-actions {
  display: flex;
  gap: 12px;
  padding-top: 16px;
  border-top: 1px solid var(--color-border);
}

.goal-detail-btn {
  flex: 1;
  padding: 12px 20px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.goal-detail-btn--complete {
  background: var(--color-accent);
  color: white;
}

.goal-detail-btn--complete:hover {
  background: var(--color-accent-light);
}

.goal-detail-btn--pause {
  background: var(--color-gray-800);
  color: var(--color-text);
}

.goal-detail-btn--pause:hover {
  background: var(--color-gray-700);
}

.goal-detail-btn--resume {
  background: var(--color-accent);
  color: white;
}

.goal-detail-btn--resume:hover {
  background: var(--color-accent-light);
}

.goal-detail-btn--reopen {
  background: var(--color-gray-800);
  color: var(--color-text);
}

.goal-detail-btn--reopen:hover {
  background: var(--color-gray-700);
}

/* Light theme for goal detail modal */
[data-theme="light"] .goal-detail-modal {
  background: white;
  border-color: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-header {
  border-bottom-color: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-timeframe,
[data-theme="light"] .goal-detail-loop {
  background: var(--color-gray-100);
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-detail-progress-bar,
[data-theme="light"] .goal-detail-slider {
  background: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-metric {
  background: var(--color-gray-50);
}

[data-theme="light"] .goal-detail-metric-progress {
  background: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-metric-name-input,
[data-theme="light"] .goal-detail-metric-current,
[data-theme="light"] .goal-detail-metric-target,
[data-theme="light"] .goal-detail-metric-unit {
  background: white;
  border-color: var(--color-gray-300);
  color: var(--color-gray-800);
}

[data-theme="light"] .goal-detail-add-metric-btn {
  border-color: var(--color-gray-400);
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-detail-no-metrics {
  background: var(--color-gray-50);
  color: var(--color-gray-500);
}

[data-theme="light"] .goal-detail-danger-zone {
  border-top-color: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-actions {
  border-top-color: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-btn--pause,
[data-theme="light"] .goal-detail-btn--reopen {
  background: var(--color-gray-100);
  color: var(--color-gray-800);
}

[data-theme="light"] .goal-detail-btn--pause:hover,
[data-theme="light"] .goal-detail-btn--reopen:hover {
  background: var(--color-gray-200);
}

/* Goal Detail Primary Actions */
.goal-detail-primary-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--color-border);
}

.goal-detail-btn--breakdown,
.goal-detail-btn--add-task {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 16px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-gray-900);
  color: var(--color-text);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.goal-detail-btn--breakdown:hover,
.goal-detail-btn--add-task:hover {
  background: var(--color-gray-800);
  border-color: var(--color-accent);
}

.goal-detail-btn--breakdown svg,
.goal-detail-btn--add-task svg {
  color: var(--color-accent);
}

[data-theme="light"] .goal-detail-btn--breakdown,
[data-theme="light"] .goal-detail-btn--add-task {
  background: var(--color-gray-50);
  border-color: var(--color-gray-200);
}

[data-theme="light"] .goal-detail-btn--breakdown:hover,
[data-theme="light"] .goal-detail-btn--add-task:hover {
  background: var(--color-gray-100);
}

/* Mobile responsive for goal detail modal */
@media (max-width: 500px) {
  .goal-detail-modal {
    width: 95%;
    max-height: 90vh;
    border-radius: 12px;
  }

  .goal-detail-header {
    padding: 16px;
  }

  .goal-detail-content {
    padding: 16px;
  }

  .goal-detail-dates {
    grid-template-columns: 1fr;
  }

  .goal-detail-actions {
    flex-direction: column;
  }
}

/* ========== Goal Breakdown Wizard ========== */
.goal-breakdown-wizard {
  background: var(--color-dark);
  border-radius: 16px;
  width: 90%;
  max-width: 600px;
  max-height: 85vh;
  overflow-y: auto;
  border: 1px solid var(--color-border);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

.goal-breakdown-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 24px 24px 16px;
  border-bottom: 1px solid var(--color-border);
}

.goal-breakdown-title-row {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}

.goal-breakdown-loop-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border-radius: 10px;
  font-size: 22px;
}

.goal-breakdown-header h2 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.goal-breakdown-parent-title {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 4px 0 0;
}

.goal-breakdown-close {
  background: transparent;
  border: none;
  font-size: 28px;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: 0;
  line-height: 1;
  transition: color 0.2s;
}

.goal-breakdown-close:hover {
  color: var(--color-text);
}

.goal-breakdown-content {
  padding: 24px;
}

.goal-breakdown-info {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 16px;
  background: var(--color-gray-900);
  border-radius: 10px;
  margin-bottom: 24px;
}

.goal-breakdown-from,
.goal-breakdown-to {
  padding: 6px 16px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 600;
}

.goal-breakdown-from {
  background: var(--color-gray-800);
  color: var(--color-text-secondary);
}

.goal-breakdown-to {
  background: var(--color-accent-subtle);
  color: var(--color-accent);
}

.goal-breakdown-info svg {
  color: var(--color-text-tertiary);
}

/* Archetype context section */
.goal-breakdown-archetype-context {
  padding: 16px;
  background: linear-gradient(135deg, var(--color-accent-subtle), var(--color-gray-900));
  border: 1px solid var(--color-accent);
  border-radius: 12px;
  margin-bottom: 20px;
}

.goal-breakdown-archetype-badge {
  font-size: 14px;
  color: var(--color-text);
  margin-bottom: 8px;
}

.goal-breakdown-archetype-badge strong {
  color: var(--color-accent);
}

.goal-breakdown-archetype-approach {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 12px;
  line-height: 1.5;
}

.goal-breakdown-motivation {
  font-size: 14px;
  font-style: italic;
  color: var(--color-accent);
  margin: 0;
  padding: 10px 14px;
  background: var(--color-dark);
  border-radius: 8px;
  border-left: 3px solid var(--color-accent);
}

.goal-breakdown-suggestions h3 {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px;
}

.goal-breakdown-hint {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 16px;
}

.goal-breakdown-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 16px;
}

.goal-breakdown-item {
  padding: 12px 16px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  transition: all 0.2s ease;
}

.goal-breakdown-item.selected {
  border-color: var(--color-accent);
  background: var(--color-accent-subtle);
}

.goal-breakdown-item-main {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.goal-breakdown-checkbox {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  cursor: pointer;
  flex-shrink: 0;
  margin-top: 2px;
}

.goal-breakdown-checkbox input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  width: 100%;
  height: 100%;
}

.goal-breakdown-checkmark {
  width: 22px;
  height: 22px;
  border: 2px solid var(--color-gray-600);
  border-radius: 6px;
  transition: all 0.2s ease;
}

.goal-breakdown-checkbox input:checked ~ .goal-breakdown-checkmark {
  background: var(--color-accent);
  border-color: var(--color-accent);
}

.goal-breakdown-checkbox input:checked ~ .goal-breakdown-checkmark::after {
  content: "âœ“";
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  color: white;
  font-weight: bold;
}

.goal-breakdown-item-content {
  flex: 1;
  min-width: 0;
}

.goal-breakdown-item-title {
  width: 100%;
  background: transparent;
  border: none;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  padding: 0;
  margin-bottom: 4px;
}

.goal-breakdown-item-title:focus {
  outline: none;
}

.goal-breakdown-item-meta {
  display: flex;
  align-items: center;
  gap: 8px;
}

.goal-breakdown-item-date {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.goal-breakdown-add-to-loop {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  margin-top: 10px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.goal-breakdown-add-to-loop:hover {
  background: var(--color-gray-700);
  color: var(--color-text);
}

.goal-breakdown-add-to-loop.active {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
}

.goal-breakdown-add-to-loop svg {
  opacity: 0.8;
}

.goal-breakdown-custom {
  display: flex;
  gap: 8px;
  margin-bottom: 20px;
}

.goal-breakdown-custom-input {
  flex: 1;
  padding: 10px 14px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 14px;
  color: var(--color-text);
}

.goal-breakdown-custom-input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.goal-breakdown-custom-input::placeholder {
  color: var(--color-text-tertiary);
}

.goal-breakdown-custom-add {
  padding: 10px 16px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  cursor: pointer;
  transition: all 0.2s ease;
}

.goal-breakdown-custom-add:hover:not(:disabled) {
  background: var(--color-gray-700);
}

.goal-breakdown-custom-add:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.goal-breakdown-summary {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px 16px;
  background: var(--color-gray-900);
  border-radius: 8px;
  margin-bottom: 20px;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.goal-breakdown-summary-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.goal-breakdown-summary-main {
  font-weight: 500;
  color: var(--color-text);
}

.goal-breakdown-summary-hint {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin: 0;
}

.goal-breakdown-tasks-count {
  color: var(--color-accent);
  font-weight: 500;
}

/* New breakdown wizard styles */
.goal-breakdown-item-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.goal-breakdown-effort-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  font-size: 11px;
  font-weight: bold;
  color: white;
  flex-shrink: 0;
}

.goal-breakdown-item-verb {
  font-size: 11px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 4px;
  background: var(--color-gray-800);
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.goal-breakdown-show-actions {
  background: transparent;
  border: none;
  font-size: 11px;
  color: var(--color-accent);
  cursor: pointer;
  padding: 0;
  margin-left: auto;
}

.goal-breakdown-show-actions:hover {
  text-decoration: underline;
}

.goal-breakdown-key-actions {
  margin: 10px 0 0;
  padding: 10px 14px;
  background: var(--color-gray-800);
  border-radius: 6px;
  list-style: none;
  font-size: 12px;
  color: var(--color-text-secondary);
}

.goal-breakdown-key-actions li {
  padding: 4px 0;
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.goal-breakdown-key-actions li::before {
  content: "â†’";
  color: var(--color-accent);
  font-weight: bold;
}

.goal-breakdown-actions {
  display: flex;
  gap: 12px;
}

.goal-breakdown-btn {
  flex: 1;
  padding: 14px 20px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.goal-breakdown-btn--primary {
  background: var(--color-accent);
  color: white;
}

.goal-breakdown-btn--primary:hover:not(:disabled) {
  background: var(--color-accent-light);
}

.goal-breakdown-btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.goal-breakdown-btn--secondary {
  background: var(--color-gray-800);
  color: var(--color-text);
}

.goal-breakdown-btn--secondary:hover {
  background: var(--color-gray-700);
}

/* Light theme for goal breakdown wizard - improved contrast */
[data-theme="light"] .goal-breakdown-wizard {
  background: white;
  border: 2px solid var(--color-gray-300);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
}

[data-theme="light"] .goal-breakdown-header {
  border-bottom: 2px solid var(--color-gray-200);
  background: var(--color-gray-50);
}

[data-theme="light"] .goal-breakdown-header h2 {
  color: var(--color-gray-900);
  font-weight: 700;
}

[data-theme="light"] .goal-breakdown-parent-title {
  color: var(--color-gray-700);
  font-weight: 500;
}

[data-theme="light"] .goal-breakdown-info {
  background: var(--color-gray-100);
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .goal-breakdown-from {
  background: var(--color-gray-300);
  color: var(--color-gray-800);
  font-weight: 600;
}

[data-theme="light"] .goal-breakdown-to {
  background: var(--color-accent);
  color: white;
  font-weight: 600;
}

[data-theme="light"] .goal-breakdown-suggestions h3 {
  color: var(--color-gray-900);
  font-weight: 700;
}

[data-theme="light"] .goal-breakdown-hint {
  color: var(--color-gray-600);
  font-weight: 500;
}

[data-theme="light"] .goal-breakdown-item {
  background: var(--color-gray-100);
  border: 2px solid var(--color-gray-300);
}

[data-theme="light"] .goal-breakdown-item.selected {
  background: rgba(242, 112, 89, 0.1);
  border-color: var(--color-accent);
}

[data-theme="light"] .goal-breakdown-item-title {
  color: var(--color-gray-900);
  font-weight: 600;
  background: white;
  border: 1px solid var(--color-gray-300);
}

[data-theme="light"] .goal-breakdown-item-title::placeholder {
  color: var(--color-gray-500);
  font-weight: 400;
}

[data-theme="light"] .goal-breakdown-item-date {
  color: var(--color-gray-700);
  font-weight: 500;
}

[data-theme="light"] .goal-breakdown-custom-input {
  background: white;
  border: 2px solid var(--color-gray-300);
  color: var(--color-gray-900);
}

[data-theme="light"] .goal-breakdown-custom-input::placeholder {
  color: var(--color-gray-500);
}

[data-theme="light"] .goal-breakdown-custom-add {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
  font-weight: 600;
}

[data-theme="light"] .goal-breakdown-custom-add:hover:not(:disabled) {
  background: var(--color-accent-hover);
}

[data-theme="light"] .goal-breakdown-add-to-loop {
  background: var(--color-gray-200);
  border-color: var(--color-gray-400);
  color: var(--color-gray-700);
  font-weight: 500;
}

[data-theme="light"] .goal-breakdown-add-to-loop.active {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
}

[data-theme="light"] .goal-breakdown-summary {
  background: var(--color-gray-100);
  border: 1px solid var(--color-gray-200);
}

[data-theme="light"] .goal-breakdown-summary-main {
  color: var(--color-gray-900);
  font-weight: 600;
}

[data-theme="light"] .goal-breakdown-summary-hint {
  color: var(--color-gray-600);
}

[data-theme="light"] .goal-breakdown-btn--secondary {
  background: var(--color-gray-200);
  color: var(--color-gray-800);
  border: 2px solid var(--color-gray-400);
  font-weight: 600;
}

[data-theme="light"] .goal-breakdown-btn--secondary:hover {
  background: var(--color-gray-300);
}

[data-theme="light"] .goal-breakdown-btn--primary {
  box-shadow: 0 2px 8px rgba(242, 112, 89, 0.3);
}

/* ========== Light Theme - Tasks Screen ========== */
[data-theme="light"] .tasks-screen {
  background: #f8f9fa;
}

[data-theme="light"] .tasks-sidebar {
  background: #ffffff;
  border-right-color: var(--color-gray-200);
}

[data-theme="light"] .sidebar-toggle {
  color: var(--color-gray-500);
}

[data-theme="light"] .sidebar-toggle:hover {
  background: var(--color-gray-100);
  color: var(--color-gray-900);
}

[data-theme="light"] .sidebar-section-header {
  color: var(--color-gray-500);
}

[data-theme="light"] .sidebar-section-header .add-btn {
  color: var(--color-gray-500);
}

[data-theme="light"] .sidebar-section-header .add-btn:hover {
  background: var(--color-gray-100);
  color: var(--color-gray-900);
}

[data-theme="light"] .sidebar-item {
  color: var(--color-gray-800);
}

[data-theme="light"] .sidebar-item:hover {
  background: var(--color-gray-100);
}

[data-theme="light"] .sidebar-item.active {
  background: rgba(239, 68, 68, 0.1);
  color: var(--color-red);
}

[data-theme="light"] .sidebar-icon {
  color: var(--color-gray-500);
}

[data-theme="light"] .sidebar-badge {
  background: var(--color-gray-100);
  color: var(--color-gray-600);
}

[data-theme="light"] .sidebar-empty {
  color: var(--color-gray-400);
}

[data-theme="light"] .tasks-main {
  background: #f8f9fa;
}

[data-theme="light"] .tasks-header-left h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .tasks-description {
  color: var(--color-gray-500);
}

[data-theme="light"] .header-control label {
  color: var(--color-gray-600);
}

[data-theme="light"] .header-control select {
  background: #ffffff;
  border-color: var(--color-gray-300);
  color: var(--color-gray-800);
}

[data-theme="light"] .task-count {
  color: var(--color-gray-500);
}

[data-theme="light"] .show-completed-btn {
  color: var(--color-gray-500);
}

[data-theme="light"] .show-completed-btn:hover {
  color: var(--color-gray-800);
}

/* Task Row Light Theme */
[data-theme="light"] .task-row {
  background: #ffffff;
  border-color: var(--color-gray-200);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
}

[data-theme="light"] .task-row:hover {
  border-color: var(--color-accent);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .task-row__title {
  color: var(--color-gray-900);
}

[data-theme="light"] .task-row__description {
  color: var(--color-gray-500);
}

[data-theme="light"] .task-row__loop {
  background: var(--color-accent-subtle);
  color: var(--color-accent-dark);
}

[data-theme="light"] .task-row__due {
  color: var(--color-gray-500);
}

[data-theme="light"] .task-row__meta {
  color: var(--color-gray-500);
}

/* Task Item Light Theme */
[data-theme="light"] .task-item {
  background: #ffffff;
}

[data-theme="light"] .task-item:hover {
  background: var(--color-gray-50);
}

[data-theme="light"] .task-title {
  color: var(--color-gray-900);
}

[data-theme="light"] .task-title.completed {
  color: var(--color-gray-400);
}

[data-theme="light"] .task-checkbox {
  border-color: var(--color-gray-400);
}

[data-theme="light"] .task-checkbox:hover {
  background: var(--color-gray-50);
  border-color: var(--color-accent);
}

[data-theme="light"] .task-description {
  color: var(--color-gray-500);
}

[data-theme="light"] .task-meta {
  color: var(--color-gray-500);
}

[data-theme="light"] .task-meta span {
  color: var(--color-gray-500);
}

[data-theme="light"] .task-list-empty {
  color: var(--color-gray-400);
}

[data-theme="light"] .task-list-empty .empty-icon {
  color: var(--color-gray-300);
}

/* Task Group Light Theme */
[data-theme="light"] .group-title {
  color: var(--color-gray-800);
}

[data-theme="light"] .group-count {
  color: var(--color-gray-500);
}

[data-theme="light"] .group-collapse-icon {
  color: var(--color-gray-400);
}

[data-theme="light"] .task-group-items {
  border-left-color: var(--color-gray-200);
}

/* Mobile responsive for breakdown wizard */
@media (max-width: 500px) {
  .goal-breakdown-wizard {
    width: 95%;
    max-height: 90vh;
  }

  .goal-breakdown-header {
    padding: 16px;
  }

  .goal-breakdown-content {
    padding: 16px;
  }

  .goal-breakdown-actions {
    flex-direction: column;
  }

  .goal-breakdown-info {
    flex-direction: column;
    gap: 8px;
  }

  .goal-breakdown-info svg {
    transform: rotate(90deg);
  }
}

/* ========== Routines Screen ========== */
.routines-screen {
  display: flex;
  height: 100%;
  width: 100%;
  background: var(--color-bg);
}

/* Routines Sidebar */
.routines-sidebar {
  width: 240px;
  min-width: 240px;
  background: var(--color-surface);
  border-right: 1px solid var(--color-border);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  position: relative;
  transition: width 0.2s ease, min-width 0.2s ease;
  padding-top: 8px;
}

.routines-sidebar.collapsed {
  width: 48px;
  min-width: 48px;
}

/* Sidebar Stats */
.sidebar-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  padding: 8px;
}

.sidebar-stat-item {
  background: var(--color-bg);
  border-radius: var(--radius);
  padding: 10px 8px;
  text-align: center;
}

.sidebar-stat-value {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-accent);
  display: block;
}

.sidebar-stat-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
  margin-top: 2px;
}

/* Routines Main */
.routines-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  padding: 24px 32px;
}

.routines-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 24px;
}

.routines-header-left h2 {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
  margin: 0 0 4px 0;
}

.routines-description {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0;
}

.routines-header-right {
  display: flex;
  gap: 12px;
}

.routines-add-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.routines-add-btn:hover {
  background: var(--looops-coral-light);
}

.routines-add-btn svg {
  width: 16px;
  height: 16px;
}

/* Routines List */
.routines-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Routine Item (matches task-item style) */
.routine-item {
  background: var(--color-surface);
  border-radius: var(--radius);
  border-left: 3px solid var(--color-accent);
  padding: 12px 16px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-item:hover {
  background: var(--color-surface-hover);
}

.routine-item-main {
  display: flex;
  align-items: center;
  gap: 12px;
}

.routine-checkbox {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  border: 2px solid var(--color-border);
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all 0.15s ease;
  color: transparent;
}

.routine-checkbox:hover {
  border-color: var(--looops-sage);
  background: var(--looops-sage-subtle);
  color: var(--looops-sage);
}

.routine-checkbox svg {
  width: 14px;
  height: 14px;
}

.routine-item-content {
  flex: 1;
  min-width: 0;
}

.routine-item-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 4px;
}

.routine-item-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.routine-item-loop {
  font-weight: 500;
}

.routine-item-schedule {
  color: var(--color-text-tertiary);
}

.routine-item-duration {
  color: var(--color-text-tertiary);
}

.routine-item-right {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-shrink: 0;
}

.routine-item-streak {
  display: flex;
  align-items: center;
  gap: 4px;
}

.routine-streak-fire {
  font-size: 14px;
}

.routine-streak-count {
  font-size: 13px;
  font-weight: 600;
  color: var(--looops-amber);
}

.routine-skip-btn {
  padding: 4px 10px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: transparent;
  color: var(--color-text-tertiary);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-skip-btn:hover {
  border-color: var(--color-text-secondary);
  color: var(--color-text-secondary);
  background: var(--color-surface-hover);
}

/* Empty State */
.routines-empty {
  text-align: center;
  padding: 60px 20px;
  color: var(--color-text-secondary);
}

.routines-empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.routines-empty h3 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.routines-empty p {
  font-size: 14px;
  margin: 0 0 20px 0;
}

/* Add Routine Modal */
.routine-add-modal,
.routine-edit-modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  width: 90%;
  max-width: 520px;
  max-height: 85vh;
  overflow-y: auto;
  box-shadow: var(--shadow-lg);
}

.routine-edit-modal .modal-header {
  padding: 20px 24px;
  border-bottom: 1px solid var(--color-border);
}

.routine-edit-modal .modal-header-title {
  display: flex;
  align-items: center;
  gap: 10px;
}

.routine-edit-modal .modal-header-icon {
  font-size: 24px;
}

.routine-edit-modal .modal-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
}

/* Routine Add Tabs */
.routine-add-tabs {
  display: flex;
  border-bottom: 1px solid var(--color-border);
  padding: 0 20px;
}

.routine-add-tab {
  flex: 1;
  padding: 12px 16px;
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--color-text-secondary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-add-tab:hover {
  color: var(--color-text);
}

.routine-add-tab.active {
  color: var(--looops-coral);
  border-bottom-color: var(--looops-coral);
}

/* Template Section */
.routine-templates {
  padding: 16px 20px;
}

.routine-templates-filter {
  margin-bottom: 12px;
}

.routine-templates-filter select {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-bg);
  color: var(--color-text);
  font-size: 13px;
  cursor: pointer;
}

.routine-templates-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 320px;
  overflow-y: auto;
}

.routine-template-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: var(--color-bg);
  border-left: 3px solid var(--color-border);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-template-item:hover {
  background: var(--color-surface-hover);
}

.routine-template-item.selected {
  background: var(--looops-coral-subtle);
  border-left-color: var(--looops-coral);
}

.routine-template-icon {
  font-size: 20px;
  flex-shrink: 0;
}

.routine-template-info {
  flex: 1;
  min-width: 0;
}

.routine-template-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 3px;
}

.routine-template-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.routine-template-check {
  width: 20px;
  height: 20px;
  color: var(--looops-coral);
  flex-shrink: 0;
}

/* Custom Form */
.routine-custom-form {
  padding: 16px 20px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: 60vh;
  overflow-y: auto;
}

.routine-custom-form .form-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.routine-custom-form .form-field label {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
}

.routine-custom-form .form-field input[type="text"],
.routine-custom-form .form-field textarea,
.routine-custom-form .form-field select {
  padding: 10px 12px;
  font-size: 14px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  color: var(--text-primary);
  width: 100%;
  box-sizing: border-box;
}

.routine-custom-form .form-field input:focus,
.routine-custom-form .form-field textarea:focus,
.routine-custom-form .form-field select:focus {
  outline: none;
  border-color: var(--coral);
}

.routine-custom-row {
  margin-bottom: 0;
}

/* Edit Modal Content */
.routine-edit-content {
  padding: 24px;
}

.routine-edit-content .form-field {
  margin-bottom: 20px;
}

.routine-edit-content .form-field label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-secondary);
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.routine-edit-content .form-field input[type="text"],
.routine-edit-content .form-field textarea,
.routine-edit-content .form-field select {
  width: 100%;
  padding: 12px 14px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-bg);
  color: var(--color-text);
  font-size: 14px;
  font-family: inherit;
  transition: all 0.15s ease;
}

.routine-edit-content .form-field input[type="text"]:focus,
.routine-edit-content .form-field textarea:focus,
.routine-edit-content .form-field select:focus {
  outline: none;
  border-color: var(--looops-coral);
  box-shadow: 0 0 0 3px var(--looops-coral-subtle);
}

.routine-edit-content .form-field textarea {
  resize: vertical;
  min-height: 70px;
}

.routine-edit-content .form-field select {
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23888' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 36px;
}

.routine-edit-info {
  margin-top: 24px;
  padding: 16px;
  background: var(--color-bg);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border-light);
}

.routine-edit-info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid var(--color-border-light);
}

.routine-edit-info-row:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.routine-edit-info-row:first-child {
  padding-top: 0;
}

.routine-edit-info-label {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.routine-edit-info-value {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

/* Edit Stats Grid */
.routine-edit-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
  margin-top: 24px;
  padding: 16px;
  background: var(--color-bg);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border-light);
}

.routine-edit-stat {
  text-align: center;
  padding: 12px 8px;
  border-radius: var(--radius);
  transition: all 0.15s ease;
}

.routine-edit-stat-value {
  font-size: 20px;
  font-weight: 700;
  color: var(--color-text);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

.routine-edit-stat-value .streak-icon {
  font-size: 16px;
}

.routine-edit-stat--streak {
  background: rgba(244, 185, 66, 0.1);
}

.routine-edit-stat--streak .routine-edit-stat-value {
  color: var(--looops-amber);
}

.routine-edit-stat--best {
  background: rgba(159, 122, 234, 0.1);
}

.routine-edit-stat--best .routine-edit-stat-value {
  color: #9f7aea;
}

.routine-edit-stat--rate {
  background: rgba(72, 187, 120, 0.1);
}

.routine-edit-stat--rate .routine-edit-stat-value {
  color: #48bb78;
}

.routine-edit-stat-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
  margin-top: 6px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  font-weight: 500;
}

/* Modal Actions for Edit */
.routine-edit-modal .modal-actions {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 24px;
  border-top: 1px solid var(--color-border);
  background: var(--color-bg);
}

.modal-actions-right {
  display: flex;
  gap: 8px;
  margin-left: auto;
}

/* Modal Buttons */
.modal-btn {
  padding: 10px 18px;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
  border: none;
}

.modal-btn--primary {
  background: var(--looops-coral);
  color: white;
}

.modal-btn--primary:hover:not(:disabled) {
  background: var(--looops-coral-light);
}

.modal-btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.modal-btn--secondary {
  background: transparent;
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
}

.modal-btn--secondary:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.modal-btn--danger {
  background: transparent;
  color: #dc3545;
  border: 1px solid rgba(220, 53, 69, 0.3);
}

.modal-btn--danger:hover {
  background: rgba(220, 53, 69, 0.1);
  border-color: #dc3545;
}

/* Time Badge */
.routine-time-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  padding: 3px 8px;
  background: var(--color-bg);
  border-radius: var(--radius-full);
  color: var(--color-text-secondary);
}

.routine-time-badge--morning {
  background: rgba(244, 185, 66, 0.15);
  color: #c99a35;
}

.routine-time-badge--afternoon {
  background: rgba(90, 127, 184, 0.15);
  color: #4a6a9a;
}

.routine-time-badge--evening {
  background: rgba(184, 127, 168, 0.15);
  color: #9a6a8a;
}

.routine-time-badge--night {
  background: rgba(115, 115, 144, 0.15);
  color: #5e5e78;
}

/* Light Theme Overrides */
[data-theme="light"] .routines-screen {
  background: #f5f5f5;
}

[data-theme="light"] .routines-sidebar {
  background: #ffffff;
  border-right: 2px solid #e0e0e0;
  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.04);
}

[data-theme="light"] .routines-sidebar .sidebar-item {
  color: #444;
}

[data-theme="light"] .routines-sidebar .sidebar-item:hover {
  background: #f0f0f0;
}

[data-theme="light"] .routines-sidebar .sidebar-item.active {
  background: #e8f4f0;
  color: #2d6a4f;
}

[data-theme="light"] .routines-sidebar .sidebar-section-header {
  color: #666;
  border-bottom: 1px solid #e5e5e5;
}

[data-theme="light"] .routines-sidebar .sidebar-badge {
  background: #e8e8e8;
  color: #555;
  font-weight: 600;
}

[data-theme="light"] .routines-main {
  background: #f5f5f5;
}

[data-theme="light"] .routines-header-left h2 {
  color: #1a1a2e;
}

[data-theme="light"] .routines-description {
  color: #555;
}

[data-theme="light"] .routine-item {
  background: #ffffff;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  border: 1px solid #e5e5e5;
}

[data-theme="light"] .routine-item:hover {
  background: #fafafa;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .routine-item-title {
  color: #1a1a2e;
  font-weight: 600;
}

[data-theme="light"] .routine-item-meta {
  color: #555;
}

[data-theme="light"] .routine-add-modal,
[data-theme="light"] .routine-edit-modal {
  background: #ffffff;
  border: 2px solid #e0e0e0;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
}

[data-theme="light"] .routine-add-modal .modal-header,
[data-theme="light"] .routine-edit-modal .modal-header {
  border-bottom: 2px solid #e5e5e5;
}

[data-theme="light"] .routine-add-modal .modal-header h3,
[data-theme="light"] .routine-edit-modal .modal-header h3 {
  color: #1a1a2e;
}

[data-theme="light"] .routine-add-tabs {
  border-bottom: 2px solid #e5e5e5;
}

[data-theme="light"] .routine-add-tab {
  color: #555;
}

[data-theme="light"] .routine-add-tab:hover {
  color: #1a1a2e;
}

[data-theme="light"] .routine-add-tab.active {
  color: #e74c3c;
  border-bottom-color: #e74c3c;
}

[data-theme="light"] .routine-template-item {
  background: #f9f9f9;
  border: 1px solid #e5e5e5;
}

[data-theme="light"] .routine-template-item:hover {
  background: #f0f0f0;
}

[data-theme="light"] .routine-template-item.selected {
  background: #fef5f3;
  border-color: #e74c3c;
}

[data-theme="light"] .routine-template-title {
  color: #1a1a2e;
}

[data-theme="light"] .routine-template-meta {
  color: #555;
}

[data-theme="light"] .routine-edit-info {
  background: #f5f5f5;
  border: 1px solid #e5e5e5;
}

[data-theme="light"] .routine-edit-stats {
  background: #f9f9f9;
  border: 2px solid #e5e5e5;
}

[data-theme="light"] .routine-edit-stat {
  background: #ffffff;
  border: 1px solid #e8e8e8;
}

[data-theme="light"] .routine-edit-stat--streak {
  background: #fef8e8;
  border-color: #f0d78c;
}

[data-theme="light"] .routine-edit-stat--streak .routine-edit-stat-value {
  color: #b8860b;
}

[data-theme="light"] .routine-edit-stat--best {
  background: #f5f0fa;
  border-color: #d4c1e8;
}

[data-theme="light"] .routine-edit-stat--best .routine-edit-stat-value {
  color: #7c3aed;
}

[data-theme="light"] .routine-edit-stat--rate {
  background: #e8f5ec;
  border-color: #b8e0c4;
}

[data-theme="light"] .routine-edit-stat--rate .routine-edit-stat-value {
  color: #2d6a4f;
}

[data-theme="light"] .routine-edit-stat-value {
  color: #1a1a2e;
}

[data-theme="light"] .routine-edit-stat-label {
  color: #555;
  font-weight: 600;
}

[data-theme="light"] .sidebar-stat-item {
  background: #f5f5f5;
  border: 1px solid #e5e5e5;
}

[data-theme="light"] .sidebar-stat-value {
  color: #e74c3c;
}

[data-theme="light"] .sidebar-stat-label {
  color: #555;
}

/* =====================================================
   ROUTINE CARD - Multi-step routine cards
   ===================================================== */

.routine-card {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  border-left: 4px solid var(--looops-coral);
  padding: 16px;
  cursor: pointer;
  transition: all 0.15s ease;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.routine-card:hover {
  background: var(--color-surface-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.routine-card-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.routine-card-icon {
  font-size: 24px;
  flex-shrink: 0;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg);
  border-radius: var(--radius);
}

.routine-card-info {
  flex: 1;
  min-width: 0;
}

.routine-card-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 4px;
}

.routine-card-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.routine-card-meta span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.routine-card-schedule {
  color: var(--color-text-secondary);
}

.routine-card-duration {
  color: var(--looops-amber);
  font-weight: 500;
}

.routine-card-steps {
  color: var(--color-text-tertiary);
}

.routine-card-streak {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
  padding: 4px 8px;
  background: rgba(244, 185, 66, 0.1);
  border-radius: var(--radius);
}

/* Loop Badges */
.routine-card-loops {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.routine-loop-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: var(--radius-full);
  font-size: 11px;
  font-weight: 500;
  text-transform: capitalize;
}

.routine-loop-badge-sm {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: var(--radius-full);
  font-size: 12px;
}

/* Steps Preview */
.routine-card-steps-preview {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 12px;
  background: var(--color-bg);
  border-radius: var(--radius);
}

.routine-step-preview {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.routine-step-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.routine-step-title {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.routine-step-optional {
  font-size: 10px;
  color: var(--color-text-tertiary);
  background: var(--color-surface);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
}

.routine-steps-more {
  font-size: 11px;
  color: var(--color-text-tertiary);
  padding-left: 16px;
  font-style: italic;
}

/* Start Routine Button */
.routine-start-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px 16px;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-start-btn:hover {
  background: var(--looops-coral-light);
  transform: translateY(-1px);
}

/* Routine Card - Today View Variant (horizontal layout) */
.routine-card--today {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 12px;
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  padding: 12px 16px;
  cursor: pointer;
  transition: all 0.15s ease;
  border-left: 4px solid var(--looops-coral);
}

.routine-card--today:hover {
  background: var(--color-surface-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.routine-card--today .routine-card__icon-container {
  flex-shrink: 0;
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg);
  border-radius: var(--radius);
}

.routine-card--today .routine-card__icon {
  font-size: 24px;
}

.routine-card--today .routine-card__content {
  flex: 1;
  min-width: 0;
}

.routine-card--today .routine-card__header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.routine-card--today .routine-card__title {
  font-size: 15px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.routine-card--today .routine-card__streak {
  font-size: 12px;
  color: var(--looops-coral);
  font-weight: 500;
}

.routine-card--today .routine-card__meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.routine-card--today .routine-card__time {
  font-weight: 500;
}

.routine-card--today .routine-card__duration,
.routine-card--today .routine-card__steps {
  opacity: 0.8;
}

.routine-card--today .routine-card__actions {
  flex-shrink: 0;
}

.routine-card--today .routine-card__btn--start {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: var(--radius-full);
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-card--today .routine-card__btn--start:hover {
  background: var(--looops-coral-light);
  transform: scale(1.05);
}

.routine-card--today .routine-card__btn--start svg {
  width: 20px;
  height: 20px;
}

/* Light theme */
[data-theme="light"] .routine-card--today {
  background: white;
  border-color: var(--looops-coral);
}

[data-theme="light"] .routine-card--today:hover {
  background: var(--color-gray-50);
}

[data-theme="light"] .routine-card--today .routine-card__icon-container {
  background: var(--color-gray-100);
}

/* =====================================================
   ACTIVE ROUTINE MODAL - Step-by-step completion
   ===================================================== */

.routine-active-modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  width: 90%;
  max-width: 520px;
  max-height: 85vh;
  overflow-y: auto;
}

/* Progress Bar */
.routine-progress {
  padding: 16px 20px;
  display: flex;
  align-items: center;
  gap: 12px;
}

.routine-progress-bar {
  flex: 1;
  height: 8px;
  background: var(--color-bg);
  border-radius: var(--radius-full);
  overflow: hidden;
}

.routine-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--looops-coral) 0%, var(--looops-amber) 100%);
  border-radius: var(--radius-full);
  transition: width 0.3s ease;
}

.routine-progress-text {
  font-size: 12px;
  color: var(--color-text-secondary);
  white-space: nowrap;
}

/* Steps Checklist */
.routine-steps-list {
  padding: 0 20px 20px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.routine-step-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px;
  background: var(--color-bg);
  border-radius: var(--radius);
  border-left: 3px solid var(--color-border);
  transition: all 0.15s ease;
}

.routine-step-item.completed {
  opacity: 0.7;
  background: rgba(115, 165, 140, 0.1);
}

.routine-step-item.completed .routine-step-title {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

.routine-step-item.skipped {
  opacity: 0.5;
  background: var(--color-bg);
}

.routine-step-item.skipped .routine-step-title {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

.routine-step-checkbox {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 2px solid var(--color-border);
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all 0.15s ease;
  color: transparent;
}

.routine-step-checkbox:hover {
  border-color: var(--looops-sage);
  background: var(--looops-sage-subtle);
}

.routine-step-checkbox.checked {
  background: var(--looops-sage);
  border-color: var(--looops-sage);
  color: white;
}

.routine-step-checkbox svg {
  width: 14px;
  height: 14px;
}

.routine-step-content {
  flex: 1;
  min-width: 0;
}

.routine-step-content .routine-step-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 4px;
  overflow: visible;
  text-overflow: initial;
  white-space: normal;
}

.routine-step-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.routine-step-meta .optional-tag {
  background: var(--color-surface);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  font-size: 10px;
}

.routine-step-skip {
  padding: 4px 10px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: transparent;
  color: var(--color-text-tertiary);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-step-skip:hover {
  border-color: var(--color-text-secondary);
  color: var(--color-text-secondary);
}

.routine-step-skipped-badge {
  font-size: 10px;
  color: var(--color-text-tertiary);
  background: var(--color-surface);
  padding: 2px 8px;
  border-radius: var(--radius-sm);
}

/* =====================================================
   TEMPLATE CARDS - Add Routine Modal
   ===================================================== */

.routine-template-card {
  padding: 14px;
  background: var(--color-bg);
  border-left: 3px solid var(--color-border);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-template-card:hover {
  background: var(--color-surface-hover);
}

.routine-template-card.selected {
  background: var(--looops-coral-subtle);
  border-left-color: var(--looops-coral);
}

.routine-template-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.routine-template-info {
  flex: 1;
  min-width: 0;
}

.routine-template-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.routine-template-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 11px;
  color: var(--color-text-tertiary);
  margin-top: 4px;
}

.routine-template-description {
  font-size: 12px;
  color: var(--color-text-secondary);
  margin: 10px 0;
  line-height: 1.4;
}

.routine-template-loops {
  display: flex;
  gap: 4px;
  margin-top: 10px;
}

.routine-template-steps {
  margin-top: 12px;
  padding: 10px;
  background: var(--color-surface);
  border-radius: var(--radius);
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.routine-template-step {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--color-text-secondary);
}

.routine-template-step .optional-badge {
  font-size: 9px;
  color: var(--color-text-tertiary);
  background: var(--color-bg);
  padding: 1px 5px;
  border-radius: var(--radius-sm);
}

.routine-template-check {
  width: 20px;
  height: 20px;
  color: var(--looops-coral);
  flex-shrink: 0;
}

/* =====================================================
   EDIT ROUTINE - Loops and Steps
   ===================================================== */

.routine-edit-loops {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 20px;
}

.routine-edit-steps {
  margin-top: 24px;
}

.routine-edit-steps > label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-secondary);
  margin-bottom: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.routine-edit-steps-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 220px;
  overflow-y: auto;
  padding: 4px;
  margin: -4px;
}

.routine-edit-step {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px 14px;
  background: var(--color-bg);
  border-radius: var(--radius);
  border-left: 3px solid var(--color-border);
  transition: all 0.15s ease;
}

.routine-edit-step:hover {
  background: var(--color-surface-hover);
}

.routine-edit-step-num {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--color-surface);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 700;
  color: var(--color-text-tertiary);
  flex-shrink: 0;
}

.routine-edit-step-content {
  flex: 1;
  min-width: 0;
}

.routine-edit-step-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  display: block;
  margin-bottom: 3px;
}

.routine-edit-step-meta {
  font-size: 11px;
  display: block;
}

/* =====================================================
   LIGHT THEME OVERRIDES - Routine Cards & Steps
   ===================================================== */

[data-theme="light"] .routine-card {
  background: #ffffff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  border: 2px solid #e5e5e5;
  border-left: 4px solid #e74c3c;
}

[data-theme="light"] .routine-card:hover {
  background: #fafafa;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  border-color: #d0d0d0;
}

[data-theme="light"] .routine-card-icon {
  background: #f0f0f0;
  border: 1px solid #e0e0e0;
}

[data-theme="light"] .routine-card-title {
  color: #1a1a2e;
  font-weight: 700;
}

[data-theme="light"] .routine-card-meta {
  color: #555;
}

[data-theme="light"] .routine-card-meta span {
  color: #555;
}

[data-theme="light"] .routine-card-schedule {
  color: #444;
}

[data-theme="light"] .routine-card-duration {
  color: #c99a35;
  font-weight: 600;
}

[data-theme="light"] .routine-card-streak {
  background: #fef5e6;
  border: 1px solid #f0d78c;
}

[data-theme="light"] .routine-streak-count {
  color: #b8860b;
  font-weight: 700;
}

[data-theme="light"] .routine-card-steps-preview {
  background: #f5f5f5;
  border: 1px solid #e5e5e5;
}

[data-theme="light"] .routine-step-preview {
  color: #444;
}

[data-theme="light"] .routine-step-title {
  color: #333;
}

[data-theme="light"] .routine-step-optional {
  background: #e8e8e8;
  color: #666;
}

[data-theme="light"] .routine-steps-more {
  color: #777;
}

[data-theme="light"] .routine-start-btn {
  background: #e74c3c;
  color: #fff;
  box-shadow: 0 2px 6px rgba(231, 76, 60, 0.25);
}

[data-theme="light"] .routine-start-btn:hover {
  background: #d63526;
  box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
}

/* Active Modal Light Theme */
[data-theme="light"] .routine-active-modal {
  background: #ffffff;
  border: 2px solid #e0e0e0;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

[data-theme="light"] .routine-progress-bar {
  background: #e5e5e5;
}

[data-theme="light"] .routine-progress-text {
  color: #555;
}

[data-theme="light"] .routine-step-item {
  background: #f8f8f8;
  border: 1px solid #e5e5e5;
  border-left: 3px solid #ccc;
}

[data-theme="light"] .routine-step-item:hover {
  background: #f0f0f0;
}

[data-theme="light"] .routine-step-item.completed {
  background: #e8f5e9;
  border-left-color: #4caf50;
}

[data-theme="light"] .routine-step-item.completed .routine-step-title {
  color: #666;
}

[data-theme="light"] .routine-step-checkbox {
  border: 2px solid #bbb;
  background: #fff;
}

[data-theme="light"] .routine-step-checkbox:hover {
  border-color: #2d6a4f;
  background: #e8f4f0;
}

[data-theme="light"] .routine-step-checkbox.checked {
  background: #2d6a4f;
  border-color: #2d6a4f;
}

[data-theme="light"] .routine-step-content .routine-step-title {
  color: #1a1a2e;
  font-weight: 600;
}

[data-theme="light"] .routine-step-meta {
  color: #555;
}

[data-theme="light"] .routine-step-meta .optional-tag {
  background: #e8e8e8;
  color: #666;
}

[data-theme="light"] .routine-step-skip {
  background: #fff;
  border: 1px solid #ddd;
  color: #666;
}

[data-theme="light"] .routine-step-skip:hover {
  background: #f5f5f5;
  border-color: #ccc;
  color: #444;
}

[data-theme="light"] .routine-step-skipped-badge {
  background: #f0f0f0;
  color: #888;
}

/* Template Cards Light Theme */
[data-theme="light"] .routine-template-card {
  background: #f9f9f9;
  border: 2px solid #e5e5e5;
}

[data-theme="light"] .routine-template-card:hover {
  background: #f0f0f0;
  border-color: #d0d0d0;
}

[data-theme="light"] .routine-template-card.selected {
  background: #fef5f3;
  border-color: #e74c3c;
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.15);
}

[data-theme="light"] .routine-template-title {
  color: #1a1a2e;
  font-weight: 600;
}

[data-theme="light"] .routine-template-description {
  color: #555;
}

[data-theme="light"] .routine-template-meta {
  color: #666;
}

[data-theme="light"] .routine-template-steps {
  background: #ffffff;
  border: 1px solid #e5e5e5;
}

[data-theme="light"] .routine-template-step {
  color: #444;
}

[data-theme="light"] .routine-template-step .optional-badge {
  background: #e8e8e8;
  color: #666;
}

/* Edit Steps Light Theme */
[data-theme="light"] .routine-edit-step {
  background: #f9f9f9;
  border: 1px solid #e5e5e5;
}

[data-theme="light"] .routine-edit-step:hover {
  background: #f0f0f0;
}

[data-theme="light"] .routine-edit-step-num {
  background: #e8e8e8;
  color: #444;
  border: 1px solid #ddd;
}

[data-theme="light"] .routine-edit-step-title {
  color: #1a1a2e;
  font-weight: 600;
}

[data-theme="light"] .routine-edit-step-meta {
  color: #555;
}

[data-theme="light"] .routine-step-optional-btn {
  background: #f5f5f5;
  border: 1px solid #ddd;
  color: #666;
}

[data-theme="light"] .routine-step-optional-btn:hover {
  background: #e8e8e8;
}

[data-theme="light"] .routine-step-optional-btn.is-optional {
  background: #e8f4f0;
  color: #2d6a4f;
  border-color: #b8d8c8;
}

[data-theme="light"] .routine-step-remove-btn {
  color: #999;
}

[data-theme="light"] .routine-step-remove-btn:hover {
  color: #e74c3c;
  background: #fef5f3;
}

/* Mobile responsive */
@media (max-width: 768px) {
  .routines-screen {
    flex-direction: column;
  }

  .routines-sidebar {
    display: none;
  }

  .routines-main {
    width: 100%;
    padding: 16px;
  }

  .routines-header {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }

  .routine-edit-stats {
    grid-template-columns: repeat(2, 1fr);
  }

  .form-row {
    grid-template-columns: 1fr;
  }

  .routine-card {
    padding: 14px;
  }

  .routine-card-meta {
    flex-wrap: wrap;
    gap: 8px;
  }

  .routine-progress {
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
  }

  .routine-progress-text {
    text-align: center;
  }

  .routine-edit-steps-list {
    max-height: 180px;
  }
}

/* ===========================================
   Custom Routine Form Styles
   =========================================== */

/* Icon Picker */
.routine-custom-icon-picker {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.routine-custom-icon-picker > label {
  font-size: 13px;
  color: var(--text-secondary);
  font-weight: 500;
}

.icon-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
}

.icon-option {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  font-size: 20px;
  background: var(--bg-secondary);
  border: 2px solid transparent;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.icon-option:hover {
  background: var(--bg-tertiary);
  transform: scale(1.1);
}

.icon-option.selected {
  border-color: var(--coral);
  background: rgba(242, 112, 89, 0.15);
}

/* Schedule Row (frequency, time of day, status) */
.routine-custom-schedule {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 12px;
}

.routine-custom-schedule .form-field {
  margin-bottom: 0;
}

/* Custom Steps Section */
.routine-custom-steps {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 8px;
}

.routine-custom-steps > label {
  font-size: 13px;
  color: var(--text-secondary);
  font-weight: 500;
  margin-bottom: 4px;
}

.routine-custom-steps-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 200px;
  overflow-y: auto;
  padding-right: 4px;
}

.routine-custom-step {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--bg-secondary);
  border-radius: 8px;
  border: 1px solid var(--border-color);
}

.routine-custom-step-num {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  background: var(--bg-tertiary);
  border-radius: 50%;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-tertiary);
  flex-shrink: 0;
}

.routine-custom-step-content {
  flex: 1;
  min-width: 0;
}

.routine-custom-step-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.routine-custom-step-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  color: var(--text-tertiary);
  margin-top: 2px;
}

.routine-custom-step-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}

/* Custom step optional/remove buttons (Add modal) */
.routine-custom-step-optional {
  padding: 4px 8px;
  font-size: 10px;
  font-weight: 500;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  cursor: pointer;
  color: var(--text-tertiary);
  transition: all 0.15s ease;
}

.routine-custom-step-optional:hover {
  border-color: var(--coral);
  color: var(--coral);
}

.routine-custom-step-remove {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: transparent;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  color: var(--text-tertiary);
  font-size: 16px;
  transition: all 0.15s ease;
}

.routine-custom-step-remove:hover {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

/* Reorder Buttons */
.routine-edit-step-reorder {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-right: 4px;
}

.reorder-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 16px;
  background: var(--bg-tertiary);
  border: none;
  border-radius: 3px;
  cursor: pointer;
  font-size: 10px;
  color: var(--text-tertiary);
  transition: all 0.15s ease;
  padding: 0;
}

.reorder-btn:hover:not(:disabled) {
  background: var(--coral);
  color: white;
}

.reorder-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* Optional Toggle Button */
.routine-step-optional-btn {
  padding: 4px 8px;
  font-size: 10px;
  font-weight: 500;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  cursor: pointer;
  color: var(--text-tertiary);
  transition: all 0.15s ease;
}

.routine-step-optional-btn:hover {
  border-color: var(--coral);
  color: var(--coral);
}

.routine-step-optional-btn.is-optional {
  background: rgba(242, 112, 89, 0.15);
  border-color: var(--coral);
  color: var(--coral);
}

/* Remove Step Button */
.routine-step-remove-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: transparent;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  color: var(--text-tertiary);
  font-size: 14px;
  transition: all 0.15s ease;
}

.routine-step-remove-btn:hover {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

/* Add Step Form - Two Row Layout */
.routine-add-step-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 12px;
  background: var(--bg-tertiary);
  border-radius: 8px;
  border: 1px dashed var(--border-color);
  margin-top: 8px;
}

.routine-add-step-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.routine-add-step-row input[type="text"] {
  flex: 1;
  min-width: 100px;
  padding: 10px 12px;
  font-size: 14px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
}

.routine-add-step-row input[type="text"]:focus {
  outline: none;
  border-color: var(--coral);
}

.routine-add-step-row select {
  padding: 10px 12px;
  font-size: 14px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  min-width: 120px;
}

.routine-add-step-row select:focus {
  outline: none;
  border-color: var(--coral);
}

.routine-add-step-row input[type="number"] {
  width: 60px;
  padding: 10px 12px;
  font-size: 14px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  text-align: center;
}

.routine-add-step-row input[type="number"]:focus {
  outline: none;
  border-color: var(--coral);
}

/* Legacy single-row form (for edit modal) */
.routine-add-step {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
  padding: 12px;
  background: var(--bg-tertiary);
  border-radius: 8px;
  border: 1px dashed var(--border-color);
}

.routine-add-step > * {
  flex-shrink: 0;
}

.routine-add-step input[type="text"] {
  flex: 1;
  min-width: 150px;
  padding: 8px 10px;
  font-size: 13px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
}

.routine-add-step input[type="text"]:focus {
  outline: none;
  border-color: var(--coral);
}

.routine-add-step select {
  padding: 8px 10px;
  font-size: 13px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  min-width: 100px;
}

.routine-add-step select:focus {
  outline: none;
  border-color: var(--coral);
}

.routine-add-step input[type="number"] {
  width: 70px;
  padding: 8px 10px;
  font-size: 13px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  text-align: center;
}

.routine-add-step input[type="number"]:focus {
  outline: none;
  border-color: var(--coral);
}

.routine-add-step-btn {
  padding: 8px 14px;
  font-size: 13px;
  font-weight: 500;
  background: var(--coral);
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.routine-add-step-btn:hover:not(:disabled) {
  background: #e05a45;
}

.routine-add-step-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.routine-step-minutes-label {
  font-size: 12px;
  color: var(--text-tertiary);
  align-self: center;
}

/* Duration Badge */
.routine-duration-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: var(--bg-secondary);
  border-radius: 12px;
  font-size: 12px;
  color: var(--text-secondary);
  margin-top: 8px;
}

/* Empty Steps State */
.routine-custom-steps-empty {
  padding: 24px;
  text-align: center;
  color: var(--text-tertiary);
  font-size: 13px;
  background: var(--bg-secondary);
  border-radius: 8px;
  border: 1px dashed var(--border-color);
}

/* Light Theme Adjustments - Form Elements */
[data-theme="light"] .icon-option {
  background: #f5f5f5;
  border: 2px solid #e0e0e0;
}

[data-theme="light"] .icon-option:hover {
  background: #e8e8e8;
  border-color: #d0d0d0;
}

[data-theme="light"] .icon-option.selected {
  background: #fef5f3;
  border-color: #e74c3c;
}

[data-theme="light"] .routine-custom-form .form-field label {
  color: #444;
  font-weight: 600;
}

[data-theme="light"] .routine-custom-form .form-field input[type="text"],
[data-theme="light"] .routine-custom-form .form-field textarea,
[data-theme="light"] .routine-custom-form .form-field select {
  background: #ffffff;
  border: 2px solid #e0e0e0;
  color: #1a1a2e;
}

[data-theme="light"] .routine-custom-form .form-field input:focus,
[data-theme="light"] .routine-custom-form .form-field textarea:focus,
[data-theme="light"] .routine-custom-form .form-field select:focus {
  border-color: #e74c3c;
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.15);
}

[data-theme="light"] .routine-custom-steps > label {
  color: #444;
  font-weight: 600;
}

[data-theme="light"] .routine-custom-step {
  background: #f9f9f9;
  border: 1px solid #e5e5e5;
}

[data-theme="light"] .routine-custom-step:hover {
  background: #f0f0f0;
}

[data-theme="light"] .routine-custom-step-num {
  background: #e8e8e8;
  color: #444;
}

[data-theme="light"] .routine-custom-step-title {
  color: #1a1a2e;
  font-weight: 600;
}

[data-theme="light"] .routine-custom-step-meta {
  color: #555;
}

[data-theme="light"] .routine-custom-step-optional {
  background: #f5f5f5;
  border: 1px solid #ddd;
  color: #666;
}

[data-theme="light"] .routine-custom-step-optional:hover {
  background: #e8e8e8;
  border-color: #e74c3c;
  color: #e74c3c;
}

[data-theme="light"] .routine-custom-step-remove {
  color: #999;
}

[data-theme="light"] .routine-custom-step-remove:hover {
  background: #fef5f3;
  color: #e74c3c;
}

[data-theme="light"] .routine-add-step-form {
  background: #f5f5f5;
  border: 2px dashed #d0d0d0;
}

[data-theme="light"] .routine-add-step-row input[type="text"],
[data-theme="light"] .routine-add-step-row select,
[data-theme="light"] .routine-add-step-row input[type="number"] {
  background: #ffffff;
  border: 2px solid #e0e0e0;
  color: #1a1a2e;
}

[data-theme="light"] .routine-add-step-row input[type="text"]:focus,
[data-theme="light"] .routine-add-step-row select:focus,
[data-theme="light"] .routine-add-step-row input[type="number"]:focus {
  border-color: #e74c3c;
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.15);
}

[data-theme="light"] .routine-add-step {
  background: #f5f5f5;
  border: 2px dashed #d0d0d0;
}

[data-theme="light"] .routine-add-step input[type="text"],
[data-theme="light"] .routine-add-step select,
[data-theme="light"] .routine-add-step input[type="number"] {
  background: #ffffff;
  border: 2px solid #e0e0e0;
  color: #1a1a2e;
}

[data-theme="light"] .routine-add-step input[type="text"]:focus,
[data-theme="light"] .routine-add-step select:focus,
[data-theme="light"] .routine-add-step input[type="number"]:focus {
  border-color: #e74c3c;
  box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.15);
}

[data-theme="light"] .routine-add-step-btn {
  background: #e74c3c;
  color: #fff;
  box-shadow: 0 2px 6px rgba(231, 76, 60, 0.25);
}

[data-theme="light"] .routine-add-step-btn:hover:not(:disabled) {
  background: #d63526;
  box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
}

[data-theme="light"] .routine-step-minutes-label {
  color: #666;
}

[data-theme="light"] .routine-duration-badge {
  background: #f0f0f0;
  color: #555;
  border: 1px solid #e5e5e5;
}

[data-theme="light"] .routine-custom-steps-empty {
  background: #f5f5f5;
  border: 2px dashed #d0d0d0;
  color: #666;
}

[data-theme="light"] .reorder-btn {
  background: #e8e8e8;
  color: #666;
}

[data-theme="light"] .reorder-btn:hover:not(:disabled) {
  background: #e74c3c;
  color: #fff;
}

/* Responsive adjustments for custom routine forms */
@media (max-width: 600px) {
  .icon-grid {
    grid-template-columns: repeat(7, 1fr);
    gap: 4px;
  }

  .icon-option {
    width: 32px;
    height: 32px;
    font-size: 18px;
  }

  .routine-custom-schedule {
    grid-template-columns: 1fr;
    gap: 12px;
  }

  .routine-add-step {
    flex-direction: column;
  }

  .routine-add-step input[type="text"] {
    min-width: auto;
    width: 100%;
  }

  .routine-add-step select,
  .routine-add-step input[type="number"] {
    width: 100%;
  }

  .routine-custom-step-actions {
    flex-wrap: wrap;
  }
}

/* ===========================================
   SYSTEMS & HABITS
   =========================================== */

/* Systems Screen - Matches Tasks/Routines layout */
.systems-screen {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  background: var(--color-bg);
}

/* Systems Header */
.systems-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
  border-bottom: 1px solid var(--color-border);
  background: var(--color-surface);
}

.systems-header-content h1 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.systems-subtitle {
  font-size: 12px;
  color: var(--color-text-secondary);
  margin: 4px 0 0 0;
}

.systems-add-btn {
  padding: 8px 16px;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.systems-add-btn:hover {
  background: var(--color-accent-dark);
}

/* Systems Stats Row */
.systems-stats {
  display: flex;
  gap: 1px;
  background: var(--color-border);
  border-bottom: 1px solid var(--color-border);
}

.systems-stat {
  flex: 1;
  background: var(--color-surface);
  padding: 12px 16px;
  text-align: center;
}

.systems-stat-value {
  display: block;
  font-size: 20px;
  font-weight: 700;
  color: var(--color-text);
  margin-bottom: 2px;
}

.systems-stat-label {
  font-size: 10px;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.systems-stat-bar {
  height: 3px;
  background: var(--color-border);
  border-radius: 2px;
  margin-top: 8px;
  overflow: hidden;
}

.systems-stat-fill {
  height: 100%;
  background: var(--looops-coral);
  border-radius: 2px;
  transition: width 0.3s ease;
}

/* Systems Tabs */
.systems-tabs {
  display: flex;
  gap: 0;
  background: var(--color-surface);
  border-bottom: 1px solid var(--color-border);
  padding: 0 24px;
}

.systems-tab {
  padding: 12px 20px;
  background: none;
  border: none;
  color: var(--color-text-secondary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  position: relative;
  transition: color 0.15s ease;
}

.systems-tab:hover {
  color: var(--color-text);
}

.systems-tab.active {
  color: var(--looops-coral);
}

.systems-tab.active::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--looops-coral);
}

/* Systems Content Area */
.systems-content {
  flex: 1;
  overflow-y: auto;
  padding: 20px 24px;
}

/* Systems Overview - Two column layout */
.systems-overview {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  align-items: start;
}

/* Systems Section - Card Style */
.systems-section {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  overflow: hidden;
}

.systems-section h2 {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
  padding: 12px 16px;
  background: var(--color-bg-secondary);
  border-bottom: 1px solid var(--color-border);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Systems Grid */
.systems-grid {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* System Card - Compact */
.system-card {
  background: var(--color-bg-secondary);
  border-radius: 8px;
  padding: 12px;
  cursor: pointer;
  border: 1px solid var(--color-border);
  transition: all 0.15s ease;
  display: flex;
  align-items: center;
  gap: 12px;
}

.system-card:hover {
  border-color: var(--loop-color, var(--looops-coral));
  background: var(--color-surface);
}

.system-card-header {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
}

.system-card-loop {
  font-size: 11px;
  color: var(--loop-color, var(--looops-coral));
  font-weight: 500;
}

.system-card-health {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  min-width: 36px;
  text-align: right;
}

.system-card-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.system-card-goal {
  font-size: 12px;
  color: var(--color-text-secondary);
  margin: 0;
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.system-card-stats {
  display: none;
}

.system-card-health-bar {
  width: 60px;
  height: 4px;
  background: var(--color-border);
  border-radius: 2px;
  overflow: hidden;
}

.system-card-health-fill {
  height: 100%;
  background: var(--loop-color, var(--looops-coral));
  border-radius: 2px;
  transition: width 0.3s ease;
}

/* Systems Empty State */
.systems-empty {
  text-align: center;
  padding: 24px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  border: 1px dashed var(--color-border);
}

.systems-empty-icon {
  font-size: 28px;
  display: block;
  margin-bottom: 8px;
}

.systems-empty h3 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 4px 0;
}

.systems-empty p {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin: 0 0 12px 0;
}

.systems-empty-btn {
  padding: 8px 16px;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s ease;
}

.systems-empty-btn:hover {
  background: var(--color-accent-dark);
}

/* Loop Filter Bar */
.loop-filter-bar {
  display: flex;
  gap: 8px;
  margin-bottom: 20px;
  overflow-x: auto;
  padding-bottom: 8px;
}

.loop-filter-btn {
  padding: 8px 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 20px;
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.15s ease;
}

.loop-filter-btn:hover {
  border-color: var(--loop-color, var(--color-text-tertiary));
  background: var(--color-surface);
}

.loop-filter-btn.active {
  background: var(--loop-color, var(--looops-coral));
  color: white;
  border-color: var(--loop-color, var(--looops-coral));
}

/* Templates Scroll */
.templates-scroll {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  padding-bottom: 8px;
}

.template-quick-card {
  flex-shrink: 0;
  width: 160px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  text-align: center;
  cursor: pointer;
  transition: all 0.15s ease;
}

.template-quick-card:hover {
  border-color: var(--loop-color, var(--looops-coral));
  transform: translateY(-2px);
  background: var(--color-surface);
}

.template-quick-loop {
  font-size: 24px;
  display: block;
  margin-bottom: 8px;
}

.template-quick-title {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 4px;
}

.template-quick-duration {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* Goals View in Systems Screen */
.systems-goals-view {
  padding: 16px;
}

.goals-systems-intro {
  text-align: center;
  padding: 16px;
  margin-bottom: 16px;
  color: var(--color-text-secondary);
  font-style: italic;
}

.goals-with-systems {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.goal-system-card {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 16px;
  border-left: 4px solid var(--loop-color, var(--looops-coral));
}

.goal-system-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.goal-system-loop {
  font-size: 13px;
  color: var(--loop-color, var(--color-text-secondary));
  font-weight: 500;
}

.goal-system-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.goal-system-progress {
  font-size: 14px;
  font-weight: 600;
  color: var(--looops-sage);
}

.goal-delete-btn {
  width: 24px;
  height: 24px;
  border-radius: 4px;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  font-size: 18px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: all 0.15s ease;
}

.goal-system-card:hover .goal-delete-btn {
  opacity: 1;
}

.goal-delete-btn:hover {
  background: var(--color-error-bg, rgba(220, 38, 38, 0.1));
  color: var(--color-error, #dc2626);
}

.goal-system-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 4px;
}

.goal-system-desc {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin-bottom: 12px;
}

.goal-linked-systems {
  background: var(--color-bg-tertiary);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 12px;
}

.goal-linked-systems h4 {
  font-size: 12px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.goal-linked-system {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 0;
  font-size: 13px;
  color: var(--color-text);
}

.goal-linked-health {
  font-weight: 600;
  color: var(--looops-sage);
}

.goal-system-suggestions {
  margin-bottom: 12px;
}

.goal-system-suggestions h4 {
  font-size: 12px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.suggested-templates {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.suggested-template-btn {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: var(--loop-bg, rgba(242, 112, 89, 0.1));
  border: 1px solid transparent;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
}

.suggested-template-btn:hover {
  border-color: var(--loop-color, var(--looops-coral));
  background: var(--color-surface);
}

.suggested-template-btn .template-title {
  font-size: 13px;
  color: var(--color-text);
}

.suggested-template-btn .template-arrow {
  color: var(--loop-color, var(--looops-coral));
}

.goal-create-system-btn {
  width: 100%;
  padding: 10px;
  background: transparent;
  border: 1px dashed var(--color-border);
  border-radius: 8px;
  color: var(--color-text-secondary);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.goal-create-system-btn:hover {
  border-color: var(--loop-color, var(--looops-coral));
  color: var(--loop-color, var(--looops-coral));
  background: var(--loop-bg, rgba(242, 112, 89, 0.05));
}

/* ===========================================
   SYSTEM BUILDER WIZARD
   =========================================== */

.system-builder {
  position: fixed;
  inset: 0;
  background: var(--color-bg);
  z-index: 100;
  display: flex;
  flex-direction: column;
}

.system-builder-header {
  padding: 16px 24px;
  border-bottom: 1px solid var(--color-border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--color-surface);
}

.system-builder-progress {
  flex: 1;
  max-width: 400px;
}

.step-indicator {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-bottom: 8px;
  display: block;
}

.progress-bar {
  height: 4px;
  background: var(--color-border);
  border-radius: 2px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: var(--looops-coral);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.system-builder-close {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  font-size: 24px;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: 8px;
}

.system-builder-close:hover {
  background: var(--color-bg-secondary);
  color: var(--color-text);
}

.system-builder-content {
  flex: 1;
  overflow-y: auto;
  padding: 32px 24px;
}

.system-builder-footer {
  padding: 16px 24px;
  border-top: 1px solid var(--color-border);
  display: flex;
  align-items: center;
  gap: 12px;
  background: var(--color-surface);
  flex-shrink: 0;
  min-height: 70px;
}

.footer-spacer {
  flex: 1;
}

/* Wizard Step */
.wizard-step {
  max-width: 700px;
  margin: 0 auto;
}

.wizard-step h2 {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.wizard-subtitle {
  font-size: 15px;
  color: var(--color-text-secondary);
  margin: 0 0 32px 0;
  line-height: 1.5;
}

/* Wizard Buttons */
.wizard-btn {
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  min-width: 100px;
}

.wizard-btn--primary {
  background: var(--looops-coral);
  color: white;
  border: none;
}

.wizard-btn--primary:hover:not(:disabled) {
  background: var(--color-accent-dark);
}

.wizard-btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.wizard-btn--secondary {
  background: var(--color-bg-secondary);
  color: var(--color-text);
  border: 1px solid var(--color-border);
}

.wizard-btn--secondary:hover {
  background: var(--color-surface);
}

/* Loop Filter (in wizard) */
.loop-filter {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 24px;
}

/* Template Grid */
.template-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 16px;
}

.template-card {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 20px;
  text-align: left;
  cursor: pointer;
  transition: all 0.15s ease;
}

.template-card:hover {
  border-color: var(--looops-coral);
  transform: translateY(-2px);
  background: var(--color-surface);
}

.template-card-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 12px;
}

.template-difficulty {
  font-size: 11px;
  text-transform: uppercase;
  color: var(--looops-sage);
  font-weight: 500;
}

.template-duration {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.template-card h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.template-card p {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 16px 0;
  line-height: 1.4;
}

.template-habits {
  font-size: 12px;
  color: var(--looops-coral);
  font-weight: 500;
}

.template-card--custom {
  border-style: dashed;
  text-align: center;
}

.custom-icon {
  font-size: 32px;
  color: var(--color-text-tertiary);
  margin-bottom: 12px;
}

/* Goal Input */
.goal-input-section {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.goal-input {
  width: 100%;
  padding: 16px;
  font-size: 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  color: var(--color-text);
  resize: vertical;
  min-height: 100px;
}

.goal-input:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.goal-tips {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  padding: 16px;
}

.goal-tips h4 {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.goal-tips ul {
  margin: 0;
  padding-left: 20px;
}

.goal-tips li {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin-bottom: 4px;
}

/* Identity Section */
.identity-section {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.identity-prompt {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.identity-prefix {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
}

.identity-input {
  width: 100%;
  padding: 16px;
  font-size: 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  color: var(--color-text);
  resize: vertical;
}

.identity-input:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.identity-examples {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  padding: 16px;
}

.identity-examples h4 {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.identity-examples ul {
  margin: 0;
  padding-left: 20px;
}

.identity-examples li {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin-bottom: 4px;
  font-style: italic;
}

/* Archetype context banner for SystemBuilder */
.archetype-context-banner {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: linear-gradient(135deg, var(--looops-coral-10) 0%, var(--looops-sage-10) 100%);
  border-radius: 12px;
  margin-bottom: 16px;
}

.archetype-badge {
  font-size: 13px;
  font-weight: 600;
  color: var(--looops-coral);
  padding: 4px 10px;
  background: var(--color-bg);
  border-radius: 20px;
}

.archetype-hint {
  font-size: 13px;
  color: var(--color-text-secondary);
  font-style: italic;
}

/* Identity example buttons */
.identity-example-btn {
  background: none;
  border: none;
  color: var(--color-text-secondary);
  font-size: 13px;
  font-style: italic;
  cursor: pointer;
  text-align: left;
  padding: 2px 0;
  transition: color 0.2s;
}

.identity-example-btn:hover {
  color: var(--looops-coral);
}

/* Archetype obstacle suggestions */
.archetype-obstacles-suggestions {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 20px;
}

.archetype-obstacles-suggestions h4 {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 12px 0;
}

.obstacle-suggestion-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.obstacle-suggestion {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
}

.obstacle-suggestion:hover {
  border-color: var(--looops-coral);
  background: var(--looops-coral-10);
}

.suggestion-obstacle {
  font-size: 12px;
  color: var(--color-text);
  flex: 1;
}

.suggestion-arrow {
  color: var(--color-text-tertiary);
  font-size: 12px;
}

.suggestion-strategy {
  font-size: 12px;
  color: var(--looops-sage);
  flex: 1;
}

/* Habits Section */
.habits-section {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.suggested-habits h4,
.add-custom-habit h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 12px 0;
}

.habit-card {
  display: flex;
  gap: 12px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: 12px;
  margin-bottom: 12px;
  border: 1px solid var(--color-border);
}

.habit-card.disabled {
  opacity: 0.5;
}

.habit-toggle {
  display: flex;
  align-items: flex-start;
  padding-top: 2px;
}

.habit-toggle input {
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.habit-card-content {
  flex: 1;
}

.habit-card-content h5 {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  margin: 0 0 4px 0;
}

.habit-response {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin: 0 0 8px 0;
}

.habit-meta {
  display: flex;
  gap: 12px;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

/* Custom Habit Form */
.custom-habit-form {
  background: var(--color-bg-secondary);
  border: 1px dashed var(--color-border);
  border-radius: 12px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.custom-habit-form input,
.custom-habit-form select {
  padding: 10px 12px;
  font-size: 14px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  color: var(--color-text);
}

.custom-habit-form input:focus,
.custom-habit-form select:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.custom-habit-row {
  display: flex;
  gap: 12px;
}

.custom-habit-row select {
  flex: 1;
}

.add-habit-btn {
  padding: 10px 16px;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.add-habit-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Environment Section */
.environment-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.environment-tweak {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
}

.tweak-type {
  font-size: 12px;
  font-weight: 500;
  padding: 4px 8px;
  border-radius: 4px;
  white-space: nowrap;
}

.tweak-type--add {
  background: rgba(115, 165, 140, 0.2);
  color: var(--looops-sage);
}

.tweak-type--remove {
  background: rgba(242, 112, 89, 0.2);
  color: var(--looops-coral);
}

.tweak-type--modify {
  background: rgba(244, 185, 66, 0.2);
  color: var(--looops-amber);
}

.environment-tweak input {
  flex: 1;
  padding: 8px 12px;
  font-size: 14px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  color: var(--color-text);
}

.environment-tweak input:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.remove-tweak {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: 4px;
}

.remove-tweak:hover {
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
}

.add-tweak-buttons {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.add-tweak-buttons button {
  padding: 10px 16px;
  background: var(--color-bg-secondary);
  border: 1px dashed var(--color-border);
  border-radius: 8px;
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.add-tweak-buttons button:hover {
  border-style: solid;
  border-color: var(--looops-coral);
  color: var(--looops-coral);
}

/* Obstacles Section */
.obstacles-section {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.obstacle-item {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  position: relative;
}

.obstacle-if,
.obstacle-then {
  display: flex;
  align-items: center;
  gap: 12px;
}

.obstacle-label {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-tertiary);
  min-width: 80px;
}

.obstacle-item input {
  flex: 1;
  padding: 10px 12px;
  font-size: 14px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  color: var(--color-text);
}

.obstacle-item input:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.remove-obstacle {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: 4px;
}

.remove-obstacle:hover {
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
}

.add-obstacle-btn {
  padding: 12px;
  background: var(--color-bg-secondary);
  border: 1px dashed var(--color-border);
  border-radius: 8px;
  font-size: 14px;
  color: var(--color-text-secondary);
  cursor: pointer;
  text-align: center;
}

.add-obstacle-btn:hover {
  border-style: solid;
  border-color: var(--looops-coral);
  color: var(--looops-coral);
}

/* Review Section */
.review-section {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.review-card {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  padding: 16px;
}

.review-card h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 8px 0;
}

.review-card p {
  font-size: 14px;
  color: var(--color-text-secondary);
  margin: 0;
}

.review-card ul {
  margin: 0;
  padding-left: 20px;
}

.review-card li {
  font-size: 13px;
  color: var(--color-text-secondary);
  margin-bottom: 4px;
}

/* ===========================================
   HABITS TRACKER
   =========================================== */

.habits-tracker {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.habits-tracker--empty {
  text-align: center;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
}

.habits-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.habits-empty-icon {
  font-size: 24px;
}

.habits-empty-state p {
  font-size: 12px;
  color: var(--color-text-secondary);
  margin: 0;
}

.habits-empty-hint {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* Habit Item - Compact */
.habit-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  border: 1px solid var(--color-border);
  transition: all 0.15s ease;
}

.habit-item.completed {
  background: rgba(115, 165, 140, 0.1);
  border-color: var(--looops-sage);
}

.habit-check {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-surface);
  border: 2px solid var(--color-border);
  border-radius: 50%;
  cursor: pointer;
  flex-shrink: 0;
  transition: all 0.15s ease;
}

.habit-item.completed .habit-check {
  background: var(--looops-sage);
  border-color: var(--looops-sage);
}

.check-icon {
  color: white;
  font-size: 14px;
  font-weight: 700;
}

.check-empty {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--color-border);
}

.habit-content {
  flex: 1;
  min-width: 0;
  cursor: pointer;
}

.habit-title-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 0;
}

.habit-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.habit-item.completed .habit-title {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

/* Habit celebration animation */
.habit-item.celebrating {
  animation: habitCelebrate 0.5s ease-out;
}

@keyframes habitCelebrate {
  0% { transform: scale(1); }
  25% { transform: scale(1.02); }
  50% { transform: scale(1); }
  75% { transform: scale(1.01); }
  100% { transform: scale(1); }
}

.habit-celebration {
  font-size: 12px;
  color: var(--looops-sage);
  font-style: italic;
  padding: 4px 0;
  animation: fadeInUp 0.3s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.habit-streak {
  font-size: 11px;
  color: var(--looops-coral);
  font-weight: 500;
}

.habit-meta {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 0;
}

.habit-loop-tag {
  font-size: 10px;
  padding: 1px 6px;
  border-radius: 10px;
  font-weight: 500;
}

.habit-cue {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* Habit Week Mini Calendar - Compact */
.habit-week {
  display: flex;
  gap: 2px;
  margin-left: auto;
}

.habit-day {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1px;
  padding: 2px;
  border-radius: 3px;
}

.habit-day.today {
  background: var(--color-surface);
}

.day-letter {
  font-size: 9px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
}

.day-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--color-border);
}

.habit-day.completed .day-dot {
  background: var(--looops-sage);
}

/* Habits Widget (compact) */
.habits-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.habits-widget-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.habits-widget-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.habits-widget-count {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.habits-widget-progress {
  height: 4px;
  background: var(--color-border);
  border-radius: 2px;
  overflow: hidden;
}

.habits-widget-progress-fill {
  height: 100%;
  background: var(--looops-coral);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.habits-widget-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.habits-widget-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px;
  background: none;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  text-align: left;
  transition: background 0.15s ease;
}

.habits-widget-item:hover {
  background: var(--color-surface);
}

.habits-widget-item.completed {
  opacity: 0.6;
}

.habits-widget-check {
  font-size: 14px;
  color: var(--color-text-tertiary);
}

.habits-widget-item.completed .habits-widget-check {
  color: var(--looops-sage);
}

.habits-widget-name {
  flex: 1;
  font-size: 13px;
  color: var(--color-text);
}

.habits-widget-item.completed .habits-widget-name {
  text-decoration: line-through;
  color: var(--color-text-tertiary);
}

.habits-widget-streak {
  font-size: 11px;
  color: var(--looops-coral);
}

.habits-widget-empty {
  font-size: 13px;
  color: var(--color-text-tertiary);
  text-align: center;
  padding: 16px;
}

/* ===========================================
   LOOP DASHBOARD
   =========================================== */

.loop-dashboard {
  padding: 24px;
  max-width: 1200px;
  margin: 0 auto;
}

.loop-dashboard-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.loop-dashboard-title {
  display: flex;
  align-items: center;
  gap: 12px;
}

.loop-icon {
  font-size: 32px;
}

.loop-dashboard-title h1 {
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
  margin: 0;
}

.dashboard-action-btn {
  padding: 10px 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.dashboard-action-btn:hover {
  border-color: var(--loop-color, var(--looops-coral));
  color: var(--loop-color, var(--looops-coral));
}

.dashboard-action-btn--primary {
  background: var(--loop-color, var(--looops-sage));
  border-color: var(--loop-color, var(--looops-sage));
  color: white;
}

.dashboard-action-btn--primary:hover {
  filter: brightness(1.1);
  color: white;
}

/* Full-width Widget Section */
.loop-dashboard-full-widget {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 24px;
}

.full-widget-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--color-border);
}

.full-widget-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
}

.full-widget-icon {
  font-size: 20px;
}

/* Dashboard Stats */
.loop-dashboard-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 12px;
  margin-bottom: 24px;
}

.stat-card {
  background: var(--color-bg-secondary);
  border-radius: 12px;
  padding: 16px;
  text-align: center;
}

.stat-card--health {
  background: linear-gradient(135deg, rgba(115, 165, 140, 0.2), rgba(115, 165, 140, 0.1));
}

.stat-value {
  display: block;
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
}

.stat-label {
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Dashboard Widgets Grid */
.loop-dashboard-widgets {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 16px;
}

/* Widget Container */
.widget-container {
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  /* Soft 3D raised effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 8px 16px rgba(0, 0, 0, 0.06),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.widget-container:hover {
  transform: translateY(-2px);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.12),
    0 8px 16px rgba(0, 0, 0, 0.1),
    0 16px 24px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.widget-small {
  min-height: 150px;
}

.widget-medium {
  min-height: 250px;
}

.widget-large {
  min-height: 350px;
  grid-column: span 2;
}

.widget-full {
  grid-column: 1 / -1;
  min-height: 300px;
}

.widget-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--color-border);
}

.widget-icon {
  font-size: 16px;
}

.widget-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  flex: 1;
}

.widget-remove-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: var(--color-text-tertiary);
  font-size: 18px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.widget-remove-btn:hover {
  background: var(--color-bg);
  color: var(--looops-coral);
}

/* Widget Controls Group */
.widget-controls {
  display: flex;
  align-items: center;
  gap: 8px;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.widget-container:hover .widget-controls {
  opacity: 1;
}

/* Widget Size Controls */
.widget-size-controls {
  display: flex;
  gap: 2px;
  background: var(--color-bg-secondary);
  border-radius: 6px;
  padding: 2px;
}

.widget-size-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: var(--color-text-tertiary);
  font-size: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.widget-size-btn:hover {
  background: var(--color-surface);
  color: var(--color-text);
}

.widget-size-btn.active {
  background: var(--looops-coral);
  color: white;
}

.widget-content {
  padding: 16px;
}

/* Widget Placeholder */
.widget-placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  min-height: 120px;
  gap: 8px;
}

.widget-placeholder-icon {
  font-size: 32px;
  opacity: 0.5;
}

.widget-placeholder-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.widget-placeholder-hint {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

/* Widget Picker Modal */
.widget-picker-modal {
  background: var(--color-bg);
  border-radius: 12px;
  width: 90%;
  max-width: 500px;
  max-height: 80vh;
  overflow: hidden;
}

.widget-picker-grid {
  padding: 16px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 12px;
  max-height: 400px;
  overflow-y: auto;
}

.widget-picker-item {
  padding: 16px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 14px;
  text-align: center;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  /* Soft 3D raised effect */
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.1),
    0 4px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.widget-picker-item:hover {
  border-color: rgba(242, 112, 89, 0.4);
  transform: translateY(-3px) scale(1.02);
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.12),
    0 8px 16px rgba(0, 0, 0, 0.1),
    0 0 0 1px var(--looops-coral),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.widget-picker-item:active {
  transform: translateY(-1px) scale(0.99);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.widget-picker-icon {
  font-size: 24px;
  display: block;
  margin-bottom: 8px;
}

.widget-picker-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  display: block;
  margin-bottom: 4px;
}

.widget-picker-desc {
  font-size: 11px;
  color: var(--color-text-tertiary);
  line-height: 1.3;
}

.widget-picker-empty {
  padding: 32px;
  text-align: center;
  color: var(--color-text-tertiary);
}

/* Tasks Widget */
.tasks-widget {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.tasks-widget-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 0;
  border-bottom: 1px solid var(--color-border);
}

.tasks-widget-item:last-child {
  border-bottom: none;
}

.tasks-widget-check {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: 1.5px solid var(--border-color);
  border-radius: 50%;
  cursor: pointer;
  font-size: 12px;
  color: var(--text-tertiary);
}

.tasks-widget-check:hover {
  border-color: var(--coral);
  color: var(--coral);
}

.tasks-widget-title {
  flex: 1;
  font-size: 13px;
  color: var(--text-primary);
}

.tasks-widget-empty,
.tasks-widget-more {
  font-size: 12px;
  color: var(--text-tertiary);
  text-align: center;
  padding: 8px;
}

/* System Health Widget */
.system-health-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.system-health-widget--empty {
  text-align: center;
  padding: 16px;
}

.system-health-widget--empty p {
  font-size: 13px;
  color: var(--text-tertiary);
  margin: 0 0 12px 0;
}

.create-system-btn {
  padding: 8px 16px;
  background: var(--coral);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  cursor: pointer;
}

.system-health-item {
  padding: 12px;
  background: var(--bg-tertiary);
  border-radius: 8px;
}

.system-health-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
}

.system-health-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}

.system-health-score {
  font-size: 13px;
  font-weight: 600;
  color: var(--sage);
}

.system-health-bar {
  height: 4px;
  background: var(--bg-secondary);
  border-radius: 2px;
  overflow: hidden;
  margin-bottom: 4px;
}

.system-health-fill {
  height: 100%;
  background: var(--sage);
  border-radius: 2px;
}

.system-health-habits {
  font-size: 11px;
  color: var(--text-tertiary);
}

/* Goals Widget */
.goals-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.goals-widget--empty {
  text-align: center;
  padding: 16px;
  color: var(--text-tertiary);
  font-size: 13px;
}

.goals-widget-item {
  display: flex;
  align-items: center;
  gap: 12px;
}

.goals-widget-title {
  flex: 1;
  font-size: 13px;
  color: var(--text-primary);
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.goals-widget-progress {
  width: 60px;
  height: 4px;
  background: var(--bg-tertiary);
  border-radius: 2px;
  overflow: hidden;
}

.goals-widget-progress-fill {
  height: 100%;
  background: var(--coral);
  border-radius: 2px;
}

.goals-widget-percent {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  min-width: 36px;
  text-align: right;
}

/* Notes Widget */
.notes-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.notes-widget-input {
  display: flex;
  gap: 8px;
}

.notes-widget-input textarea {
  flex: 1;
  padding: 8px 10px;
  font-size: 13px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  resize: none;
}

.notes-widget-input textarea:focus {
  outline: none;
  border-color: var(--coral);
}

.notes-widget-add {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--coral);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 18px;
  cursor: pointer;
}

.notes-widget-add:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.notes-widget-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.notes-widget-item {
  padding: 10px;
  background: var(--bg-tertiary);
  border-radius: 6px;
}

.notes-widget-content {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.4;
}

.notes-widget-empty {
  font-size: 12px;
  color: var(--text-tertiary);
  text-align: center;
  padding: 16px;
}

/* ========== Timer Widget ========== */
.timer-widget {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 16px;
}

.timer-display {
  margin-bottom: 8px;
}

.timer-progress-ring {
  position: relative;
  width: 120px;
  height: 120px;
}

.timer-progress-ring svg {
  width: 100%;
  height: 100%;
}

.timer-bg-circle {
  stroke: var(--color-bg-secondary);
}

.timer-progress-circle {
  stroke: var(--looops-coral);
  transition: stroke-dasharray 0.3s ease;
}

.timer-time {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
  font-variant-numeric: tabular-nums;
}

.timer-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-secondary);
  margin-bottom: 16px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.timer-controls {
  display: flex;
  gap: 12px;
}

.timer-btn {
  width: 44px;
  height: 44px;
  border: none;
  border-radius: 50%;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.timer-btn.start {
  background: linear-gradient(145deg, var(--looops-coral) 0%, rgba(242, 112, 89, 0.8) 100%);
  color: white;
  box-shadow: 0 2px 8px rgba(242, 112, 89, 0.3);
}

.timer-btn.start:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(242, 112, 89, 0.4);
}

.timer-btn.pause {
  background: linear-gradient(145deg, var(--looops-amber) 0%, rgba(244, 185, 66, 0.8) 100%);
  color: white;
  box-shadow: 0 2px 8px rgba(244, 185, 66, 0.3);
}

.timer-btn.pause:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(244, 185, 66, 0.4);
}

.timer-btn.reset {
  background: var(--color-bg-secondary);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
}

.timer-btn.reset:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

/* ========== Task Timer - Time Tracking ========== */
.task-timer {
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: 12px;
  border: 1px solid var(--color-border);
}

.timer-display {
  display: flex;
  align-items: baseline;
  gap: 8px;
  margin-bottom: 16px;
}

.task-timer .timer-time {
  font-size: 32px;
  font-weight: 700;
  font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
  color: var(--color-text);
  position: relative;
  top: auto;
  left: auto;
  transform: none;
}

.task-timer .timer-time.running {
  color: var(--color-success);
}

.task-timer .timer-time.paused {
  color: var(--color-warning);
  animation: pulse-timer 1.5s ease-in-out infinite;
}

@keyframes pulse-timer {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.timer-estimate {
  font-size: 14px;
  color: var(--color-text-tertiary);
}

.task-timer .timer-controls {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
}

.task-timer .timer-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  width: auto;
  height: auto;
}

.task-timer .timer-btn.start {
  background: var(--color-success);
  color: white;
  border: none;
}

.task-timer .timer-btn.start:hover {
  background: #16a34a;
  transform: none;
  box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3);
}

.task-timer .timer-btn.pause {
  background: var(--color-warning);
  color: white;
  border: none;
}

.task-timer .timer-btn.pause:hover {
  background: #ca8a04;
  transform: none;
}

.task-timer .timer-btn.resume {
  background: var(--color-success);
  color: white;
  border: none;
}

.task-timer .timer-btn.resume:hover {
  background: #16a34a;
  transform: none;
}

.task-timer .timer-btn.stop {
  background: var(--color-error);
  color: white;
  border: none;
}

.task-timer .timer-btn.stop:hover {
  background: #dc2626;
  transform: none;
}

.task-timer .timer-btn.cancel {
  background: transparent;
  color: var(--color-text-tertiary);
  border: 1px solid var(--color-border);
  padding: 8px;
}

.task-timer .timer-btn.cancel:hover {
  background: var(--color-surface-hover);
  color: var(--color-text-secondary);
  transform: none;
}

/* Timer Summary */
.timer-summary {
  border-top: 1px solid var(--color-border);
  padding-top: 12px;
}

.timer-summary-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  font-size: 13px;
}

.timer-summary-header span:first-child {
  color: var(--color-text-secondary);
}

.timer-total {
  font-weight: 600;
  color: var(--color-text);
}

.timer-progress {
  height: 4px;
  background: var(--color-bg-tertiary);
  border-radius: 2px;
  overflow: hidden;
  margin-bottom: 12px;
}

.timer-progress-bar {
  height: 100%;
  border-radius: 2px;
  transition: width 0.3s ease;
}

.timer-entries {
  font-size: 12px;
}

.timer-entries details {
  cursor: pointer;
}

.timer-entries summary {
  color: var(--color-text-tertiary);
  padding: 4px 0;
}

.timer-entries summary:hover {
  color: var(--color-text-secondary);
}

.timer-entries ul {
  list-style: none;
  padding: 0;
  margin: 8px 0 0 0;
}

.timer-entries li {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  border-bottom: 1px solid var(--color-border-light);
}

.timer-entries li:last-child {
  border-bottom: none;
}

.timer-entries .entry-time {
  font-weight: 500;
  color: var(--color-text);
  min-width: 50px;
}

.timer-entries .entry-date {
  color: var(--color-text-tertiary);
  flex: 1;
}

.timer-entries .entry-note {
  color: var(--color-text-secondary);
  font-style: italic;
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Compact Timer (for task lists) */
.timer-compact-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  color: var(--color-text-tertiary);
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.timer-compact-btn:hover {
  background: var(--color-bg-secondary);
  color: var(--color-text-secondary);
  border-color: var(--color-text-tertiary);
}

.timer-compact-btn.has-time {
  color: var(--color-text-secondary);
}

.timer-compact-active {
  display: flex;
  align-items: center;
  gap: 4px;
}

.timer-compact-time {
  font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
  font-size: 12px;
  font-weight: 500;
  padding: 2px 6px;
  border-radius: 4px;
}

.timer-compact-time.running {
  background: rgba(34, 197, 94, 0.15);
  color: var(--color-success);
}

.timer-compact-time.paused {
  background: rgba(234, 179, 8, 0.15);
  color: var(--color-warning);
  animation: pulse-timer 1.5s ease-in-out infinite;
}

.timer-compact-active .timer-compact-btn {
  padding: 2px 4px;
  border: none;
  background: transparent;
}

.timer-compact-active .timer-compact-btn:hover {
  background: var(--color-bg-secondary);
}

.timer-compact-active .timer-compact-btn.stop {
  color: var(--color-error);
}

.timer-compact-active .timer-compact-btn.stop:hover {
  background: rgba(239, 68, 68, 0.15);
}

/* ========== Calendar Widget - Month View ========== */
.calendar-widget {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.calendar-widget--month {
  min-height: 220px;
}

.calendar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 4px 0;
}

.calendar-nav-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  color: var(--color-text);
  font-size: 16px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.calendar-nav-btn:hover {
  background: var(--color-surface);
  border-color: var(--looops-coral);
  color: var(--looops-coral);
}

.calendar-month-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 6px;
  transition: background 0.15s ease;
}

.calendar-month-title:hover {
  background: var(--color-bg-secondary);
}

.calendar-weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
  padding: 8px 0 4px;
}

.calendar-weekday {
  text-align: center;
  font-size: 10px;
  font-weight: 600;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
}

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
}

.calendar-cell {
  aspect-ratio: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
  min-height: 32px;
}

.calendar-cell:hover {
  background: var(--color-bg-secondary);
}

.calendar-cell.today {
  background: var(--looops-coral);
}

.calendar-cell.today .calendar-day-number {
  color: white;
  font-weight: 700;
}

.calendar-cell.other-month {
  opacity: 0.3;
}

.calendar-day-number {
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text);
  line-height: 1;
}

.calendar-task-dots {
  display: flex;
  gap: 2px;
  margin-top: 2px;
  align-items: center;
}

.calendar-task-dot {
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--looops-coral);
}

.calendar-cell.today .calendar-task-dot {
  background: white;
}

.calendar-task-more {
  font-size: 8px;
  color: var(--looops-coral);
  font-weight: 600;
}

.calendar-cell.today .calendar-task-more {
  color: white;
}

.calendar-empty {
  text-align: center;
  padding: 24px;
  color: var(--color-text-tertiary);
  font-size: 13px;
}

/* ========== Quick Links Widget ========== */
.quicklinks-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.quicklinks-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.quicklink-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
  transition: all 0.15s ease;
}

.quicklink-item:hover {
  background: var(--color-surface-hover);
}

.quicklink-link {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
  text-decoration: none;
  min-width: 0;
}

.quicklink-icon {
  font-size: 14px;
  flex-shrink: 0;
}

.quicklink-title {
  font-size: 13px;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.quicklink-link:hover .quicklink-title {
  color: var(--looops-coral);
}

.quicklink-remove {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: var(--color-text-tertiary);
  font-size: 16px;
  cursor: pointer;
  opacity: 0;
  transition: all 0.15s ease;
}

.quicklink-item:hover .quicklink-remove {
  opacity: 1;
}

.quicklink-remove:hover {
  background: rgba(242, 112, 89, 0.1);
  color: var(--looops-coral);
}

.quicklink-add-btn {
  padding: 10px;
  background: transparent;
  border: 1px dashed var(--color-border);
  border-radius: 8px;
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.quicklink-add-btn:hover {
  border-color: var(--looops-coral);
  color: var(--looops-coral);
  background: rgba(242, 112, 89, 0.05);
}

.quicklink-add-form {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px;
  background: var(--color-bg-secondary);
  border-radius: 8px;
}

.quicklink-input {
  padding: 8px 10px;
  font-size: 13px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 6px;
  color: var(--color-text);
}

.quicklink-input:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.quicklink-add-actions {
  display: flex;
  gap: 8px;
  margin-top: 4px;
}

.quicklink-save {
  flex: 1;
  padding: 8px;
  background: var(--looops-coral);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
}

.quicklink-save:hover {
  background: var(--color-accent-light);
}

.quicklink-cancel {
  padding: 8px 12px;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.quicklink-cancel:hover {
  background: var(--color-surface-hover);
}

.quicklinks-empty {
  text-align: center;
  padding: 16px;
  color: var(--color-text-tertiary);
  font-size: 13px;
}

/* ===========================================
   RESPONSIVE ADJUSTMENTS
   =========================================== */

@media (max-width: 768px) {
  .systems-screen {
    padding: 12px;
    height: auto;
  }

  .systems-header {
    flex-direction: row;
    gap: 12px;
    align-items: center;
  }

  .systems-header h1 {
    font-size: 18px;
  }

  .systems-add-btn {
    padding: 6px 12px;
    font-size: 12px;
  }

  .systems-stats {
    flex-direction: row;
    gap: 8px;
  }

  .systems-stat {
    padding: 8px 10px;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 2px;
  }

  .systems-stat-value {
    font-size: 16px;
  }

  .systems-stat-label {
    font-size: 9px;
  }

  .systems-stat-bar {
    display: none;
  }

  .systems-tabs {
    overflow-x: auto;
  }

  .systems-tab {
    padding: 6px 12px;
    font-size: 12px;
  }

  /* Mobile: Stack sections vertically */
  .systems-overview {
    grid-template-columns: 1fr;
    gap: 10px;
  }

  .systems-section {
    padding: 12px;
  }

  .systems-section h2 {
    font-size: 13px;
    margin-bottom: 8px;
    padding-bottom: 6px;
  }

  .systems-grid {
    gap: 6px;
  }

  .system-card {
    padding: 10px;
    gap: 10px;
  }

  .system-card-title {
    font-size: 13px;
  }

  .system-card-goal {
    font-size: 11px;
  }

  .loop-dashboard {
    padding: 16px;
  }

  .loop-dashboard-header {
    flex-direction: column;
    gap: 12px;
    align-items: stretch;
  }

  .loop-dashboard-widgets {
    grid-template-columns: 1fr;
  }

  .widget-large,
  .widget-full {
    grid-column: span 1;
  }

  .system-builder-content {
    padding: 24px 16px;
  }

  .template-grid {
    grid-template-columns: 1fr;
  }

  .custom-habit-row {
    flex-direction: column;
  }

  .add-tweak-buttons {
    flex-direction: column;
  }
}

/* ========== BABYSITTER WIDGET ========== */
/* TODO: Widget styling needs redesign (noted for future pass) */

.babysitter-widget {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border);
}

/* Weekly Grid */
.babysitter-week-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
}

.babysitter-day {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 8px 4px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.15s ease;
  min-height: 70px;
}

.babysitter-day:hover {
  background: var(--color-bg-tertiary);
  transform: translateY(-1px);
}

.babysitter-day--today {
  border: 2px solid var(--loop-family);
}

.babysitter-day--has-sessions {
  background: rgba(242, 112, 89, 0.1);
}

.babysitter-day-name {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
}

.babysitter-day-hours {
  font-size: 16px;
  font-weight: 700;
  color: var(--color-text);
  margin-top: 4px;
}

.babysitter-day-caregiver {
  font-size: 10px;
  color: var(--color-text-tertiary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

.babysitter-day-empty {
  font-size: 14px;
  color: var(--color-text-tertiary);
  margin-top: 4px;
}

/* Summary */
.babysitter-summary {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.babysitter-summary-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 12px 8px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius);
}

.babysitter-summary-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
}

.babysitter-summary-value {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
  margin-top: 4px;
  text-align: center;
}

/* Filter */
.babysitter-filter {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.babysitter-filter-label {
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.babysitter-filter-select {
  flex: 1;
  padding: 6px 10px;
  font-size: 13px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
}

.babysitter-filter-select:focus {
  outline: none;
  border-color: var(--loop-family);
}

.babysitter-history-filter-label {
  font-size: 12px;
  font-weight: 400;
  color: var(--color-text-secondary);
}

/* Actions */
.babysitter-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.babysitter-btn {
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
  transition: all 0.15s ease;
}

.babysitter-btn:hover {
  background: var(--color-bg-secondary);
}

.babysitter-btn--primary {
  background: var(--loop-family);
  border-color: var(--loop-family);
  color: white;
}

.babysitter-btn--primary:hover {
  opacity: 0.9;
}

/* History */
.babysitter-history {
  border-top: 1px solid var(--color-border);
  padding-top: 16px;
}

.babysitter-history h4 {
  margin: 0 0 12px 0;
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.babysitter-history-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 200px;
  overflow-y: auto;
}

.babysitter-history-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius);
  font-size: 13px;
}

.babysitter-history-date {
  color: var(--color-text-secondary);
  min-width: 80px;
}

.babysitter-history-caregiver {
  color: var(--color-text);
  flex: 1;
}

.babysitter-history-hours {
  color: var(--color-text);
  font-weight: 500;
}

.babysitter-history-amount {
  color: var(--color-text);
  font-weight: 600;
  min-width: 60px;
  text-align: right;
}

.babysitter-history-edit {
  padding: 2px 8px;
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: var(--radius);
  font-size: 11px;
  margin-right: 4px;
}

.babysitter-history-edit:hover {
  background: var(--color-bg-tertiary);
  color: var(--color-primary);
  border-color: var(--color-primary);
}

.babysitter-history-delete {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--color-text-tertiary);
  cursor: pointer;
  border-radius: var(--radius);
  font-size: 16px;
}

.babysitter-history-delete:hover {
  background: var(--color-bg-tertiary);
  color: var(--color-danger);
}

/* Edit Session Row */
.babysitter-history-item--editing {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius);
  flex-wrap: wrap;
}

.babysitter-edit-date {
  padding: 4px 6px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 12px;
  width: 110px;
}

.babysitter-edit-caregiver {
  padding: 4px 6px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 12px;
  flex: 1;
  min-width: 80px;
}

.babysitter-edit-hours {
  padding: 4px 6px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  font-size: 12px;
  width: 50px;
  text-align: center;
}

.babysitter-edit-amount {
  font-size: 12px;
  color: var(--color-text-secondary);
  min-width: 50px;
  text-align: right;
}

.babysitter-empty {
  color: var(--color-text-tertiary);
  font-size: 13px;
  text-align: center;
  padding: 16px;
}

/* Modal */
.babysitter-modal-overlay {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 99999;
  padding: 16px;
  pointer-events: auto;
  backdrop-filter: blur(2px);
}

.babysitter-modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 400px;
  max-height: 90vh;
  overflow-y: auto;
  z-index: 100000;
  position: relative;
  pointer-events: auto;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

.babysitter-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  border-bottom: 1px solid var(--color-border);
}

.babysitter-modal-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
}

.babysitter-modal-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: var(--radius);
  font-size: 20px;
}

.babysitter-modal-close:hover {
  background: var(--color-bg-secondary);
}

.babysitter-modal form {
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.babysitter-form-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.babysitter-form-group label {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.babysitter-form-group input,
.babysitter-form-group select {
  padding: 10px 12px;
  font-size: 14px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-bg-secondary);
  color: var(--color-text);
}

.babysitter-form-group input:focus,
.babysitter-form-group select:focus {
  outline: none;
  border-color: var(--loop-family);
}

.babysitter-calculated {
  padding: 12px;
  background: rgba(242, 112, 89, 0.1);
  border-radius: var(--radius);
  font-size: 16px;
  font-weight: 600;
  color: var(--loop-family);
  text-align: center;
}

.babysitter-modal-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  padding-top: 8px;
}

.babysitter-modal-empty {
  padding: 24px 16px;
  text-align: center;
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}

.babysitter-modal-empty p {
  margin: 0;
  color: var(--color-text-secondary);
  font-size: 14px;
}

.babysitter-modal-empty p:first-child {
  font-weight: 500;
  color: var(--color-text);
}

/* Caregiver Manager */
.babysitter-manager {
  border-top: 1px solid var(--color-border);
  padding-top: 16px;
}

.babysitter-manager-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.babysitter-manager-header h4 {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
}

.babysitter-btn-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: var(--radius);
  font-size: 18px;
}

.babysitter-btn-icon:hover {
  background: var(--color-bg-secondary);
}

.babysitter-manager-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 12px;
}

.babysitter-manager-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius);
}

.babysitter-manager-item--inactive {
  opacity: 0.5;
}

.babysitter-manager-name {
  font-weight: 500;
  color: var(--color-text);
}

.babysitter-manager-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.babysitter-manager-rate {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.babysitter-manager-edit {
  display: flex;
  align-items: center;
  gap: 6px;
}

.babysitter-manager-input {
  width: 70px;
  padding: 4px 8px;
  font-size: 13px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
}

.babysitter-btn-small {
  padding: 4px 8px;
  font-size: 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
}

.babysitter-btn-small:hover {
  background: var(--color-bg-secondary);
}

.babysitter-btn-small--danger {
  color: var(--color-danger);
  border-color: var(--color-danger);
}

.babysitter-btn-small--danger:hover {
  background: rgba(239, 68, 68, 0.1);
}

.babysitter-manager-add {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.babysitter-manager-add input {
  flex: 1;
  min-width: 100px;
  padding: 8px 12px;
  font-size: 13px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-bg-secondary);
  color: var(--color-text);
}

.babysitter-manager-add input[type="number"] {
  width: 80px;
  flex: none;
}

/* Mobile adjustments */
@media (max-width: 640px) {
  .babysitter-week-grid {
    gap: 2px;
  }

  .babysitter-day {
    padding: 6px 2px;
    min-height: 60px;
  }

  .babysitter-day-name {
    font-size: 10px;
  }

  .babysitter-day-hours {
    font-size: 14px;
  }

  .babysitter-day-caregiver {
    font-size: 9px;
  }

  .babysitter-summary {
    grid-template-columns: 1fr;
  }

  .babysitter-summary-item {
    flex-direction: row;
    justify-content: space-between;
  }

  .babysitter-history-item {
    flex-wrap: wrap;
  }

  .babysitter-history-date {
    min-width: 70px;
  }
}

/* ========== HEALTH WIDGET ========== */
/* TODO: Widget styling needs redesign (noted for future pass) */

.health-widget {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border);
}

.health-widget--loading,
.health-widget--error,
.health-widget--empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px 16px;
  text-align: center;
  gap: 12px;
  min-height: 200px;
}

.health-loading-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--color-border);
  border-top-color: var(--loop-health);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.health-error-icon,
.health-empty-icon {
  font-size: 32px;
}

.health-error-message {
  color: var(--color-text-secondary);
  font-size: 13px;
  margin: 0;
}

.health-hint {
  color: var(--color-text-tertiary);
  font-size: 12px;
  margin: 0;
}

.health-btn {
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-surface);
  color: var(--color-text);
  cursor: pointer;
}

.health-btn:hover {
  background: var(--color-bg-secondary);
}

/* Readiness Score */
.health-readiness {
  display: flex;
  justify-content: center;
}

.health-readiness-score {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100px;
  height: 100px;
  border-radius: 50%;
  background: var(--color-bg-secondary);
  border: 4px solid currentColor;
}

.health-readiness-value {
  font-size: 32px;
  font-weight: 700;
  line-height: 1;
}

.health-readiness-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--color-text-secondary);
  margin-top: 4px;
}

/* Status Colors */
.health-status--green {
  color: var(--looops-sage);
}

.health-status--yellow {
  color: var(--looops-amber);
}

.health-status--red {
  color: var(--looops-coral);
}

.health-status--gray {
  color: var(--color-text-tertiary);
}

/* Metrics Grid */
.health-metrics {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.health-metric {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius);
  border-left: 3px solid currentColor;
}

.health-metric-icon {
  font-size: 20px;
}

.health-metric-content {
  display: flex;
  flex-direction: column;
}

.health-metric-value {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.health-metric-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--color-text-secondary);
}

.health-metric-subtext {
  font-size: 11px;
  color: var(--color-text-tertiary);
  margin-top: 2px;
}

/* Additional Stats */
.health-stats {
  display: flex;
  justify-content: center;
  gap: 20px;
  padding: 12px 0;
  border-top: 1px solid var(--color-border);
}

.health-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.health-stat-icon {
  font-size: 16px;
}

.health-stat-value {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.health-stat-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
}

/* Footer */
.health-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 8px;
  border-top: 1px solid var(--color-border);
}

.health-synced {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.health-sync-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--color-text-secondary);
  cursor: pointer;
  border-radius: var(--radius);
  font-size: 16px;
}

.health-sync-btn:hover {
  background: var(--color-bg-secondary);
}

.health-sync-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Mobile adjustments */
@media (max-width: 640px) {
  .health-metrics {
    grid-template-columns: 1fr;
  }

  .health-readiness-score {
    width: 80px;
    height: 80px;
  }

  .health-readiness-value {
    font-size: 24px;
  }

  .health-stats {
    flex-wrap: wrap;
    gap: 16px;
  }
}

/* ========== MOBILE TASKS SCREEN FIX - MUST BE LAST ========== */
@media (max-width: 768px) {
  /* Override app-main padding when tasks screen is shown */
  .app-main:has(.tasks-screen) {
    padding: 0 !important;
    margin: 0 !important;
    overflow: hidden !important;
  }

  /* Full-screen takeover: position from viewport top, add padding for header */
  .tasks-screen {
    position: fixed !important;
    top: 56px !important; /* Start below mobile header */
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    margin: 0 !important;
    padding: 0 !important;
    width: 100vw !important;
    height: auto !important;
    background: var(--color-bg) !important;
    z-index: 999 !important; /* Just below mobile header (z-index 1000) */
    overflow: hidden !important;
    box-sizing: border-box !important;
  }

  .tasks-screen > * {
    margin-top: 0 !important;
  }

  .tasks-main {
    flex: 1 1 auto !important;
    display: flex !important;
    flex-direction: column !important;
    padding: 0 !important;
    margin: 0 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    min-height: 0 !important;
    -webkit-overflow-scrolling: touch !important;
  }

  .tasks-main > * {
    margin-top: 0 !important;
  }

  .tasks-header {
    padding: 12px !important;
    margin: 0 !important;
    background: var(--color-surface) !important;
    border-bottom: 1px solid var(--color-border) !important;
    flex: 0 0 auto !important;
  }

  .task-list-container {
    padding: 0 !important;
    margin: 0 !important;
  }

  .task-list-input {
    padding: 12px !important;
    margin: 0 !important;
  }

  /* Task list should fill remaining space */
  .task-list {
    flex: 1 1 auto !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    min-height: 0 !important;
    padding: 0 12px 80px 12px !important; /* Space for FAB */
    margin: 0 !important;
    -webkit-overflow-scrolling: touch !important;
  }

  /* Loops screen - allow scrolling on mobile */
  .loops-screen {
    height: auto !important;
    min-height: 100% !important;
    overflow: visible !important;
    overflow-y: auto !important;
    padding-bottom: 24px !important;
    -webkit-overflow-scrolling: touch !important;
  }

  /* Loops kanban - vertical stack on mobile */
  .loops-kanban {
    flex-direction: column !important;
    overflow-x: visible !important;
    overflow-y: auto !important;
    padding: 16px !important;
    gap: 16px !important;
    -webkit-overflow-scrolling: touch !important;
  }

  .loops-kanban .loop-card {
    min-width: 100% !important;
    max-width: 100% !important;
    width: 100% !important;
  }

  .loops-kanban .loop-card__tasks {
    max-height: none !important;
    overflow-y: visible !important;
  }

  /* Make task items in kanban clickable with visual feedback */
  .loop-task-row {
    cursor: pointer !important;
    padding: 12px !important;
    margin-bottom: 8px !important;
    background: var(--color-surface) !important;
    border-radius: 8px !important;
    transition: background 0.2s ease !important;
  }

  .loop-task-row:active {
    background: var(--color-gray-200) !important;
  }

  /* Tasks widget in loop dashboard */
  .tasks-widget-item {
    cursor: pointer !important;
    padding: 12px !important;
    border-radius: 8px !important;
    transition: background 0.2s ease !important;
  }

  .tasks-widget-item:active {
    background: var(--color-gray-200) !important;
  }

}

/* =============================================================================
   GOOGLE CALENDAR WIDGET
   TODO: Widget styles need redesign
   ============================================================================= */

.calendar-widget--disconnected,
.calendar-widget--loading,
.calendar-widget--error {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

.calendar-widget-empty {
  text-align: center;
  padding: 24px;
}

.calendar-widget-empty-icon {
  font-size: 48px;
  margin-bottom: 12px;
  display: block;
}

.calendar-widget-empty p {
  color: var(--color-text-secondary);
  margin: 0 0 16px 0;
}

.calendar-widget-connect-btn {
  background: var(--color-primary);
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.calendar-widget-connect-btn:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

.calendar-widget-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  color: var(--color-text-secondary);
}

.calendar-widget-spinner {
  width: 24px;
  height: 24px;
  border: 3px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.calendar-widget-error {
  text-align: center;
  padding: 24px;
}

.calendar-widget-error-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: var(--color-danger);
  color: white;
  border-radius: 50%;
  font-weight: bold;
  margin-bottom: 12px;
}

.calendar-widget-error p {
  color: var(--color-text-secondary);
  margin: 0 0 16px 0;
}

.calendar-widget-retry-btn {
  background: var(--color-surface-elevated);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.calendar-widget-retry-btn:hover {
  background: var(--color-surface-hover);
}

.calendar-widget-tabs {
  display: flex;
  gap: 4px;
  padding: 4px;
  background: var(--color-surface);
  border-radius: 8px;
  margin-bottom: 12px;
}

.calendar-widget-tab {
  flex: 1;
  padding: 8px 12px;
  background: transparent;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.calendar-widget-tab:hover {
  background: var(--color-surface-hover);
}

.calendar-widget-tab.active {
  background: var(--color-surface-elevated);
  color: var(--color-text);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.calendar-widget-events {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 300px;
  overflow-y: auto;
}

.calendar-widget-no-events {
  text-align: center;
  padding: 32px 16px;
  color: var(--color-text-tertiary);
  font-size: 13px;
}

.calendar-event-card {
  display: flex;
  gap: 12px;
  padding: 12px;
  background: var(--color-surface);
  border-radius: 8px;
  border: 1px solid var(--color-border);
  position: relative;
  overflow: hidden;
}

.calendar-event-card:hover {
  background: var(--color-surface-hover);
}

.calendar-event-time {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  min-width: 60px;
  font-size: 12px;
}

.calendar-event-date {
  color: var(--color-text-tertiary);
  font-size: 10px;
  margin-bottom: 2px;
}

.calendar-event-hour {
  font-weight: 600;
  color: var(--color-text);
}

.calendar-event-duration {
  color: var(--color-text-tertiary);
  font-size: 11px;
}

.calendar-event-details {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.calendar-event-title {
  font-weight: 500;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.calendar-event-location {
  font-size: 12px;
  color: var(--color-text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.calendar-event-calendar {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.calendar-event-color {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
}

.calendar-widget-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: 12px;
  margin-top: 12px;
  border-top: 1px solid var(--color-border);
}

.calendar-widget-synced {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.calendar-widget-refresh {
  background: none;
  border: none;
  font-size: 16px;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.calendar-widget-refresh:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

/* =============================================================================
   SPOTIFY WIDGET
   TODO: Widget styles need redesign
   ============================================================================= */

.spotify-widget--disconnected,
.spotify-widget--loading,
.spotify-widget--error {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

.spotify-widget-empty {
  text-align: center;
  padding: 24px;
}

.spotify-widget-logo {
  font-size: 48px;
  margin-bottom: 12px;
  display: block;
}

.spotify-widget-empty p {
  color: var(--color-text-secondary);
  margin: 0 0 16px 0;
}

.spotify-widget-connect-btn {
  background: #1DB954;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 20px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.spotify-widget-connect-btn:hover {
  background: #1ed760;
  transform: translateY(-1px);
}

.spotify-widget-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  color: var(--color-text-secondary);
}

.spotify-widget-spinner {
  width: 24px;
  height: 24px;
  border: 3px solid var(--color-border);
  border-top-color: #1DB954;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.spotify-widget-error {
  text-align: center;
  padding: 24px;
}

.spotify-widget-error-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: var(--color-danger);
  color: white;
  border-radius: 50%;
  font-weight: bold;
  margin-bottom: 12px;
}

.spotify-widget-error p {
  color: var(--color-text-secondary);
  margin: 0 0 16px 0;
}

.spotify-widget-retry-btn {
  background: var(--color-surface-elevated);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
}

.spotify-now-playing {
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--color-border);
}

.spotify-now-playing-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #1DB954;
  margin-bottom: 12px;
}

.spotify-equalizer {
  display: flex;
  align-items: flex-end;
  gap: 2px;
  height: 12px;
}

.spotify-equalizer span {
  width: 3px;
  background: #1DB954;
  animation: equalizer 0.5s ease-in-out infinite alternate;
}

.spotify-equalizer span:nth-child(1) { animation-delay: 0s; height: 4px; }
.spotify-equalizer span:nth-child(2) { animation-delay: 0.15s; height: 8px; }
.spotify-equalizer span:nth-child(3) { animation-delay: 0.3s; height: 6px; }

@keyframes equalizer {
  from { height: 4px; }
  to { height: 12px; }
}

.spotify-track-card--large {
  display: flex;
  gap: 12px;
  align-items: center;
}

.spotify-album-art {
  width: 56px;
  height: 56px;
  border-radius: 6px;
  object-fit: cover;
}

.spotify-track-info {
  flex: 1;
  min-width: 0;
}

.spotify-track-name {
  display: block;
  font-weight: 600;
  color: var(--color-text);
  text-decoration: none;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.spotify-track-name:hover {
  text-decoration: underline;
}

.spotify-track-artist {
  display: block;
  font-size: 13px;
  color: var(--color-text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.spotify-widget-tabs {
  display: flex;
  gap: 4px;
  padding: 4px;
  background: var(--color-surface);
  border-radius: 8px;
  margin-bottom: 12px;
}

.spotify-widget-tab {
  flex: 1;
  padding: 8px 12px;
  background: transparent;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s ease;
}

.spotify-widget-tab:hover {
  background: var(--color-surface-hover);
}

.spotify-widget-tab.active {
  background: var(--color-surface-elevated);
  color: var(--color-text);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.spotify-track-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 250px;
  overflow-y: auto;
}

.spotify-track-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px;
  background: var(--color-surface);
  border-radius: 6px;
  transition: background 0.2s ease;
}

.spotify-track-item:hover {
  background: var(--color-surface-hover);
}

.spotify-track-rank {
  width: 20px;
  text-align: center;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-tertiary);
}

.spotify-track-thumb {
  width: 40px;
  height: 40px;
  border-radius: 4px;
  object-fit: cover;
}

.spotify-track-details {
  flex: 1;
  min-width: 0;
}

.spotify-track-details .spotify-track-name {
  font-size: 13px;
}

.spotify-track-details .spotify-track-artist {
  font-size: 11px;
}

.spotify-track-time {
  font-size: 11px;
  color: var(--color-text-tertiary);
  white-space: nowrap;
}

.spotify-stats {
  display: flex;
  justify-content: space-around;
  padding-top: 12px;
  margin-top: 12px;
  border-top: 1px solid var(--color-border);
}

.spotify-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.spotify-stat-value {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-text);
}

.spotify-stat-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

/* =============================================================================
   WEALTH WIDGET - Tiller Money Financial Data
   ============================================================================= */

.wealth-widget {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  height: 100%;
}

.wealth-widget--loading,
.wealth-widget--error,
.wealth-widget--disconnected {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

.wealth-widget-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  color: var(--color-text-secondary);
}

.wealth-widget-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.wealth-widget-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  text-align: center;
  color: var(--color-text-secondary);
}

.wealth-widget-icon {
  font-size: 32px;
}

.wealth-widget-empty p {
  margin: 0;
  font-size: 14px;
}

.wealth-widget-empty small {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.wealth-widget-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  text-align: center;
}

.wealth-widget-error-icon {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-danger);
  color: white;
  border-radius: 50%;
  font-weight: 700;
  font-size: 20px;
}

.wealth-widget-error p {
  margin: 0;
  color: var(--color-text-secondary);
  font-size: 14px;
}

.wealth-widget-retry-btn {
  padding: 8px 16px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  cursor: pointer;
  transition: background 0.2s;
}

.wealth-widget-retry-btn:hover {
  background: var(--color-primary-hover);
}

/* Net Worth Header */
.wealth-net-worth {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--color-border);
}

.wealth-net-worth-label {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.wealth-net-worth-value {
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
}

.wealth-net-worth-value.positive {
  color: var(--color-success);
}

.wealth-net-worth-value.negative {
  color: var(--color-danger);
}

/* View Toggle Tabs */
.wealth-widget-tabs {
  display: flex;
  gap: 4px;
  background: var(--color-bg-tertiary);
  padding: 4px;
  border-radius: var(--radius-md);
}

.wealth-widget-tab {
  flex: 1;
  padding: 8px 12px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.wealth-widget-tab:hover {
  color: var(--color-text);
  background: var(--color-bg-secondary);
}

.wealth-widget-tab.active {
  background: var(--color-bg);
  color: var(--color-text);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Overview View */
.wealth-overview {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.wealth-stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.wealth-stat {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.wealth-stat-label {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.wealth-stat-value {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
}

.wealth-stat-value.positive {
  color: var(--color-success);
}

.wealth-stat-value.negative {
  color: var(--color-danger);
}

.wealth-stat--income .wealth-stat-value {
  color: var(--color-success);
}

.wealth-stat--expenses .wealth-stat-value {
  color: var(--color-danger);
}

/* Recent Transactions */
.wealth-recent {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.wealth-recent h4 {
  margin: 0;
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.wealth-transactions-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.wealth-transaction {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.wealth-transaction-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
  flex: 1;
}

.wealth-transaction-desc {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.wealth-transaction-category {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.wealth-transaction-amount {
  font-size: 13px;
  font-weight: 600;
  white-space: nowrap;
  margin-left: 12px;
}

.wealth-transaction-amount.positive {
  color: var(--color-success);
}

.wealth-transaction-amount.negative {
  color: var(--color-danger);
}

/* Spending View */
.wealth-spending {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.wealth-no-data {
  text-align: center;
  color: var(--color-text-tertiary);
  font-size: 14px;
  padding: 24px;
}

.wealth-categories-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.wealth-category {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.wealth-category-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.wealth-category-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.wealth-category-amount {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-danger);
}

.wealth-category-bar {
  height: 8px;
  background: var(--color-bg-tertiary);
  border-radius: 4px;
  overflow: hidden;
}

.wealth-category-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-primary), var(--color-primary-hover));
  border-radius: 4px;
  transition: width 0.3s ease;
}

/* Accounts View */
.wealth-accounts {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.wealth-accounts-summary {
  display: flex;
  gap: 12px;
}

.wealth-accounts-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.wealth-accounts-label {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.wealth-accounts-value {
  font-size: 18px;
  font-weight: 600;
}

.wealth-accounts-value.positive {
  color: var(--color-success);
}

.wealth-accounts-value.negative {
  color: var(--color-danger);
}

.wealth-accounts-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.wealth-account {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.wealth-account-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.wealth-account-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.wealth-account-type {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.wealth-account-balance {
  font-size: 14px;
  font-weight: 600;
}

.wealth-account-balance.positive {
  color: var(--color-success);
}

.wealth-account-balance.negative {
  color: var(--color-danger);
}

/* Footer */
.wealth-widget-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 12px;
  margin-top: auto;
  border-top: 1px solid var(--color-border);
}

.wealth-widget-updated {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.wealth-widget-refresh {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  color: var(--color-text-secondary);
  font-size: 16px;
  cursor: pointer;
  transition: all 0.2s;
}

.wealth-widget-refresh:hover {
  background: var(--color-bg-tertiary);
  color: var(--color-text);
}

/* =============================================================================
   BUDGET WIDGET - Financial Overview
   ============================================================================= */

.budget-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  height: 100%;
}

.budget-widget--loading,
.budget-widget--error,
.budget-widget--disconnected,
.budget-widget--empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 200px;
  gap: 12px;
  text-align: center;
}

.budget-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  color: var(--color-text-secondary);
}

.budget-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--color-border);
  border-top-color: var(--loop-wealth);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.budget-empty {
  color: var(--color-text-secondary);
}

.budget-empty-icon,
.budget-error-icon {
  font-size: 32px;
}

.budget-empty p,
.budget-widget--error p {
  margin: 0;
  font-size: 14px;
  color: var(--color-text-secondary);
}

.budget-empty small {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.budget-retry-btn {
  padding: 8px 16px;
  background: var(--loop-wealth);
  color: var(--color-black);
  border: none;
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.budget-retry-btn:hover {
  filter: brightness(1.1);
}

/* Header */
.budget-header {
  padding-bottom: 12px;
  border-bottom: 1px solid var(--color-border);
}

.budget-summary {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.budget-month-net {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.budget-net-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
}

.budget-net-value.positive {
  color: var(--color-success);
}

.budget-net-value.negative {
  color: var(--color-error);
}

.budget-net-label {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.budget-savings-rate {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
}

.budget-rate-value {
  font-size: 20px;
  font-weight: 700;
  color: var(--color-text-secondary);
}

.budget-rate-value.good {
  color: var(--color-success);
}

.budget-rate-value.ok {
  color: var(--color-warning);
}

.budget-rate-value.bad {
  color: var(--color-error);
}

.budget-rate-label {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

/* Tabs */
.budget-tabs {
  display: flex;
  gap: 4px;
  background: var(--color-surface);
  padding: 4px;
  border-radius: var(--radius);
}

.budget-tab {
  flex: 1;
  padding: 8px 8px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 11px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.budget-tab:hover {
  color: var(--color-text);
  background: var(--color-bg-secondary);
}

.budget-tab.active {
  background: var(--color-bg);
  color: var(--loop-wealth);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

/* Content area */
.budget-content {
  flex: 1;
  overflow-y: auto;
}

.budget-empty-view {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100px;
  color: var(--color-text-tertiary);
  font-size: 14px;
  text-align: center;
  gap: 4px;
}

.budget-empty-view p {
  margin: 0;
}

.budget-empty-view small {
  font-size: 12px;
  opacity: 0.8;
}

/* Toast notifications */
.budget-toast {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  border-radius: var(--radius);
  font-size: 13px;
  margin-bottom: 12px;
  animation: slideIn 0.2s ease;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.budget-toast--success {
  background: rgba(115, 165, 140, 0.15);
  color: var(--color-success);
  border: 1px solid var(--color-success);
}

.budget-toast--error {
  background: rgba(242, 112, 89, 0.1);
  color: var(--color-error);
  border: 1px solid var(--color-error);
}

.budget-toast button {
  margin-left: auto;
  background: transparent;
  border: none;
  color: inherit;
  font-size: 16px;
  cursor: pointer;
  padding: 0 4px;
  opacity: 0.7;
}

.budget-toast button:hover {
  opacity: 1;
}

/* Overview View */
.budget-overview {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.budget-bar-group {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.budget-bar-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.budget-bar-label {
  width: 50px;
  font-size: 12px;
  color: var(--color-text-secondary);
}

.budget-bar {
  flex: 1;
  height: 12px;
  background: var(--color-surface);
  border-radius: 6px;
  overflow: hidden;
}

.budget-bar-fill {
  height: 100%;
  border-radius: 6px;
  transition: width 0.3s ease;
}

.budget-bar--income {
  background: var(--color-success);
}

.budget-bar--expense {
  background: var(--color-error);
}

.budget-bar-value {
  width: 70px;
  text-align: right;
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.budget-quick-stats {
  display: flex;
  gap: 12px;
}

.budget-stat {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
}

.budget-stat-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.budget-stat-value {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

/* Categories View */
.budget-categories {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.budget-category {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.budget-category-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.budget-category-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.budget-category-amount {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text-secondary);
}

.budget-category-bar {
  height: 6px;
  background: var(--color-surface);
  border-radius: 3px;
  overflow: hidden;
}

.budget-category-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--loop-wealth), var(--looops-amber-subtle));
  border-radius: 3px;
  transition: width 0.3s ease;
}

/* Accounts View */
.budget-accounts {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.budget-accounts-summary {
  display: flex;
  gap: 12px;
}

.budget-account-total {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
}

.budget-total-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.budget-total-value {
  font-size: 16px;
  font-weight: 700;
}

.budget-total-value.positive {
  color: var(--color-success);
}

.budget-total-value.negative {
  color: var(--color-error);
}

.budget-accounts-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.budget-account {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
}

.budget-account-info {
  display: flex;
  align-items: center;
  gap: 10px;
}

.budget-account-icon {
  font-size: 18px;
}

.budget-account-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.budget-account-balance {
  font-size: 14px;
  font-weight: 600;
}

.budget-account-balance.positive {
  color: var(--color-success);
}

.budget-account-balance.negative {
  color: var(--color-error);
}

/* Transactions View */
.budget-transactions {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.budget-transaction {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
}

.budget-txn-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
  flex: 1;
}

.budget-txn-desc {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.budget-txn-meta {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.budget-txn-amount {
  font-size: 13px;
  font-weight: 600;
  white-space: nowrap;
  margin-left: 12px;
}

.budget-txn-amount.positive {
  color: var(--color-success);
}

.budget-txn-amount.negative {
  color: var(--color-error);
}

.budget-txn-account {
  color: var(--color-text-tertiary);
}

/* Transactions Summary */
.budget-transactions-summary {
  display: flex;
  gap: 12px;
  margin-bottom: 8px;
}

.budget-txn-stat {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
}

.budget-txn-stat-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.budget-txn-stat-value {
  font-size: 14px;
  font-weight: 700;
}

.budget-txn-stat-value.positive {
  color: var(--color-success);
}

.budget-txn-stat-value.negative {
  color: var(--color-error);
}

.budget-transactions-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 400px;
  overflow-y: auto;
}

/* Account type badge */
.budget-account-type {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
  background: var(--color-bg);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
}

/* Net worth highlight */
.budget-net-worth {
  background: var(--color-bg);
  border: 1px solid var(--color-border);
}

/* Import actions */
.budget-import-actions {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--color-border);
}

/* Footer */
.budget-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 12px;
  margin-top: auto;
  border-top: 1px solid var(--color-border);
}

.budget-updated {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.budget-refresh {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  color: var(--color-text-secondary);
  font-size: 16px;
  cursor: pointer;
  transition: all 0.2s;
}

.budget-refresh:hover {
  background: var(--color-surface);
  color: var(--loop-wealth);
  border-color: var(--loop-wealth);
}

/* Expenses View */
.budget-expenses {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.budget-expenses-total {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
  font-size: 14px;
  color: var(--color-text-secondary);
}

.budget-expenses-total strong {
  color: var(--color-text);
  font-size: 16px;
}

.budget-expenses-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px 16px;
  text-align: center;
  color: var(--color-text-tertiary);
}

.budget-expenses-empty p {
  margin: 0;
  font-size: 14px;
}

.budget-expenses-empty small {
  font-size: 12px;
  margin-top: 4px;
}

.budget-expense-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.budget-expense-group-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
  border-left: 3px solid var(--loop-wealth);
}

.budget-expense-group-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.budget-expense-group-total {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text-secondary);
}

.budget-expense-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding-left: 8px;
}

.budget-expense-row {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: var(--color-bg);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 0.2s;
}

.budget-expense-row:hover {
  background: var(--color-surface);
}

.budget-expense-row--editing {
  flex-wrap: wrap;
  gap: 8px;
  background: var(--color-surface);
  cursor: default;
}

.budget-expense-name {
  flex: 1;
  font-size: 13px;
  color: var(--color-text);
}

.budget-expense-frequency {
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-transform: capitalize;
}

.budget-expense-amount {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.budget-expense-input {
  flex: 1;
  min-width: 0;
  padding: 8px 10px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  font-size: 13px;
  color: var(--color-text);
}

.budget-expense-input:focus {
  outline: none;
  border-color: var(--loop-wealth);
}

.budget-expense-input--amount {
  width: 80px;
  flex: 0 0 80px;
  text-align: right;
}

.budget-expense-select {
  padding: 8px 10px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  font-size: 13px;
  color: var(--color-text);
  cursor: pointer;
}

.budget-expense-select:focus {
  outline: none;
  border-color: var(--loop-wealth);
}

.budget-expense-row-actions {
  display: flex;
  gap: 4px;
}

.budget-expense-action-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
}

.budget-expense-action-btn.save {
  color: var(--color-success);
}

.budget-expense-action-btn.save:hover {
  background: var(--color-success);
  color: white;
  border-color: var(--color-success);
}

.budget-expense-action-btn.cancel {
  color: var(--color-text-tertiary);
}

.budget-expense-action-btn.cancel:hover {
  background: var(--color-border);
  color: var(--color-text);
}

.budget-expense-action-btn.delete {
  color: var(--color-error);
}

.budget-expense-action-btn.delete:hover {
  background: var(--color-error);
  color: white;
  border-color: var(--color-error);
}

.budget-expense-form {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
  border: 1px dashed var(--color-border);
}

.budget-expense-form-actions {
  display: flex;
  gap: 8px;
  width: 100%;
}

.budget-expense-btn {
  padding: 8px 16px;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.budget-expense-btn--save {
  background: var(--loop-wealth);
  color: var(--color-black);
}

.budget-expense-btn--save:hover {
  filter: brightness(1.1);
}

.budget-expense-btn--cancel {
  background: var(--color-bg);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
}

.budget-expense-btn--cancel:hover {
  background: var(--color-surface);
  color: var(--color-text);
}

.budget-add-expense-btn {
  width: 100%;
  padding: 12px;
  background: transparent;
  border: 1px dashed var(--color-border);
  border-radius: var(--radius);
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.budget-add-expense-btn:hover {
  background: var(--color-surface);
  border-color: var(--loop-wealth);
  color: var(--loop-wealth);
}

.budget-expense-actions {
  display: flex;
  gap: 8px;
  margin-top: 16px;
}

.budget-expense-actions .budget-add-expense-btn {
  flex: 1;
}

.budget-import-btn {
  flex: 1;
  padding: 12px;
  background: transparent;
  border: 1px dashed var(--color-border);
  border-radius: var(--radius);
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.budget-import-btn:hover {
  background: var(--color-surface);
  border-color: #4285f4;
  color: #4285f4;
}

/* Expandable Expense Item */
.budget-expense-item {
  display: flex;
  flex-direction: column;
  background: var(--color-bg);
  border-radius: var(--radius);
  overflow: hidden;
  transition: all 0.2s;
}

.budget-expense-item.expanded {
  background: var(--color-surface);
  box-shadow: var(--shadow-sm);
}

.budget-expense-item.editing {
  border: 1px solid var(--loop-wealth);
}

.budget-expense-item .budget-expense-row {
  border-radius: 0;
}

.budget-expense-chevron {
  font-size: 10px;
  color: var(--color-text-tertiary);
  transition: transform 0.2s;
  flex-shrink: 0;
}

.budget-expense-edit-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: var(--color-text-tertiary);
  cursor: pointer;
  opacity: 0;
  transition: all 0.2s;
  flex-shrink: 0;
}

.budget-expense-row:hover .budget-expense-edit-btn {
  opacity: 1;
}

.budget-expense-edit-btn:hover {
  color: var(--loop-wealth);
}

/* Expanded details panel */
.budget-expense-details {
  padding: 12px 16px;
  border-top: 1px solid var(--color-border);
  background: var(--color-surface);
}

/* View mode detail grid */
.budget-expense-detail-view {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.budget-expense-detail-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.budget-expense-detail-item {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.budget-expense-detail-item .detail-label {
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.budget-expense-detail-item .detail-value {
  font-size: 14px;
  color: var(--color-text);
  font-weight: 500;
}

.budget-expense-notes {
  padding: 10px;
  background: var(--color-bg);
  border-radius: var(--radius-sm);
}

.budget-expense-notes .detail-label {
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  display: block;
  margin-bottom: 4px;
}

.budget-expense-notes p {
  margin: 0;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.budget-expense-link {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 8px 12px;
  background: var(--color-bg);
  border-radius: var(--radius-sm);
  font-size: 13px;
  color: var(--loop-wealth);
  text-decoration: none;
  transition: all 0.2s;
  align-self: flex-start;
}

.budget-expense-link:hover {
  background: var(--color-surface-hover);
}

.budget-expense-edit-btn-large {
  padding: 10px 16px;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s;
  align-self: flex-start;
}

.budget-expense-edit-btn-large:hover {
  background: var(--color-bg);
  border-color: var(--loop-wealth);
  color: var(--loop-wealth);
}

/* Edit mode form */
.budget-expense-edit-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.budget-expense-field {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.budget-expense-field label {
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.budget-expense-field input,
.budget-expense-field select,
.budget-expense-field textarea {
  padding: 10px 12px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  font-size: 13px;
  color: var(--color-text);
  font-family: inherit;
}

.budget-expense-field input:focus,
.budget-expense-field select:focus,
.budget-expense-field textarea:focus {
  outline: none;
  border-color: var(--loop-wealth);
}

.budget-expense-field textarea {
  resize: vertical;
  min-height: 60px;
}

.budget-expense-field.checkbox {
  flex-direction: row;
  align-items: center;
}

.budget-expense-field.checkbox label {
  display: flex;
  align-items: center;
  gap: 8px;
  text-transform: none;
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.budget-expense-field.checkbox input[type="checkbox"] {
  width: 16px;
  height: 16px;
  padding: 0;
  accent-color: var(--loop-wealth);
}

.budget-expense-field-row {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

/* Edit actions */
.budget-expense-edit-actions {
  display: flex;
  gap: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--color-border);
}

.budget-expense-btn {
  padding: 10px 16px;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.budget-expense-btn.save {
  background: var(--loop-wealth);
  color: var(--color-black);
}

.budget-expense-btn.save:hover {
  filter: brightness(1.1);
}

.budget-expense-btn.cancel {
  background: var(--color-bg);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
}

.budget-expense-btn.cancel:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
}

.budget-expense-btn.delete {
  background: transparent;
  color: var(--color-error);
  border: 1px solid var(--color-error);
  margin-left: auto;
}

.budget-expense-btn.delete:hover {
  background: var(--color-error);
  color: white;
}

/* Loop Categories View */
.budget-loop-categories {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.budget-loop-category {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.budget-loop-category-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.budget-loop-category-name {
  font-size: 14px;
  font-weight: 600;
}

.budget-loop-category-amount {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.budget-loop-category-bar {
  height: 8px;
  background: var(--color-surface);
  border-radius: 4px;
  overflow: hidden;
}

.budget-loop-category-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.3s ease;
}

.budget-loop-category-items {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* Loop breakdown in Overview */
.budget-loop-breakdown {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.budget-loop-breakdown h4 {
  margin: 0;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.budget-loop-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.budget-loop-chip {
  display: flex;
  flex-direction: column;
  padding: 8px 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
  border-left: 3px solid;
}

.budget-loop-chip-name {
  font-size: 11px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.budget-loop-chip-amount {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

/* Transaction with loop color */
.budget-transaction {
  border-left: 3px solid transparent;
}

.budget-txn-loop {
  font-weight: 500;
}

/* Budget Allocation View */
.budget-allocation {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.budget-income-section {
  padding: 16px;
  background: var(--color-surface);
  border-radius: var(--radius);
}

.budget-income-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.budget-income-label {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.budget-income-display {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.budget-income-value {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-success);
}

.budget-income-edit-hint {
  font-size: 11px;
  color: var(--color-text-tertiary);
  opacity: 0;
  transition: opacity 0.2s;
}

.budget-income-display:hover .budget-income-edit-hint {
  opacity: 1;
}

.budget-income-edit {
  display: flex;
  align-items: center;
  gap: 8px;
}

.budget-income-edit input {
  width: 100px;
  padding: 6px 10px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  background: var(--color-bg);
  color: var(--color-text);
  font-size: 14px;
  font-weight: 600;
}

.budget-income-edit button {
  padding: 6px 12px;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
}

.budget-income-edit button:first-of-type {
  background: var(--color-accent);
  color: white;
}

.budget-income-edit button:last-of-type {
  background: var(--color-surface);
  color: var(--color-text-secondary);
}

.budget-summary-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

.budget-summary-item {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
  text-align: center;
}

.budget-summary-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.budget-summary-value {
  font-size: 16px;
  font-weight: 700;
  color: var(--color-text);
}

.budget-summary-value.over {
  color: var(--color-error);
}

.budget-summary-value.remaining {
  color: var(--color-success);
}

.budget-loop-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.budget-loop-list h4 {
  margin: 0;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.budget-loop-row {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
}

.budget-loop-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.budget-loop-name {
  font-size: 14px;
  font-weight: 600;
}

.budget-loop-amounts {
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
}

.budget-loop-amounts:hover {
  opacity: 0.8;
}

.budget-loop-budgeted {
  font-size: 14px;
  font-weight: 700;
  color: var(--color-text);
}

.budget-loop-separator {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.budget-loop-actual {
  font-size: 12px;
  color: var(--color-text-secondary);
}

.budget-loop-actual.over {
  color: var(--color-error);
  font-weight: 600;
}

.budget-loop-edit {
  display: flex;
  align-items: center;
  gap: 6px;
}

.budget-loop-edit-prefix {
  font-size: 14px;
  color: var(--color-text-secondary);
}

.budget-loop-edit input {
  width: 80px;
  padding: 4px 8px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  background: var(--color-bg);
  color: var(--color-text);
  font-size: 14px;
}

.budget-loop-edit-save {
  padding: 4px 10px;
  background: var(--color-accent);
  color: white;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
}

.budget-loop-progress {
  height: 6px;
  background: var(--color-bg-tertiary);
  border-radius: 3px;
  overflow: hidden;
}

.budget-loop-progress-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.3s ease;
}

.budget-loop-progress-fill.over {
  background: var(--color-error) !important;
}

.budget-loop-diff {
  font-size: 11px;
  text-align: right;
}

.budget-loop-diff.under {
  color: var(--color-success);
}

.budget-loop-diff.over {
  color: var(--color-error);
}

.budget-tip {
  padding: 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
  text-align: center;
}

.budget-tip p {
  margin: 0;
  font-size: 13px;
  color: var(--color-text-secondary);
}

/* Light mode overrides for budget allocation */
[data-theme="light"] .budget-income-edit input,
[data-theme="light"] .budget-loop-edit input {
  background: white;
  border-color: #d4d7dc;
}

/* =============================================================================
   WASTED MONEY WIDGET - Track discretionary spending
   ============================================================================= */

.wasted-money-widget {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  height: 100%;
}

.wasted-money-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.wasted-money-title-section h2 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
}

.wasted-money-subtitle {
  margin: 2px 0 0;
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.wasted-money-add-btn {
  padding: 8px 16px;
  background: var(--color-accent);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}

.wasted-money-add-btn:hover {
  background: var(--color-accent-light);
}

.wasted-money-back {
  padding: 6px 12px;
  background: transparent;
  color: var(--color-text-secondary);
  border: none;
  font-size: 14px;
  cursor: pointer;
}

.wasted-money-back:hover {
  color: var(--color-text);
}

/* Stats */
.wasted-money-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

.wasted-money-stat {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
  text-align: center;
}

.wasted-money-stat--main {
  grid-column: 1;
}

.wasted-money-stat__value {
  font-size: 18px;
  font-weight: 700;
  color: var(--color-error);
}

.wasted-money-stat__value.up {
  color: var(--color-error);
}

.wasted-money-stat__value.down {
  color: var(--color-success);
}

.wasted-money-stat__label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

/* Category Breakdown */
.wasted-money-breakdown {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.wasted-money-breakdown h4 {
  margin: 0;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.wasted-money-categories {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.wasted-money-category {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
}

.wasted-money-category__icon {
  font-size: 16px;
}

.wasted-money-category__name {
  flex: 1;
  font-size: 13px;
  color: var(--color-text);
}

.wasted-money-category__amount {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-error);
}

/* Recent Entries */
.wasted-money-recent {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.wasted-money-recent__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.wasted-money-recent__header h4 {
  margin: 0;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.wasted-money-view-all {
  padding: 4px 8px;
  background: transparent;
  color: var(--color-accent);
  border: none;
  font-size: 12px;
  cursor: pointer;
}

.wasted-money-empty {
  padding: 24px;
  text-align: center;
}

.wasted-money-empty p {
  margin: 0;
  font-size: 14px;
  color: var(--color-text-secondary);
}

.wasted-money-empty__hint {
  margin-top: 4px !important;
  font-size: 12px !important;
  color: var(--color-text-tertiary) !important;
}

.wasted-money-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.wasted-money-list--full {
  max-height: 400px;
  overflow-y: auto;
}

.wasted-money-entry {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--color-surface);
  border-radius: var(--radius);
}

.wasted-money-entry__icon {
  font-size: 16px;
  flex-shrink: 0;
}

.wasted-money-entry__info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.wasted-money-entry__desc {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.wasted-money-entry__date,
.wasted-money-entry__meta {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.wasted-money-entry__amount {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-error);
  white-space: nowrap;
}

.wasted-money-entry__actions {
  display: flex;
  gap: 4px;
}

.wasted-money-entry__actions button {
  padding: 4px 8px;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  font-size: 11px;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.wasted-money-entry__actions button:hover {
  background: var(--color-bg-tertiary);
}

.wasted-money-entry__actions button.delete {
  color: var(--color-error);
  border-color: var(--color-error);
}

/* Form */
.wasted-money-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.wasted-money-form__field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.wasted-money-form__field label {
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.wasted-money-form__field input,
.wasted-money-form__field textarea {
  padding: 10px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-bg);
  color: var(--color-text);
  font-size: 14px;
}

.wasted-money-form__field input:focus,
.wasted-money-form__field textarea:focus {
  outline: none;
  border-color: var(--color-accent);
}

.wasted-money-form__row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.wasted-money-form__amount-input {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 0 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  background: var(--color-bg);
}

.wasted-money-form__amount-input span {
  color: var(--color-text-secondary);
}

.wasted-money-form__amount-input input {
  flex: 1;
  padding: 10px 0;
  border: none;
  background: transparent;
}

.wasted-money-form__categories {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

.wasted-money-form__category {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 10px 8px;
  background: var(--color-surface);
  border: 2px solid transparent;
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.2s;
}

.wasted-money-form__category:hover {
  background: var(--color-bg-tertiary);
}

.wasted-money-form__category.active {
  border-color: var(--color-accent);
  background: var(--color-accent-transparent);
}

.wasted-money-form__category span:first-child {
  font-size: 18px;
}

.wasted-money-form__category span:last-child {
  font-size: 10px;
  color: var(--color-text-secondary);
  text-align: center;
}

.wasted-money-form__actions {
  display: flex;
  gap: 12px;
  margin-top: 8px;
}

.wasted-money-form__btn {
  flex: 1;
  padding: 12px 20px;
  border: none;
  border-radius: var(--radius);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.wasted-money-form__btn--primary {
  background: var(--color-accent);
  color: white;
}

.wasted-money-form__btn--primary:hover:not(:disabled) {
  background: var(--color-accent-light);
}

.wasted-money-form__btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.wasted-money-form__btn--secondary {
  background: var(--color-surface);
  color: var(--color-text-secondary);
}

.wasted-money-form__btn--secondary:hover {
  background: var(--color-bg-tertiary);
}

/* Light mode */
[data-theme="light"] .wasted-money-form__field input,
[data-theme="light"] .wasted-money-form__field textarea,
[data-theme="light"] .wasted-money-form__amount-input {
  background: white;
  border-color: #d4d7dc;
}

/* =============================================================================
   MEDIA WIDGET - Movie, TV, Book, Game Logging
   ============================================================================= */

.media-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-lg);
  height: 100%;
}

.media-widget-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.media-widget-title {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.media-add-btn {
  padding: 6px 12px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
}

.media-add-btn:hover {
  background: var(--color-primary-hover);
}

/* Tabs */
.media-widget-tabs {
  display: flex;
  gap: 4px;
  background: var(--color-bg-tertiary);
  padding: 4px;
  border-radius: var(--radius-md);
}

.media-tab {
  flex: 1;
  padding: 6px 12px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.media-tab:hover {
  color: var(--color-text);
}

.media-tab.active {
  background: var(--color-bg);
  color: var(--color-text);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Entry List */
.media-entries-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 300px;
  overflow-y: auto;
}

.media-entry {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.media-entry-main {
  flex: 1;
  min-width: 0;
}

.media-entry-type {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
  margin-bottom: 2px;
}

.media-entry-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.media-entry-creator {
  font-size: 11px;
  color: var(--color-text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.media-entry-service {
  font-size: 10px;
  color: var(--color-text-tertiary);
  display: flex;
  align-items: center;
  gap: 4px;
}

.media-entry-meta {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
}

.media-entry-status {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.media-entry-actions {
  display: flex;
  gap: 4px;
}

.media-action-btn {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  color: var(--color-text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.media-action-btn:hover {
  background: var(--color-bg-secondary);
  color: var(--color-text);
}

.media-action-btn--danger:hover {
  background: var(--color-danger);
  border-color: var(--color-danger);
  color: white;
}

/* Star Rating */
.media-stars {
  display: flex;
  gap: 2px;
}

.media-star {
  font-size: 14px;
  color: var(--color-text-tertiary);
  line-height: 1;
}

.media-star.filled {
  color: #fbbf24;
}

.media-star.clickable {
  cursor: pointer;
  transition: transform 0.1s;
}

.media-star.clickable:hover {
  transform: scale(1.2);
}

/* Empty State */
.media-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 24px;
  text-align: center;
  color: var(--color-text-secondary);
}

.media-empty p {
  margin: 0;
  font-size: 14px;
}

.media-empty small {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

/* Filters */
.media-filters {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
}

.media-filter-select {
  flex: 1;
  padding: 6px 10px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 12px;
  color: var(--color-text);
  cursor: pointer;
}

/* Stats */
.media-stats {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.media-stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.media-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.media-stat-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
}

.media-stat-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.media-stats-breakdown h4 {
  margin: 0 0 8px;
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text);
}

.media-type-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.media-type-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
  font-size: 13px;
}

.media-type-name {
  color: var(--color-text);
}

.media-type-count {
  font-weight: 600;
  color: var(--color-primary);
}

/* Add/Edit Form */
.media-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.media-form-row {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.media-form-label {
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-tertiary);
}

.media-form-input,
.media-form-select,
.media-form-textarea {
  padding: 8px 12px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 13px;
  color: var(--color-text);
}

.media-form-input:focus,
.media-form-select:focus,
.media-form-textarea:focus {
  outline: none;
  border-color: var(--color-primary);
}

.media-form-textarea {
  resize: vertical;
  min-height: 60px;
}

.media-form-submit {
  padding: 10px 16px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  margin-top: 4px;
}

.media-form-submit:hover {
  background: var(--color-primary-hover);
}

/* ========== Fitbit Widgets (Sleep, Activity, Nutrition) ========== */

.fitbit-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 4px;
  height: 100%;
}

.fitbit-widget--loading,
.fitbit-widget--error,
.fitbit-widget--empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-align: center;
  color: var(--color-text-secondary);
  padding: 24px;
}

.fitbit-loading-spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.fitbit-error-icon,
.fitbit-empty-icon {
  font-size: 32px;
  opacity: 0.6;
}

.fitbit-retry-btn {
  padding: 6px 12px;
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.fitbit-retry-btn:hover {
  background: var(--color-bg-secondary);
  border-color: var(--color-primary);
}

/* Hero Section - Main metric */
.fitbit-hero {
  display: flex;
  justify-content: center;
  padding: 8px 0;
}

.fitbit-hero-score {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: var(--color-bg-tertiary);
  border: 3px solid var(--color-border);
}

.fitbit-hero-score.fitbit-status--green {
  border-color: var(--color-success);
  background: rgba(115, 165, 140, 0.1);
}

.fitbit-hero-score.fitbit-status--yellow {
  border-color: var(--color-warning);
  background: rgba(244, 185, 66, 0.1);
}

.fitbit-hero-score.fitbit-status--red {
  border-color: var(--color-error);
  background: rgba(242, 112, 89, 0.1);
}

.fitbit-hero-value {
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1;
}

.fitbit-hero-label {
  font-size: 10px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-secondary);
  margin-top: 2px;
}

/* Activity Ring */
.fitbit-hero-ring {
  position: relative;
  width: 90px;
  height: 90px;
}

.fitbit-hero-ring svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.fitbit-ring-bg {
  stroke: var(--color-bg-tertiary);
  stroke-width: 8;
}

.fitbit-ring-fill {
  stroke: var(--color-primary);
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 0.5s ease;
}

.fitbit-status--green .fitbit-ring-fill {
  stroke: var(--color-success);
}

.fitbit-status--yellow .fitbit-ring-fill {
  stroke: var(--color-warning);
}

.fitbit-status--red .fitbit-ring-fill {
  stroke: var(--color-error);
}

.fitbit-hero-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
}

.fitbit-hero-content .fitbit-hero-value {
  font-size: 22px;
}

.fitbit-hero-content .fitbit-hero-label {
  font-size: 9px;
}

/* Metrics Grid */
.fitbit-metrics {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
  gap: 8px;
}

.fitbit-metric {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 10px 8px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
  border: 1px solid transparent;
  transition: border-color 0.2s;
}

.fitbit-metric.fitbit-status--green {
  border-color: rgba(115, 165, 140, 0.3);
}

.fitbit-metric.fitbit-status--yellow {
  border-color: rgba(244, 185, 66, 0.3);
}

.fitbit-metric.fitbit-status--red {
  border-color: rgba(242, 112, 89, 0.3);
}

.fitbit-metric-icon {
  font-size: 18px;
}

.fitbit-metric-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.fitbit-metric-value {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.fitbit-metric-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.fitbit-metric-subtext {
  font-size: 9px;
  color: var(--color-text-tertiary);
  margin-top: 2px;
}

/* Progress Bar */
.fitbit-metric-bar {
  width: 100%;
  height: 4px;
  background: var(--color-bg-secondary);
  border-radius: 2px;
  overflow: hidden;
  margin-top: 4px;
}

.fitbit-metric-bar-fill {
  height: 100%;
  background: var(--color-primary);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.fitbit-metric-bar--water .fitbit-metric-bar-fill {
  background: #60a5fa;
}

/* Footer */
.fitbit-footer {
  display: flex;
  justify-content: center;
  padding-top: 4px;
  border-top: 1px solid var(--color-border);
}

.fitbit-avg {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

/* Nutrition Widget Specific */
.nutrition-balance {
  display: flex;
  flex-direction: column;
  gap: 6px;
  width: 100%;
  max-width: 160px;
}

.nutrition-balance-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 4px 8px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-sm);
}

.nutrition-label {
  font-size: 11px;
  font-weight: 500;
  color: var(--color-text-secondary);
  text-transform: uppercase;
}

.nutrition-value {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.nutrition-value--in {
  color: var(--color-success);
}

.nutrition-value--out {
  color: var(--color-error);
}

.nutrition-balance-total {
  border: 1px solid var(--color-border);
  font-weight: 600;
}

.nutrition-balance--balanced .nutrition-value {
  color: var(--color-success);
}

.nutrition-balance--over .nutrition-value {
  color: var(--color-warning);
}

.nutrition-balance--under .nutrition-value {
  color: var(--color-info);
}

/* ========== Hooomz OS Widget ========== */

.hooomz-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 4px;
  height: 100%;
}

.hooomz-header {
  display: flex;
  justify-content: flex-end;
}

.hooomz-status {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: var(--color-text-secondary);
}

.hooomz-status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--color-text-tertiary);
}

.hooomz-status--online {
  background: var(--color-success);
  box-shadow: 0 0 6px var(--color-success);
}

.hooomz-quick-actions {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
  flex: 1;
}

.hooomz-action-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 16px 12px;
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s;
}

.hooomz-action-btn:hover {
  background: var(--color-bg-secondary);
  border-color: var(--color-primary);
  transform: translateY(-1px);
}

.hooomz-action-icon {
  font-size: 24px;
}

.hooomz-action-label {
  font-size: 11px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.hooomz-footer {
  display: flex;
  justify-content: center;
}

.hooomz-open-btn {
  padding: 8px 16px;
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text);
  cursor: pointer;
  transition: all 0.2s;
}

.hooomz-open-btn:hover {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

/* ========== Meditation Widget ========== */

.meditation-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 4px;
  height: 100%;
}

.meditation-widget--loading,
.meditation-widget--error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-align: center;
  color: var(--color-text-secondary);
  padding: 24px;
}

.meditation-loading-spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--color-border);
  border-top-color: #a78bfa;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.meditation-error-icon {
  font-size: 32px;
  opacity: 0.6;
}

.meditation-retry-btn {
  padding: 6px 12px;
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text);
  font-size: 12px;
  cursor: pointer;
}

.meditation-hero {
  display: flex;
  justify-content: center;
  padding: 8px 0;
}

.meditation-circle {
  position: relative;
  width: 100px;
  height: 100px;
}

.meditation-circle svg {
  width: 100%;
  height: 100%;
}

.meditation-circle-bg {
  fill: none;
  stroke: var(--color-bg-tertiary);
  stroke-width: 8;
}

.meditation-circle-fill {
  fill: none;
  stroke: #a78bfa;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 0.5s ease;
}

.meditation-circle-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
}

.meditation-minutes {
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1;
}

.meditation-label {
  font-size: 10px;
  color: var(--color-text-secondary);
  text-transform: uppercase;
}

.meditation-stats {
  display: flex;
  justify-content: center;
  gap: 24px;
}

.meditation-stat {
  display: flex;
  align-items: center;
  gap: 8px;
}

.meditation-stat-icon {
  font-size: 18px;
}

.meditation-stat-content {
  display: flex;
  flex-direction: column;
}

.meditation-stat-value {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.meditation-stat-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
}

.meditation-actions {
  display: flex;
  justify-content: center;
}

.meditation-start-btn {
  padding: 10px 20px;
  background: linear-gradient(135deg, #a78bfa 0%, #818cf8 100%);
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
}

.meditation-start-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(167, 139, 250, 0.3);
}

.meditation-encouragement {
  text-align: center;
  font-size: 12px;
  color: var(--color-text-tertiary);
  font-style: italic;
}

.meditation-encouragement--success {
  color: var(--color-success);
  font-style: normal;
}

/* ========== Weather Widget ========== */

.weather-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 4px;
  height: 100%;
}

.weather-widget--loading,
.weather-widget--error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-align: center;
  color: var(--color-text-secondary);
  padding: 24px;
}

.weather-loading-spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--color-border);
  border-top-color: #60a5fa;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.weather-error-icon {
  font-size: 32px;
  opacity: 0.6;
}

.weather-location {
  display: flex;
  align-items: center;
  gap: 6px;
  justify-content: center;
}

.weather-location-icon {
  font-size: 14px;
}

.weather-location-name {
  font-size: 13px;
  color: var(--color-text-secondary);
  font-weight: 500;
}

.weather-current {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 8px 0;
}

.weather-current-icon {
  font-size: 48px;
  line-height: 1;
}

.weather-current-temp {
  display: flex;
  align-items: flex-start;
}

.weather-temp-value {
  font-size: 36px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1;
}

.weather-temp-symbol {
  font-size: 16px;
  font-weight: 500;
  color: var(--color-text-secondary);
  margin-top: 4px;
}

.weather-current-desc {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.weather-details {
  display: flex;
  justify-content: center;
  gap: 16px;
  padding: 8px 0;
  border-top: 1px solid var(--color-border);
  border-bottom: 1px solid var(--color-border);
}

.weather-detail {
  display: flex;
  align-items: center;
  gap: 4px;
}

.weather-detail-icon {
  font-size: 14px;
}

.weather-detail-value {
  font-size: 12px;
  color: var(--color-text-secondary);
}

.weather-forecast {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  padding-top: 4px;
}

.weather-forecast-day {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  flex: 1;
}

.weather-forecast-name {
  font-size: 11px;
  font-weight: 500;
  color: var(--color-text-secondary);
  text-transform: uppercase;
}

.weather-forecast-icon {
  font-size: 20px;
}

.weather-forecast-temps {
  display: flex;
  gap: 4px;
  font-size: 11px;
}

.weather-forecast-high {
  color: var(--color-text);
  font-weight: 600;
}

.weather-forecast-low {
  color: var(--color-text-tertiary);
}

/* Weather Settings */
.weather-location {
  position: relative;
}

.weather-settings-btn {
  background: none;
  border: none;
  font-size: 14px;
  cursor: pointer;
  opacity: 0.5;
  transition: opacity 0.2s;
  padding: 2px;
  margin-left: auto;
}

.weather-settings-btn:hover {
  opacity: 1;
}

.weather-settings {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  padding: 12px;
  z-index: 10;
  box-shadow: var(--shadow-md);
}

.weather-settings-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
  font-weight: 600;
  color: var(--color-text);
}

.weather-settings-close {
  background: none;
  border: none;
  font-size: 18px;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

.weather-settings-close:hover {
  color: var(--color-text);
}

.weather-settings-section {
  margin-bottom: 12px;
}

.weather-settings-label {
  display: block;
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
  color: var(--color-text-secondary);
  margin-bottom: 6px;
}

.weather-units-toggle {
  display: flex;
  gap: 4px;
}

.weather-unit-btn {
  flex: 1;
  padding: 6px 12px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  color: var(--color-text-secondary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.weather-unit-btn:hover {
  border-color: var(--color-primary);
}

.weather-unit-btn.active {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

.weather-location-search {
  display: flex;
  align-items: center;
  gap: 8px;
}

.weather-search-input {
  flex: 1;
  padding: 8px 10px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  color: var(--color-text);
  font-size: 13px;
}

.weather-search-input:focus {
  outline: none;
  border-color: var(--color-primary);
}

.weather-search-spinner {
  color: var(--color-text-secondary);
  font-size: 12px;
}

.weather-search-results {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-top: 6px;
  max-height: 150px;
  overflow-y: auto;
}

.weather-search-result {
  padding: 8px 10px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  color: var(--color-text);
  font-size: 12px;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s;
}

.weather-search-result:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-primary);
}

.weather-use-current {
  width: 100%;
  padding: 8px;
  margin-top: 8px;
  background: none;
  border: 1px dashed var(--color-border);
  border-radius: var(--radius);
  color: var(--color-text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.weather-use-current:hover {
  border-color: var(--color-primary);
  color: var(--color-text);
}

.weather-saved-location {
  margin-top: 8px;
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-align: center;
}

/* ========== Good Times Widget ========== */

.goodtimes-widget {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 4px;
  height: 100%;
}

.goodtimes-stats {
  display: flex;
  justify-content: space-around;
  padding: 8px 0;
  border-bottom: 1px solid var(--color-border);
}

.goodtimes-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.goodtimes-stat-value {
  font-size: 20px;
  font-weight: 700;
  color: var(--color-text);
}

.goodtimes-stat-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
  text-transform: uppercase;
}

.goodtimes-add-btn {
  padding: 10px 16px;
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
}

.goodtimes-add-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
}

.goodtimes-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
}

.goodtimes-input,
.goodtimes-textarea {
  padding: 10px 12px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 13px;
  color: var(--color-text);
  resize: none;
}

.goodtimes-input:focus,
.goodtimes-textarea:focus {
  outline: none;
  border-color: var(--color-primary);
}

.goodtimes-mood-picker {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.goodtimes-mood-label {
  font-size: 12px;
  color: var(--color-text-secondary);
}

.goodtimes-mood-options {
  display: flex;
  gap: 8px;
}

.goodtimes-mood-btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  background: var(--color-bg);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.2s;
}

.goodtimes-mood-btn:hover {
  border-color: var(--color-primary);
  transform: scale(1.1);
}

.goodtimes-mood-btn.active {
  border-color: #f59e0b;
  background: rgba(245, 158, 11, 0.1);
}

.goodtimes-form-actions {
  display: flex;
  gap: 8px;
}

.goodtimes-save-btn {
  flex: 1;
  padding: 10px;
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  color: white;
  cursor: pointer;
}

.goodtimes-save-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.goodtimes-cancel-btn {
  padding: 10px 16px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 13px;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.goodtimes-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow-y: auto;
  max-height: 300px;
}

.goodtimes-entry {
  padding: 10px 12px;
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
}

.goodtimes-entry-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.goodtimes-entry-mood {
  font-size: 18px;
}

.goodtimes-entry-title {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.goodtimes-entry-delete {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--color-text-tertiary);
  font-size: 16px;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.2s;
}

.goodtimes-entry:hover .goodtimes-entry-delete {
  opacity: 1;
}

.goodtimes-entry-delete:hover {
  color: var(--color-danger);
}

.goodtimes-entry-desc {
  margin: 6px 0 0 26px;
  font-size: 12px;
  color: var(--color-text-secondary);
  line-height: 1.4;
}

.goodtimes-entry-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  padding-left: 26px;
}

.goodtimes-entry-date {
  font-size: 11px;
  color: var(--color-text-tertiary);
}

.goodtimes-entry-tags {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.goodtimes-tag {
  padding: 2px 6px;
  background: rgba(245, 158, 11, 0.15);
  border-radius: 4px;
  font-size: 10px;
  color: #f59e0b;
}

.goodtimes-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 24px;
  text-align: center;
  color: var(--color-text-secondary);
}

.goodtimes-empty-icon {
  font-size: 32px;
  opacity: 0.6;
}

.goodtimes-empty-hint {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

/* ========== Today Widgets ========== */

.today-widgets {
  margin-top: 8px;
}

.today-widgets-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.today-widgets-header h3 {
  margin: 0;
  padding: 0;
  border: none;
}

.add-widget-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg-tertiary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s;
}

.add-widget-btn:hover {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: white;
}

.today-widgets-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.today-widget-container {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.today-widget-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: var(--color-bg-tertiary);
  border-bottom: 1px solid var(--color-border);
}

.today-widget-icon {
  font-size: 14px;
}

.today-widget-title {
  flex: 1;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text);
}

.today-widget-remove {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--color-text-tertiary);
  font-size: 16px;
  cursor: pointer;
  opacity: 0;
  transition: all 0.2s;
}

.today-widget-container:hover .today-widget-remove {
  opacity: 1;
}

.today-widget-remove:hover {
  color: var(--color-danger);
}

.today-widget-content {
  padding: 12px;
  max-height: 300px;
  overflow-y: auto;
}

/* ========== Steps Widget ========== */
.steps-widget {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 8px;
  height: 100%;
}

.steps-widget--loading,
.steps-widget--error,
.steps-widget--empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  text-align: center;
  color: var(--color-text-secondary);
  padding: 24px;
  height: 100%;
}

.steps-loading-spinner {
  width: 24px;
  height: 24px;
  border: 2px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

.steps-error-icon,
.steps-empty-icon {
  font-size: 28px;
  opacity: 0.6;
}

.steps-retry-btn {
  padding: 6px 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  color: var(--color-text);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.steps-retry-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-primary);
}

/* Ring container */
.steps-ring-container {
  position: relative;
  width: 100px;
  height: 100px;
}

.steps-ring {
  width: 100%;
  height: 100%;
}

.steps-ring-bg {
  stroke: var(--color-border);
  fill: none;
}

.steps-ring-fill {
  stroke: var(--color-primary);
  fill: none;
  transition: stroke-dasharray 0.5s ease;
}

.steps-status--green .steps-ring-fill {
  stroke: var(--color-success);
}

.steps-status--yellow .steps-ring-fill {
  stroke: var(--color-warning);
}

.steps-status--red .steps-ring-fill {
  stroke: var(--color-error);
}

.steps-status--gray .steps-ring-fill {
  stroke: var(--color-text-tertiary);
}

.steps-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.steps-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text);
  line-height: 1;
}

.steps-label {
  font-size: 10px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-text-secondary);
  margin-top: 2px;
}

/* Details section */
.steps-details {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  font-size: 12px;
}

.steps-goal {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.steps-goal-percent {
  font-weight: 600;
  color: var(--color-text);
}

.steps-goal-label {
  font-size: 10px;
  color: var(--color-text-tertiary);
}

.steps-distance {
  display: flex;
  align-items: baseline;
  gap: 2px;
}

.steps-distance-value {
  font-weight: 600;
  color: var(--color-text);
}

.steps-distance-unit {
  font-size: 10px;
  color: var(--color-text-tertiary);
}

/* Footer */
.steps-footer {
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-align: center;
}

.steps-avg {
  opacity: 0.8;
}

/* ========== Sync Status Indicator ========== */
.sync-status {
  position: fixed;
  bottom: 16px;
  right: 16px;
  z-index: 1000;
  font-size: 12px;
  font-weight: 500;
}

.sync-status span {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 20px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.sync-status svg {
  flex-shrink: 0;
}

.sync-status-syncing {
  color: var(--color-warning);
}

.sync-status-synced {
  color: var(--color-success);
}

.sync-status-error {
  color: var(--color-error);
}

.sync-icon.spinning {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ========================================
   Directional Documents System
   ======================================== */

/* Directional Wizard */
.directional-wizard {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--looops-navy);
  z-index: 1000;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.directional-wizard__header {
  padding: 20px 24px;
  background: rgba(0, 0, 0, 0.2);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.directional-wizard__close {
  position: absolute;
  top: 16px;
  right: 16px;
  background: none;
  border: none;
  color: rgba(255, 255, 255, 0.6);
  font-size: 28px;
  cursor: pointer;
  padding: 4px 8px;
  line-height: 1;
  transition: color 0.2s;
}

.directional-wizard__close:hover {
  color: white;
}

.directional-wizard__title {
  font-size: 24px;
  font-weight: 600;
  color: white;
  margin: 0 0 16px 0;
  padding-right: 40px;
}

.directional-wizard__progress {
  display: flex;
  align-items: center;
  gap: 12px;
}

.directional-wizard__progress-bar {
  flex: 1;
  height: 6px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  overflow: hidden;
}

.directional-wizard__progress-fill {
  height: 100%;
  background: var(--looops-coral);
  border-radius: 3px;
  transition: width 0.3s ease;
}

.directional-wizard__progress-text {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.6);
  white-space: nowrap;
}

.directional-wizard__loop-indicator {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.directional-wizard__loop-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  opacity: 0.3;
  transition: opacity 0.2s;
}

.directional-wizard__loop-dot--current {
  opacity: 1;
  box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);
}

.directional-wizard__loop-dot--completed {
  opacity: 0.7;
}

.directional-wizard__content {
  flex: 1;
  overflow-y: auto;
  padding: 24px;
}

.directional-wizard__step {
  max-width: 700px;
  margin: 0 auto;
}

.directional-wizard__step-intro {
  font-size: 15px;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 24px;
  line-height: 1.5;
}

.directional-wizard__values-list {
  display: flex;
  flex-direction: column;
  gap: 32px;
}

.directional-wizard__scenario-nav {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  margin-top: 24px;
  padding-top: 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.directional-wizard__scenario-btn {
  padding: 8px 16px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  color: white;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
}

.directional-wizard__scenario-btn:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.15);
}

.directional-wizard__scenario-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.directional-wizard__scenario-counter {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.5);
}

.directional-wizard__footer {
  padding: 16px 24px;
  background: rgba(0, 0, 0, 0.2);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  justify-content: space-between;
  gap: 16px;
}

.directional-wizard__btn {
  padding: 12px 28px;
  border-radius: 8px;
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.directional-wizard__btn--primary {
  background: var(--looops-coral);
  border: none;
  color: white;
}

.directional-wizard__btn--primary:hover:not(:disabled) {
  background: #e05a48;
}

.directional-wizard__btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.directional-wizard__btn--secondary {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.directional-wizard__btn--secondary:hover {
  background: rgba(255, 255, 255, 0.1);
}

/* Directional Wizard - Generating Screen */
.directional-wizard__generating {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 300px;
  text-align: center;
  padding: 40px 20px;
}

.directional-wizard__generating h3 {
  margin: 24px 0 8px;
  font-size: 20px;
  color: white;
}

.directional-wizard__generating p {
  color: rgba(255, 255, 255, 0.7);
  max-width: 400px;
}

.directional-wizard__generating-animation {
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.directional-wizard__spinner {
  width: 48px;
  height: 48px;
  border: 3px solid rgba(255, 255, 255, 0.2);
  border-top-color: var(--looops-coral);
  border-radius: 50%;
  animation: directional-spin 1s linear infinite;
}

@keyframes directional-spin {
  to { transform: rotate(360deg); }
}

.directional-wizard__footer-generating {
  display: flex;
  justify-content: center;
  width: 100%;
  color: rgba(255, 255, 255, 0.5);
  font-size: 14px;
}

/* Directional Wizard - Error Screen */
.directional-wizard__error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 300px;
  text-align: center;
  padding: 40px 20px;
}

.directional-wizard__error-icon {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: #ef4444;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  font-weight: bold;
  color: white;
}

.directional-wizard__error h3 {
  margin: 20px 0 8px;
  font-size: 20px;
  color: white;
}

.directional-wizard__error p {
  color: rgba(255, 255, 255, 0.7);
  max-width: 400px;
  margin-bottom: 24px;
}

.directional-wizard__error-actions {
  display: flex;
  gap: 12px;
}

/* Directional Wizard - Result Screen */
.directional-wizard__result {
  padding: 20px 0;
}

.directional-wizard__result-header {
  text-align: center;
  margin-bottom: 32px;
}

.directional-wizard__result-header h3 {
  font-size: 24px;
  color: white;
  margin-bottom: 8px;
}

.directional-wizard__result-intro {
  color: rgba(255, 255, 255, 0.6);
}

.directional-wizard__result-section {
  margin-bottom: 28px;
  padding: 20px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
}

.directional-wizard__result-section h4 {
  font-size: 16px;
  color: var(--looops-coral);
  margin-bottom: 12px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.directional-wizard__result-section--warning {
  background: rgba(234, 179, 8, 0.1);
  border: 1px solid rgba(234, 179, 8, 0.3);
}

.directional-wizard__result-section--warning h4 {
  color: #eab308;
}

.directional-wizard__mission {
  font-size: 18px;
  font-style: italic;
  color: white;
  border-left: 3px solid var(--looops-coral);
  padding-left: 16px;
  margin: 0;
}

.directional-wizard__summary {
  color: rgba(255, 255, 255, 0.85);
  line-height: 1.7;
  white-space: pre-wrap;
}

.directional-wizard__themes,
.directional-wizard__guardrails,
.directional-wizard__conflicts,
.directional-wizard__recommendations {
  list-style: none;
  padding: 0;
  margin: 0;
}

.directional-wizard__themes li,
.directional-wizard__guardrails li,
.directional-wizard__conflicts li,
.directional-wizard__recommendations li {
  position: relative;
  padding-left: 20px;
  margin-bottom: 8px;
  color: rgba(255, 255, 255, 0.85);
}

.directional-wizard__themes li::before {
  content: "â€¢";
  position: absolute;
  left: 0;
  color: var(--looops-coral);
}

.directional-wizard__guardrails li::before {
  content: "ðŸ›¡ï¸";
  position: absolute;
  left: 0;
  font-size: 12px;
}

.directional-wizard__conflicts li::before {
  content: "âš ï¸";
  position: absolute;
  left: 0;
  font-size: 12px;
}

.directional-wizard__recommendations li::before {
  content: "â†’";
  position: absolute;
  left: 0;
  color: var(--looops-coral);
}

.directional-wizard__loop-directives {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.directional-wizard__loop-directive {
  padding: 12px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
}

.directional-wizard__loop-badge {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
  color: white;
  margin-bottom: 8px;
}

.directional-wizard__loop-directive p {
  color: rgba(255, 255, 255, 0.85);
  margin: 0;
  line-height: 1.6;
}

/* Light mode for AI result screens */
[data-theme="light"] .directional-wizard__generating h3,
[data-theme="light"] .directional-wizard__error h3,
[data-theme="light"] .directional-wizard__result-header h3 {
  color: var(--looops-navy);
}

[data-theme="light"] .directional-wizard__generating p,
[data-theme="light"] .directional-wizard__result-intro {
  color: rgba(26, 26, 46, 0.6);
}

[data-theme="light"] .directional-wizard__spinner {
  border-color: rgba(26, 26, 46, 0.15);
  border-top-color: var(--looops-coral);
}

[data-theme="light"] .directional-wizard__footer-generating {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .directional-wizard__error p {
  color: rgba(26, 26, 46, 0.7);
}

[data-theme="light"] .directional-wizard__result-section {
  background: rgba(26, 26, 46, 0.04);
}

[data-theme="light"] .directional-wizard__mission {
  color: var(--looops-navy);
}

[data-theme="light"] .directional-wizard__summary,
[data-theme="light"] .directional-wizard__themes li,
[data-theme="light"] .directional-wizard__guardrails li,
[data-theme="light"] .directional-wizard__conflicts li,
[data-theme="light"] .directional-wizard__recommendations li,
[data-theme="light"] .directional-wizard__loop-directive p {
  color: rgba(26, 26, 46, 0.85);
}

[data-theme="light"] .directional-wizard__loop-directive {
  background: rgba(26, 26, 46, 0.06);
}

/* Value Slider */
.value-slider {
  padding: 16px 0;
}

.value-slider__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.value-slider__pole {
  font-size: 14px;
  font-weight: 500;
  color: white;
}

.value-slider__value {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--looops-coral);
  border-radius: 50%;
  font-size: 14px;
  font-weight: 600;
  color: white;
}

.value-slider__track-container {
  position: relative;
  padding: 8px 0;
}

.value-slider__input {
  width: 100%;
  height: 8px;
  border-radius: 4px;
  -webkit-appearance: none;
  appearance: none;
  cursor: pointer;
}

.value-slider__input::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 22px;
  height: 22px;
  background: white;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.value-slider__input::-moz-range-thumb {
  width: 22px;
  height: 22px;
  background: white;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.value-slider__descriptions {
  display: flex;
  justify-content: space-between;
  margin-top: 8px;
}

.value-slider__desc {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
  max-width: 40%;
}

.value-slider__desc--left {
  text-align: left;
}

.value-slider__desc--right {
  text-align: right;
}

/* Identity Selector */
.identity-selector {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.identity-selector__counter {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.5);
  text-align: center;
  padding-bottom: 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.identity-selector__category {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.identity-selector__category-title {
  font-size: 13px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.7);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0;
}

.identity-selector__chips {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.identity-chip {
  padding: 10px 16px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  color: white;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
}

.identity-chip:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
}

.identity-chip--selected {
  background: var(--looops-coral);
  border-color: var(--looops-coral);
}

.identity-chip--selected:hover {
  background: #e05a48;
  border-color: #e05a48;
}

.identity-chip--disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* Tradeoff Scenario */
.tradeoff-scenario {
  text-align: center;
}

.tradeoff-scenario__title {
  font-size: 20px;
  font-weight: 600;
  color: white;
  margin: 0 0 8px 0;
}

.tradeoff-scenario__description {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.6);
  margin: 0 0 24px 0;
}

.tradeoff-scenario__options {
  display: flex;
  gap: 16px;
  align-items: stretch;
}

.tradeoff-scenario__vs {
  display: flex;
  align-items: center;
  font-size: 14px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.4);
}

.tradeoff-option {
  flex: 1;
  padding: 20px;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 255, 255, 0.15);
  border-radius: 12px;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
}

.tradeoff-option:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.25);
}

.tradeoff-option--selected {
  background: rgba(255, 255, 255, 0.1);
  border-width: 2px;
}

.tradeoff-option__loop-badge {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 12px;
}

.tradeoff-option__label {
  font-size: 16px;
  font-weight: 600;
  color: white;
  margin: 0 0 8px 0;
}

.tradeoff-option__description {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.6);
  margin: 0;
  line-height: 1.4;
}

.tradeoff-option__check {
  position: absolute;
  top: 12px;
  right: 12px;
  font-size: 18px;
  color: var(--looops-sage);
}

/* Loop Priority Ranker */
.loop-ranker {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.loop-ranker__instructions {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.5);
  text-align: center;
}

.loop-ranker__list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 8px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 12px;
}

.loop-ranker__list--dragging-over {
  background: rgba(0, 0, 0, 0.3);
}

.loop-ranker__item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-left-width: 4px;
  border-radius: 8px;
  transition: all 0.2s;
}

.loop-ranker__item--dragging {
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.loop-ranker__rank {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 50%;
  font-size: 13px;
  font-weight: 600;
  color: white;
}

.loop-ranker__handle {
  font-size: 16px;
  color: rgba(255, 255, 255, 0.4);
  cursor: grab;
}

.loop-ranker__loop-name {
  flex: 1;
  font-size: 15px;
  font-weight: 500;
}

.loop-ranker__priority-label {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.4);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Resource Allocation Editor */
.resource-allocation {
  display: flex;
  flex-direction: column;
  gap: 32px;
}

.resource-allocation__section {
  padding: 20px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
}

.resource-allocation__section-title {
  font-size: 16px;
  font-weight: 600;
  color: white;
  margin: 0 0 8px 0;
}

.resource-allocation__section-desc {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.5);
  margin: 0 0 20px 0;
}

.resource-allocation__total {
  text-align: center;
  font-size: 14px;
  color: rgba(255, 255, 255, 0.6);
  margin-bottom: 16px;
}

.resource-allocation__total-value {
  font-weight: 600;
  color: var(--looops-sage);
}

.resource-allocation__total-value--invalid {
  color: var(--looops-coral);
}

.resource-allocation__sliders {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.resource-allocation__slider {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.resource-allocation__slider-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.resource-allocation__loop-name {
  font-size: 14px;
  font-weight: 500;
}

.resource-allocation__value {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.6);
}

.resource-allocation__input {
  width: 100%;
  height: 6px;
  border-radius: 3px;
  -webkit-appearance: none;
  appearance: none;
  background: rgba(255, 255, 255, 0.15);
  cursor: pointer;
}

.resource-allocation__input::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  background: white;
  border-radius: 50%;
  cursor: pointer;
}

.resource-allocation__options {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.resource-option {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 14px 16px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s;
}

.resource-option:hover {
  background: rgba(255, 255, 255, 0.08);
}

.resource-option--selected {
  background: rgba(242, 112, 89, 0.15);
  border-color: var(--looops-coral);
}

.resource-option__icon {
  font-size: 20px;
  flex-shrink: 0;
}

.resource-option__label {
  font-size: 14px;
  font-weight: 500;
  color: white;
  display: block;
}

.resource-option__description {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
  display: block;
  margin-top: 2px;
}

/* Loop Directions Form */
.loop-directions-form {
  border-top: 4px solid;
  border-radius: 12px;
  overflow: hidden;
}

.loop-directions-form__header {
  padding: 16px;
  display: flex;
  align-items: center;
  gap: 12px;
}

.loop-directions-form__loop-badge {
  padding: 6px 14px;
  border-radius: 16px;
  font-size: 13px;
  font-weight: 600;
  color: white;
}

.loop-directions-step {
  padding: 0 16px 16px;
}

.loop-directions-step__title {
  font-size: 18px;
  font-weight: 600;
  color: white;
  margin: 0 0 8px 0;
}

.loop-directions-step__description {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.6);
  margin: 0 0 20px 0;
  line-height: 1.4;
}

/* Loop Option Selector */
.loop-option-selector {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.loop-option-selector__counter {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.4);
}

.loop-option-selector__options {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.loop-option {
  padding: 14px 16px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s;
}

.loop-option:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.08);
}

.loop-option--selected {
  background: rgba(242, 112, 89, 0.15);
  border-color: var(--looops-coral);
}

.loop-option--disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.loop-option__label {
  font-size: 14px;
  font-weight: 500;
  color: white;
  display: block;
}

.loop-option__description {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
  display: block;
  margin-top: 4px;
}

/* Loop Assessment */
.loop-assessment {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.loop-assessment__slider {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.loop-assessment__label {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
  font-weight: 500;
  color: white;
}

.loop-assessment__value {
  font-weight: 600;
  color: var(--looops-coral);
}

.loop-assessment__hint {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
  margin: 0;
}

.loop-assessment__input {
  width: 100%;
  height: 8px;
  border-radius: 4px;
  -webkit-appearance: none;
  appearance: none;
  background: rgba(255, 255, 255, 0.15);
  cursor: pointer;
}

.loop-assessment__input::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  background: white;
  border-radius: 50%;
  cursor: pointer;
}

/* Loop Dependencies */
.loop-dependencies {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.loop-dependencies__section {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.loop-dependencies__heading {
  font-size: 14px;
  font-weight: 500;
  color: white;
  margin: 0;
}

.loop-dependencies__hint {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
  margin: 0;
}

.loop-dependencies__chips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 8px;
}

.loop-dependency-chip {
  padding: 8px 14px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 16px;
  font-size: 13px;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
}

.loop-dependency-chip:hover {
  background: rgba(255, 255, 255, 0.1);
}

.loop-dependency-chip--selected {
  font-weight: 500;
}

/* Loop Season Selector */
.loop-season-selector {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.loop-season-option {
  padding: 20px 16px;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
}

.loop-season-option:hover {
  background: rgba(255, 255, 255, 0.08);
}

.loop-season-option--selected {
  background: rgba(255, 255, 255, 0.1);
}

.loop-season-option__icon {
  font-size: 28px;
  display: block;
  margin-bottom: 8px;
}

.loop-season-option__label {
  font-size: 15px;
  font-weight: 600;
  color: white;
  display: block;
  margin-bottom: 6px;
}

.loop-season-option__description {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
  display: block;
  line-height: 1.4;
}

/* Directional Document View */
.directional-document {
  max-width: 800px;
  margin: 0 auto;
  padding: 24px;
}

.directional-document__header {
  margin-bottom: 32px;
  padding-bottom: 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.directional-document__title {
  font-size: 28px;
  font-weight: 700;
  color: white;
  margin: 0 0 8px 0;
}

.directional-document__meta {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.5);
  margin-bottom: 16px;
}

.directional-document__actions {
  display: flex;
  gap: 12px;
}

.directional-document__action {
  padding: 10px 20px;
  background: var(--looops-coral);
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: white;
  cursor: pointer;
  transition: background 0.2s;
}

.directional-document__action:hover {
  background: #e05a48;
}

.directional-document__action--secondary {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.directional-document__action--secondary:hover {
  background: rgba(255, 255, 255, 0.1);
}

.directional-document__action--ai {
  background: linear-gradient(135deg, #8b5cf6, #6366f1);
}

.directional-document__action--ai:hover {
  background: linear-gradient(135deg, #7c3aed, #4f46e5);
}

.directional-document__action--ai:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.directional-document__error {
  margin-top: 12px;
  padding: 12px 16px;
  background: rgba(239, 68, 68, 0.15);
  border: 1px solid rgba(239, 68, 68, 0.3);
  border-radius: 8px;
  color: #ef4444;
  font-size: 14px;
}

.directional-document__section {
  margin-bottom: 32px;
}

.directional-document__section-title {
  font-size: 18px;
  font-weight: 600;
  color: white;
  margin: 0 0 20px 0;
  padding-bottom: 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.directional-document__subsection {
  margin-bottom: 24px;
}

.directional-document__subsection-title {
  font-size: 14px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.7);
  margin: 0 0 12px 0;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.directional-document__identity-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.directional-document__identity-chip {
  padding: 8px 14px;
  background: rgba(242, 112, 89, 0.15);
  border: 1px solid rgba(242, 112, 89, 0.3);
  border-radius: 16px;
  font-size: 13px;
  color: white;
}

.directional-document__values-grid {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.directional-document__value-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.directional-document__value-pole {
  width: 120px;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.6);
}

.directional-document__value-pole:last-child {
  text-align: right;
}

.directional-document__value-bar {
  flex: 1;
  height: 6px;
  background: linear-gradient(to right, var(--looops-coral), var(--looops-gold), var(--looops-sage));
  border-radius: 3px;
  position: relative;
}

.directional-document__value-marker {
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 14px;
  height: 14px;
  background: white;
  border-radius: 50%;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.directional-document__priority-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.directional-document__priority-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: rgba(255, 255, 255, 0.05);
  border-left: 4px solid;
  border-radius: 6px;
}

.directional-document__priority-rank {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 50%;
  font-size: 12px;
  font-weight: 600;
  color: white;
}

.directional-document__priority-loop {
  font-size: 14px;
  font-weight: 500;
}

.directional-document__resource-info {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.directional-document__resource-item {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.8);
}

.directional-document__resource-item strong {
  color: rgba(255, 255, 255, 0.6);
  font-weight: 500;
}

.directional-document__loop-card {
  padding: 16px;
  background: rgba(255, 255, 255, 0.05);
  border-left: 4px solid;
  border-radius: 8px;
  margin-bottom: 16px;
}

.directional-document__loop-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.directional-document__loop-name {
  font-size: 16px;
  font-weight: 600;
}

.directional-document__loop-season {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
  padding: 4px 10px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
}

.directional-document__loop-content {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.directional-document__loop-section {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.7);
}

.directional-document__loop-section strong {
  color: rgba(255, 255, 255, 0.5);
  font-weight: 500;
  display: block;
  margin-bottom: 4px;
}

.directional-document__loop-section ul {
  margin: 0;
  padding-left: 18px;
}

.directional-document__loop-section li {
  margin-bottom: 2px;
}

.directional-document__loop-assessment {
  margin-top: 8px;
}

.directional-document__assessment-bar {
  display: flex;
  align-items: center;
  gap: 10px;
}

.directional-document__assessment-label {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
  width: 80px;
}

.directional-document__assessment-track {
  flex: 1;
  height: 6px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  overflow: hidden;
}

.directional-document__assessment-fill {
  height: 100%;
  border-radius: 3px;
}

.directional-document__assessment-value {
  font-size: 12px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.7);
  width: 40px;
  text-align: right;
}

.directional-document__loop-dependencies {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.4);
  display: flex;
  gap: 16px;
}

.directional-document__generated {
  padding: 16px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
}

.directional-document__summary {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.5;
  margin: 0 0 16px 0;
}

.directional-document__themes,
.directional-document__recommendations {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.7);
  margin-top: 12px;
}

.directional-document__themes strong,
.directional-document__recommendations strong {
  color: rgba(255, 255, 255, 0.5);
  display: block;
  margin-bottom: 6px;
}

.directional-document__themes ul,
.directional-document__recommendations ul {
  margin: 0;
  padding-left: 18px;
}

/* Status and Progress */
.directional-document__status-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
}

.directional-document__status {
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
}

.directional-document__status--complete {
  background: rgba(72, 187, 120, 0.2);
  color: #48bb78;
}

.directional-document__status--draft {
  background: rgba(236, 201, 75, 0.2);
  color: #ecc94b;
}

.directional-document__status--needs_update {
  background: rgba(246, 173, 85, 0.2);
  color: #f6ad55;
}

.directional-document__progress {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
}

/* Time Allocation */
.directional-document__time-allocation {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.directional-document__allocation-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.directional-document__allocation-loop {
  width: 100px;
  font-size: 13px;
  font-weight: 500;
}

.directional-document__allocation-bar-container {
  flex: 1;
  height: 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
  overflow: hidden;
}

.directional-document__allocation-bar {
  height: 100%;
  border-radius: 4px;
  transition: width 0.3s ease;
}

.directional-document__allocation-value {
  width: 40px;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.6);
  text-align: right;
}

/* Tradeoff Decisions */
.directional-document__tradeoffs {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.directional-document__tradeoff-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: rgba(255, 255, 255, 0.04);
  border-radius: 8px;
}

.directional-document__tradeoff-scenario {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.6);
}

.directional-document__tradeoff-choice {
  font-size: 13px;
  font-weight: 500;
}

/* Season Icon */
.directional-document__season-icon {
  margin-right: 4px;
}

/* Directions View Empty State */
.directions-view {
  padding: 20px 0;
}

.directions-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 60px 24px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 16px;
  max-width: 500px;
  margin: 40px auto;
}

.directions-empty h3 {
  font-size: 24px;
  font-weight: 600;
  color: white;
  margin: 0 0 12px 0;
}

.directions-empty p {
  font-size: 15px;
  color: rgba(255, 255, 255, 0.6);
  margin: 0 0 24px 0;
  line-height: 1.5;
}

.directions-start-btn {
  padding: 14px 32px;
  background: var(--looops-coral);
  border: none;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
}

.directions-start-btn:hover {
  background: #e05a48;
  transform: translateY(-1px);
}

.directions-explainer {
  margin-top: 48px;
  padding: 32px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  text-align: left;
  width: 100%;
}

.directions-explainer h4 {
  font-size: 18px;
  font-weight: 600;
  color: white;
  margin: 0 0 24px 0;
  text-align: center;
}

.directions-explainer__grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 24px;
}

.directions-explainer__item {
  padding: 20px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.06);
}

.directions-explainer__icon {
  font-size: 28px;
  display: block;
  margin-bottom: 12px;
}

.directions-explainer__item h5 {
  font-size: 15px;
  font-weight: 600;
  color: white;
  margin: 0 0 8px 0;
}

.directions-explainer__item p {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.6);
  line-height: 1.5;
  margin: 0;
}

.directions-preview {
  margin-top: 48px;
  padding-top: 32px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  width: 100%;
  max-width: none;
  text-align: left;
}

.directions-preview h4 {
  font-size: 14px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.5);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 8px 0;
  text-align: center;
}

.directions-preview__subtitle {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.4);
  text-align: center;
  margin: 0 0 24px 0;
}

.directions-empty {
  max-width: 900px;
}

/* Light Mode - Directional Document Components */
[data-theme="light"] .directional-document__header {
  border-bottom-color: rgba(26, 26, 46, 0.1);
}

[data-theme="light"] .directional-document__title {
  color: var(--looops-navy);
}

[data-theme="light"] .directional-document__meta {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .directional-document__action--secondary {
  border-color: rgba(26, 26, 46, 0.3);
  color: var(--looops-navy);
}

[data-theme="light"] .directional-document__action--secondary:hover {
  background: rgba(26, 26, 46, 0.08);
}

[data-theme="light"] .directional-document__section-title {
  color: var(--looops-navy);
  border-bottom-color: rgba(26, 26, 46, 0.1);
}

[data-theme="light"] .directional-document__subsection-title {
  color: rgba(26, 26, 46, 0.6);
}

[data-theme="light"] .directional-document__identity-chip {
  color: var(--looops-navy);
  background: rgba(242, 112, 89, 0.1);
}

[data-theme="light"] .directional-document__value-pole {
  color: rgba(26, 26, 46, 0.7);
}

[data-theme="light"] .directional-document__value-marker {
  background: var(--looops-navy);
  border: 2px solid white;
}

[data-theme="light"] .directional-document__priority-item {
  background: rgba(26, 26, 46, 0.04);
}

[data-theme="light"] .directional-document__priority-rank {
  background: rgba(26, 26, 46, 0.1);
  color: var(--looops-navy);
}

[data-theme="light"] .directional-document__resource-item {
  color: rgba(26, 26, 46, 0.8);
}

[data-theme="light"] .directional-document__resource-item strong {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .directional-document__loop-card {
  background: rgba(26, 26, 46, 0.03);
}

[data-theme="light"] .directional-document__loop-season {
  color: rgba(26, 26, 46, 0.6);
  background: rgba(26, 26, 46, 0.08);
}

[data-theme="light"] .directional-document__loop-section {
  color: rgba(26, 26, 46, 0.8);
}

[data-theme="light"] .directional-document__loop-section strong {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .directional-document__assessment-label {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .directional-document__assessment-track {
  background: rgba(26, 26, 46, 0.1);
}

[data-theme="light"] .directional-document__assessment-value {
  color: rgba(26, 26, 46, 0.7);
}

[data-theme="light"] .directional-document__loop-dependencies {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .directional-document__generated {
  background: rgba(26, 26, 46, 0.03);
}

[data-theme="light"] .directional-document__summary {
  color: rgba(26, 26, 46, 0.8);
}

[data-theme="light"] .directional-document__themes,
[data-theme="light"] .directional-document__recommendations {
  color: rgba(26, 26, 46, 0.7);
}

[data-theme="light"] .directional-document__themes strong,
[data-theme="light"] .directional-document__recommendations strong {
  color: rgba(26, 26, 46, 0.5);
}

/* Light Mode - Directions View */
[data-theme="light"] .directions-empty {
  background: rgba(26, 26, 46, 0.03);
}

[data-theme="light"] .directions-empty h3 {
  color: var(--looops-navy);
}

[data-theme="light"] .directions-empty p {
  color: rgba(26, 26, 46, 0.6);
}

/* Light Mode - Directions Explainer */
[data-theme="light"] .directions-explainer {
  background: rgba(26, 26, 46, 0.02);
  border-color: rgba(26, 26, 46, 0.08);
}

[data-theme="light"] .directions-explainer h4 {
  color: var(--looops-navy);
}

[data-theme="light"] .directions-explainer__item {
  background: rgba(26, 26, 46, 0.02);
  border-color: rgba(26, 26, 46, 0.06);
}

[data-theme="light"] .directions-explainer__item h5 {
  color: var(--looops-navy);
}

[data-theme="light"] .directions-explainer__item p {
  color: rgba(26, 26, 46, 0.6);
}

/* Light Mode - Directional Wizard */
[data-theme="light"] .directional-wizard {
  background: #f8f9fa;
}

[data-theme="light"] .directional-wizard__header {
  background: rgba(26, 26, 46, 0.03);
  border-bottom-color: rgba(26, 26, 46, 0.1);
}

[data-theme="light"] .directional-wizard__close {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .directional-wizard__close:hover {
  color: var(--looops-navy);
}

[data-theme="light"] .directional-wizard__title {
  color: var(--looops-navy);
}

[data-theme="light"] .directional-wizard__progress-text {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .directional-wizard__progress-bar {
  background: rgba(26, 26, 46, 0.1);
}

[data-theme="light"] .directional-wizard__loop-dot--current {
  box-shadow: 0 0 0 3px rgba(26, 26, 46, 0.1);
}

[data-theme="light"] .directional-wizard__content {
  background: white;
}

[data-theme="light"] .directional-wizard__step-intro {
  color: rgba(26, 26, 46, 0.7);
}

[data-theme="light"] .directional-wizard__scenario-nav {
  border-top-color: rgba(26, 26, 46, 0.1);
}

[data-theme="light"] .directional-wizard__scenario-btn {
  background: rgba(26, 26, 46, 0.05);
  border-color: rgba(26, 26, 46, 0.15);
  color: var(--looops-navy);
}

[data-theme="light"] .directional-wizard__scenario-btn:hover:not(:disabled) {
  background: rgba(26, 26, 46, 0.1);
}

[data-theme="light"] .directional-wizard__scenario-counter {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .directional-wizard__footer {
  background: rgba(26, 26, 46, 0.03);
  border-top-color: rgba(26, 26, 46, 0.1);
}

[data-theme="light"] .directional-wizard__btn--secondary {
  background: transparent;
  border-color: rgba(26, 26, 46, 0.2);
  color: rgba(26, 26, 46, 0.7);
}

[data-theme="light"] .directional-wizard__btn--secondary:hover {
  background: rgba(26, 26, 46, 0.05);
}

/* Light Mode - Identity Selector */
[data-theme="light"] .identity-selector__category-title {
  color: #1a1a2e !important;
}

[data-theme="light"] .identity-chip {
  background: #f5f5f7 !important;
  border-color: #d0d0d8 !important;
  color: #1a1a2e !important;
}

[data-theme="light"] .identity-chip:hover:not(.identity-chip--disabled) {
  background: #ebebef !important;
  border-color: #b0b0b8 !important;
}

[data-theme="light"] .identity-chip--selected {
  background: rgba(242, 112, 89, 0.15) !important;
  border-color: var(--looops-coral) !important;
  color: #1a1a2e !important;
}

[data-theme="light"] .identity-chip__label {
  color: #1a1a2e !important;
}

[data-theme="light"] .identity-chip__description {
  color: #555566 !important;
}

[data-theme="light"] .identity-selector__counter {
  color: #666677 !important;
}

/* Light Mode - Value Slider */
[data-theme="light"] .value-slider {
  background: #f5f5f7 !important;
  border-color: #d0d0d8 !important;
}

[data-theme="light"] .value-slider__label-left,
[data-theme="light"] .value-slider__label-right {
  color: #333344 !important;
}

[data-theme="light"] .value-slider__value {
  color: #555566 !important;
}

[data-theme="light"] .value-slider__track {
  background: #d0d0d8 !important;
}

[data-theme="light"] .value-slider input[type="range"] {
  background: #d0d0d8 !important;
}

/* Light Mode - Tradeoff Scenario */
[data-theme="light"] .tradeoff-scenario__title {
  color: #1a1a2e !important;
}

[data-theme="light"] .tradeoff-scenario__description {
  color: #444455 !important;
}

[data-theme="light"] .tradeoff-option {
  background: #f5f5f7 !important;
  border-color: #d0d0d8 !important;
}

[data-theme="light"] .tradeoff-option:hover {
  background: #ebebef !important;
  border-color: #b0b0b8 !important;
}

[data-theme="light"] .tradeoff-option--selected {
  background: rgba(242, 112, 89, 0.12) !important;
  border-color: var(--looops-coral) !important;
}

[data-theme="light"] .tradeoff-option__label {
  color: #1a1a2e !important;
}

[data-theme="light"] .tradeoff-option__description {
  color: #555566 !important;
}

[data-theme="light"] .tradeoff-scenario__vs {
  color: #888899 !important;
}

/* Light Mode - Loop Priority Ranker */
[data-theme="light"] .loop-ranker__item {
  background: #f5f5f7 !important;
  border-color: #d0d0d8 !important;
}

[data-theme="light"] .loop-ranker__name {
  color: #1a1a2e !important;
}

[data-theme="light"] .loop-ranker__rank {
  color: #555566 !important;
}

[data-theme="light"] .loop-ranker__handle {
  color: #888899 !important;
}

/* Light Mode - Resource Allocation Editor */
[data-theme="light"] .resource-allocation__section-title {
  color: #1a1a2e !important;
}

[data-theme="light"] .resource-allocation__section-desc {
  color: #555566 !important;
}

[data-theme="light"] .resource-allocation__total-value {
  color: #1a1a2e !important;
}

[data-theme="light"] .resource-allocation__value,
[data-theme="light"] .resource-allocation__loop-name {
  color: #333344 !important;
}

[data-theme="light"] .resource-option {
  background: #f5f5f7 !important;
  border-color: #d0d0d8 !important;
}

[data-theme="light"] .resource-option:hover {
  background: #ebebef !important;
  border-color: #b0b0b8 !important;
}

[data-theme="light"] .resource-option--selected {
  background: rgba(242, 112, 89, 0.12) !important;
  border-color: var(--looops-coral) !important;
}

[data-theme="light"] .resource-option__label {
  color: #1a1a2e !important;
}

[data-theme="light"] .resource-option__description {
  color: #555566 !important;
}

/* Light Mode - Loop Directions Form */
[data-theme="light"] .loop-directions-form__header {
  background: #f5f5f7 !important;
}

[data-theme="light"] .loop-directions-step__title {
  color: #1a1a2e !important;
}

[data-theme="light"] .loop-directions-step__description {
  color: #444455 !important;
}

[data-theme="light"] .loop-option-selector__counter {
  color: #666677 !important;
}

[data-theme="light"] .loop-option {
  background: #f5f5f7 !important;
  border-color: #d0d0d8 !important;
}

[data-theme="light"] .loop-option:hover:not(.loop-option--disabled) {
  background: #ebebef !important;
  border-color: #b0b0b8 !important;
}

[data-theme="light"] .loop-option--selected {
  background: rgba(242, 112, 89, 0.12) !important;
  border-color: var(--looops-coral) !important;
}

[data-theme="light"] .loop-option__label {
  color: #1a1a2e !important;
}

[data-theme="light"] .loop-option__description {
  color: #555566 !important;
}

[data-theme="light"] .loop-option--disabled {
  opacity: 0.4;
}

[data-theme="light"] .loop-assessment__label {
  color: var(--looops-navy);
}

[data-theme="light"] .loop-assessment__value {
  color: rgba(26, 26, 46, 0.6);
}

[data-theme="light"] .loop-assessment__hint {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .loop-assessment__input {
  background: rgba(26, 26, 46, 0.1);
}

[data-theme="light"] .loop-assessment__input::-webkit-slider-thumb {
  background: var(--looops-coral);
}

[data-theme="light"] .loop-dependencies__heading {
  color: var(--looops-navy);
}

[data-theme="light"] .loop-dependencies__hint {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .loop-dependency-chip {
  background: rgba(26, 26, 46, 0.05);
  border-color: rgba(26, 26, 46, 0.15);
  color: var(--looops-navy);
}

[data-theme="light"] .loop-dependency-chip:hover {
  background: rgba(26, 26, 46, 0.08);
}

[data-theme="light"] .loop-season-option {
  background: rgba(26, 26, 46, 0.03);
  border-color: rgba(26, 26, 46, 0.15);
}

[data-theme="light"] .loop-season-option:hover {
  background: rgba(26, 26, 46, 0.06);
  border-color: rgba(26, 26, 46, 0.2);
}

[data-theme="light"] .loop-season-option--selected {
  background: rgba(242, 112, 89, 0.05);
}

[data-theme="light"] .loop-season-option__label {
  color: var(--looops-navy);
}

[data-theme="light"] .loop-season-option__description {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .directions-preview__title {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .directions-preview__subtitle {
  color: rgba(26, 26, 46, 0.4);
}

[data-theme="light"] .directional-document__progress {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .directional-document__allocation-bar-container {
  background: rgba(26, 26, 46, 0.1);
}

[data-theme="light"] .directional-document__allocation-value {
  color: rgba(26, 26, 46, 0.6);
}

[data-theme="light"] .directional-document__tradeoff-item {
  background: rgba(26, 26, 46, 0.04);
}

[data-theme="light"] .directional-document__tradeoff-scenario {
  color: rgba(26, 26, 46, 0.6);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .directions-explainer__grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 640px) {
  .tradeoff-scenario__options {
    flex-direction: column;
  }

  .tradeoff-scenario__vs {
    justify-content: center;
    padding: 8px 0;
  }

  .loop-season-selector {
    grid-template-columns: 1fr;
  }

  .directional-wizard__footer {
    flex-direction: column-reverse;
  }

  .directional-wizard__btn {
    width: 100%;
  }
}

/* ========== Templates Modal & Button ========== */

.templates-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.templates-btn:hover {
  background: var(--color-surface-hover);
  color: var(--color-text);
  border-color: var(--color-accent);
}

.templates-btn svg {
  flex-shrink: 0;
}

/* Templates Modal */
.templates-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.templates-modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  width: 100%;
  max-width: 700px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.templates-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--color-border);
}

.templates-modal-header h2 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
}

.templates-modal-close {
  background: none;
  border: none;
  font-size: 24px;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: 4px 8px;
  line-height: 1;
}

.templates-modal-close:hover {
  color: var(--color-text);
}

.templates-modal-content {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

/* Templates List View */
.templates-list {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.template-category h3.category-header {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 12px;
}

.template-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 12px;
}

.template-card {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.template-card:hover {
  border-color: var(--color-accent);
  background: var(--color-surface-hover);
}

.template-card-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}

.template-card-header .template-icon {
  font-size: 20px;
}

.template-card-header h4 {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
}

.template-card-meta {
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-bottom: 8px;
}

.template-card-tasks {
  list-style: none;
  padding: 0;
  margin: 10px 0 0;
  border-top: 1px solid var(--color-border);
  padding-top: 10px;
}

.template-card-tasks li {
  font-size: 12px;
  color: var(--color-text-secondary);
  padding: 3px 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.template-card-tasks li.more {
  color: var(--color-text-tertiary);
  font-style: italic;
}

.template-card-expand {
  background: none;
  border: none;
  color: var(--color-accent);
  font-size: 12px;
  cursor: pointer;
  padding: 4px 0;
  margin-top: 4px;
}

.template-card-expand:hover {
  text-decoration: underline;
}

/* Template Detail View */
.template-detail {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.template-back-btn {
  background: none;
  border: none;
  color: var(--color-text-secondary);
  font-size: 13px;
  cursor: pointer;
  padding: 0;
  display: flex;
  align-items: center;
  gap: 4px;
}

.template-back-btn:hover {
  color: var(--color-accent);
}

.template-detail-header {
  display: flex;
  align-items: center;
  gap: 14px;
}

.template-detail-header .template-icon {
  font-size: 32px;
}

.template-detail-header h3 {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 4px;
}

.template-detail-header .template-meta {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.template-description {
  color: var(--color-text-secondary);
  font-size: 14px;
  line-height: 1.5;
}

.template-tasks-preview {
  background: var(--color-bg-secondary);
  border-radius: var(--radius-md);
  padding: 14px;
}

.template-tasks-preview h4 {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-text-secondary);
  margin-bottom: 10px;
}

.template-tasks-preview ul {
  list-style: none;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.template-tasks-preview li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 13px;
  color: var(--color-text);
  padding: 6px 8px;
  background: var(--color-surface);
  border-radius: var(--radius-sm);
}

.template-tasks-preview li .task-title {
  flex: 1;
}

.template-tasks-preview li .task-time {
  color: var(--color-text-tertiary);
  font-size: 12px;
}

.template-use-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 8px;
}

.template-use-form label {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.template-use-form input {
  padding: 10px 12px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text);
  font-size: 14px;
}

.template-use-form input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.template-use-btn {
  padding: 12px 20px;
  background: var(--color-accent);
  border: none;
  border-radius: var(--radius-md);
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s ease;
}

.template-use-btn:hover {
  background: var(--color-accent-hover);
}

/* Template actions row */
.template-actions {
  display: flex;
  gap: 12px;
  margin-top: 8px;
}

.template-delete-btn {
  padding: 12px 20px;
  background: transparent;
  border: 1px solid var(--color-danger);
  border-radius: var(--radius-md);
  color: var(--color-danger);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.template-delete-btn:hover {
  background: var(--color-danger);
  color: white;
}

.template-edit-btn {
  padding: 12px 20px;
  background: transparent;
  border: 1px solid var(--color-accent);
  border-radius: var(--radius-md);
  color: var(--color-accent);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.template-edit-btn:hover {
  background: var(--color-accent);
  color: white;
}

/* Custom badge */
.custom-badge {
  display: inline-block;
  padding: 2px 8px;
  background: var(--color-accent);
  color: white;
  font-size: 10px;
  font-weight: 600;
  border-radius: 10px;
  margin-left: 8px;
  text-transform: uppercase;
}

.template-card.custom {
  border-color: var(--color-accent);
}

/* Create template button */
.create-template-btn {
  width: 100%;
  padding: 16px;
  margin-bottom: 20px;
  background: transparent;
  border: 2px dashed var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.create-template-btn:hover {
  border-color: var(--color-accent);
  color: var(--color-accent);
  background: rgba(var(--color-accent-rgb), 0.05);
}

/* Create template form */
.template-create h3 {
  font-size: 20px;
  font-weight: 600;
  margin-bottom: 20px;
}

.template-create-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.template-create-form .form-row {
  display: flex;
  flex-direction: column;
}

.template-create-form .form-row label {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.template-create-form .form-row input,
.template-create-form .form-row select {
  padding: 10px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 14px;
  background: var(--color-bg);
  color: var(--color-text);
}

.template-create-form .form-row input:focus,
.template-create-form .form-row select:focus {
  outline: none;
  border-color: var(--color-accent);
}

.template-create-form .form-row-group {
  display: grid;
  grid-template-columns: 80px 1fr 1fr;
  gap: 12px;
}

.template-create-form .icon-input {
  text-align: center;
  font-size: 20px;
}

/* Template tasks section */
.template-tasks-section {
  margin-top: 8px;
}

.template-tasks-section h4 {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text-secondary);
  margin-bottom: 12px;
}

.template-tasks-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 12px;
}

.template-task-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.template-task-row .task-number {
  width: 24px;
  color: var(--color-text-tertiary);
  font-size: 14px;
}

.template-task-row .task-title-input {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 14px;
  background: var(--color-bg);
  color: var(--color-text);
}

.template-task-row .task-title-input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.template-task-row .task-time-input {
  width: 70px;
  padding: 8px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  font-size: 14px;
  text-align: center;
  background: var(--color-bg);
  color: var(--color-text);
}

.template-task-row .task-time-input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.template-task-row .task-remove-btn {
  width: 28px;
  height: 28px;
  padding: 0;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  color: var(--color-text-tertiary);
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.template-task-row .task-remove-btn:hover:not(:disabled) {
  border-color: var(--color-danger);
  color: var(--color-danger);
}

.template-task-row .task-remove-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.add-task-btn {
  padding: 8px 16px;
  background: transparent;
  border: 1px dashed var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text-secondary);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.add-task-btn:hover {
  border-color: var(--color-accent);
  color: var(--color-accent);
}

.template-save-btn {
  margin-top: 12px;
  padding: 14px 24px;
  background: var(--color-accent);
  border: none;
  border-radius: var(--radius-md);
  color: white;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s ease;
}

.template-save-btn:hover {
  background: var(--color-accent-hover);
}

/* Mobile responsive */
@media (max-width: 768px) {
  .templates-btn span {
    display: none;
  }

  .templates-btn {
    padding: 8px;
  }

  .templates-modal {
    max-height: 90vh;
  }

  .template-grid {
    grid-template-columns: 1fr;
  }

  .template-create-form .form-row-group {
    grid-template-columns: 60px 1fr;
  }

  .template-create-form .form-row-group .form-row:last-child {
    grid-column: 1 / -1;
  }

  .template-task-row .task-time-input {
    width: 55px;
  }

  .template-actions {
    flex-direction: column;
  }
}

/* ========== Loop AI Widget ========== */
.loop-ai-widget {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.loop-ai-widget--collapsed {
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
  transition: all 0.2s;
  border-left: 3px solid;
}

.loop-ai-widget--collapsed:hover {
  background: rgba(255, 255, 255, 0.08);
}

.loop-ai-widget__icon {
  background: linear-gradient(135deg, #8b5cf6, #6366f1);
  color: white;
  font-size: 10px;
  font-weight: 700;
  padding: 4px 6px;
  border-radius: 4px;
}

.loop-ai-widget__label {
  color: rgba(255, 255, 255, 0.7);
  font-size: 13px;
}

.loop-ai-widget__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.02);
}

.loop-ai-widget__title {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 14px;
  font-weight: 500;
  color: white;
}

.loop-ai-widget__loop-badge {
  font-size: 11px;
  font-weight: 600;
  padding: 3px 8px;
  border-radius: 4px;
  color: white;
}

.loop-ai-widget__actions {
  display: flex;
  gap: 8px;
}

.loop-ai-widget__clear-btn,
.loop-ai-widget__close-btn {
  background: transparent;
  border: none;
  color: rgba(255, 255, 255, 0.5);
  font-size: 12px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: all 0.2s;
}

.loop-ai-widget__clear-btn:hover,
.loop-ai-widget__close-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.8);
}

.loop-ai-widget__close-btn {
  font-size: 18px;
  padding: 2px 8px;
}

.loop-ai-widget__messages {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  min-height: 200px;
  max-height: 350px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.loop-ai-widget--compact .loop-ai-widget__messages {
  min-height: 150px;
  max-height: 250px;
}

.loop-ai-widget__empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  text-align: center;
  color: rgba(255, 255, 255, 0.5);
}

.loop-ai-widget__empty p {
  margin: 0 0 16px;
  font-size: 14px;
}

.loop-ai-widget__suggestions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
}

.loop-ai-widget__suggestion {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 16px;
  padding: 6px 12px;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.7);
  cursor: pointer;
  transition: all 0.2s;
}

.loop-ai-widget__suggestion:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.15);
  color: white;
}

.loop-ai-widget__suggestion:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.loop-ai-widget__message {
  max-width: 85%;
  padding: 10px 14px;
  border-radius: 12px;
  font-size: 13px;
  line-height: 1.5;
}

.loop-ai-widget__message--user {
  align-self: flex-end;
  background: var(--loop-color, #6366f1);
  color: white;
  border-bottom-right-radius: 4px;
}

.loop-ai-widget__message--assistant {
  align-self: flex-start;
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.9);
  border-bottom-left-radius: 4px;
}

.loop-ai-widget__message-content {
  white-space: pre-wrap;
  word-wrap: break-word;
}

.loop-ai-widget__typing {
  display: flex;
  gap: 4px;
  padding: 4px 0;
}

.loop-ai-widget__typing span {
  width: 6px;
  height: 6px;
  background: rgba(255, 255, 255, 0.5);
  border-radius: 50%;
  animation: typingBounce 1.4s ease-in-out infinite;
}

.loop-ai-widget__typing span:nth-child(2) {
  animation-delay: 0.2s;
}

.loop-ai-widget__typing span:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes typingBounce {
  0%, 60%, 100% { transform: translateY(0); }
  30% { transform: translateY(-4px); }
}

.loop-ai-widget__error {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
  font-size: 12px;
}

.loop-ai-widget__error button {
  background: transparent;
  border: none;
  color: #ef4444;
  cursor: pointer;
  font-size: 12px;
  text-decoration: underline;
}

.loop-ai-widget__input-form {
  display: flex;
  gap: 8px;
  padding: 12px 16px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.02);
}

.loop-ai-widget__input {
  flex: 1;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 8px;
  padding: 10px 14px;
  font-size: 13px;
  color: white;
  outline: none;
  transition: all 0.2s;
}

.loop-ai-widget__input::placeholder {
  color: rgba(255, 255, 255, 0.4);
}

.loop-ai-widget__input:focus {
  border-color: var(--loop-color, #6366f1);
  background: rgba(255, 255, 255, 0.1);
}

.loop-ai-widget__send-btn {
  padding: 10px 18px;
  border: none;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
}

.loop-ai-widget__send-btn:hover:not(:disabled) {
  filter: brightness(1.1);
}

.loop-ai-widget__send-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Light mode */
[data-theme="light"] .loop-ai-widget {
  background: white;
  border-color: rgba(26, 26, 46, 0.1);
}

[data-theme="light"] .loop-ai-widget--collapsed:hover {
  background: rgba(26, 26, 46, 0.05);
}

[data-theme="light"] .loop-ai-widget__label {
  color: rgba(26, 26, 46, 0.7);
}

[data-theme="light"] .loop-ai-widget__header {
  border-bottom-color: rgba(26, 26, 46, 0.1);
  background: rgba(26, 26, 46, 0.02);
}

[data-theme="light"] .loop-ai-widget__title {
  color: var(--looops-navy);
}

[data-theme="light"] .loop-ai-widget__clear-btn,
[data-theme="light"] .loop-ai-widget__close-btn {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .loop-ai-widget__clear-btn:hover,
[data-theme="light"] .loop-ai-widget__close-btn:hover {
  background: rgba(26, 26, 46, 0.08);
  color: rgba(26, 26, 46, 0.8);
}

[data-theme="light"] .loop-ai-widget__empty {
  color: rgba(26, 26, 46, 0.5);
}

[data-theme="light"] .loop-ai-widget__suggestion {
  background: rgba(26, 26, 46, 0.05);
  border-color: rgba(26, 26, 46, 0.15);
  color: rgba(26, 26, 46, 0.7);
}

[data-theme="light"] .loop-ai-widget__suggestion:hover:not(:disabled) {
  background: rgba(26, 26, 46, 0.1);
  color: var(--looops-navy);
}

[data-theme="light"] .loop-ai-widget__message--assistant {
  background: rgba(26, 26, 46, 0.08);
  color: var(--looops-navy);
}

[data-theme="light"] .loop-ai-widget__typing span {
  background: rgba(26, 26, 46, 0.3);
}

[data-theme="light"] .loop-ai-widget__input-form {
  border-top-color: rgba(26, 26, 46, 0.1);
  background: rgba(26, 26, 46, 0.02);
}

[data-theme="light"] .loop-ai-widget__input {
  background: rgba(26, 26, 46, 0.05);
  border-color: rgba(26, 26, 46, 0.15);
  color: var(--looops-navy);
}

[data-theme="light"] .loop-ai-widget__input::placeholder {
  color: rgba(26, 26, 46, 0.4);
}

[data-theme="light"] .loop-ai-widget__input:focus {
  background: white;
}

/* ========== Smart Scheduler ========== */

.smart-scheduler {
  display: flex;
  flex-direction: column;
  gap: 20px;
  max-width: 900px;
}

.smart-scheduler-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 20px;
  padding: 20px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
}

.smart-header-title h3 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 4px;
}

.smart-header-subtitle {
  font-size: 13px;
  color: var(--color-text-tertiary);
}

.smart-toggle {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
}

.smart-toggle input {
  display: none;
}

.smart-toggle-slider {
  width: 44px;
  height: 24px;
  background: var(--color-border);
  border-radius: 12px;
  position: relative;
  transition: background 0.2s;
}

.smart-toggle-slider::after {
  content: "";
  position: absolute;
  top: 3px;
  left: 3px;
  width: 18px;
  height: 18px;
  background: white;
  border-radius: 50%;
  transition: transform 0.2s;
}

.smart-toggle input:checked + .smart-toggle-slider {
  background: var(--looops-sage);
}

.smart-toggle input:checked + .smart-toggle-slider::after {
  transform: translateX(20px);
}

.smart-toggle-label {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
}

.smart-nav-tabs {
  display: flex;
  gap: 8px;
  padding: 12px 16px;
  background: var(--color-surface);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 12px;
}

.smart-nav-tab {
  padding: 8px 16px;
  background: transparent;
  border: none;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all 0.2s;
}

.smart-nav-tab:hover {
  background: rgba(255, 255, 255, 0.05);
}

.smart-nav-tab.active {
  background: var(--color-accent);
  color: white;
}

.smart-nav-tab.back {
  margin-left: auto;
  color: var(--color-text-tertiary);
}

.smart-scheduler-content {
  padding: 24px;
  background: linear-gradient(145deg, var(--color-surface) 0%, var(--color-bg-secondary) 100%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 16px;
}

.smart-disabled-notice {
  text-align: center;
  padding: 40px 20px;
}

.smart-disabled-notice p {
  font-size: 15px;
  color: var(--color-text);
  margin-bottom: 8px;
}

.smart-disabled-hint {
  font-size: 13px;
  color: var(--color-text-tertiary);
}

/* Smart Scheduler Overview */
.smart-scheduler-overview {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.smart-today-card {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
}

.smart-today-badge {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  border-radius: 20px;
  color: white;
}

.smart-today-icon {
  font-size: 18px;
}

.smart-today-label {
  font-size: 14px;
  font-weight: 600;
}

.smart-today-info {
  flex: 1;
}

.smart-today-date {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  margin-bottom: 2px;
}

.smart-today-note {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.smart-stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.smart-stat-card {
  padding: 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  text-align: center;
}

.smart-stat-value {
  display: block;
  font-size: 28px;
  font-weight: 700;
  color: var(--color-text);
}

.smart-stat-label {
  display: block;
  font-size: 12px;
  color: var(--color-text-tertiary);
  margin-top: 4px;
}

.smart-upcoming h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 12px;
}

.smart-upcoming-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.smart-upcoming-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
}

.smart-upcoming-icon {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  font-size: 16px;
}

.smart-upcoming-date {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.smart-upcoming-type {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.smart-upcoming-empty {
  font-size: 13px;
  color: var(--color-text-tertiary);
  padding: 16px;
  text-align: center;
}

.smart-actions {
  display: flex;
  gap: 12px;
}

.smart-action-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 14px 20px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  cursor: pointer;
  transition: all 0.2s;
}

.smart-action-btn:hover {
  background: var(--color-surface-hover);
}

.smart-action-btn.primary {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
}

.smart-action-btn.primary:hover {
  background: var(--color-accent-hover);
}

/* ========== Custody Calendar ========== */

.custody-calendar {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.custody-calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.custody-calendar-header h3 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
}

.custody-close-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 20px;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.custody-close-btn:hover {
  background: rgba(255, 255, 255, 0.05);
}

.custody-type-selector {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.custody-type-label {
  font-size: 13px;
  color: var(--color-text-secondary);
}

.custody-type-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.custody-type-chip {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  background: var(--color-bg-secondary);
  border: 2px solid var(--color-border);
  border-radius: 20px;
  font-size: 13px;
  color: var(--color-text);
  cursor: pointer;
  transition: all 0.2s;
}

.custody-type-chip:hover {
  background: var(--color-surface-hover);
}

.custody-type-chip.selected {
  border-color: var(--chip-color);
  background: rgba(255, 255, 255, 0.05);
}

.custody-type-icon {
  font-size: 14px;
}

.custody-bulk-actions {
  display: flex;
  gap: 10px;
}

.custody-bulk-btn {
  padding: 10px 16px;
  background: var(--color-accent);
  border: none;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 500;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
}

.custody-bulk-btn:hover {
  background: var(--color-accent-hover);
}

.custody-bulk-btn.secondary {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  color: var(--color-text);
}

.custody-bulk-btn.secondary:hover {
  background: var(--color-surface-hover);
}

.custody-month-nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 0;
}

.custody-nav-btn {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  font-size: 18px;
  color: var(--color-text);
  cursor: pointer;
  transition: all 0.2s;
}

.custody-nav-btn:hover {
  background: var(--color-surface-hover);
}

.custody-month-display {
  display: flex;
  align-items: center;
  gap: 12px;
}

.custody-month-name {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
}

.custody-today-btn {
  padding: 6px 12px;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  font-size: 12px;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.custody-today-btn:hover {
  background: rgba(255, 255, 255, 0.05);
}

.custody-calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
}

.custody-day-header {
  padding: 10px 0;
  text-align: center;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-tertiary);
}

.custody-day {
  position: relative;
  aspect-ratio: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s;
}

.custody-day:hover {
  background: var(--color-surface-hover);
}

.custody-day.other-month {
  opacity: 0.4;
}

.custody-day.today {
  border-color: var(--color-accent);
  border-width: 2px;
}

.custody-day.marked {
  background: color-mix(in srgb, var(--day-color) 20%, var(--color-bg-secondary));
  border-color: var(--day-color);
}

.custody-day-number {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
}

.custody-day-icon {
  font-size: 12px;
}

.custody-day-dot {
  width: 4px;
  height: 4px;
  background: var(--color-text-tertiary);
  border-radius: 50%;
}

.custody-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  padding: 12px;
  background: var(--color-bg-secondary);
  border-radius: 10px;
}

.custody-legend-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-tertiary);
}

.custody-legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--color-text-secondary);
}

.custody-legend-dot {
  width: 10px;
  height: 10px;
  border-radius: 3px;
}

/* Custody Modal */
.custody-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.custody-modal {
  width: 90%;
  max-width: 400px;
  padding: 24px;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
}

.custody-modal h4 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 8px;
}

.custody-modal-hint {
  font-size: 13px;
  color: var(--color-text-tertiary);
  margin-bottom: 20px;
}

.custody-pattern-options {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 16px;
}

.custody-pattern-btn {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
  padding: 14px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.custody-pattern-btn:hover {
  background: var(--color-surface-hover);
  border-color: var(--color-accent);
}

.custody-pattern-icon {
  font-size: 20px;
}

.custody-pattern-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
}

.custody-pattern-desc {
  font-size: 12px;
  color: var(--color-text-tertiary);
}

.custody-modal-cancel {
  width: 100%;
  padding: 12px;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: 10px;
  font-size: 14px;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.custody-modal-cancel:hover {
  background: rgba(255, 255, 255, 0.05);
}

/* ========== Day Type Config Editor ========== */

.daytype-config-editor {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.daytype-config-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.daytype-config-header h3 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
}

.daytype-close-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 20px;
  color: var(--color-text-secondary);
  cursor: pointer;
}

.daytype-close-btn:hover {
  background: rgba(255, 255, 255, 0.05);
}

.daytype-tabs {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.daytype-tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  background: var(--color-bg-secondary);
  border: 2px solid var(--color-border);
  border-radius: 10px;
  font-size: 13px;
  color: var(--color-text);
  cursor: pointer;
  transition: all 0.2s;
}

.daytype-tab:hover {
  background: var(--color-surface-hover);
}

.daytype-tab.active {
  border-color: var(--tab-color);
  background: color-mix(in srgb, var(--tab-color) 15%, var(--color-bg-secondary));
}

.daytype-tab-icon {
  font-size: 14px;
}

.daytype-config-content {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.daytype-info-card {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
}

.daytype-info-badge {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
}

.daytype-info-icon {
  font-size: 24px;
}

.daytype-info-details h4 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 4px;
}

.daytype-info-hint {
  font-size: 13px;
  color: var(--color-text-tertiary);
}

.daytype-section {
  padding: 20px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 12px;
}

.daytype-section h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 8px;
}

.daytype-section-hint {
  font-size: 13px;
  color: var(--color-text-tertiary);
  margin-bottom: 16px;
}

.daytype-capacity-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}

.daytype-capacity-item {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 14px;
  background: var(--color-surface);
  border-radius: 10px;
}

.daytype-capacity-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.daytype-capacity-icon {
  font-size: 18px;
}

.daytype-capacity-name {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.daytype-capacity-label {
  font-size: 11px;
  font-weight: 600;
}

.daytype-capacity-slider {
  width: 100%;
  height: 6px;
  -webkit-appearance: none;
  appearance: none;
  background: var(--color-border);
  border-radius: 3px;
  cursor: pointer;
}

.daytype-capacity-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px;
  height: 16px;
  background: var(--slider-color, var(--color-accent));
  border-radius: 50%;
  cursor: pointer;
}

.daytype-capacity-slider::-moz-range-thumb {
  width: 16px;
  height: 16px;
  background: var(--slider-color, var(--color-accent));
  border-radius: 50%;
  border: none;
  cursor: pointer;
}

.daytype-capacity-scale {
  display: flex;
  justify-content: space-between;
  font-size: 10px;
  color: var(--color-text-tertiary);
}

.daytype-routines-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.daytype-routine-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  background: var(--color-surface);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s;
}

.daytype-routine-item:hover {
  background: var(--color-surface-hover);
}

.daytype-routine-item input {
  display: none;
}

.daytype-routine-checkbox {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg-secondary);
  border: 2px solid var(--color-border);
  border-radius: 6px;
  font-size: 12px;
  color: var(--looops-sage);
}

.daytype-routine-item input:checked + .daytype-routine-checkbox {
  background: var(--looops-sage);
  border-color: var(--looops-sage);
  color: white;
}

.daytype-routine-icon {
  font-size: 16px;
}

.daytype-routine-name {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.daytype-routine-schedule {
  font-size: 11px;
  color: var(--color-text-tertiary);
  text-transform: capitalize;
}

.daytype-routines-empty {
  font-size: 13px;
  color: var(--color-text-tertiary);
  text-align: center;
  padding: 16px;
}

/* Add button tab */
.daytype-tab--add {
  border-style: dashed;
  color: var(--color-text-tertiary);
}

.daytype-tab--add:hover {
  border-color: var(--color-text-secondary);
  color: var(--color-text);
}

/* Actions for custom day types */
.daytype-info-actions {
  display: flex;
  gap: 8px;
  margin-left: auto;
}

.daytype-edit-btn,
.daytype-delete-btn {
  padding: 8px 12px;
  background: transparent;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.2s;
}

.daytype-edit-btn:hover {
  background: rgba(59, 130, 246, 0.1);
  border-color: #3B82F6;
}

.daytype-delete-btn:hover {
  background: rgba(239, 68, 68, 0.1);
  border-color: #EF4444;
}

.daytype-info-details {
  flex: 1;
}

/* Create Day Type Modal */
.daytype-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.daytype-modal {
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 24px;
  width: 100%;
  max-width: 400px;
  max-height: 90vh;
  overflow-y: auto;
}

.daytype-modal h4 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: 8px;
}

.daytype-modal-hint {
  font-size: 13px;
  color: var(--color-text-tertiary);
  margin-bottom: 20px;
}

.daytype-create-form {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.daytype-create-field label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-secondary);
  margin-bottom: 8px;
}

.daytype-create-field input[type="text"] {
  width: 100%;
  padding: 12px 14px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  font-size: 14px;
  color: var(--color-text);
}

.daytype-create-field input[type="text"]:focus {
  outline: none;
  border-color: var(--looops-coral);
}

.daytype-icon-grid {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 8px;
}

.daytype-icon-btn {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg-secondary);
  border: 2px solid var(--color-border);
  border-radius: 8px;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s;
}

.daytype-icon-btn:hover {
  background: var(--color-surface-hover);
}

.daytype-icon-btn.selected {
  border-color: var(--looops-coral);
  background: rgba(242, 112, 89, 0.15);
}

.daytype-color-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.daytype-color-btn {
  width: 36px;
  height: 36px;
  border: 3px solid transparent;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s;
}

.daytype-color-btn:hover {
  transform: scale(1.1);
}

.daytype-color-btn.selected {
  border-color: white;
  box-shadow: 0 0 0 2px var(--color-text);
}

.daytype-create-preview {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--color-bg-secondary);
  border-radius: 10px;
}

.daytype-create-preview-label {
  font-size: 13px;
  color: var(--color-text-tertiary);
}

.daytype-create-preview-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  color: white;
}

.daytype-modal-actions {
  display: flex;
  gap: 12px;
  margin-top: 20px;
}

.daytype-modal-cancel {
  flex: 1;
  padding: 12px;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 10px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-text);
  cursor: pointer;
}

.daytype-modal-cancel:hover {
  background: var(--color-surface-hover);
}

.daytype-modal-create {
  flex: 1;
  padding: 12px;
  background: var(--looops-coral);
  border: none;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 600;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
}

.daytype-modal-create:hover:not(:disabled) {
  filter: brightness(1.1);
}

.daytype-modal-create:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Responsive for Smart Scheduler */
@media (max-width: 768px) {
  .smart-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .smart-stats-grid .smart-stat-card:last-child {
    grid-column: span 2;
  }

  .daytype-capacity-grid {
    grid-template-columns: 1fr;
  }

  .custody-type-chips {
    flex-wrap: nowrap;
    overflow-x: auto;
    padding-bottom: 8px;
  }

  .custody-type-chip {
    flex-shrink: 0;
  }
}

/* ========== Meal Prep Feature ========== */

/* Kitchen Onboarding */
.kitchen-onboarding {
  max-width: 600px;
  margin: 0 auto;
  padding: 40px 24px;
  min-height: 100%;
  display: flex;
  flex-direction: column;
}

.kitchen-onboarding__progress {
  height: 4px;
  background: var(--color-gray-700);
  border-radius: 2px;
  margin-bottom: 32px;
  overflow: hidden;
}

.kitchen-onboarding__progress-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--color-accent), var(--looops-amber));
  border-radius: 2px;
  transition: width 0.3s ease;
}

.kitchen-onboarding__close {
  position: absolute;
  top: 16px;
  right: 16px;
  width: 36px;
  height: 36px;
  border: none;
  background: var(--color-gray-700);
  color: var(--color-gray-300);
  border-radius: 50%;
  font-size: 20px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.kitchen-onboarding__close:hover {
  background: var(--color-gray-600);
  color: var(--color-white);
}

.kitchen-onboarding__content {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.kitchen-onboarding__step {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.kitchen-onboarding__welcome {
  text-align: center;
  justify-content: center;
  align-items: center;
  gap: 24px;
}

.kitchen-onboarding__icon {
  font-size: 64px;
  line-height: 1;
}

.kitchen-onboarding__icon--success {
  width: 80px;
  height: 80px;
  background: var(--looops-sage);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 32px;
}

.kitchen-onboarding__title {
  font-size: 28px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.kitchen-onboarding__subtitle {
  font-size: 16px;
  color: var(--color-gray-400);
  margin: 0;
}

.kitchen-onboarding__btn {
  padding: 14px 32px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
}

.kitchen-onboarding__btn--primary {
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  color: white;
}

.kitchen-onboarding__btn--primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px var(--color-accent-glow);
}

.kitchen-onboarding__btn--secondary {
  background: var(--color-gray-700);
  color: var(--color-gray-200);
}

.kitchen-onboarding__btn--secondary:hover {
  background: var(--color-gray-600);
}

.kitchen-onboarding__btn--ghost {
  background: transparent;
  color: var(--color-gray-400);
}

.kitchen-onboarding__btn--ghost:hover {
  color: var(--color-gray-200);
}

.kitchen-onboarding__btn--large {
  padding: 16px 48px;
  font-size: 18px;
}

.kitchen-onboarding__actions {
  display: flex;
  gap: 16px;
  margin-top: auto;
  padding-top: 32px;
  justify-content: flex-end;
}

/* Skill Level Step */
.kitchen-onboarding__options {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 24px;
  flex: 1;
}

.kitchen-onboarding__option {
  padding: 16px 20px;
  background: var(--color-gray-800);
  border: 2px solid var(--color-gray-700);
  border-radius: 12px;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s ease;
}

.kitchen-onboarding__option:hover {
  border-color: var(--color-gray-500);
}

.kitchen-onboarding__option--selected {
  border-color: var(--color-accent);
  background: var(--color-accent-subtle);
}

.kitchen-onboarding__option-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 4px;
}

.kitchen-onboarding__option-radio {
  color: var(--color-gray-500);
  font-size: 18px;
}

.kitchen-onboarding__option--selected .kitchen-onboarding__option-radio {
  color: var(--color-accent);
}

.kitchen-onboarding__option-label {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
}

.kitchen-onboarding__option-desc {
  font-size: 14px;
  color: var(--color-gray-400);
  margin: 0;
  padding-left: 30px;
}

/* Equipment Step */
.kitchen-onboarding__equipment {
  overflow-y: auto;
  flex: 1;
}

.kitchen-onboarding__equipment-list {
  display: flex;
  flex-direction: column;
  gap: 24px;
  margin-top: 24px;
}

.kitchen-onboarding__equipment-category {
  padding-bottom: 16px;
  border-bottom: 1px solid var(--color-gray-700);
}

.kitchen-onboarding__category-title {
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-gray-400);
  margin-bottom: 12px;
}

.kitchen-onboarding__equipment-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.kitchen-onboarding__equipment-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.kitchen-onboarding__equipment-item:hover {
  border-color: var(--color-gray-500);
}

.kitchen-onboarding__equipment-item--owned {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
}

.kitchen-onboarding__equipment-item input {
  display: none;
}

.kitchen-onboarding__equipment-check {
  width: 20px;
  height: 20px;
  border: 2px solid var(--color-gray-500);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  color: white;
}

.kitchen-onboarding__equipment-item--owned .kitchen-onboarding__equipment-check {
  background: var(--color-accent);
  border-color: var(--color-accent);
}

.kitchen-onboarding__equipment-name {
  font-size: 14px;
  color: var(--color-gray-200);
}

.kitchen-onboarding__equipment-remove {
  margin-left: auto;
  padding: 0 4px;
  background: none;
  border: none;
  color: var(--color-gray-500);
  font-size: 16px;
  cursor: pointer;
}

.kitchen-onboarding__equipment-remove:hover {
  color: var(--color-accent);
}

.kitchen-onboarding__add-custom {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.kitchen-onboarding__add-custom input {
  flex: 1;
  padding: 8px 12px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
}

.kitchen-onboarding__add-custom input::placeholder {
  color: var(--color-gray-500);
}

.kitchen-onboarding__add-btn {
  padding: 8px 16px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 8px;
  color: var(--color-gray-200);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.kitchen-onboarding__add-btn:hover:not(:disabled) {
  background: var(--color-gray-600);
}

.kitchen-onboarding__add-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Dietary Step */
.kitchen-onboarding__dietary-list {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 24px;
}

.kitchen-onboarding__dietary-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  background: var(--color-gray-800);
  border: 2px solid var(--color-gray-700);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.kitchen-onboarding__dietary-item:hover {
  border-color: var(--color-gray-500);
}

.kitchen-onboarding__dietary-item--selected {
  border-color: var(--color-accent);
  background: var(--color-accent-subtle);
}

.kitchen-onboarding__dietary-item--allergy.kitchen-onboarding__dietary-item--selected {
  border-color: var(--looops-coral);
  background: rgba(242, 112, 89, 0.15);
}

.kitchen-onboarding__dietary-item input {
  display: none;
}

.kitchen-onboarding__dietary-check {
  width: 20px;
  height: 20px;
  border: 2px solid var(--color-gray-500);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  color: white;
}

.kitchen-onboarding__dietary-item--selected .kitchen-onboarding__dietary-check {
  background: var(--color-accent);
  border-color: var(--color-accent);
}

.kitchen-onboarding__dietary-label {
  font-size: 14px;
  color: var(--color-gray-200);
}

.kitchen-onboarding__dietary-badge {
  font-size: 10px;
  padding: 2px 6px;
  background: var(--looops-coral);
  color: white;
  border-radius: 4px;
  text-transform: uppercase;
  font-weight: 600;
}

.kitchen-onboarding__dietary-remove {
  padding: 0 4px;
  background: none;
  border: none;
  color: var(--color-gray-500);
  font-size: 16px;
  cursor: pointer;
}

/* Confirmation Step */
.kitchen-onboarding__confirmation {
  text-align: center;
  justify-content: center;
  align-items: center;
  gap: 24px;
}

.kitchen-onboarding__summary {
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 16px;
  padding: 24px;
  text-align: left;
  width: 100%;
  max-width: 400px;
}

.kitchen-onboarding__summary-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-400);
  margin-bottom: 16px;
}

.kitchen-onboarding__summary-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 0;
  border-bottom: 1px solid var(--color-gray-700);
}

.kitchen-onboarding__summary-item:last-child {
  border-bottom: none;
}

.kitchen-onboarding__summary-icon {
  font-size: 24px;
}

.kitchen-onboarding__summary-text {
  font-size: 16px;
  color: var(--color-white);
}

.kitchen-onboarding__hint {
  font-size: 14px;
  color: var(--color-gray-500);
}

/* Meal Prep Screen */
.meal-prep-screen {
  padding: 24px;
  overflow-y: auto;
  max-height: 100%;
}

.meal-prep-screen--embedded {
  padding: 0;
  max-height: none;
  overflow-y: visible;
}

.meal-prep__embedded-header {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-bottom: 16px;
}

.meal-prep__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 24px;
  gap: 16px;
  flex-wrap: wrap;
}

.meal-prep__header h2 {
  font-size: 28px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.meal-prep__subtitle {
  font-size: 14px;
  color: var(--color-gray-400);
  margin: 4px 0 0 0;
}

.meal-prep__header-actions {
  display: flex;
  gap: 12px;
}

.meal-prep__add-btn {
  padding: 12px 20px;
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.meal-prep__add-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px var(--color-accent-glow);
}

.meal-prep__add-btn--secondary {
  background: var(--color-gray-700);
}

.meal-prep__add-btn--secondary:hover {
  background: var(--color-gray-600);
  box-shadow: none;
  transform: none;
}

/* Filters */
.meal-prep__filters {
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 24px;
}

.meal-prep__search {
  position: relative;
  margin-bottom: 16px;
}

.meal-prep__search-icon {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 16px;
}

.meal-prep__search input {
  width: 100%;
  padding: 12px 40px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
}

.meal-prep__search input::placeholder {
  color: var(--color-gray-500);
}

.meal-prep__search input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.meal-prep__search-clear {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: var(--color-gray-500);
  font-size: 18px;
  cursor: pointer;
}

.meal-prep__filter-row {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 16px;
}

.meal-prep__filter-select {
  padding: 8px 12px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 6px;
  color: var(--color-gray-200);
  font-size: 13px;
  cursor: pointer;
}

.meal-prep__filter-select:focus {
  outline: none;
  border-color: var(--color-accent);
}

.meal-prep__filter-toggle {
  padding: 8px 12px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 6px;
  color: var(--color-gray-200);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.meal-prep__filter-toggle:hover {
  border-color: var(--color-gray-500);
}

.meal-prep__filter-toggle--active {
  background: var(--looops-amber);
  border-color: var(--looops-amber);
  color: var(--color-gray-900);
}

.meal-prep__filter-clear {
  padding: 8px 12px;
  background: transparent;
  border: 1px solid var(--color-gray-600);
  border-radius: 6px;
  color: var(--color-gray-400);
  font-size: 13px;
  cursor: pointer;
}

.meal-prep__filter-clear:hover {
  color: var(--color-white);
  border-color: var(--color-gray-400);
}

.meal-prep__controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.meal-prep__sort {
  display: flex;
  align-items: center;
  gap: 8px;
}

.meal-prep__sort-label {
  font-size: 13px;
  color: var(--color-gray-400);
}

.meal-prep__sort-select {
  padding: 6px 10px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 6px;
  color: var(--color-gray-200);
  font-size: 13px;
}

.meal-prep__view-toggle {
  display: flex;
  gap: 4px;
}

.meal-prep__view-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 6px;
  color: var(--color-gray-400);
  font-size: 16px;
  cursor: pointer;
}

.meal-prep__view-btn:hover {
  color: var(--color-gray-200);
}

.meal-prep__view-btn--active {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
  color: var(--color-accent);
}

/* Recipe Grid */
.meal-prep__recipes--grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 20px;
}

.meal-prep__recipes--list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.meal-prep__count {
  text-align: center;
  padding: 24px;
  color: var(--color-gray-500);
  font-size: 14px;
}

/* Empty State */
.meal-prep__empty {
  text-align: center;
  padding: 60px 24px;
}

.meal-prep__empty-icon {
  font-size: 64px;
  margin-bottom: 16px;
}

.meal-prep__empty h3 {
  font-size: 20px;
  color: var(--color-white);
  margin-bottom: 8px;
}

.meal-prep__empty p {
  color: var(--color-gray-400);
  margin-bottom: 24px;
}

.meal-prep__empty-sources {
  background: var(--color-gray-800);
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 24px;
}

.meal-prep__empty-sources-label {
  font-size: 13px;
  color: var(--color-gray-500);
  margin-bottom: 12px;
}

.meal-prep__empty-sources-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
}

.meal-prep__empty-source {
  padding: 6px 12px;
  background: var(--color-gray-700);
  border-radius: 6px;
  font-size: 13px;
  color: var(--color-gray-200);
}

.meal-prep__empty-btn {
  padding: 12px 24px;
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

/* Recipe Card */
.recipe-card {
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.2s ease;
}

.recipe-card:hover {
  border-color: var(--color-gray-600);
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.recipe-card__image {
  position: relative;
  height: 160px;
  background: var(--color-gray-900);
  cursor: pointer;
}

.recipe-card__image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.recipe-card__placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--color-gray-800), var(--color-gray-900));
}

.recipe-card__placeholder-icon {
  font-size: 48px;
  opacity: 0.5;
}

.recipe-card__favorite-badge {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 28px;
  height: 28px;
  background: var(--looops-amber);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 14px;
}

.recipe-card__content {
  padding: 16px;
}

.recipe-card__title {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 4px 0;
  cursor: pointer;
}

.recipe-card__title:hover {
  color: var(--color-accent);
}

.recipe-card__source {
  font-size: 12px;
  color: var(--color-gray-400);
  margin-bottom: 12px;
}

.recipe-card__meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--color-gray-300);
  margin-bottom: 8px;
}

.recipe-card__time-icon,
.recipe-card__servings-icon {
  margin-right: 4px;
}

.recipe-card__divider {
  color: var(--color-gray-600);
}

.recipe-card__difficulty {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.recipe-card__difficulty-label {
  font-size: 12px;
  color: var(--color-gray-500);
}

.recipe-card__difficulty-dots {
  display: flex;
  gap: 4px;
}

.recipe-card__difficulty-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  border: 1px solid;
}

.recipe-card__tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-bottom: 12px;
}

.recipe-card__tag {
  padding: 4px 8px;
  background: var(--color-gray-700);
  border-radius: 4px;
  font-size: 11px;
  color: var(--color-gray-300);
}

.recipe-card__tag--more {
  background: var(--color-gray-600);
}

.recipe-card__actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.recipe-card__action {
  padding: 8px 12px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 6px;
  color: var(--color-gray-200);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.recipe-card__action:hover {
  background: var(--color-gray-600);
}

.recipe-card__action--plan {
  flex: 1;
}

.recipe-card__action--view {
  flex: 1;
  background: var(--color-accent);
  color: white;
}

.recipe-card__action--view:hover {
  background: var(--color-accent-hover);
}

.recipe-card__action--favorite {
  width: 36px;
  font-size: 16px;
}

.recipe-card__action--favorited {
  color: var(--looops-amber);
}

.recipe-card__stats {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--color-gray-700);
  font-size: 12px;
  color: var(--color-gray-400);
}

.recipe-card__rating {
  color: var(--looops-amber);
}

/* Compact Recipe Card (List View) */
.recipe-card--compact {
  display: flex;
  flex-direction: row;
}

.recipe-card--compact .recipe-card__image {
  width: 120px;
  height: auto;
  min-height: 100px;
  flex-shrink: 0;
}

.recipe-card--compact .recipe-card__content {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.recipe-card--compact .recipe-card__tags {
  display: none;
}

.recipe-card--compact .recipe-card__actions {
  margin-top: auto;
}

/* Recipe Card Light Mode */
[data-theme="light"] .recipe-card {
  background: var(--color-white);
  border-color: var(--color-gray-200);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

[data-theme="light"] .recipe-card:hover {
  border-color: var(--color-gray-300);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

[data-theme="light"] .recipe-card__image {
  background: var(--color-gray-100);
}

[data-theme="light"] .recipe-card__placeholder {
  background: linear-gradient(135deg, var(--color-gray-100), var(--color-gray-200));
}

[data-theme="light"] .recipe-card__title {
  color: var(--color-gray-900);
}

[data-theme="light"] .recipe-card__title:hover {
  color: var(--color-accent);
}

[data-theme="light"] .recipe-card__source {
  color: var(--color-gray-500);
}

[data-theme="light"] .recipe-card__meta {
  color: var(--color-gray-600);
}

[data-theme="light"] .recipe-card__divider {
  color: var(--color-gray-300);
}

[data-theme="light"] .recipe-card__difficulty-label {
  color: var(--color-gray-500);
}

[data-theme="light"] .recipe-card__tag {
  background: var(--color-gray-100);
  color: var(--color-gray-700);
}

[data-theme="light"] .recipe-card__action {
  background: var(--color-gray-100);
  color: var(--color-gray-600);
}

[data-theme="light"] .recipe-card__action:hover {
  background: var(--color-gray-200);
  color: var(--color-gray-800);
}

[data-theme="light"] .recipe-card__action--view {
  background: var(--color-accent);
  color: white;
}

[data-theme="light"] .recipe-card__action--view:hover {
  background: var(--color-accent-hover);
}

[data-theme="light"] .recipe-card__stats {
  border-color: var(--color-gray-200);
  color: var(--color-gray-500);
}

/* Import Recipe Modal Light Mode */
[data-theme="light"] .import-recipe-modal {
  background: var(--color-white);
  border-color: var(--color-gray-200);
}

[data-theme="light"] .import-recipe-modal__header {
  border-color: var(--color-gray-200);
}

[data-theme="light"] .import-recipe-modal__header h2 {
  color: var(--color-gray-900);
}

[data-theme="light"] .import-recipe-modal__close {
  color: var(--color-gray-500);
}

[data-theme="light"] .import-recipe-modal__close:hover {
  color: var(--color-gray-700);
}

[data-theme="light"] .import-recipe-modal__label {
  color: var(--color-gray-700);
}

[data-theme="light"] .import-recipe-modal__url-input input {
  background: var(--color-white);
  border-color: var(--color-gray-300);
  color: var(--color-gray-900);
}

[data-theme="light"] .import-recipe-modal__url-input input:focus {
  border-color: var(--color-accent);
}

[data-theme="light"] .import-recipe-modal__sources-label {
  color: var(--color-gray-600);
}

[data-theme="light"] .import-recipe-modal__source {
  background: var(--color-gray-100);
  color: var(--color-gray-700);
}

[data-theme="light"] .import-recipe-modal__field label {
  color: var(--color-gray-600);
}

[data-theme="light"] .import-recipe-modal__field input {
  background: var(--color-white);
  border-color: var(--color-gray-300);
  color: var(--color-gray-900);
}

[data-theme="light"] .import-recipe-modal__author {
  color: var(--color-gray-600);
}

[data-theme="light"] .import-recipe-modal__summary {
  background: var(--color-gray-50);
}

[data-theme="light"] .import-recipe-modal__summary-count {
  color: var(--color-gray-900);
}

[data-theme="light"] .import-recipe-modal__summary-label {
  color: var(--color-gray-500);
}

[data-theme="light"] .import-recipe-modal__equipment label,
[data-theme="light"] .import-recipe-modal__tags label,
[data-theme="light"] .import-recipe-modal__course label {
  color: var(--color-gray-600);
}

[data-theme="light"] .import-recipe-modal__equipment-item,
[data-theme="light"] .import-recipe-modal__tag {
  background: var(--color-gray-100);
  color: var(--color-gray-700);
}

[data-theme="light"] .import-recipe-modal__tag-remove {
  color: var(--color-gray-400);
}

[data-theme="light"] .import-recipe-modal__tag-remove:hover {
  background: var(--color-gray-200);
  color: var(--color-gray-700);
}

[data-theme="light"] .import-recipe-modal__tag-add input {
  background: var(--color-white);
  border-color: var(--color-gray-300);
  color: var(--color-gray-900);
}

[data-theme="light"] .import-recipe-modal__tag-add button {
  background: var(--color-gray-100);
  border-color: var(--color-gray-300);
  color: var(--color-gray-700);
}

[data-theme="light"] .import-recipe-modal__tag-add button:hover:not(:disabled) {
  background: var(--color-gray-200);
  color: var(--color-gray-900);
}

[data-theme="light"] .import-recipe-modal__course-option {
  color: var(--color-gray-700);
}

[data-theme="light"] .import-recipe-modal__actions {
  border-color: var(--color-gray-200);
}

[data-theme="light"] .import-recipe-modal__btn--secondary {
  background: var(--color-gray-100);
  color: var(--color-gray-700);
}

[data-theme="light"] .import-recipe-modal__btn--secondary:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .import-recipe-modal__error {
  background: #fef2f2;
  color: #dc2626;
}

[data-theme="light"] .import-recipe-modal__loading p {
  color: var(--color-gray-600);
}

[data-theme="light"] .import-recipe-modal__loading-hint {
  color: var(--color-gray-500);
}

[data-theme="light"] .import-recipe-modal__error-state h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .import-recipe-modal__error-state p {
  color: var(--color-gray-600);
}

/* Light mode - Meal Prep Screen */
[data-theme="light"] .meal-prep-screen {
  background: var(--color-gray-50) !important;
}

[data-theme="light"] .meal-prep__header {
  background: transparent !important;
}

[data-theme="light"] .meal-prep__header h2 {
  color: var(--color-gray-900) !important;
}

[data-theme="light"] .meal-prep__subtitle {
  color: var(--color-gray-600) !important;
}

[data-theme="light"] .meal-prep__add-btn {
  color: white;
}

[data-theme="light"] .meal-prep__add-btn--secondary {
  background: var(--color-gray-200);
  color: var(--color-gray-700);
}

[data-theme="light"] .meal-prep__add-btn--secondary:hover {
  background: var(--color-gray-300);
}

[data-theme="light"] .meal-prep__filters {
  background: var(--color-white) !important;
  border: 1px solid var(--color-gray-200) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

[data-theme="light"] .meal-prep__search input {
  background: var(--color-gray-50) !important;
  border: 1px solid var(--color-gray-200) !important;
  color: var(--color-gray-900) !important;
}

[data-theme="light"] .meal-prep__search input::placeholder {
  color: var(--color-gray-500);
}

[data-theme="light"] .meal-prep__search input:focus {
  background: var(--color-white);
  border-color: var(--color-accent);
}

[data-theme="light"] .meal-prep__search-clear {
  color: var(--color-gray-400);
}

[data-theme="light"] .meal-prep__search-clear:hover {
  color: var(--color-gray-600);
}

[data-theme="light"] .meal-prep__filter-select {
  background: var(--color-white) !important;
  border: 1px solid var(--color-gray-200) !important;
  color: var(--color-gray-700) !important;
}

[data-theme="light"] .meal-prep__filter-select:focus {
  border-color: var(--color-accent);
}

[data-theme="light"] .meal-prep__filter-toggle {
  background: var(--color-white) !important;
  border: 1px solid var(--color-gray-200) !important;
  color: var(--color-gray-700) !important;
}

[data-theme="light"] .meal-prep__filter-toggle:hover {
  border-color: var(--color-gray-400);
}

[data-theme="light"] .meal-prep__filter-toggle--active {
  background: var(--color-amber-100);
  border-color: var(--color-amber-300);
  color: var(--color-amber-700);
}

[data-theme="light"] .meal-prep__filter-clear {
  color: var(--color-gray-500);
}

[data-theme="light"] .meal-prep__filter-clear:hover {
  color: var(--color-accent);
}

[data-theme="light"] .meal-prep__sort-label {
  color: var(--color-gray-500);
}

[data-theme="light"] .meal-prep__sort-select {
  background: var(--color-white);
  border-color: var(--color-gray-200);
  color: var(--color-gray-700);
}

[data-theme="light"] .meal-prep__view-btn {
  background: var(--color-white);
  border-color: var(--color-gray-200);
  color: var(--color-gray-500);
}

[data-theme="light"] .meal-prep__view-btn:hover {
  border-color: var(--color-gray-400);
  color: var(--color-gray-700);
}

[data-theme="light"] .meal-prep__view-btn--active {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: var(--color-white);
}

[data-theme="light"] .meal-prep__count {
  color: var(--color-gray-500);
}

[data-theme="light"] .meal-prep__empty {
  color: var(--color-gray-700);
}

[data-theme="light"] .meal-prep__empty h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .meal-prep__empty p {
  color: var(--color-gray-600);
}

[data-theme="light"] .meal-prep__empty-sources {
  background: var(--color-gray-50);
  border-color: var(--color-gray-200);
}

[data-theme="light"] .meal-prep__empty-sources-label {
  color: var(--color-gray-600);
}

[data-theme="light"] .meal-prep__empty-source {
  background: var(--color-white);
  border-color: var(--color-gray-200);
  color: var(--color-gray-700);
}

/* Light mode - Meal Prep Tabs */
[data-theme="light"] .meal-prep__tabs {
  background: transparent;
  border-bottom-color: var(--color-gray-200);
}

[data-theme="light"] .meal-prep__tab {
  color: var(--color-gray-600) !important;
  background: var(--color-white) !important;
  border: 1px solid var(--color-gray-200) !important;
}

[data-theme="light"] .meal-prep__tab:hover:not(:disabled) {
  color: var(--color-gray-900);
  background: var(--color-gray-100);
  border-color: var(--color-gray-300);
}

[data-theme="light"] .meal-prep__tab--active {
  background: var(--color-accent) !important;
  border: 1px solid var(--color-accent) !important;
  color: var(--color-white) !important;
}

[data-theme="light"] .meal-prep__tab:disabled {
  color: var(--color-gray-400);
}

[data-theme="light"] .meal-prep__tab-count {
  background: var(--color-gray-200);
  color: var(--color-gray-600);
}

[data-theme="light"] .meal-prep__tab--active .meal-prep__tab-count {
  background: rgba(255, 255, 255, 0.3);
  color: var(--color-white);
}

[data-theme="light"] .meal-prep__tab--suggest {
  background: var(--color-accent-light);
  border-color: var(--color-accent-light);
  color: var(--color-accent);
}

[data-theme="light"] .meal-prep__tab--suggest:hover {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: var(--color-white);
}

/* Light mode - Technique Library */
[data-theme="light"] .technique-library {
  background: var(--color-gray-50) !important;
}

[data-theme="light"] .technique-library__back {
  background: var(--color-white) !important;
  border: 1px solid var(--color-gray-200) !important;
  color: var(--color-gray-700) !important;
}

[data-theme="light"] .technique-library__back:hover {
  background: var(--color-gray-100) !important;
}

[data-theme="light"] .technique-library__title-section h1 {
  color: var(--color-gray-900) !important;
}

[data-theme="light"] .technique-library__subtitle {
  color: var(--color-gray-500) !important;
}

[data-theme="light"] .technique-library__search input {
  background: var(--color-white) !important;
  border: 1px solid var(--color-gray-200) !important;
  color: var(--color-gray-900) !important;
}

[data-theme="light"] .technique-library__search input::placeholder {
  color: var(--color-gray-400) !important;
}

[data-theme="light"] .technique-library__search input:focus {
  border-color: var(--color-accent) !important;
}

[data-theme="light"] .technique-library__filter {
  background: var(--color-white) !important;
  border: 1px solid var(--color-gray-200) !important;
  color: var(--color-gray-700) !important;
}

[data-theme="light"] .technique-library__category-title {
  color: var(--color-gray-700);
}

[data-theme="light"] .technique-library__category-count {
  color: var(--color-gray-500);
}

[data-theme="light"] .technique-library__empty h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .technique-library__empty p {
  color: var(--color-gray-600);
}

/* Light mode - Technique Cards */
[data-theme="light"] .technique-card {
  background: var(--color-white) !important;
  border: 1px solid var(--color-gray-200) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

[data-theme="light"] .technique-card:hover {
  border-color: var(--color-gray-300) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .technique-card__type {
  background: var(--color-gray-100) !important;
  color: var(--color-gray-600) !important;
}

[data-theme="light"] .technique-card__title {
  color: var(--color-gray-900) !important;
}

[data-theme="light"] .technique-card__tip-count {
  color: var(--color-accent) !important;
}

[data-theme="light"] .technique-card__tip-preview {
  color: var(--color-gray-600) !important;
}

[data-theme="light"] .technique-card__recipes-count {
  color: var(--color-gray-500) !important;
}

[data-theme="light"] .technique-card__meta {
  color: var(--color-gray-400) !important;
  border-top-color: var(--color-gray-100) !important;
}

/* Import Recipe Modal */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 24px;
}

.import-recipe-modal {
  width: 100%;
  max-width: 560px;
  max-height: 90vh;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 16px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.import-recipe-modal__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid var(--color-gray-700);
}

.import-recipe-modal__header h2 {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.import-recipe-modal__close {
  width: 32px;
  height: 32px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 6px;
  color: var(--color-gray-300);
  font-size: 18px;
  cursor: pointer;
}

.import-recipe-modal__close:hover {
  background: var(--color-gray-600);
}

.import-recipe-modal__content {
  padding: 24px;
  overflow-y: auto;
  flex: 1;
}

.import-recipe-modal__content--centered {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 300px;
}

.import-recipe-modal__url-section {
  margin-bottom: 24px;
}

.import-recipe-modal__label {
  display: block;
  font-size: 14px;
  color: var(--color-gray-300);
  margin-bottom: 12px;
}

.import-recipe-modal__url-input {
  display: flex;
  gap: 12px;
}

.import-recipe-modal__url-input input {
  flex: 1;
  padding: 12px 16px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
}

.import-recipe-modal__url-input input::placeholder {
  color: var(--color-gray-500);
}

.import-recipe-modal__url-input input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.import-recipe-modal__submit {
  padding: 12px 24px;
  background: var(--color-accent);
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.import-recipe-modal__submit:hover:not(:disabled) {
  background: var(--color-accent-hover);
}

.import-recipe-modal__submit:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.import-recipe-modal__error {
  color: var(--looops-coral);
  font-size: 14px;
  margin-top: 12px;
}

.import-recipe-modal__sources {
  background: var(--color-gray-900);
  border-radius: 8px;
  padding: 16px;
}

.import-recipe-modal__sources-label {
  font-size: 12px;
  color: var(--color-gray-500);
  margin-bottom: 12px;
}

.import-recipe-modal__sources-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.import-recipe-modal__source {
  padding: 6px 10px;
  background: var(--color-gray-700);
  border-radius: 6px;
  font-size: 12px;
  color: var(--color-gray-300);
}

/* Loading State */
.import-recipe-modal__loading {
  text-align: center;
}

.import-recipe-modal__spinner {
  width: 48px;
  height: 48px;
  border: 3px solid var(--color-gray-700);
  border-top-color: var(--color-accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 16px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.import-recipe-modal__loading p {
  color: var(--color-white);
  font-size: 16px;
  margin-bottom: 8px;
}

.import-recipe-modal__loading-hint {
  color: var(--color-gray-500);
  font-size: 13px;
}

/* Review Preview */
.import-recipe-modal__preview {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.import-recipe-modal__preview-image {
  border-radius: 8px;
  overflow: hidden;
  height: 160px;
}

.import-recipe-modal__preview-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.import-recipe-modal__field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.import-recipe-modal__field label {
  font-size: 12px;
  color: var(--color-gray-400);
}

.import-recipe-modal__field input {
  padding: 10px 12px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 6px;
  color: var(--color-white);
  font-size: 14px;
}

.import-recipe-modal__field--small {
  flex: 1;
}

.import-recipe-modal__row {
  display: flex;
  gap: 12px;
}

.import-recipe-modal__source-preview {
  display: flex;
  align-items: center;
  gap: 8px;
}

.import-recipe-modal__source-badge {
  padding: 4px 10px;
  background: var(--looops-sage);
  border-radius: 4px;
  font-size: 12px;
  color: white;
  font-weight: 500;
}

.import-recipe-modal__author {
  font-size: 13px;
  color: var(--color-gray-400);
}

.import-recipe-modal__summary {
  display: flex;
  gap: 16px;
  padding: 16px;
  background: var(--color-gray-900);
  border-radius: 8px;
}

.import-recipe-modal__summary-item {
  flex: 1;
  text-align: center;
}

.import-recipe-modal__summary-count {
  display: block;
  font-size: 24px;
  font-weight: 600;
  color: var(--color-white);
}

.import-recipe-modal__summary-label {
  font-size: 12px;
  color: var(--color-gray-500);
}

.import-recipe-modal__summary-item--highlight {
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  border-radius: 8px;
  padding: 8px 12px;
}

.import-recipe-modal__summary-item--highlight .import-recipe-modal__summary-count,
.import-recipe-modal__summary-item--highlight .import-recipe-modal__summary-label {
  color: var(--color-white);
}

.import-recipe-modal__equipment,
.import-recipe-modal__tags {
  padding-top: 12px;
}

.import-recipe-modal__equipment label,
.import-recipe-modal__tags label {
  display: block;
  font-size: 12px;
  color: var(--color-gray-400);
  margin-bottom: 8px;
}

.import-recipe-modal__equipment-list,
.import-recipe-modal__tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.import-recipe-modal__equipment-item,
.import-recipe-modal__tag {
  padding: 4px 10px;
  background: var(--color-gray-700);
  border-radius: 4px;
  font-size: 12px;
  color: var(--color-gray-300);
}

.import-recipe-modal__tag--editable {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding-right: 6px;
}

.import-recipe-modal__tag-remove {
  background: none;
  border: none;
  color: var(--color-gray-500);
  cursor: pointer;
  padding: 0;
  font-size: 14px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  transition: all 0.15s ease;
}

.import-recipe-modal__tag-remove:hover {
  background: var(--color-gray-600);
  color: var(--color-gray-200);
}

.import-recipe-modal__tag-add {
  display: flex;
  gap: 8px;
  margin-top: 8px;
}

.import-recipe-modal__tag-add input {
  flex: 1;
  padding: 6px 10px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-600);
  border-radius: 4px;
  color: var(--color-gray-200);
  font-size: 12px;
}

.import-recipe-modal__tag-add input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.import-recipe-modal__tag-add button {
  padding: 6px 12px;
  background: var(--color-gray-700);
  border: 1px solid var(--color-gray-600);
  border-radius: 4px;
  color: var(--color-gray-300);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.import-recipe-modal__tag-add button:hover:not(:disabled) {
  background: var(--color-gray-600);
  color: var(--color-gray-100);
}

.import-recipe-modal__tag-add button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Course/Category checkboxes */
.import-recipe-modal__course {
  padding-top: 12px;
}

.import-recipe-modal__course label {
  display: block;
  font-size: 12px;
  color: var(--color-gray-400);
  margin-bottom: 8px;
}

.import-recipe-modal__course-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.import-recipe-modal__course-option {
  display: flex !important;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  font-size: 13px;
  color: var(--color-gray-300);
}

.import-recipe-modal__course-option input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: var(--color-accent);
  cursor: pointer;
}

.import-recipe-modal__course-option span {
  text-transform: capitalize;
}

.import-recipe-modal__actions {
  display: flex;
  gap: 12px;
  margin-top: 24px;
  padding-top: 16px;
  border-top: 1px solid var(--color-gray-700);
}

.import-recipe-modal__btn {
  padding: 12px 20px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
}

.import-recipe-modal__btn--primary {
  flex: 1;
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  color: white;
}

.import-recipe-modal__btn--secondary {
  background: var(--color-gray-700);
  color: var(--color-gray-200);
}

/* Error State */
.import-recipe-modal__error-state {
  text-align: center;
}

.import-recipe-modal__error-icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.import-recipe-modal__error-state h3 {
  font-size: 18px;
  color: var(--color-white);
  margin-bottom: 8px;
}

.import-recipe-modal__error-state p {
  color: var(--color-gray-400);
  margin-bottom: 24px;
}

/* Recipe Form */
.recipe-form {
  max-width: 800px;
  margin: 0 auto;
  background: var(--color-gray-800);
  border-radius: 16px;
  overflow: hidden;
}

.recipe-form__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  background: var(--color-gray-900);
  border-bottom: 1px solid var(--color-gray-700);
}

.recipe-form__header h2 {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.recipe-form__close {
  width: 32px;
  height: 32px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 6px;
  color: var(--color-gray-300);
  font-size: 18px;
  cursor: pointer;
}

.recipe-form__content {
  padding: 24px;
  max-height: calc(100vh - 200px);
  overflow-y: auto;
}

.recipe-form__section {
  margin-bottom: 32px;
  padding-bottom: 24px;
  border-bottom: 1px solid var(--color-gray-700);
}

.recipe-form__section:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.recipe-form__section-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
  margin-bottom: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.recipe-form__add-btn {
  padding: 6px 12px;
  background: var(--color-accent);
  border: none;
  border-radius: 6px;
  color: white;
  font-size: 13px;
  cursor: pointer;
}

.recipe-form__field {
  margin-bottom: 16px;
}

.recipe-form__field label {
  display: block;
  font-size: 13px;
  color: var(--color-gray-400);
  margin-bottom: 6px;
}

.recipe-form__field input,
.recipe-form__field select,
.recipe-form__field textarea {
  width: 100%;
  padding: 10px 12px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 6px;
  color: var(--color-white);
  font-size: 14px;
}

.recipe-form__field textarea {
  resize: vertical;
  min-height: 80px;
}

.recipe-form__field input:focus,
.recipe-form__field select:focus,
.recipe-form__field textarea:focus {
  outline: none;
  border-color: var(--color-accent);
}

.recipe-form__row {
  display: flex;
  gap: 12px;
}

.recipe-form__field--small {
  flex: 1;
}

.recipe-form__course-options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.recipe-form__course-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.recipe-form__course-option:hover {
  border-color: var(--color-gray-500);
}

.recipe-form__course-option--selected {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
}

.recipe-form__course-option input {
  display: none;
}

.recipe-form__course-option span {
  font-size: 13px;
  color: var(--color-gray-200);
}

.recipe-form__tags-input,
.recipe-form__equipment-input {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}

.recipe-form__tags-input input,
.recipe-form__equipment-input input {
  flex: 1;
}

.recipe-form__tags-input button,
.recipe-form__equipment-input button {
  padding: 10px 16px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 6px;
  color: var(--color-gray-200);
  font-size: 13px;
  cursor: pointer;
}

.recipe-form__tags-list,
.recipe-form__equipment-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.recipe-form__tag,
.recipe-form__equipment-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: var(--color-gray-700);
  border-radius: 6px;
  font-size: 13px;
  color: var(--color-gray-200);
}

.recipe-form__tag button,
.recipe-form__equipment-item button {
  background: none;
  border: none;
  color: var(--color-gray-500);
  font-size: 14px;
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

.recipe-form__tag button:hover,
.recipe-form__equipment-item button:hover {
  color: var(--looops-coral);
}

/* Ingredients */
.recipe-form__ingredients {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.recipe-form__ingredient {
  background: var(--color-gray-900);
  border-radius: 8px;
  padding: 12px;
}

.recipe-form__ingredient-row {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

.recipe-form__qty-wrapper {
  display: flex;
  align-items: center;
  gap: 0;
  position: relative;
}

.recipe-form__ingredient-qty {
  width: 60px !important;
  border-top-right-radius: 0 !important;
  border-bottom-right-radius: 0 !important;
  border-right: none !important;
}

.recipe-form__qty-preset {
  width: 28px;
  height: 100%;
  padding: 0 2px;
  font-size: 10px;
  background: var(--color-gray-700);
  border: 1px solid var(--color-gray-600);
  border-left: none;
  border-radius: 0 6px 6px 0;
  color: var(--color-gray-400);
  cursor: pointer;
  appearance: none;
  -webkit-appearance: none;
  text-align: center;
}

.recipe-form__qty-preset:hover {
  background: var(--color-gray-600);
  color: var(--color-gray-200);
}

.recipe-form__qty-preset:focus {
  outline: none;
  border-color: var(--looops-purple);
}

.recipe-form__ingredient-unit {
  width: 80px !important;
}

.recipe-form__ingredient-name {
  flex: 1;
  min-width: 150px;
}

.recipe-form__ingredient-category {
  width: 100px !important;
}

.recipe-form__ingredient-optional {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: var(--color-gray-400);
  white-space: nowrap;
}

.recipe-form__ingredient-optional input {
  width: auto !important;
}

.recipe-form__ingredient-prep {
  margin-top: 8px;
}

.recipe-form__remove-btn {
  width: 28px;
  height: 28px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 4px;
  color: var(--color-gray-400);
  font-size: 16px;
  cursor: pointer;
  flex-shrink: 0;
}

.recipe-form__remove-btn:hover {
  background: var(--looops-coral);
  color: white;
}

/* Steps */
.recipe-form__steps {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.recipe-form__step {
  background: var(--color-gray-900);
  border-radius: 8px;
  padding: 16px;
}

.recipe-form__step-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.recipe-form__step-number {
  width: 28px;
  height: 28px;
  background: var(--color-accent);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 14px;
  font-weight: 600;
}

.recipe-form__step-meta {
  display: flex;
  gap: 12px;
  align-items: center;
  flex: 1;
}

.recipe-form__step-duration {
  width: 120px !important;
}

.recipe-form__step-active {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: var(--color-gray-400);
}

.recipe-form__step-active input {
  width: auto !important;
}

.recipe-form__step textarea {
  width: 100%;
  padding: 10px 12px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 6px;
  color: var(--color-white);
  font-size: 14px;
  resize: vertical;
}

.recipe-form__step-extras {
  display: flex;
  gap: 12px;
  margin-top: 12px;
}

.recipe-form__step-technique,
.recipe-form__step-tip {
  flex: 1;
}

.recipe-form__empty {
  text-align: center;
  padding: 24px;
  color: var(--color-gray-500);
  font-size: 14px;
}

.recipe-form__actions {
  display: flex;
  gap: 12px;
  padding: 16px 24px;
  background: var(--color-gray-900);
  border-top: 1px solid var(--color-gray-700);
  justify-content: flex-end;
}

.recipe-form__btn {
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
}

.recipe-form__btn--primary {
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  color: white;
}

.recipe-form__btn--secondary {
  background: var(--color-gray-700);
  color: var(--color-gray-200);
}

/* Recipe Detail */
.recipe-detail {
  max-width: 800px;
  margin: 0 auto;
}

.recipe-detail__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.recipe-detail__back {
  padding: 8px 16px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 6px;
  color: var(--color-gray-200);
  font-size: 14px;
  cursor: pointer;
}

.recipe-detail__back:hover {
  background: var(--color-gray-600);
}

.recipe-detail__actions {
  display: flex;
  gap: 8px;
}

.recipe-detail__action {
  padding: 8px 12px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 6px;
  color: var(--color-gray-200);
  font-size: 14px;
  cursor: pointer;
}

.recipe-detail__action--active {
  color: var(--looops-amber);
}

.recipe-detail__action--delete {
  background: rgba(239, 68, 68, 0.15);
  color: #ef4444;
}

.recipe-detail__action--delete:hover {
  background: rgba(239, 68, 68, 0.25);
}

/* Cook Mode Button */
.recipe-detail__action--cook-mode {
  background: rgba(251, 191, 36, 0.15);
  color: var(--looops-amber);
  font-size: 12px;
  padding: 6px 10px;
  white-space: nowrap;
}

.recipe-detail__action--cook-mode:hover {
  background: rgba(251, 191, 36, 0.25);
}

.recipe-detail__action--cook-mode-active {
  background: linear-gradient(135deg, #f59e0b, #ef4444);
  color: white;
  animation: cook-pulse 2s ease-in-out infinite;
}

@keyframes cook-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4); }
  50% { box-shadow: 0 0 0 6px rgba(245, 158, 11, 0); }
}

/* Delete Confirmation Modal */
.recipe-detail__delete-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999999;
  padding: 20px;
}

.recipe-detail__delete-modal {
  background: var(--color-surface);
  border-radius: 16px;
  padding: 32px;
  max-width: 400px;
  width: 100%;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
  border: 1px solid var(--color-border);
}

.recipe-detail__delete-modal-icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.recipe-detail__delete-modal-title {
  font-size: 20px;
  font-weight: 600;
  margin: 0 0 12px;
  color: var(--color-text);
}

.recipe-detail__delete-modal-text {
  font-size: 14px;
  color: var(--color-text-secondary);
  margin: 0 0 24px;
  line-height: 1.5;
}

.recipe-detail__delete-modal-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
}

.recipe-detail__delete-modal-btn {
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  border: none;
  transition: all 0.2s;
}

.recipe-detail__delete-modal-btn--cancel {
  background: var(--color-surface-hover);
  color: var(--color-text);
  border: 1px solid var(--color-border);
}

.recipe-detail__delete-modal-btn--cancel:hover {
  background: var(--color-gray-600);
}

.recipe-detail__delete-modal-btn--confirm {
  background: #ef4444;
  color: white;
}

.recipe-detail__delete-modal-btn--confirm:hover {
  background: #dc2626;
}

/* Light mode */
[data-theme="light"] .recipe-detail__action--delete {
  background: rgba(239, 68, 68, 0.1);
  color: #dc2626;
}

[data-theme="light"] .recipe-detail__action--delete:hover {
  background: rgba(239, 68, 68, 0.2);
}

[data-theme="light"] .recipe-detail__delete-modal-overlay {
  background: rgba(0, 0, 0, 0.5);
}

[data-theme="light"] .recipe-detail__delete-modal {
  background: #ffffff;
  border: 1px solid #d1d5db;
}

[data-theme="light"] .recipe-detail__delete-modal-title {
  color: #111827;
}

[data-theme="light"] .recipe-detail__delete-modal-text {
  color: #6b7280;
}

[data-theme="light"] .recipe-detail__delete-modal-btn--cancel {
  background: #f3f4f6;
  color: #374151;
  border: 1px solid #d1d5db;
}

[data-theme="light"] .recipe-detail__delete-modal-btn--cancel:hover {
  background: #e5e7eb;
}

[data-theme="light"] .recipe-detail__action--cook-mode {
  background: rgba(251, 191, 36, 0.2);
  color: #b45309;
}

[data-theme="light"] .recipe-detail__action--cook-mode:hover {
  background: rgba(251, 191, 36, 0.3);
}

[data-theme="light"] .recipe-detail__action--cook-mode-active {
  background: linear-gradient(135deg, #f59e0b, #ef4444);
  color: white;
}

/* Light mode quantity preset dropdown */
[data-theme="light"] .recipe-form__qty-preset {
  background: #e5e7eb;
  border-color: #d1d5db;
  color: #6b7280;
}

[data-theme="light"] .recipe-form__qty-preset:hover {
  background: #d1d5db;
  color: #374151;
}

.recipe-detail__hero {
  height: 300px;
  border-radius: 16px;
  overflow: hidden;
  margin-bottom: 24px;
  background: var(--color-gray-800);
}

.recipe-detail__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.recipe-detail__placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--color-gray-700), var(--color-gray-800));
  font-size: 80px;
  opacity: 0.5;
}

.recipe-detail__title-section {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.recipe-detail__title {
  font-size: 28px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 8px 0;
}

.recipe-detail__source {
  margin-bottom: 16px;
}

.recipe-detail__source-name {
  font-size: 14px;
  color: var(--color-accent);
  font-weight: 500;
}

.recipe-detail__author {
  font-size: 14px;
  color: var(--color-gray-400);
  margin-left: 8px;
}

.recipe-detail__source-link {
  display: inline-block;
  margin-left: 16px;
  font-size: 13px;
  color: var(--color-gray-400);
  text-decoration: none;
}

.recipe-detail__source-link:hover {
  color: var(--color-accent);
}

.recipe-detail__meta-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 16px;
  margin-bottom: 16px;
}

.recipe-detail__time-breakdown {
  display: flex;
  gap: 24px;
}

.recipe-detail__time-item {
  text-align: center;
}

.recipe-detail__time-label {
  display: block;
  font-size: 11px;
  color: var(--color-gray-500);
  text-transform: uppercase;
  margin-bottom: 4px;
}

.recipe-detail__time-value {
  font-size: 16px;
  font-weight: 500;
  color: var(--color-white);
}

.recipe-detail__time-item--total .recipe-detail__time-value {
  color: var(--color-accent);
}

.recipe-detail__difficulty-badge {
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 500;
  color: white;
}

.recipe-detail__servings {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background: var(--color-gray-900);
  border-radius: 8px;
  margin-bottom: 16px;
}

.recipe-detail__servings-label {
  font-size: 14px;
  color: var(--color-gray-400);
}

.recipe-detail__servings-control {
  display: flex;
  align-items: center;
  gap: 8px;
}

.recipe-detail__servings-btn {
  width: 32px;
  height: 32px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 6px;
  color: var(--color-white);
  font-size: 18px;
  cursor: pointer;
}

.recipe-detail__servings-btn:hover:not(:disabled) {
  background: var(--color-gray-600);
}

.recipe-detail__servings-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.recipe-detail__servings-value {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-white);
  min-width: 30px;
  text-align: center;
}

.recipe-detail__servings-reset {
  margin-left: auto;
  padding: 6px 12px;
  background: transparent;
  border: 1px solid var(--color-gray-600);
  border-radius: 6px;
  color: var(--color-gray-400);
  font-size: 12px;
  cursor: pointer;
}

.recipe-detail__warning {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: rgba(242, 112, 89, 0.15);
  border: 1px solid var(--looops-coral);
  border-radius: 8px;
  margin-bottom: 16px;
}

.recipe-detail__warning-icon {
  font-size: 20px;
}

.recipe-detail__warning-text {
  font-size: 13px;
  color: var(--looops-coral);
}

.recipe-detail__equipment {
  margin-bottom: 16px;
}

.recipe-detail__section-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-white);
  margin-bottom: 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.recipe-detail__section-count {
  font-size: 12px;
  font-weight: 400;
  color: var(--color-gray-500);
}

.recipe-detail__equipment-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.recipe-detail__equipment-item {
  padding: 6px 12px;
  background: var(--color-gray-700);
  border-radius: 6px;
  font-size: 13px;
  color: var(--color-gray-200);
}

.recipe-detail__equipment-item--missing {
  background: rgba(242, 112, 89, 0.2);
  color: var(--looops-coral);
}

/* Ingredients Section */
.recipe-detail__ingredients {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.recipe-detail__ingredient-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.recipe-detail__ingredient {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 0;
  border-bottom: 1px solid var(--color-gray-700);
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.recipe-detail__ingredient:last-child {
  border-bottom: none;
}

.recipe-detail__ingredient:hover {
  background: var(--color-gray-700);
  margin: 0 -12px;
  padding: 12px;
  border-radius: 6px;
}

.recipe-detail__ingredient--checked {
  opacity: 0.5;
}

.recipe-detail__ingredient--checked .recipe-detail__ingredient-name {
  text-decoration: line-through;
}

.recipe-detail__ingredient--optional {
  opacity: 0.7;
}

.recipe-detail__ingredient-check {
  width: 22px;
  height: 22px;
  border: 2px solid var(--color-gray-500);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  color: white;
  flex-shrink: 0;
}

.recipe-detail__ingredient--checked .recipe-detail__ingredient-check {
  background: var(--looops-sage);
  border-color: var(--looops-sage);
}

.recipe-detail__ingredient-quantity {
  min-width: 80px;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-accent);
}

.recipe-detail__ingredient-name {
  font-size: 14px;
  color: var(--color-white);
  flex: 1;
}

.recipe-detail__ingredient-prep {
  color: var(--color-gray-400);
}

.recipe-detail__ingredient-optional {
  font-size: 12px;
  color: var(--color-gray-500);
  font-style: italic;
}

/* Instructions Section */
.recipe-detail__instructions {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.recipe-detail__step-list {
  list-style: none;
  padding: 0;
  margin: 0;
  counter-reset: step-counter;
}

.recipe-detail__step {
  padding: 16px 0;
  border-bottom: 1px solid var(--color-gray-700);
  cursor: pointer;
  transition: opacity 0.2s ease;
}

.recipe-detail__step:last-child {
  border-bottom: none;
}

.recipe-detail__step:hover {
  background: var(--color-gray-700);
  margin: 0 -12px;
  padding: 16px 12px;
  border-radius: 8px;
}

.recipe-detail__step--checked {
  opacity: 0.5;
}

.recipe-detail__step--passive {
  background: var(--color-gray-900);
  margin: 0 -12px;
  padding: 16px 12px;
  border-radius: 8px;
}

.recipe-detail__step-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
}

.recipe-detail__step-number {
  width: 28px;
  height: 28px;
  background: var(--color-accent);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 14px;
  font-weight: 600;
  flex-shrink: 0;
}

.recipe-detail__step--checked .recipe-detail__step-number {
  background: var(--looops-sage);
}

.recipe-detail__step-duration {
  font-size: 12px;
  color: var(--color-gray-400);
  padding: 4px 8px;
  background: var(--color-gray-700);
  border-radius: 4px;
}

.recipe-detail__step-technique {
  font-size: 11px;
  padding: 4px 8px;
  background: var(--color-accent-subtle);
  color: var(--color-accent);
  border-radius: 4px;
  text-transform: uppercase;
  font-weight: 600;
}

.recipe-detail__step-instruction {
  font-size: 15px;
  color: var(--color-gray-200);
  line-height: 1.6;
  margin: 0;
  padding-left: 40px;
}

.recipe-detail__step-tip {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  margin-top: 12px;
  padding: 12px;
  margin-left: 40px;
  background: rgba(244, 185, 66, 0.1);
  border-radius: 8px;
  font-size: 13px;
  color: var(--looops-amber);
}

.recipe-detail__step-tip-icon {
  font-size: 16px;
}

/* Notes Sections */
.recipe-detail__chef-notes,
.recipe-detail__user-notes {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.recipe-detail__notes-text {
  font-size: 14px;
  color: var(--color-gray-300);
  line-height: 1.6;
  margin: 0;
  white-space: pre-wrap;
}

.recipe-detail__notes-edit {
  padding: 6px 12px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 6px;
  color: var(--color-gray-300);
  font-size: 13px;
  cursor: pointer;
}

.recipe-detail__notes-editor textarea {
  width: 100%;
  padding: 12px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
  resize: vertical;
  min-height: 100px;
}

.recipe-detail__notes-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 12px;
}

.recipe-detail__notes-cancel,
.recipe-detail__notes-save {
  padding: 8px 16px;
  border-radius: 6px;
  font-size: 13px;
  cursor: pointer;
  border: none;
}

.recipe-detail__notes-cancel {
  background: var(--color-gray-700);
  color: var(--color-gray-300);
}

.recipe-detail__notes-save {
  background: var(--color-accent);
  color: white;
}

/* Footer */
.recipe-detail__footer {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.recipe-detail__rating {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.recipe-detail__rating-label {
  font-size: 14px;
  color: var(--color-gray-400);
}

.recipe-detail__rating-stars {
  display: flex;
  gap: 4px;
}

.recipe-detail__rating-star {
  background: none;
  border: none;
  font-size: 24px;
  color: var(--color-gray-600);
  cursor: pointer;
  padding: 0;
}

.recipe-detail__rating-star--active {
  color: var(--looops-amber);
}

.recipe-detail__stats {
  display: flex;
  gap: 16px;
  margin-bottom: 16px;
  font-size: 13px;
  color: var(--color-gray-400);
}

.recipe-detail__made-btn {
  width: 100%;
  padding: 14px;
  background: linear-gradient(135deg, var(--looops-sage), var(--looops-amber));
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.recipe-detail__made-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(115, 165, 140, 0.3);
}

/* Nutrition */
.recipe-detail__nutrition {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.recipe-detail__nutrition-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
  gap: 16px;
}

.recipe-detail__nutrition-item {
  text-align: center;
  padding: 12px;
  background: var(--color-gray-900);
  border-radius: 8px;
}

.recipe-detail__nutrition-value {
  display: block;
  font-size: 20px;
  font-weight: 600;
  color: var(--color-white);
}

.recipe-detail__nutrition-label {
  font-size: 11px;
  color: var(--color-gray-500);
  text-transform: uppercase;
}

.recipe-detail__nutrition-note {
  text-align: center;
  font-size: 12px;
  color: var(--color-gray-500);
  margin-top: 12px;
}

/* Tags */
.recipe-detail__tags {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.recipe-detail__tag {
  padding: 6px 12px;
  background: var(--color-gray-700);
  border-radius: 6px;
  font-size: 13px;
  color: var(--color-gray-300);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .meal-prep-screen {
    padding: 16px;
  }

  .meal-prep__header {
    flex-direction: column;
    align-items: stretch;
  }

  .meal-prep__header-actions {
    flex-direction: column;
  }

  .meal-prep__filter-row {
    flex-direction: column;
  }

  .meal-prep__filter-select,
  .meal-prep__filter-toggle {
    width: 100%;
  }

  .meal-prep__recipes--grid {
    grid-template-columns: 1fr;
  }

  .recipe-card--compact {
    flex-direction: column;
  }

  .recipe-card--compact .recipe-card__image {
    width: 100%;
    height: 140px;
  }

  .recipe-detail__hero {
    height: 200px;
    border-radius: 12px;
  }

  .recipe-detail__title {
    font-size: 22px;
  }

  .recipe-detail__time-breakdown {
    flex-wrap: wrap;
    gap: 16px;
  }

  .recipe-form__ingredient-row {
    flex-direction: column;
    align-items: stretch;
  }

  .recipe-form__ingredient-qty,
  .recipe-form__ingredient-unit,
  .recipe-form__ingredient-category {
    width: 100% !important;
  }

  .recipe-form__row {
    flex-direction: column;
  }

  .kitchen-onboarding {
    padding: 24px 16px;
  }

  .kitchen-onboarding__title {
    font-size: 22px;
  }
}

/* ==================== Meal Prep Tabs ==================== */

.meal-prep__tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--color-gray-700);
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

.meal-prep__tabs::-webkit-scrollbar {
  display: none;
}

.meal-prep__tab {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-gray-300);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
  flex-shrink: 0;
}

.meal-prep__tab:hover:not(:disabled) {
  border-color: var(--color-gray-500);
  color: var(--color-white);
}

.meal-prep__tab--active {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
  color: var(--color-white);
}

.meal-prep__tab:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.meal-prep__tab-count {
  padding: 2px 8px;
  background: var(--color-gray-700);
  border-radius: 12px;
  font-size: 12px;
  color: var(--color-gray-300);
}

.meal-prep__tab--active .meal-prep__tab-count {
  background: var(--color-accent);
  color: white;
}

.meal-prep__tab-badge {
  padding: 2px 6px;
  background: var(--looops-amber);
  border-radius: 4px;
  font-size: 10px;
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* ==================== Technique Library ==================== */

.technique-library {
  max-width: 1200px;
  margin: 0 auto;
}

.technique-library__header {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 24px;
}

.technique-library__back {
  padding: 8px 16px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 6px;
  color: var(--color-gray-200);
  font-size: 14px;
  cursor: pointer;
}

.technique-library__back:hover {
  background: var(--color-gray-600);
}

.technique-library__title-section {
  flex: 1;
}

.technique-library__title-section h1 {
  font-size: 24px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.technique-library__subtitle {
  font-size: 14px;
  color: var(--color-gray-400);
  margin: 4px 0 0 0;
}

.technique-library__add-btn {
  padding: 10px 20px;
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.technique-library__filters {
  display: flex;
  gap: 16px;
  margin-bottom: 24px;
}

.technique-library__search {
  flex: 1;
}

.technique-library__search input {
  width: 100%;
  padding: 10px 16px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
}

.technique-library__search input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.technique-library__filter-group {
  display: flex;
  gap: 8px;
}

.technique-library__filter {
  padding: 10px 16px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
}

.technique-library__content {
  display: flex;
  flex-direction: column;
  gap: 32px;
}

.technique-library__category-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 16px 0;
}

.technique-library__category-count {
  font-weight: 400;
  color: var(--color-gray-500);
  margin-left: 8px;
}

.technique-library__grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
}

.technique-library__empty {
  text-align: center;
  padding: 60px 24px;
}

.technique-library__empty-icon {
  font-size: 64px;
  display: block;
  margin-bottom: 16px;
}

.technique-library__empty h3 {
  font-size: 20px;
  color: var(--color-white);
  margin: 0 0 8px 0;
}

.technique-library__empty p {
  color: var(--color-gray-400);
  margin: 0 0 24px 0;
  max-width: 400px;
  margin-left: auto;
  margin-right: auto;
}

.technique-library__empty-btn {
  padding: 12px 24px;
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.technique-library__detail-actions {
  display: flex;
  justify-content: center;
  padding: 24px;
}

.technique-library__edit-btn {
  padding: 12px 24px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 8px;
  color: var(--color-gray-200);
  font-size: 14px;
  cursor: pointer;
}

.technique-library__edit-btn:hover {
  background: var(--color-gray-600);
}

/* ==================== Technique Card ==================== */

.technique-card {
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 12px;
  padding: 20px;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s ease;
  width: 100%;
}

.technique-card:hover {
  border-color: var(--color-gray-500);
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.technique-card__header {
  margin-bottom: 12px;
}

.technique-card__type {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 600;
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.technique-card__title {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 8px 0;
}

.technique-card__tips-summary {
  margin-bottom: 12px;
}

.technique-card__tip-count {
  font-size: 13px;
  color: var(--color-accent);
  font-weight: 500;
}

.technique-card__tip-preview {
  font-size: 13px;
  color: var(--color-gray-400);
  margin: 8px 0 0 0;
  line-height: 1.4;
}

.technique-card__recipes {
  margin-bottom: 12px;
}

.technique-card__recipes-count {
  font-size: 12px;
  color: var(--color-gray-500);
}

.technique-card__meta {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  color: var(--color-gray-500);
}

/* ==================== Technique Detail ==================== */

.technique-detail {
  max-width: 800px;
  margin: 0 auto;
}

.technique-detail__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.technique-detail__back {
  padding: 8px 16px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 6px;
  color: var(--color-gray-200);
  font-size: 14px;
  cursor: pointer;
}

.technique-detail__back:hover {
  background: var(--color-gray-600);
}

.technique-detail__actions {
  display: flex;
  gap: 8px;
}

.technique-detail__add-tip,
.technique-detail__delete {
  padding: 8px 16px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 6px;
  color: var(--color-gray-200);
  font-size: 14px;
  cursor: pointer;
}

.technique-detail__delete:hover {
  background: var(--looops-coral);
  color: white;
}

.technique-detail__title-section {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
}

.technique-detail__type {
  display: inline-block;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  color: white;
  text-transform: uppercase;
  margin-bottom: 12px;
}

.technique-detail__title {
  font-size: 28px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 8px 0;
}

.technique-detail__meta {
  font-size: 14px;
  color: var(--color-gray-400);
  margin: 0;
}

.technique-detail__empty-tips {
  text-align: center;
  padding: 48px 24px;
  background: var(--color-gray-800);
  border-radius: 16px;
  margin-bottom: 24px;
}

.technique-detail__empty-icon {
  font-size: 48px;
  display: block;
  margin-bottom: 12px;
}

.technique-detail__empty-tips h3 {
  font-size: 18px;
  color: var(--color-white);
  margin: 0 0 8px 0;
}

.technique-detail__empty-tips p {
  color: var(--color-gray-400);
  margin: 0 0 16px 0;
}

.technique-detail__empty-btn {
  padding: 10px 20px;
  background: var(--color-accent);
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 14px;
  cursor: pointer;
}

.technique-detail__tips {
  display: flex;
  flex-direction: column;
  gap: 24px;
  margin-bottom: 24px;
}

.technique-detail__tip-category {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 20px;
}

.technique-detail__category-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 16px 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.technique-detail__tip-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.technique-detail__tip {
  background: var(--color-gray-900);
  border-radius: 8px;
  padding: 16px;
}

.technique-detail__tip-content {
  font-size: 14px;
  color: var(--color-gray-200);
  line-height: 1.5;
  margin: 0 0 8px 0;
}

.technique-detail__tip-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  font-size: 12px;
  color: var(--color-gray-500);
}

.technique-detail__tip-source a {
  color: var(--color-accent);
  text-decoration: none;
}

.technique-detail__tip-source a:hover {
  text-decoration: underline;
}

.technique-detail__sources {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 24px;
}

.technique-detail__sources h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 12px 0;
}

.technique-detail__sources-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.technique-detail__sources-list li {
  padding: 8px 0;
  color: var(--color-gray-300);
  font-size: 14px;
  border-bottom: 1px solid var(--color-gray-700);
}

.technique-detail__sources-list li:last-child {
  border-bottom: none;
}

.technique-detail__recipes {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 20px;
}

.technique-detail__recipes h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 16px 0;
}

.technique-detail__recipes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 12px;
}

.technique-detail__recipe-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
  width: 100%;
}

.technique-detail__recipe-card:hover {
  border-color: var(--color-gray-500);
}

.technique-detail__recipe-image {
  width: 48px;
  height: 48px;
  border-radius: 6px;
  object-fit: cover;
}

.technique-detail__recipe-info h4 {
  font-size: 14px;
  color: var(--color-white);
  margin: 0 0 4px 0;
}

.technique-detail__recipe-info span {
  font-size: 12px;
  color: var(--color-gray-500);
}

/* Technique Detail - Title Row */
.technique-detail__title-row {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 8px;
}

.technique-detail__credibility {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.technique-detail__aliases {
  font-size: 13px;
  color: var(--color-gray-500);
  font-style: italic;
  margin: 0 0 8px 0;
}

.technique-detail__summary {
  font-size: 14px;
  color: var(--color-gray-300);
  line-height: 1.5;
  margin: 0 0 12px 0;
}

/* Technique Detail - Favorite Button */
.technique-detail__favorite {
  padding: 8px 12px;
  background: transparent;
  border: 1px solid var(--color-gray-600);
  border-radius: 8px;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s ease;
  color: var(--color-gray-400);
}

.technique-detail__favorite:hover {
  background: var(--color-gray-700);
}

.technique-detail__favorite--active {
  color: #f59e0b;
  border-color: #f59e0b;
}

/* Technique Detail - User Notes Section */
.technique-detail__notes-section {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 24px;
  border: 1px solid var(--color-gray-700);
}

.technique-detail__notes-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.technique-detail__notes-header h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.technique-detail__notes-edit {
  padding: 6px 12px;
  background: transparent;
  border: 1px solid var(--color-gray-600);
  border-radius: 6px;
  color: var(--color-gray-300);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.technique-detail__notes-edit:hover {
  background: var(--color-gray-700);
  border-color: var(--color-gray-500);
}

.technique-detail__notes-content {
  font-size: 14px;
  color: var(--color-gray-300);
  line-height: 1.6;
  white-space: pre-wrap;
}

.technique-detail__notes-empty {
  font-size: 14px;
  color: var(--color-gray-500);
  font-style: italic;
  margin: 0;
}

.technique-detail__notes-editor textarea {
  width: 100%;
  padding: 12px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-600);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
  font-family: inherit;
  resize: vertical;
  min-height: 100px;
}

.technique-detail__notes-editor textarea:focus {
  outline: none;
  border-color: var(--color-accent);
}

.technique-detail__notes-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  margin-top: 12px;
}

.technique-detail__notes-cancel {
  padding: 8px 16px;
  background: transparent;
  border: 1px solid var(--color-gray-600);
  border-radius: 6px;
  color: var(--color-gray-300);
  font-size: 14px;
  cursor: pointer;
}

.technique-detail__notes-save {
  padding: 8px 16px;
  background: var(--color-accent);
  border: none;
  border-radius: 6px;
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.technique-detail__notes-save:hover {
  opacity: 0.9;
}

/* Technique Detail - Prerequisites */
.technique-detail__prerequisites {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 24px;
}

.technique-detail__prerequisites h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 8px 0;
}

.technique-detail__prerequisites-desc {
  font-size: 13px;
  color: var(--color-gray-500);
  margin: 0 0 12px 0;
}

.technique-detail__prereq-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.technique-detail__prereq-chip {
  padding: 8px 14px;
  background: var(--color-gray-700);
  border: 1px solid var(--color-gray-600);
  border-radius: 20px;
  color: var(--color-gray-200);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.technique-detail__prereq-chip:hover {
  background: var(--color-gray-600);
  border-color: var(--color-gray-500);
}

/* Technique Detail - Tips Filter */
.technique-detail__tips-filter {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
}

.technique-detail__filter-btn {
  padding: 8px 16px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-600);
  border-radius: 20px;
  color: var(--color-gray-400);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.technique-detail__filter-btn:hover {
  background: var(--color-gray-700);
}

.technique-detail__filter-btn--active {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
}

/* Technique Detail - Tip with Highlight */
.technique-detail__tip--highlighted {
  background: rgba(245, 158, 11, 0.1);
  border: 1px solid rgba(245, 158, 11, 0.3);
}

.technique-detail__tip-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
}

.technique-detail__tip-highlight {
  padding: 4px 8px;
  background: transparent;
  border: none;
  font-size: 16px;
  cursor: pointer;
  color: var(--color-gray-500);
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.technique-detail__tip-highlight:hover {
  color: #f59e0b;
}

.technique-detail__tip-highlight--active {
  color: #f59e0b;
}

.technique-detail__tip-reputation {
  color: var(--color-gray-500);
  font-size: 11px;
  margin-left: 4px;
}

.technique-detail__tip-verified {
  color: #22c55e;
  font-size: 12px;
}

/* Technique Detail - Related Techniques */
.technique-detail__related-techniques {
  background: var(--color-gray-800);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 24px;
}

.technique-detail__related-techniques h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 16px 0;
}

.technique-detail__related-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 12px;
}

.technique-detail__related-card {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
  width: 100%;
}

.technique-detail__related-card:hover {
  border-color: var(--color-gray-500);
  background: var(--color-gray-800);
}

.technique-detail__related-icon {
  font-size: 20px;
}

.technique-detail__related-info h4 {
  font-size: 13px;
  color: var(--color-white);
  margin: 0 0 2px 0;
}

.technique-detail__related-info span {
  font-size: 11px;
  color: var(--color-gray-500);
}

/* Technique Detail - Source with Badge */
.technique-detail__source-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 0;
  border-bottom: 1px solid var(--color-gray-700);
  color: var(--color-gray-300);
  font-size: 14px;
}

.technique-detail__source-item:last-child {
  border-bottom: none;
}

.technique-detail__source-badge {
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 600;
  color: white;
}

/* ==================== Technique Form ==================== */

.technique-form {
  max-width: 700px;
  margin: 0 auto;
  background: var(--color-gray-800);
  border-radius: 16px;
  overflow: hidden;
}

.technique-form__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid var(--color-gray-700);
}

.technique-form__header h2 {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.technique-form__close {
  width: 32px;
  height: 32px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 6px;
  color: var(--color-gray-300);
  font-size: 20px;
  cursor: pointer;
}

.technique-form__content {
  padding: 24px;
  max-height: calc(100vh - 200px);
  overflow-y: auto;
}

.technique-form__field {
  margin-bottom: 16px;
}

.technique-form__field label {
  display: block;
  font-size: 13px;
  color: var(--color-gray-400);
  margin-bottom: 8px;
}

.technique-form__field input,
.technique-form__field select,
.technique-form__field textarea {
  width: 100%;
  padding: 10px 14px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
}

.technique-form__field input:focus,
.technique-form__field select:focus,
.technique-form__field textarea:focus {
  outline: none;
  border-color: var(--color-accent);
}

.technique-form__type-options {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.technique-form__type-btn {
  padding: 10px 16px;
  background: var(--color-gray-900);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-gray-300);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.technique-form__type-btn:hover {
  border-color: var(--color-gray-500);
}

.technique-form__type-btn--active {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
  color: var(--color-white);
}

.technique-form__section {
  margin-top: 24px;
  padding-top: 24px;
  border-top: 1px solid var(--color-gray-700);
}

.technique-form__section h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 16px 0;
}

.technique-form__tips-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 20px;
}

.technique-form__tip-item {
  display: flex;
  gap: 12px;
  padding: 12px;
  background: var(--color-gray-900);
  border-radius: 8px;
}

.technique-form__tip-content {
  flex: 1;
}

.technique-form__tip-category {
  display: inline-block;
  padding: 2px 8px;
  background: var(--color-gray-700);
  border-radius: 4px;
  font-size: 11px;
  color: var(--color-gray-300);
  margin-bottom: 8px;
}

.technique-form__tip-content p {
  font-size: 14px;
  color: var(--color-gray-200);
  margin: 0;
}

.technique-form__tip-source {
  font-size: 12px;
  color: var(--color-gray-500);
  margin-top: 4px;
  display: block;
}

.technique-form__tip-remove {
  width: 24px;
  height: 24px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 4px;
  color: var(--color-gray-400);
  cursor: pointer;
  flex-shrink: 0;
}

.technique-form__tip-remove:hover {
  background: var(--looops-coral);
  color: white;
}

.technique-form__add-tip {
  background: var(--color-gray-900);
  border-radius: 12px;
  padding: 16px;
}

.technique-form__add-tip h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-200);
  margin: 0 0 12px 0;
}

.technique-form__row {
  display: flex;
  gap: 12px;
}

.technique-form__field--grow {
  flex: 1;
}

.technique-form__skill-levels {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.technique-form__checkbox {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--color-gray-800);
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  color: var(--color-gray-300);
}

.technique-form__checkbox input {
  width: auto !important;
}

.technique-form__add-tip-btn {
  width: 100%;
  margin-top: 12px;
  padding: 10px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 8px;
  color: var(--color-gray-200);
  font-size: 14px;
  cursor: pointer;
}

.technique-form__add-tip-btn:hover:not(:disabled) {
  background: var(--color-gray-600);
}

.technique-form__add-tip-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.technique-form__sources-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 12px;
}

.technique-form__source-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  background: var(--color-gray-900);
  border-radius: 6px;
  font-size: 13px;
  color: var(--color-gray-300);
}

.technique-form__source-remove {
  background: none;
  border: none;
  color: var(--color-gray-500);
  font-size: 14px;
  cursor: pointer;
  padding: 0;
}

.technique-form__source-remove:hover {
  color: var(--looops-coral);
}

.technique-form__add-source {
  display: flex;
  gap: 8px;
}

.technique-form__add-source input {
  flex: 1;
}

.technique-form__add-source button {
  padding: 10px 16px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 8px;
  color: var(--color-gray-200);
  font-size: 13px;
  cursor: pointer;
}

.technique-form__add-source button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.technique-form__recipes {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.technique-form__recipe-option {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  background: var(--color-gray-900);
  border-radius: 6px;
  cursor: pointer;
}

.technique-form__recipe-option input {
  width: auto !important;
}

.technique-form__recipe-option span {
  font-size: 14px;
  color: var(--color-gray-200);
}

.technique-form__actions {
  display: flex;
  gap: 12px;
  padding: 16px 24px;
  background: var(--color-gray-900);
  border-top: 1px solid var(--color-gray-700);
  justify-content: flex-end;
}

.technique-form__btn {
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
}

.technique-form__btn--primary {
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  color: white;
}

.technique-form__btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.technique-form__btn--secondary {
  background: var(--color-gray-700);
  color: var(--color-gray-200);
}

/* Technique Form - New Fields */
.technique-form__duplicate-warning {
  margin-top: 8px;
  padding: 10px 12px;
  background: rgba(245, 158, 11, 0.15);
  border: 1px solid rgba(245, 158, 11, 0.4);
  border-radius: 6px;
  font-size: 13px;
  color: #f59e0b;
}

.technique-form__aliases-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 10px;
}

.technique-form__alias-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: var(--color-gray-700);
  border-radius: 16px;
  font-size: 13px;
  color: var(--color-gray-200);
}

.technique-form__alias-chip button {
  padding: 0;
  background: none;
  border: none;
  color: var(--color-gray-400);
  font-size: 14px;
  cursor: pointer;
  line-height: 1;
}

.technique-form__alias-chip button:hover {
  color: var(--looops-coral);
}

.technique-form__add-alias {
  display: flex;
  gap: 8px;
}

.technique-form__add-alias input {
  flex: 1;
}

.technique-form__add-alias button {
  padding: 10px 16px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 8px;
  color: var(--color-gray-200);
  font-size: 13px;
  cursor: pointer;
}

.technique-form__add-alias button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.technique-form__section-desc {
  font-size: 13px;
  color: var(--color-gray-500);
  margin: 0 0 12px 0;
}

.technique-form__techniques-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 8px;
}

.technique-form__tech-option {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--color-gray-900);
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  color: var(--color-gray-300);
}

.technique-form__tech-option input {
  width: auto !important;
}

.technique-form__tech-option:hover {
  background: var(--color-gray-800);
}

.technique-form__source-reputation {
  color: var(--color-gray-500);
  font-size: 12px;
  margin-left: 4px;
}

/* Responsive - Technique */
@media (max-width: 768px) {
  .technique-library__header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .technique-library__add-btn {
    width: 100%;
  }

  .technique-library__filters {
    flex-direction: column;
  }

  .technique-library__grid {
    grid-template-columns: 1fr;
  }

  .technique-form__row {
    flex-direction: column;
  }

  .technique-form__type-options {
    flex-direction: column;
  }

  .technique-form__type-btn {
    width: 100%;
    text-align: center;
  }

  .meal-prep__tabs {
    padding-bottom: 12px;
    /* Add gradient to indicate more content */
    mask-image: linear-gradient(to right, black 90%, transparent 100%);
    -webkit-mask-image: linear-gradient(to right, black 90%, transparent 100%);
  }

  .meal-prep__tab {
    padding: 8px 12px;
    font-size: 13px;
  }

  .meal-prep__tab-count {
    font-size: 10px;
    padding: 2px 5px;
  }
}

/* ==================== Meal Plan Calendar ==================== */

.meal-calendar {
  padding: 20px;
  max-width: 1400px;
  margin: 0 auto;
}

.meal-calendar__header {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 24px;
}

.meal-calendar__back {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 14px;
  cursor: pointer;
  padding: 8px 12px;
  border-radius: 6px;
  transition: all 0.2s;
}

.meal-calendar__back:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.meal-calendar__title-section h1 {
  margin: 0;
  font-size: 24px;
  font-weight: 600;
}

.meal-calendar__subtitle {
  margin: 4px 0 0;
  color: var(--text-secondary);
  font-size: 14px;
}

.meal-calendar__nav {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  margin-bottom: 24px;
  padding: 12px;
  background: var(--bg-secondary);
  border-radius: 12px;
}

.meal-calendar__nav-btn {
  background: none;
  border: 1px solid var(--border-primary);
  color: var(--text-secondary);
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s;
}

.meal-calendar__nav-btn:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.meal-calendar__week-label {
  text-align: center;
  min-width: 200px;
}

.meal-calendar__month {
  display: block;
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
}

.meal-calendar__dates {
  display: block;
  font-size: 13px;
  color: var(--text-secondary);
  margin-top: 2px;
}

.meal-calendar__today-btn {
  background: var(--color-accent);
  border: none;
  color: white;
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
}

.meal-calendar__today-btn:hover {
  opacity: 0.9;
}

/* Calendar Grid */
.meal-calendar__grid {
  display: flex;
  flex-direction: column;
  gap: 0;
  background: var(--bg-primary);
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid var(--border-primary);
}

.meal-calendar__grid-header {
  display: grid;
  grid-template-columns: 100px repeat(7, 1fr);
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-bottom: none;
}

.meal-calendar__slot-label {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: var(--bg-secondary);
  font-size: 14px;
  font-weight: 500;
  color: var(--text-secondary);
  border-right: 2px solid var(--border-primary);
}

.meal-calendar__slot-icon {
  font-size: 16px;
}

.meal-calendar__day-header {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 12px 8px;
  background: var(--bg-secondary);
  border-right: 1px solid var(--border-secondary);
  border-bottom: 2px solid var(--border-primary);
}

.meal-calendar__day-header:last-child {
  border-right: none;
}

.meal-calendar__day-header--today {
  background: var(--color-accent);
  color: white;
  border-bottom-color: var(--color-accent);
}

.meal-calendar__day-name {
  font-size: 12px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.meal-calendar__day-date {
  font-size: 20px;
  font-weight: 600;
  margin-top: 2px;
}

.meal-calendar__row {
  display: grid;
  grid-template-columns: 100px repeat(7, 1fr);
  gap: 0;
  border-bottom: 1px solid var(--border-primary);
}

.meal-calendar__row:last-child {
  border-bottom: none;
}

.meal-calendar__cell {
  background: var(--bg-primary);
  min-height: 90px;
  padding: 8px;
  position: relative;
  border-right: 1px solid var(--border-secondary);
}

.meal-calendar__cell:last-child {
  border-right: none;
}

.meal-calendar__cell--today {
  background: color-mix(in srgb, var(--color-accent) 8%, var(--bg-primary));
  box-shadow: inset 0 0 0 2px var(--color-accent);
}

.meal-calendar__add-meal {
  width: 100%;
  height: 100%;
  min-height: 64px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: 2px dashed var(--border-primary);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
  z-index: 1;
}

.meal-calendar__add-meal:hover {
  border-color: var(--color-accent);
  background: color-mix(in srgb, var(--color-accent) 5%, transparent);
}

.meal-calendar__add-icon {
  font-size: 24px;
  color: var(--text-tertiary);
}

.meal-calendar__add-meal:hover .meal-calendar__add-icon {
  color: var(--color-accent);
}

.meal-calendar__meal {
  position: relative;
  height: 100%;
}

.meal-calendar__meal-content {
  display: flex;
  flex-direction: column;
  gap: 6px;
  width: 100%;
  height: 100%;
  padding: 8px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  cursor: pointer;
  text-align: left;
  transition: all 0.2s;
  position: relative;
  z-index: 1;
}

.meal-calendar__meal-content:hover {
  border-color: var(--color-accent);
}

.meal-calendar__meal-content--custom {
  cursor: default;
}

.meal-calendar__meal-image {
  width: 100%;
  height: 40px;
  object-fit: cover;
  border-radius: 4px;
}

.meal-calendar__meal-title {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
  line-height: 1.3;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.meal-calendar__meal-remove {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 20px;
  height: 20px;
  background: var(--bg-tertiary);
  border: none;
  border-radius: 50%;
  font-size: 14px;
  color: var(--text-secondary);
  cursor: pointer;
  opacity: 0;
  transition: all 0.2s;
}

.meal-calendar__meal:hover .meal-calendar__meal-remove {
  opacity: 1;
}

.meal-calendar__meal-remove:hover {
  background: var(--error);
  color: white;
}

/* Multi-item meals */
.meal-calendar__meal--multi {
  display: flex;
  flex-direction: column;
  gap: 4px;
  height: 100%;
}

.meal-calendar__meal-item {
  position: relative;
  flex: 1;
  min-height: 0;
}

.meal-calendar__meal-item .meal-calendar__meal-content {
  height: 100%;
  padding: 6px;
}

.meal-calendar__meal-item .meal-calendar__meal-image {
  height: 30px;
}

.meal-calendar__meal-item .meal-calendar__meal-title {
  font-size: 11px;
  -webkit-line-clamp: 1;
}

.meal-calendar__meal-item .meal-calendar__meal-remove {
  width: 16px;
  height: 16px;
  font-size: 12px;
  top: 2px;
  right: 2px;
}

.meal-calendar__meal-item:hover .meal-calendar__meal-remove {
  opacity: 1;
}

.meal-calendar__meal-course {
  font-size: 9px;
  text-transform: uppercase;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 1px 4px;
  border-radius: 3px;
  margin-top: 2px;
}

.meal-calendar__add-more {
  background: transparent;
  border: 1px dashed var(--border-secondary);
  border-radius: 6px;
  padding: 4px 8px;
  font-size: 10px;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s;
  flex-shrink: 0;
}

.meal-calendar__add-more:hover {
  border-color: var(--color-accent);
  color: var(--color-accent);
  background: rgba(139, 92, 246, 0.1);
}

.meal-calendar__expand-btn {
  background: var(--bg-tertiary);
  border: none;
  border-radius: 4px;
  padding: 3px 8px;
  font-size: 10px;
  font-weight: 500;
  color: var(--color-accent);
  cursor: pointer;
  transition: all 0.2s;
  flex-shrink: 0;
}

.meal-calendar__expand-btn:hover {
  background: var(--color-accent);
  color: white;
}

/* Clickable meal area */
.meal-calendar__meal-click-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 6px;
  background: transparent;
  border: none;
  cursor: pointer;
  text-align: left;
  border-radius: 6px;
  transition: background 0.15s;
  min-width: 0;
}

.meal-calendar__meal-click-area:hover {
  background: var(--bg-tertiary);
}

.meal-calendar__meal-preview {
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.meal-calendar__meal-preview .meal-calendar__meal-image {
  width: 100%;
  height: 40px;
  object-fit: cover;
  border-radius: 4px;
}

.meal-calendar__meal-preview .meal-calendar__meal-title {
  font-size: 11px;
  font-weight: 500;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.meal-calendar__meal-count {
  font-size: 10px;
  font-weight: 500;
  color: var(--color-accent);
  background: rgba(139, 92, 246, 0.15);
  padding: 2px 6px;
  border-radius: 4px;
  align-self: flex-start;
}

.meal-calendar__meal--multi .meal-calendar__add-more {
  position: absolute;
  bottom: 4px;
  right: 4px;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: 4px;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s;
  padding: 0;
}

.meal-calendar__meal--multi .meal-calendar__add-more:hover {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
}

/* Recipe Picker Modal */
.meal-calendar__picker-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.meal-calendar__picker {
  background: var(--bg-primary);
  border-radius: 16px;
  width: 100%;
  max-width: 500px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.meal-calendar__picker-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  border-bottom: 1px solid var(--border-primary);
}

.meal-calendar__picker-header h3 {
  margin: 0;
  font-size: 18px;
}

.meal-calendar__picker-close {
  background: none;
  border: none;
  font-size: 24px;
  color: var(--text-secondary);
  cursor: pointer;
}

.meal-calendar__picker-search {
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-primary);
}

.meal-calendar__picker-search input {
  width: 100%;
  padding: 12px 16px;
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: 14px;
}

.meal-calendar__picker-custom {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 12px 20px;
  background: color-mix(in srgb, var(--color-accent) 10%, var(--bg-primary));
  border: none;
  border-bottom: 1px solid var(--border-primary);
  color: var(--text-primary);
  font-size: 14px;
  cursor: pointer;
  text-align: left;
}

.meal-calendar__picker-custom:hover {
  background: color-mix(in srgb, var(--color-accent) 15%, var(--bg-primary));
}

.meal-calendar__picker-recipes {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
}

.meal-calendar__picker-empty {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-secondary);
}

.meal-calendar__picker-empty-hint {
  font-size: 13px;
  margin-top: 8px;
}

.meal-calendar__picker-recipe {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 12px;
  background: none;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  text-align: left;
  transition: background 0.2s;
}

.meal-calendar__picker-recipe:hover {
  background: var(--bg-secondary);
}

.meal-calendar__picker-recipe-image {
  width: 50px;
  height: 50px;
  object-fit: cover;
  border-radius: 6px;
  background: var(--bg-tertiary);
}

.meal-calendar__picker-recipe-info {
  flex: 1;
}

.meal-calendar__picker-recipe-title {
  display: block;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
}

.meal-calendar__picker-recipe-meta {
  display: block;
  font-size: 12px;
  color: var(--text-secondary);
  margin-top: 2px;
}

/* ==================== Shopping List ==================== */

.shopping-list {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}

.shopping-list__header {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 20px;
}

.shopping-list__back {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 14px;
  cursor: pointer;
  padding: 8px 12px;
  border-radius: 6px;
}

.shopping-list__back:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.shopping-list__title-section h1 {
  margin: 0;
  font-size: 24px;
}

.shopping-list__subtitle {
  margin: 4px 0 0;
  color: var(--text-secondary);
  font-size: 14px;
}

.shopping-list__progress {
  height: 6px;
  background: var(--bg-tertiary);
  border-radius: 3px;
  margin-bottom: 20px;
  overflow: hidden;
}

.shopping-list__progress-bar {
  height: 100%;
  background: var(--success);
  border-radius: 3px;
  transition: width 0.3s ease;
}

.shopping-list__controls {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 16px;
  padding: 12px 16px;
  background: var(--bg-secondary);
  border-radius: 8px;
}

.shopping-list__toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  color: var(--text-secondary);
  cursor: pointer;
}

.shopping-list__toggle input {
  cursor: pointer;
}

.shopping-list__clear-btn {
  margin-left: auto;
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 13px;
  cursor: pointer;
  text-decoration: underline;
}

.shopping-list__clear-btn:hover {
  color: var(--text-primary);
}

.shopping-list__add-item {
  display: flex;
  gap: 8px;
  margin-bottom: 24px;
}

.shopping-list__add-item input {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: 14px;
}

.shopping-list__add-item button {
  padding: 12px 20px;
  background: var(--color-accent);
  border: none;
  border-radius: 8px;
  color: white;
  font-weight: 500;
  cursor: pointer;
}

.shopping-list__add-item button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.shopping-list__content {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.shopping-list__category {
  background: var(--bg-secondary);
  border-radius: 12px;
  overflow: hidden;
}

.shopping-list__category-title {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
  padding: 16px 20px;
  font-size: 16px;
  font-weight: 600;
  background: var(--bg-tertiary);
}

.shopping-list__category-count {
  font-weight: 400;
  color: var(--text-secondary);
}

.shopping-list__items {
  list-style: none;
  margin: 0;
  padding: 0;
}

.shopping-list__item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 20px;
  border-bottom: 1px solid var(--border-primary);
  transition: background 0.2s;
}

.shopping-list__item:last-child {
  border-bottom: none;
}

.shopping-list__item:hover {
  background: var(--bg-tertiary);
}

.shopping-list__item--acquired {
  opacity: 0.5;
}

.shopping-list__item--acquired .shopping-list__item-name {
  text-decoration: line-through;
}

.shopping-list__item-checkbox {
  position: relative;
  cursor: pointer;
}

.shopping-list__item-checkbox input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
}

.shopping-list__item-check {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border: 2px solid var(--border-primary);
  border-radius: 50%;
  color: transparent;
  font-size: 12px;
  font-weight: bold;
  transition: all 0.2s;
}

.shopping-list__item-checkbox input:checked + .shopping-list__item-check {
  background: var(--success);
  border-color: var(--success);
  color: white;
}

.shopping-list__item-content {
  flex: 1;
  display: flex;
  flex-wrap: wrap;
  align-items: baseline;
  gap: 8px;
}

.shopping-list__item-name {
  font-size: 15px;
  font-weight: 500;
  color: var(--text-primary);
}

.shopping-list__item-qty {
  font-size: 14px;
  color: var(--text-secondary);
}

.shopping-list__item-recipes {
  font-size: 12px;
  color: var(--text-tertiary);
  width: 100%;
}

.shopping-list__item-remove {
  background: none;
  border: none;
  font-size: 18px;
  color: var(--text-tertiary);
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.2s;
}

.shopping-list__item:hover .shopping-list__item-remove {
  opacity: 1;
}

.shopping-list__item-remove:hover {
  color: var(--error);
}

.shopping-list__empty {
  text-align: center;
  padding: 60px 20px;
}

.shopping-list__empty-icon {
  font-size: 48px;
  display: block;
  margin-bottom: 16px;
}

.shopping-list__empty h3 {
  margin: 0 0 8px;
  font-size: 20px;
}

.shopping-list__empty p {
  margin: 0;
  color: var(--text-secondary);
}

/* ==================== Meal Suggester ==================== */

/* Legacy wrapper - now using portal */
.meal-prep__suggester-overlay {
  display: contents;
}

/* Portal-rendered overlay - rendered at document.body level */
.meal-suggester__overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.95);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999999;
  padding: 20px;
  box-sizing: border-box;
  isolation: isolate;
}

.meal-suggester {
  background: #1a1a2e;
  border-radius: 16px;
  width: 100%;
  max-width: 500px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  border: 1px solid var(--color-border);
}

.meal-suggester__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid var(--color-border);
}

.meal-suggester__header h2 {
  margin: 0;
  font-size: 20px;
}

.meal-suggester__close {
  background: none;
  border: none;
  font-size: 28px;
  color: var(--color-text-secondary);
  cursor: pointer;
  line-height: 1;
}

.meal-suggester__content {
  padding: 24px;
  overflow-y: auto;
}

.meal-suggester__intro {
  margin: 0 0 24px;
  color: var(--color-text-secondary);
  font-size: 15px;
  line-height: 1.5;
}

.meal-suggester__question {
  margin-bottom: 24px;
}

.meal-suggester__question h3 {
  margin: 0 0 12px;
  font-size: 16px;
  font-weight: 600;
}

.meal-suggester__options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.meal-suggester__options--mood {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

.meal-suggester__option {
  padding: 10px 16px;
  background: var(--color-surface-hover);
  border: 2px solid var(--color-border);
  border-radius: 8px;
  color: var(--color-text);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
}

.meal-suggester__option:hover {
  border-color: var(--color-accent);
}

.meal-suggester__option--selected {
  background: color-mix(in srgb, var(--color-accent) 15%, var(--color-surface));
  border-color: var(--color-accent);
}

.meal-suggester__option--mood {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 20px 16px;
  min-height: 90px;
  justify-content: center;
}

.meal-suggester__option-icon {
  font-size: 28px;
}

.meal-suggester__option-label {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-text);
}

.meal-suggester__submit {
  width: 100%;
  padding: 14px;
  background: var(--color-accent);
  border: none;
  border-radius: 10px;
  color: white;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  margin-top: 8px;
}

.meal-suggester__submit:hover {
  opacity: 0.9;
}

/* Results */
.meal-suggester__results {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.meal-suggester__result {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 12px;
  background: var(--color-surface-hover);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  cursor: pointer;
  text-align: left;
  position: relative;
  transition: all 0.2s;
}

.meal-suggester__result:hover {
  border-color: var(--color-accent);
}

.meal-suggester__result--top {
  background: color-mix(in srgb, var(--color-accent) 10%, var(--color-surface-hover));
  border-color: var(--color-accent);
}

.meal-suggester__result-badge {
  position: absolute;
  top: -8px;
  left: 12px;
  padding: 4px 10px;
  background: var(--color-accent);
  color: white;
  font-size: 11px;
  font-weight: 600;
  border-radius: 4px;
}

.meal-suggester__result-image {
  width: 60px;
  height: 60px;
  object-fit: cover;
  border-radius: 8px;
  background: var(--color-gray-700);
}

.meal-suggester__result-info {
  flex: 1;
}

.meal-suggester__result-title {
  margin: 0 0 4px;
  font-size: 15px;
  font-weight: 600;
}

.meal-suggester__result-meta {
  display: flex;
  gap: 6px;
  font-size: 13px;
  color: var(--color-text-secondary);
}

.meal-suggester__result-new {
  display: inline-block;
  margin-top: 4px;
  font-size: 11px;
  color: var(--color-accent);
  font-weight: 500;
}

.meal-suggester__actions {
  margin-top: 20px;
  text-align: center;
}

.meal-suggester__retry-btn {
  background: none;
  border: none;
  color: var(--color-text-secondary);
  font-size: 14px;
  cursor: pointer;
  text-decoration: underline;
}

.meal-suggester__retry-btn:hover {
  color: var(--color-text);
}

.meal-suggester__no-results {
  text-align: center;
  padding: 40px 20px;
}

.meal-suggester__no-results-icon {
  font-size: 48px;
  display: block;
  margin-bottom: 16px;
}

.meal-suggester__no-results h3 {
  margin: 0 0 8px;
}

.meal-suggester__no-results p {
  margin: 0 0 20px;
  color: var(--color-text-secondary);
}

/* Light mode - Meal Suggester Modal (must be after base styles) */
[data-theme="light"] .meal-suggester__overlay {
  background: rgba(0, 0, 0, 0.6);
}

[data-theme="light"] .meal-suggester {
  background: #ffffff;
  border: 1px solid #d1d5db;
  box-shadow: 0 25px 60px rgba(0, 0, 0, 0.25);
}

[data-theme="light"] .meal-suggester__header {
  border-bottom: 1px solid #e5e7eb;
  background: #f9fafb;
}

[data-theme="light"] .meal-suggester__header h2 {
  color: #111827;
}

[data-theme="light"] .meal-suggester__close {
  color: #6b7280;
}

[data-theme="light"] .meal-suggester__close:hover {
  color: #374151;
}

[data-theme="light"] .meal-suggester__content {
  background: #ffffff;
}

[data-theme="light"] .meal-suggester__intro {
  color: #4b5563;
}

[data-theme="light"] .meal-suggester__question h3 {
  color: #111827;
}

[data-theme="light"] .meal-suggester__option {
  background: #f3f4f6;
  border: 2px solid #d1d5db;
  color: #374151;
}

[data-theme="light"] .meal-suggester__option:hover {
  border-color: var(--color-accent);
  background: #e5e7eb;
}

[data-theme="light"] .meal-suggester__option--selected {
  background: color-mix(in srgb, var(--color-accent) 15%, #ffffff);
  border-color: var(--color-accent);
  color: #111827;
}

[data-theme="light"] .meal-suggester__option-label {
  color: #374151;
}

[data-theme="light"] .meal-suggester__option--selected .meal-suggester__option-label {
  color: #111827;
}

[data-theme="light"] .meal-suggester__result {
  background: #f3f4f6;
  border: 1px solid #d1d5db;
}

[data-theme="light"] .meal-suggester__result:hover {
  border-color: var(--color-accent);
  background: #e5e7eb;
}

[data-theme="light"] .meal-suggester__result--top {
  background: color-mix(in srgb, var(--color-accent) 12%, #ffffff);
  border-color: var(--color-accent);
}

[data-theme="light"] .meal-suggester__result-title {
  color: #111827;
}

[data-theme="light"] .meal-suggester__result-meta {
  color: #6b7280;
}

[data-theme="light"] .meal-suggester__result-image {
  background: #e5e7eb;
}

[data-theme="light"] .meal-suggester__result-new {
  color: var(--color-accent);
}

[data-theme="light"] .meal-suggester__retry-btn {
  color: #6b7280;
}

[data-theme="light"] .meal-suggester__retry-btn:hover {
  color: #111827;
}

[data-theme="light"] .meal-suggester__no-results h3 {
  color: #111827;
}

[data-theme="light"] .meal-suggester__no-results p {
  color: #6b7280;
}

[data-theme="light"] .meal-suggester__submit {
  background: var(--color-accent);
  color: white;
}

/* "What to cook" Tab Button */
.meal-prep__tab--suggest {
  background: color-mix(in srgb, var(--color-accent) 15%, var(--color-surface-hover));
  border-color: var(--color-accent);
  color: var(--color-accent);
  font-weight: 600;
}

.meal-prep__tab--suggest:hover {
  background: color-mix(in srgb, var(--color-accent) 25%, var(--color-surface-hover));
}

/* ==================== Responsive - Meal Calendar ==================== */
@media (max-width: 1024px) {
  .meal-calendar__grid-header,
  .meal-calendar__row {
    grid-template-columns: 80px repeat(7, 1fr);
  }

  .meal-calendar__slot-name {
    display: none;
  }

  .meal-calendar__day-name {
    font-size: 10px;
  }

  .meal-calendar__day-date {
    font-size: 16px;
  }
}

@media (max-width: 768px) {
  .meal-calendar__nav {
    flex-wrap: wrap;
  }

  .meal-calendar__grid {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  .meal-calendar__grid-header,
  .meal-calendar__row {
    min-width: 600px;
  }

  .meal-calendar__add-meal,
  .meal-calendar__meal-content,
  .meal-calendar__meal-remove {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  .meal-calendar__cell {
    min-height: 70px;
  }

  .meal-calendar__add-meal {
    min-height: 54px;
  }

  .shopping-list__controls {
    flex-direction: column;
    align-items: flex-start;
  }

  .shopping-list__clear-btn {
    margin-left: 0;
  }

  .meal-suggester__options--mood {
    grid-template-columns: 1fr;
  }
}

/* ==================== Food Waste Tracker ==================== */
.food-waste-tracker {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}

.food-waste-tracker__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 24px;
  gap: 16px;
  flex-wrap: wrap;
}

.food-waste-tracker__title-section {
  flex: 1;
  min-width: 200px;
}

.food-waste-tracker__title-section h1 {
  font-size: 24px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 4px 0;
}

.food-waste-tracker__subtitle {
  font-size: 14px;
  color: var(--text-secondary);
  margin: 0;
}

.food-waste-tracker__back {
  background: none;
  border: none;
  color: var(--color-accent);
  font-size: 14px;
  cursor: pointer;
  padding: 8px 0;
}

.food-waste-tracker__back:hover {
  text-decoration: underline;
}

.food-waste-tracker__add-btn {
  background: var(--color-accent);
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
}

.food-waste-tracker__add-btn:hover {
  background: var(--color-accent-light);
}

/* Waste Stats Grid */
.waste-stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  margin-bottom: 24px;
}

.waste-stats-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.waste-stats-card--highlight {
  background: var(--color-accent);
  border-color: var(--color-accent);
}

.waste-stats-card--highlight .waste-stats-card__value,
.waste-stats-card--highlight .waste-stats-card__label {
  color: white;
}

.waste-stats-card__value {
  font-size: 24px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.waste-stats-card__label {
  font-size: 12px;
  color: var(--text-secondary);
}

/* Waste Sections */
.waste-section {
  margin-bottom: 24px;
}

.waste-section__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.waste-section__title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.waste-section__link {
  background: none;
  border: none;
  color: var(--color-accent);
  font-size: 13px;
  cursor: pointer;
  padding: 0;
}

.waste-section__link:hover {
  text-decoration: underline;
}

/* Top Offenders List */
.waste-offenders-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.waste-offender-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
}

.waste-offender-item__rank {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-accent);
  min-width: 24px;
}

.waste-offender-item__name {
  flex: 1;
  font-size: 14px;
  color: var(--text-primary);
  text-transform: capitalize;
}

.waste-offender-item__count {
  font-size: 13px;
  color: var(--text-secondary);
  background: var(--bg-tertiary);
  padding: 4px 8px;
  border-radius: 4px;
}

/* Waste Entry List */
.waste-entry-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.waste-entry-item {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
}

.waste-entry-item__main {
  flex: 1;
  min-width: 150px;
}

.waste-entry-item__name {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  display: block;
  text-transform: capitalize;
}

.waste-entry-item__quantity {
  font-size: 12px;
  color: var(--text-secondary);
}

.waste-entry-item__meta {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.waste-entry-item__reason {
  font-size: 12px;
  color: var(--text-secondary);
  background: var(--bg-tertiary);
  padding: 4px 8px;
  border-radius: 4px;
}

.waste-entry-item__date {
  font-size: 12px;
  color: var(--text-tertiary);
}

.waste-entry-item__cost {
  font-size: 12px;
  color: var(--color-accent);
  font-weight: 500;
}

.waste-entry-item__notes {
  width: 100%;
  font-size: 12px;
  color: var(--text-secondary);
  font-style: italic;
  margin-top: 4px;
}

.waste-entry-item__actions {
  display: flex;
  gap: 8px;
}

.waste-entry-item__action {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 12px;
  cursor: pointer;
  padding: 4px 8px;
}

.waste-entry-item__action:hover {
  color: var(--color-accent);
}

.waste-entry-item__action--delete:hover {
  color: var(--error-color);
}

/* Empty State */
.waste-empty {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-secondary);
}

.waste-empty p {
  margin: 0 0 8px 0;
}

.waste-empty__hint {
  font-size: 13px;
  color: var(--text-tertiary);
}

/* Waste Reasons Grid */
.waste-reasons-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 8px;
}

.waste-reason-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
}

.waste-reason-item__label {
  font-size: 13px;
  color: var(--text-primary);
}

.waste-reason-item__count {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-accent);
}

/* Waste Filters */
.waste-filters {
  display: flex;
  gap: 12px;
  margin-bottom: 16px;
}

.waste-filters__search {
  flex: 1;
  padding: 10px 14px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: 14px;
}

.waste-filters__search::placeholder {
  color: var(--text-tertiary);
}

.waste-filters__select {
  padding: 10px 14px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: 14px;
  min-width: 140px;
}

/* Waste Entry Form */
.waste-entry-form {
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 20px 0;
}

.waste-entry-form__field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.waste-entry-form__field label {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
}

.waste-entry-form__auto-hint {
  font-size: 12px;
  font-weight: 400;
  color: var(--color-accent);
  font-style: italic;
}

.waste-entry-form__field input,
.waste-entry-form__field select,
.waste-entry-form__field textarea {
  padding: 12px 14px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: 14px;
}

.waste-entry-form__field input::placeholder,
.waste-entry-form__field textarea::placeholder {
  color: var(--text-tertiary);
}

.waste-entry-form__field textarea {
  resize: vertical;
  min-height: 60px;
}

.waste-entry-form__row {
  display: flex;
  gap: 12px;
}

.waste-entry-form__field--half {
  flex: 1;
}

/* Reason Selection Grid */
.waste-entry-form__reason-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 8px;
}

.waste-entry-form__reason-btn {
  padding: 10px 12px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s;
}

.waste-entry-form__reason-btn:hover {
  border-color: var(--color-accent);
}

.waste-entry-form__reason-btn--active {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
}

/* Cost Input */
.waste-entry-form__cost-input {
  display: flex;
  align-items: center;
}

.waste-entry-form__cost-symbol {
  padding: 12px 0 12px 14px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-right: none;
  border-radius: 8px 0 0 8px;
  color: var(--text-secondary);
  font-size: 14px;
}

.waste-entry-form__cost-input input {
  border-radius: 0 8px 8px 0;
  flex: 1;
}

/* Form Actions */
.waste-entry-form__actions {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--border-color);
}

.waste-entry-form__btn {
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.waste-entry-form__btn--secondary {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
}

.waste-entry-form__btn--secondary:hover {
  background: var(--bg-tertiary);
}

.waste-entry-form__btn--primary {
  background: var(--color-accent);
  border: none;
  color: white;
}

.waste-entry-form__btn--primary:hover {
  background: var(--color-accent-light);
}

.waste-entry-form__btn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ==================== Food Waste Tracker - Light Mode ==================== */
[data-theme="light"] .waste-stats-card {
  background: #ffffff !important;
  border-color: #e0e0e0 !important;
}

[data-theme="light"] .waste-stats-card--highlight {
  background: var(--color-accent) !important;
  border-color: var(--color-accent) !important;
}

[data-theme="light"] .waste-stats-card__value {
  color: #1a1a1a !important;
}

[data-theme="light"] .waste-stats-card__label {
  color: #666666 !important;
}

[data-theme="light"] .waste-stats-card--highlight .waste-stats-card__value,
[data-theme="light"] .waste-stats-card--highlight .waste-stats-card__label {
  color: white !important;
}

[data-theme="light"] .waste-offender-item,
[data-theme="light"] .waste-entry-item,
[data-theme="light"] .waste-reason-item {
  background: #ffffff !important;
  border-color: #e0e0e0 !important;
}

[data-theme="light"] .waste-offender-item__name,
[data-theme="light"] .waste-entry-item__name,
[data-theme="light"] .waste-reason-item__label,
[data-theme="light"] .waste-section__title,
[data-theme="light"] .food-waste-tracker__title-section h1 {
  color: #1a1a1a !important;
}

[data-theme="light"] .waste-offender-item__count,
[data-theme="light"] .waste-entry-item__reason {
  background: #f0f0f0 !important;
  color: #666666 !important;
}

[data-theme="light"] .waste-filters__search,
[data-theme="light"] .waste-filters__select {
  background: #ffffff !important;
  border-color: #e0e0e0 !important;
  color: #1a1a1a !important;
}

[data-theme="light"] .waste-entry-form__field input,
[data-theme="light"] .waste-entry-form__field select,
[data-theme="light"] .waste-entry-form__field textarea {
  background: #ffffff !important;
  border-color: #e0e0e0 !important;
  color: #1a1a1a !important;
}

[data-theme="light"] .waste-entry-form__reason-btn {
  background: #ffffff !important;
  border-color: #e0e0e0 !important;
  color: #1a1a1a !important;
}

[data-theme="light"] .waste-entry-form__reason-btn--active {
  background: var(--color-accent) !important;
  border-color: var(--color-accent) !important;
  color: white !important;
}

[data-theme="light"] .waste-entry-form__cost-symbol {
  background: #f5f5f5 !important;
  border-color: #e0e0e0 !important;
  color: #666666 !important;
}

[data-theme="light"] .waste-entry-form__btn--secondary {
  background: #f5f5f5 !important;
  border-color: #e0e0e0 !important;
  color: #1a1a1a !important;
}

[data-theme="light"] .waste-entry-form__actions {
  border-top-color: #e0e0e0 !important;
}

/* ==================== Responsive - Food Waste Tracker ==================== */
@media (max-width: 768px) {
  .waste-stats-grid {
    grid-template-columns: 1fr;
  }

  .food-waste-tracker__header {
    flex-direction: column;
    align-items: stretch;
  }

  .food-waste-tracker__add-btn {
    width: 100%;
    text-align: center;
  }

  .waste-filters {
    flex-direction: column;
  }

  .waste-entry-form__row {
    flex-direction: column;
  }

  .waste-entry-form__reason-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .waste-entry-form__actions {
    flex-direction: column;
  }

  .waste-entry-form__btn {
    width: 100%;
    text-align: center;
  }
}

/* ========== WORKOUT MODULE ========== */

/* Workout Screen - Main Container */
.workout-screen {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--color-bg);
}

.workout-screen__header {
  padding: 16px 24px;
  background: var(--color-surface);
  border-bottom: 1px solid var(--color-border);
}

.workout-screen__title {
  font-size: 24px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 16px 0;
}

.workout-screen__tabs {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
}

.workout-screen__tabs::-webkit-scrollbar {
  display: none;
}

.workout-screen__tab {
  padding: 10px 20px;
  background: transparent;
  border: none;
  color: var(--color-gray-400);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  border-radius: 8px;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.workout-screen__tab:hover {
  background: var(--color-gray-800);
  color: var(--color-gray-200);
}

.workout-screen__tab--active {
  background: var(--color-accent-subtle);
  color: var(--color-accent);
}

.workout-screen__tab-count {
  display: inline-block;
  margin-left: 8px;
  padding: 2px 8px;
  background: var(--color-gray-700);
  border-radius: 12px;
  font-size: 12px;
}

.workout-screen__tab--active .workout-screen__tab-count {
  background: var(--color-accent);
  color: white;
}

.workout-screen__content {
  flex: 1;
  overflow-y: auto;
  padding: 24px;
}

/* Exercise List Controls */
.workout-screen__controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
  margin-bottom: 24px;
  flex-wrap: wrap;
}

.workout-screen__filters {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  flex: 1;
}

.workout-screen__search {
  flex: 1;
  min-width: 200px;
  padding: 10px 16px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
}

.workout-screen__search:focus {
  outline: none;
  border-color: var(--color-accent);
}

.workout-screen__filter-select {
  padding: 10px 16px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
  cursor: pointer;
}

.workout-screen__actions {
  display: flex;
  gap: 12px;
}

.workout-screen__add-btn {
  padding: 10px 20px;
  background: var(--color-accent);
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.workout-screen__add-btn:hover {
  background: var(--color-accent-light);
}

.workout-screen__generate-btn {
  padding: 10px 20px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 8px;
  color: var(--color-gray-200);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.workout-screen__generate-btn:hover {
  background: var(--color-gray-600);
}

.workout-screen__view-toggle {
  display: flex;
  background: var(--color-gray-800);
  border-radius: 8px;
  padding: 4px;
}

.workout-screen__view-btn {
  padding: 8px 12px;
  background: transparent;
  border: none;
  color: var(--color-gray-400);
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.2s ease;
}

.workout-screen__view-btn--active {
  background: var(--color-gray-700);
  color: var(--color-white);
}

/* Exercise Grid */
.workout-screen__exercise-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 16px;
}

.workout-screen__exercise-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.workout-screen__empty {
  text-align: center;
  padding: 60px 20px;
  color: var(--color-gray-500);
}

.workout-screen__empty p {
  margin-bottom: 16px;
}

/* ==================== Exercise Card ==================== */
.exercise-card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.exercise-card:hover {
  border-color: var(--color-gray-500);
  transform: translateY(-2px);
}

.exercise-card__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
}

.exercise-card__name {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.exercise-card__difficulty {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
}

.exercise-card__muscles {
  font-size: 13px;
  color: var(--color-gray-400);
  margin-bottom: 8px;
}

.exercise-card__meta {
  display: flex;
  gap: 12px;
  font-size: 12px;
  color: var(--color-gray-500);
}

.exercise-card__meta span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.exercise-card__prescription {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--color-border);
  font-size: 14px;
  color: var(--color-gray-300);
}

/* Exercise Card - List View */
.exercise-card--list {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 12px 16px;
}

.exercise-card--list .exercise-card__header {
  flex: 1;
  margin-bottom: 0;
}

.exercise-card--list .exercise-card__muscles {
  margin-bottom: 0;
}

.exercise-card--list .exercise-card__meta {
  flex-shrink: 0;
}

/* ==================== Exercise Detail ==================== */
.exercise-detail {
  max-width: 800px;
  margin: 0 auto;
}

.exercise-detail__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 24px;
}

.exercise-detail__title-section h1 {
  font-size: 28px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 8px 0;
}

.exercise-detail__badges {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.exercise-detail__badge {
  padding: 4px 12px;
  border-radius: 16px;
  font-size: 12px;
  font-weight: 500;
}

.exercise-detail__actions {
  display: flex;
  gap: 8px;
}

.exercise-detail__btn {
  padding: 10px 16px;
  border-radius: 8px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
}

.exercise-detail__btn--primary {
  background: var(--color-accent);
  color: white;
}

.exercise-detail__btn--primary:hover {
  background: var(--color-accent-light);
}

.exercise-detail__btn--secondary {
  background: var(--color-gray-700);
  color: var(--color-gray-200);
}

.exercise-detail__btn--secondary:hover {
  background: var(--color-gray-600);
}

.exercise-detail__btn--icon {
  width: 40px;
  height: 40px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.exercise-detail__section {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 16px;
}

.exercise-detail__section h3 {
  font-size: 14px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-gray-400);
  margin: 0 0 12px 0;
}

.exercise-detail__description {
  font-size: 15px;
  line-height: 1.6;
  color: var(--color-gray-200);
}

.exercise-detail__muscle-groups {
  display: flex;
  gap: 24px;
}

.exercise-detail__muscle-list {
  flex: 1;
}

.exercise-detail__muscle-list h4 {
  font-size: 12px;
  color: var(--color-gray-500);
  margin: 0 0 8px 0;
}

.exercise-detail__muscle-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.exercise-detail__muscle-tag {
  padding: 4px 10px;
  background: var(--color-gray-700);
  border-radius: 12px;
  font-size: 12px;
  color: var(--color-gray-200);
}

.exercise-detail__muscle-tag--primary {
  background: var(--color-accent-subtle);
  color: var(--color-accent);
}

.exercise-detail__equipment-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.exercise-detail__equipment-tag {
  padding: 6px 12px;
  background: var(--color-gray-700);
  border-radius: 8px;
  font-size: 13px;
  color: var(--color-gray-200);
}

.exercise-detail__programming {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 16px;
}

.exercise-detail__programming-item {
  text-align: center;
  padding: 12px;
  background: var(--color-gray-800);
  border-radius: 8px;
}

.exercise-detail__programming-value {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-white);
  display: block;
}

.exercise-detail__programming-label {
  font-size: 12px;
  color: var(--color-gray-500);
  margin-top: 4px;
  display: block;
}

.exercise-detail__cues-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.exercise-detail__cues-list li {
  padding: 8px 0 8px 24px;
  position: relative;
  color: var(--color-gray-200);
  font-size: 14px;
  border-bottom: 1px solid var(--color-border);
}

.exercise-detail__cues-list li:last-child {
  border-bottom: none;
}

.exercise-detail__cues-list li::before {
  content: "â†’";
  position: absolute;
  left: 0;
  color: var(--color-accent);
}

.exercise-detail__mistakes-list li::before {
  content: "âœ•";
  color: var(--color-error);
}

.exercise-detail__variations-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.exercise-detail__variation-tag {
  padding: 6px 12px;
  background: var(--color-gray-700);
  border-radius: 8px;
  font-size: 13px;
  color: var(--color-gray-200);
}

.exercise-detail__progressions {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.exercise-detail__progressions-col h4 {
  font-size: 12px;
  color: var(--color-gray-500);
  margin: 0 0 8px 0;
}

.exercise-detail__progressions-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.exercise-detail__progression-item {
  padding: 8px 12px;
  background: var(--color-gray-800);
  border-radius: 6px;
  font-size: 13px;
  color: var(--color-gray-200);
}

.exercise-detail__progression-item--easier {
  border-left: 3px solid var(--looops-sage);
}

.exercise-detail__progression-item--harder {
  border-left: 3px solid var(--color-accent);
}

.exercise-detail__pr {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: linear-gradient(135deg, var(--color-accent-subtle), var(--looops-amber-subtle));
  border-radius: 12px;
}

.exercise-detail__pr-icon {
  font-size: 32px;
}

.exercise-detail__pr-content {
  flex: 1;
}

.exercise-detail__pr-value {
  font-size: 24px;
  font-weight: 600;
  color: var(--color-white);
}

.exercise-detail__pr-date {
  font-size: 12px;
  color: var(--color-gray-400);
}

/* ==================== Exercise Form ==================== */
.exercise-form {
  max-width: 700px;
  margin: 0 auto;
}

.exercise-form__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.exercise-form__header h2 {
  font-size: 24px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.exercise-form__section {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 16px;
}

.exercise-form__section h3 {
  font-size: 14px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-gray-400);
  margin: 0 0 16px 0;
}

.exercise-form__field {
  margin-bottom: 16px;
}

.exercise-form__field:last-child {
  margin-bottom: 0;
}

.exercise-form__label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-gray-300);
  margin-bottom: 6px;
}

.exercise-form__input,
.exercise-form__select,
.exercise-form__textarea {
  width: 100%;
  padding: 10px 14px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
  transition: all 0.2s ease;
}

.exercise-form__input:focus,
.exercise-form__select:focus,
.exercise-form__textarea:focus {
  outline: none;
  border-color: var(--color-accent);
}

.exercise-form__textarea {
  min-height: 100px;
  resize: vertical;
}

.exercise-form__row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 12px;
}

.exercise-form__checkbox-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.exercise-form__checkbox-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.exercise-form__checkbox-item:hover {
  border-color: var(--color-gray-500);
}

.exercise-form__checkbox-item--selected {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
}

.exercise-form__checkbox-item input {
  display: none;
}

.exercise-form__checkbox-check {
  width: 18px;
  height: 18px;
  border: 2px solid var(--color-gray-500);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  color: white;
}

.exercise-form__checkbox-item--selected .exercise-form__checkbox-check {
  background: var(--color-accent);
  border-color: var(--color-accent);
}

.exercise-form__list-input {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}

.exercise-form__list-input input {
  flex: 1;
}

.exercise-form__list-add {
  padding: 10px 16px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 8px;
  color: var(--color-gray-200);
  cursor: pointer;
  transition: all 0.2s ease;
}

.exercise-form__list-add:hover {
  background: var(--color-gray-600);
}

.exercise-form__list-items {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.exercise-form__list-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px 4px 12px;
  background: var(--color-gray-700);
  border-radius: 16px;
  font-size: 13px;
  color: var(--color-gray-200);
}

.exercise-form__list-remove {
  padding: 2px;
  background: transparent;
  border: none;
  color: var(--color-gray-500);
  cursor: pointer;
  font-size: 14px;
  line-height: 1;
}

.exercise-form__list-remove:hover {
  color: var(--color-accent);
}

.exercise-form__actions {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  margin-top: 24px;
  padding-top: 24px;
  border-top: 1px solid var(--color-border);
}

.exercise-form__btn {
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
}

.exercise-form__btn--primary {
  background: var(--color-accent);
  color: white;
}

.exercise-form__btn--primary:hover {
  background: var(--color-accent-light);
}

.exercise-form__btn--secondary {
  background: var(--color-gray-700);
  color: var(--color-gray-200);
}

.exercise-form__btn--secondary:hover {
  background: var(--color-gray-600);
}

/* ==================== Training Tip Library ==================== */
.training-tips {
  max-width: 1000px;
  margin: 0 auto;
}

.training-tips__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.training-tips__header h2 {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.training-tips__controls {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 24px;
}

.training-tips__search {
  flex: 1;
  min-width: 200px;
  padding: 10px 16px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
}

.training-tips__filter {
  padding: 10px 16px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
}

.training-tips__add-btn {
  padding: 10px 20px;
  background: var(--color-accent);
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.training-tips__list {
  display: grid;
  gap: 12px;
}

.training-tip-card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.training-tip-card:hover {
  border-color: var(--color-gray-500);
}

.training-tip-card__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 8px;
}

.training-tip-card__subject {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.training-tip-card__category {
  padding: 4px 10px;
  background: var(--color-gray-700);
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
  color: var(--color-gray-300);
}

.training-tip-card__summary {
  font-size: 14px;
  color: var(--color-gray-400);
  margin-bottom: 8px;
}

.training-tip-card__meta {
  display: flex;
  gap: 12px;
  font-size: 12px;
  color: var(--color-gray-500);
}

/* Training Tip Detail */
.training-tip-detail {
  max-width: 800px;
  margin: 0 auto;
}

.training-tip-detail__header {
  margin-bottom: 24px;
}

.training-tip-detail__header h1 {
  font-size: 28px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 8px 0;
}

.training-tip-detail__meta {
  display: flex;
  gap: 12px;
  align-items: center;
}

.training-tip-detail__type {
  padding: 4px 12px;
  background: var(--color-gray-700);
  border-radius: 16px;
  font-size: 12px;
  color: var(--color-gray-300);
}

.training-tip-detail__section {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 16px;
}

.training-tip-detail__section h3 {
  font-size: 14px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--color-gray-400);
  margin: 0 0 12px 0;
}

.training-tip-detail__summary {
  font-size: 16px;
  line-height: 1.6;
  color: var(--color-gray-200);
}

.training-tip-detail__tips-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.training-tip-item {
  padding: 16px;
  background: var(--color-gray-800);
  border-radius: 8px;
  border-left: 3px solid var(--color-accent);
}

.training-tip-item__content {
  font-size: 14px;
  line-height: 1.6;
  color: var(--color-gray-200);
  margin-bottom: 8px;
}

.training-tip-item__source {
  font-size: 12px;
  color: var(--color-gray-500);
}

.training-tip-item__source a {
  color: var(--color-accent);
  text-decoration: none;
}

/* Training Tip Form */
.training-tip-form {
  max-width: 700px;
  margin: 0 auto;
}

.training-tip-form__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.training-tip-form__header h2 {
  font-size: 24px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.training-tip-form__section {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 16px;
}

.training-tip-form__field {
  margin-bottom: 16px;
}

.training-tip-form__label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: var(--color-gray-300);
  margin-bottom: 6px;
}

.training-tip-form__input,
.training-tip-form__select,
.training-tip-form__textarea {
  width: 100%;
  padding: 10px 14px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
}

.training-tip-form__tip-entry {
  padding: 16px;
  background: var(--color-gray-800);
  border-radius: 8px;
  margin-bottom: 12px;
}

.training-tip-form__tip-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.training-tip-form__tip-remove {
  padding: 4px 8px;
  background: transparent;
  border: none;
  color: var(--color-gray-500);
  cursor: pointer;
}

.training-tip-form__add-tip {
  width: 100%;
  padding: 12px;
  background: var(--color-gray-700);
  border: 2px dashed var(--color-gray-600);
  border-radius: 8px;
  color: var(--color-gray-400);
  cursor: pointer;
  transition: all 0.2s ease;
}

.training-tip-form__add-tip:hover {
  border-color: var(--color-accent);
  color: var(--color-accent);
}

.training-tip-form__actions {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  margin-top: 24px;
}

.training-tip-form__btn {
  padding: 12px 24px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  border: none;
}

.training-tip-form__btn--primary {
  background: var(--color-accent);
  color: white;
}

.training-tip-form__btn--secondary {
  background: var(--color-gray-700);
  color: var(--color-gray-200);
}

/* ==================== Workout Plan Calendar ==================== */
.workout-calendar {
  max-width: 1200px;
  margin: 0 auto;
}

.workout-calendar__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.workout-calendar__title {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.workout-calendar__nav {
  display: flex;
  align-items: center;
  gap: 16px;
}

.workout-calendar__nav-btn {
  padding: 8px 12px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 8px;
  color: var(--color-gray-200);
  cursor: pointer;
  font-size: 16px;
}

.workout-calendar__nav-btn:hover {
  background: var(--color-gray-600);
}

.workout-calendar__week-label {
  font-size: 16px;
  color: var(--color-gray-300);
  min-width: 200px;
  text-align: center;
}

.workout-calendar__grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 12px;
}

.workout-calendar__day {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  min-height: 150px;
  display: flex;
  flex-direction: column;
}

.workout-calendar__day--today {
  border-color: var(--color-accent);
}

.workout-calendar__day-header {
  padding: 12px;
  border-bottom: 1px solid var(--color-border);
}

.workout-calendar__day-name {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--color-gray-500);
}

.workout-calendar__day-date {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-white);
}

.workout-calendar__day--today .workout-calendar__day-date {
  color: var(--color-accent);
}

.workout-calendar__day-content {
  flex: 1;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.workout-calendar__workout-item {
  padding: 8px 12px;
  background: var(--color-gray-800);
  border-radius: 8px;
  border-left: 3px solid var(--color-accent);
}

.workout-calendar__workout-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-white);
}

.workout-calendar__workout-type {
  font-size: 11px;
  color: var(--color-gray-500);
  text-transform: uppercase;
}

.workout-calendar__add-workout {
  margin-top: auto;
  padding: 8px;
  background: transparent;
  border: 2px dashed var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-gray-500);
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s ease;
}

.workout-calendar__add-workout:hover {
  border-color: var(--color-accent);
  color: var(--color-accent);
}

.workout-calendar__rest-day {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-gray-600);
  font-size: 13px;
}

/* ==================== Workout Generator ==================== */
.workout-generator {
  max-width: 600px;
  margin: 0 auto;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  overflow: hidden;
}

.workout-generator__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid var(--color-border);
}

.workout-generator__header h2 {
  font-size: 20px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.workout-generator__close {
  width: 36px;
  height: 36px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 50%;
  color: var(--color-gray-300);
  font-size: 20px;
  cursor: pointer;
}

.workout-generator__close:hover {
  background: var(--color-gray-600);
  color: var(--color-white);
}

.workout-generator__config {
  padding: 24px;
}

.workout-generator__section {
  margin-bottom: 24px;
}

.workout-generator__section label {
  display: block;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-gray-300);
  margin-bottom: 12px;
}

.workout-generator__duration {
  display: flex;
  gap: 8px;
}

.workout-generator__duration-btn {
  flex: 1;
  padding: 12px;
  background: var(--color-gray-800);
  border: 2px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-gray-300);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.workout-generator__duration-btn:hover {
  border-color: var(--color-gray-500);
}

.workout-generator__duration-btn--selected {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
  color: var(--color-accent);
}

.workout-generator__focus-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

.workout-generator__focus-btn {
  padding: 12px;
  background: var(--color-gray-800);
  border: 2px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-gray-300);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.workout-generator__focus-btn:hover {
  border-color: var(--color-gray-500);
}

.workout-generator__focus-btn--selected {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
  color: var(--color-accent);
}

.workout-generator__checkbox {
  display: flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
}

.workout-generator__checkbox input {
  width: 20px;
  height: 20px;
  accent-color: var(--color-accent);
}

.workout-generator__checkbox span {
  font-size: 14px;
  color: var(--color-gray-300);
}

.workout-generator__info {
  padding: 16px;
  background: var(--color-gray-800);
  border-radius: 8px;
  margin-bottom: 24px;
}

.workout-generator__info p {
  font-size: 14px;
  color: var(--color-gray-400);
  margin: 4px 0;
}

.workout-generator__info strong {
  color: var(--color-white);
}

.workout-generator__generate-btn {
  width: 100%;
  padding: 16px;
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.workout-generator__generate-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px var(--color-accent-glow);
}

.workout-generator__generate-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Generated Workout Result */
.workout-generator__result {
  padding: 24px;
}

.workout-generator__result-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.workout-generator__result-meta {
  display: flex;
  gap: 16px;
}

.workout-generator__result-count,
.workout-generator__result-time {
  font-size: 14px;
  color: var(--color-gray-400);
}

.workout-generator__result-count strong,
.workout-generator__result-time strong {
  color: var(--color-white);
}

.workout-generator__regenerate {
  padding: 8px 16px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 8px;
  color: var(--color-gray-200);
  font-size: 14px;
  cursor: pointer;
}

.workout-generator__exercise-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 24px;
  max-height: 400px;
  overflow-y: auto;
}

.workout-generator__exercise {
  display: flex;
  gap: 12px;
  padding: 12px;
  background: var(--color-gray-800);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.workout-generator__exercise:hover {
  background: var(--color-gray-700);
}

.workout-generator__exercise-number {
  width: 28px;
  height: 28px;
  background: var(--color-accent);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  font-weight: 600;
  color: white;
  flex-shrink: 0;
}

.workout-generator__exercise-content {
  flex: 1;
  min-width: 0;
}

.workout-generator__exercise-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-white);
  margin: 0 0 4px 0;
}

.workout-generator__exercise-meta {
  display: flex;
  gap: 8px;
  align-items: center;
}

.workout-generator__exercise-muscles {
  font-size: 12px;
  color: var(--color-gray-500);
}

.workout-generator__exercise-difficulty {
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 10px;
  font-weight: 600;
}

.workout-generator__exercise-prescription {
  font-size: 12px;
  color: var(--color-gray-400);
  margin-top: 4px;
}

.workout-generator__actions {
  display: flex;
  gap: 12px;
}

.workout-generator__back-btn {
  flex: 1;
  padding: 14px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 8px;
  color: var(--color-gray-200);
  font-size: 14px;
  cursor: pointer;
}

.workout-generator__start-btn {
  flex: 1;
  padding: 14px;
  background: var(--color-accent);
  border: none;
  border-radius: 8px;
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

/* ==================== Gym Onboarding ==================== */
.gym-onboarding {
  max-width: 600px;
  margin: 0 auto;
  padding: 40px 24px;
  min-height: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
  overflow-y: auto;
}

.gym-onboarding__progress {
  height: 4px;
  background: var(--color-gray-700);
  border-radius: 2px;
  margin-bottom: 32px;
  overflow: hidden;
}

.gym-onboarding__progress-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--color-accent), var(--looops-amber));
  border-radius: 2px;
  transition: width 0.3s ease;
}

.gym-onboarding__close {
  position: absolute;
  top: 16px;
  right: 16px;
  width: 36px;
  height: 36px;
  border: none;
  background: var(--color-gray-700);
  color: var(--color-gray-300);
  border-radius: 50%;
  font-size: 20px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.gym-onboarding__close:hover {
  background: var(--color-gray-600);
  color: var(--color-white);
}

.gym-onboarding__content {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.gym-onboarding__step {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.gym-onboarding__welcome {
  text-align: center;
  justify-content: center;
  align-items: center;
  gap: 24px;
}

.gym-onboarding__icon {
  font-size: 64px;
  line-height: 1;
}

.gym-onboarding__title {
  font-size: 28px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.gym-onboarding__subtitle {
  font-size: 16px;
  color: var(--color-gray-400);
  margin: 0;
}

.gym-onboarding__description {
  font-size: 16px;
  color: var(--color-gray-400);
  line-height: 1.6;
  max-width: 400px;
}

.gym-onboarding__features {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin: 24px 0;
}

.gym-onboarding__feature {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 20px;
  background: var(--color-gray-800);
  border-radius: 12px;
}

.gym-onboarding__feature-icon {
  font-size: 20px;
}

.gym-onboarding__feature span:last-child {
  font-size: 14px;
  color: var(--color-gray-200);
}

.gym-onboarding__btn {
  padding: 14px 32px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
  position: relative;
  z-index: 11;
}

.gym-onboarding__btn--primary {
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  color: white;
}

.gym-onboarding__btn--primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px var(--color-accent-glow);
}

.gym-onboarding__btn--secondary {
  background: var(--color-gray-700);
  color: var(--color-gray-200);
}

.gym-onboarding__btn--secondary:hover {
  background: var(--color-gray-600);
}

.gym-onboarding__btn--large {
  padding: 16px 48px;
  font-size: 18px;
}

.gym-onboarding__actions {
  display: flex;
  gap: 16px;
  margin-top: auto;
  padding-top: 32px;
  padding-bottom: 24px;
  justify-content: flex-end;
  position: relative;
  z-index: 10;
}

/* Fitness Level Step */
.gym-onboarding__options {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 24px;
  flex: 1;
}

.gym-onboarding__option {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 16px 20px;
  background: var(--color-gray-800);
  border: 2px solid var(--color-gray-700);
  border-radius: 12px;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  z-index: 5;
  font-family: inherit;
  font-size: inherit;
  color: inherit;
}

.gym-onboarding__option:hover {
  border-color: var(--color-gray-500);
}

.gym-onboarding__option--selected {
  border-color: var(--color-accent) !important;
  background: var(--color-accent-subtle) !important;
  box-shadow: 0 0 0 2px var(--color-accent-glow);
}

.gym-onboarding__option--selected .gym-onboarding__option-title {
  color: var(--color-accent);
}

.gym-onboarding__option-check {
  width: 24px;
  height: 24px;
  min-width: 24px;
  border-radius: 50%;
  border: 2px solid var(--color-gray-600);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  color: transparent;
  transition: all 0.2s ease;
  margin-right: 12px;
}

.gym-onboarding__option--selected .gym-onboarding__option-check {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
}

.gym-onboarding__option input {
  display: none;
}

.gym-onboarding__option-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.gym-onboarding__option-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
}

.gym-onboarding__option-description {
  font-size: 14px;
  color: var(--color-gray-400);
}

/* Equipment Step */
.gym-onboarding__equipment {
  overflow-y: auto;
  flex: 1;
}

.gym-onboarding__equipment-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
  margin-top: 24px;
}

.gym-onboarding__equipment-category {
  border-bottom: 1px solid var(--color-gray-700);
  padding-bottom: 12px;
}

.gym-onboarding__category-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 8px 0;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--color-white);
  position: relative;
  z-index: 5;
}

.gym-onboarding__category-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-white);
}

.gym-onboarding__category-count {
  font-size: 12px;
  color: var(--color-gray-500);
  font-weight: 400;
  margin-left: 8px;
}

.gym-onboarding__category-toggle {
  font-size: 18px;
  color: var(--color-gray-500);
}

.gym-onboarding__category-actions {
  display: flex;
  gap: 12px;
  margin: 8px 0;
}

.gym-onboarding__select-all {
  padding: 4px 8px;
  background: none;
  border: none;
  color: var(--color-accent);
  font-size: 12px;
  cursor: pointer;
  position: relative;
  z-index: 5;
}

.gym-onboarding__select-all:hover {
  text-decoration: underline;
}

.gym-onboarding__equipment-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 8px;
}

.gym-onboarding__equipment-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  z-index: 5;
}

.gym-onboarding__equipment-item:hover {
  border-color: var(--color-gray-500);
}

.gym-onboarding__equipment-item--owned {
  background: var(--color-accent-subtle);
  border-color: var(--color-accent);
}

.gym-onboarding__equipment-item input {
  display: none;
}

.gym-onboarding__equipment-check {
  width: 20px;
  height: 20px;
  border: 2px solid var(--color-gray-500);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  color: white;
}

.gym-onboarding__equipment-item--owned .gym-onboarding__equipment-check {
  background: var(--color-accent);
  border-color: var(--color-accent);
}

.gym-onboarding__equipment-name {
  font-size: 14px;
  color: var(--color-gray-200);
}

.gym-onboarding__equipment-remove {
  margin-left: auto;
  padding: 0 4px;
  background: none;
  border: none;
  color: var(--color-gray-500);
  font-size: 16px;
  cursor: pointer;
}

.gym-onboarding__equipment-remove:hover {
  color: var(--color-accent);
}

.gym-onboarding__add-custom {
  display: flex;
  gap: 8px;
  margin-top: 16px;
}

.gym-onboarding__add-custom input {
  flex: 1;
  padding: 10px 14px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-white);
  font-size: 14px;
}

.gym-onboarding__add-btn {
  padding: 10px 16px;
  background: var(--color-gray-700);
  border: none;
  border-radius: 8px;
  color: var(--color-gray-200);
  font-size: 14px;
  cursor: pointer;
}

.gym-onboarding__add-btn:hover:not(:disabled) {
  background: var(--color-gray-600);
}

.gym-onboarding__add-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Goals Step */
.gym-onboarding__goals {
  overflow-y: auto;
}

.gym-onboarding__section {
  margin-bottom: 24px;
}

.gym-onboarding__section-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 8px 0;
}

.gym-onboarding__section-hint {
  font-size: 12px;
  color: var(--color-gray-500);
  margin: 0 0 12px 0;
}

.gym-onboarding__checkbox-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.gym-onboarding__checkbox-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-family: inherit;
  color: var(--color-gray-200);
  transition: all 0.2s ease;
  position: relative;
  z-index: 5;
}

.gym-onboarding__checkbox-item:hover {
  border-color: var(--color-gray-500);
}

.gym-onboarding__checkbox-item--selected {
  background: var(--color-accent-subtle) !important;
  border-color: var(--color-accent) !important;
}

.gym-onboarding__checkbox-item input {
  display: none;
}

.gym-onboarding__checkbox-check {
  width: 18px;
  height: 18px;
  border: 2px solid var(--color-gray-500);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  color: white;
}

.gym-onboarding__checkbox-item--selected .gym-onboarding__checkbox-check {
  background: var(--color-accent);
  border-color: var(--color-accent);
}

.gym-onboarding__schedule-row {
  margin-bottom: 16px;
}

.gym-onboarding__schedule-label {
  display: block;
  font-size: 13px;
  color: var(--color-gray-400);
  margin-bottom: 8px;
}

.gym-onboarding__schedule-options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.gym-onboarding__schedule-btn {
  padding: 10px 16px;
  background: var(--color-gray-800);
  border: 2px solid var(--color-gray-700);
  border-radius: 8px;
  color: var(--color-gray-300);
  font-size: 14px;
  font-family: inherit;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  z-index: 5;
}

.gym-onboarding__schedule-btn:hover {
  border-color: var(--color-gray-500);
}

.gym-onboarding__schedule-btn--selected {
  background: var(--color-accent-subtle) !important;
  border-color: var(--color-accent) !important;
  color: var(--color-accent) !important;
}

/* Confirmation Step */
.gym-onboarding__confirmation {
  text-align: center;
  align-items: center;
}

.gym-onboarding__summary {
  width: 100%;
  max-width: 400px;
  text-align: left;
  margin: 24px 0;
}

.gym-onboarding__summary-section {
  padding: 16px;
  background: var(--color-gray-800);
  border-radius: 12px;
  margin-bottom: 12px;
}

.gym-onboarding__summary-section h4 {
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--color-gray-500);
  margin: 0 0 8px 0;
}

.gym-onboarding__summary-section p {
  font-size: 16px;
  color: var(--color-white);
  margin: 0;
}

.gym-onboarding__summary-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.gym-onboarding__summary-tag {
  padding: 4px 10px;
  background: var(--color-gray-700);
  border-radius: 12px;
  font-size: 12px;
  color: var(--color-gray-200);
}

.gym-onboarding__summary-tag--more {
  background: var(--color-gray-600);
  color: var(--color-gray-400);
}

.gym-onboarding__summary-tag--limitation {
  background: rgba(242, 112, 89, 0.1);
  color: var(--color-accent);
}

.gym-onboarding__note {
  font-size: 14px;
  color: var(--color-gray-500);
  margin: 16px 0;
}

/* ==================== Workout Module - Light Mode ==================== */
[data-theme="light"] .workout-screen__header {
  background: #ffffff;
  border-bottom-color: #e0e0e0;
}

[data-theme="light"] .workout-screen__title {
  color: #1a1a1a;
}

[data-theme="light"] .workout-screen__tab {
  color: #666666;
}

[data-theme="light"] .workout-screen__tab:hover {
  background: #f5f5f5;
  color: #1a1a1a;
}

[data-theme="light"] .workout-screen__tab--active {
  background: var(--color-accent-subtle);
  color: var(--color-accent);
}

[data-theme="light"] .workout-screen__tab-count {
  background: #e0e0e0;
}

[data-theme="light"] .workout-screen__search,
[data-theme="light"] .workout-screen__filter-select {
  background: #ffffff;
  border-color: #e0e0e0;
  color: #1a1a1a;
}

[data-theme="light"] .exercise-card {
  background: #ffffff;
  border-color: #e0e0e0;
}

[data-theme="light"] .exercise-card:hover {
  border-color: #cccccc;
}

[data-theme="light"] .exercise-card__name {
  color: #1a1a1a;
}

[data-theme="light"] .exercise-card__muscles {
  color: #666666;
}

[data-theme="light"] .exercise-detail__title-section h1 {
  color: #1a1a1a;
}

[data-theme="light"] .exercise-detail__section {
  background: #ffffff;
  border-color: #e0e0e0;
}

[data-theme="light"] .exercise-detail__section h3 {
  color: #666666;
}

[data-theme="light"] .exercise-detail__description {
  color: #333333;
}

[data-theme="light"] .exercise-detail__muscle-tag {
  background: #f0f0f0;
  color: #333333;
}

[data-theme="light"] .exercise-form__section {
  background: #ffffff;
  border-color: #e0e0e0;
}

[data-theme="light"] .exercise-form__input,
[data-theme="light"] .exercise-form__select,
[data-theme="light"] .exercise-form__textarea {
  background: #ffffff;
  border-color: #e0e0e0;
  color: #1a1a1a;
}

[data-theme="light"] .exercise-form__checkbox-item {
  background: #ffffff;
  border-color: #e0e0e0;
}

[data-theme="light"] .training-tip-card {
  background: #ffffff;
  border-color: #e0e0e0;
}

[data-theme="light"] .training-tip-card__subject {
  color: #1a1a1a;
}

[data-theme="light"] .training-tip-card__category {
  background: #f0f0f0;
  color: #666666;
}

[data-theme="light"] .workout-calendar__day {
  background: #ffffff;
  border-color: #e0e0e0;
}

[data-theme="light"] .workout-calendar__day-date {
  color: #1a1a1a;
}

[data-theme="light"] .workout-calendar__workout-item {
  background: #f5f5f5;
}

[data-theme="light"] .workout-calendar__workout-name {
  color: #1a1a1a;
}

[data-theme="light"] .workout-generator {
  background: #ffffff;
  border-color: #e0e0e0;
}

[data-theme="light"] .workout-generator__header h2 {
  color: #1a1a1a;
}

[data-theme="light"] .workout-generator__duration-btn,
[data-theme="light"] .workout-generator__focus-btn {
  background: #ffffff;
  border-color: #e0e0e0;
  color: #666666;
}

[data-theme="light"] .workout-generator__exercise {
  background: #f5f5f5;
}

[data-theme="light"] .workout-generator__exercise-name {
  color: #1a1a1a;
}

[data-theme="light"] .gym-onboarding__title {
  color: #1a1a1a;
}

[data-theme="light"] .gym-onboarding__option {
  background: #ffffff;
  border-color: #e0e0e0;
}

[data-theme="light"] .gym-onboarding__option--selected {
  border-color: var(--color-accent) !important;
  background: var(--color-accent-subtle) !important;
  box-shadow: 0 0 0 2px var(--color-accent-glow);
}

[data-theme="light"] .gym-onboarding__option--selected .gym-onboarding__option-title {
  color: var(--color-accent);
}

[data-theme="light"] .gym-onboarding__option-title {
  color: #1a1a1a;
}

[data-theme="light"] .gym-onboarding__equipment-item {
  background: #ffffff;
  border-color: #e0e0e0;
}

[data-theme="light"] .gym-onboarding__equipment-name {
  color: #333333;
}

[data-theme="light"] .gym-onboarding__checkbox-item {
  background: #ffffff;
  border-color: #e0e0e0;
  color: #333333;
}

[data-theme="light"] .gym-onboarding__checkbox-item--selected {
  background: var(--color-accent-subtle) !important;
  border-color: var(--color-accent) !important;
}

[data-theme="light"] .gym-onboarding__schedule-btn {
  background: #ffffff;
  border-color: #e0e0e0;
  color: #666666;
}

[data-theme="light"] .gym-onboarding__schedule-btn--selected {
  background: var(--color-accent-subtle) !important;
  border-color: var(--color-accent) !important;
  color: var(--color-accent) !important;
}

[data-theme="light"] .gym-onboarding__summary-section {
  background: #f5f5f5;
}

[data-theme="light"] .gym-onboarding__summary-section h4 {
  color: #666666;
}

[data-theme="light"] .gym-onboarding__summary-section p {
  color: #1a1a1a;
}

[data-theme="light"] .gym-onboarding__summary-tag {
  background: #e0e0e0;
  color: #333333;
}

/* ==================== Workout Module - Responsive ==================== */
@media (max-width: 768px) {
  .workout-screen__controls {
    flex-direction: column;
  }

  .workout-screen__filters {
    width: 100%;
  }

  .workout-screen__search {
    width: 100%;
  }

  .workout-screen__actions {
    width: 100%;
    justify-content: space-between;
  }

  .workout-screen__exercise-grid {
    grid-template-columns: 1fr;
  }

  .exercise-detail__muscle-groups {
    flex-direction: column;
    gap: 16px;
  }

  .exercise-detail__progressions {
    grid-template-columns: 1fr;
  }

  .workout-calendar__grid {
    grid-template-columns: 1fr;
  }

  .workout-calendar__day {
    min-height: auto;
  }

  .workout-generator__focus-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .gym-onboarding__checkbox-grid {
    flex-direction: column;
  }

  .gym-onboarding__checkbox-item {
    width: 100%;
  }

  .gym-onboarding__schedule-options {
    flex-wrap: wrap;
  }

  .gym-onboarding__actions {
    flex-direction: column;
  }

  .gym-onboarding__btn {
    width: 100%;
    text-align: center;
  }
}

/* ==================== Workout Widget ==================== */
.workout-widget {
  display: flex;
  flex-direction: column;
  gap: 16px;
  height: 100%;
}

.workout-widget--compact {
  gap: 12px;
}

.workout-widget--setup {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 24px;
  gap: 12px;
}

.workout-widget__setup-icon {
  font-size: 48px;
}

.workout-widget--setup h4 {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.workout-widget--setup p {
  font-size: 14px;
  color: var(--color-gray-400);
  margin: 0;
}

.workout-widget__setup-btn {
  margin-top: 8px;
  padding: 12px 24px;
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.workout-widget__setup-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px var(--color-accent-glow);
}

.workout-widget--onboarding {
  overflow-y: auto;
  height: 100%;
}

/* Stats */
.workout-widget__stats {
  display: flex;
  gap: 12px;
}

.workout-widget__stat {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 12px;
  background: var(--color-gray-800);
  border-radius: 8px;
}

.workout-widget__stat-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-white);
}

.workout-widget__stat-label {
  font-size: 12px;
  color: var(--color-gray-400);
}

/* Quick Generate */
.workout-widget__generate h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-300);
  margin: 0 0 12px 0;
}

.workout-widget__focus-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

.workout-widget__focus-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 12px 8px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.workout-widget__focus-btn:hover {
  background: var(--color-gray-700);
  border-color: var(--color-accent);
}

.workout-widget__focus-icon {
  font-size: 20px;
}

.workout-widget__focus-label {
  font-size: 12px;
  color: var(--color-gray-300);
}

/* Recent Exercises */
.workout-widget__recent h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-gray-300);
  margin: 0 0 8px 0;
}

.workout-widget__recent-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.workout-widget__recent-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: var(--color-gray-800);
  border-radius: 6px;
}

.workout-widget__recent-name {
  font-size: 14px;
  color: var(--color-white);
}

.workout-widget__recent-muscles {
  font-size: 12px;
  color: var(--color-gray-500);
}

/* Browse Button */
.workout-widget__browse-btn {
  margin-top: auto;
  padding: 10px 16px;
  background: transparent;
  border: 1px solid var(--color-gray-600);
  border-radius: 6px;
  color: var(--color-gray-300);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.workout-widget__browse-btn:hover {
  background: var(--color-gray-800);
  border-color: var(--color-accent);
  color: var(--color-white);
}

.workout-widget__browse-btn--secondary {
  background: transparent;
  color: var(--color-gray-400);
}

/* Main Actions Row */
.workout-widget__main-actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.workout-widget__main-actions .workout-widget__browse-btn {
  flex: 1;
  margin-top: 0;
}

/* Today's Focus */
.workout-widget__today {
  margin-bottom: 16px;
}

.workout-widget__today-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.workout-widget__today-header h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

.workout-widget__today-day {
  font-size: 12px;
  color: var(--color-gray-400);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.workout-widget__today-card {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: linear-gradient(135deg, var(--color-gray-800), var(--color-gray-700));
  border-radius: 8px;
  border-left: 3px solid var(--color-accent);
}

.workout-widget__today-name {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
}

.workout-widget__today-desc {
  font-size: 13px;
  color: var(--color-gray-400);
}

.workout-widget__today-btn {
  margin-top: 8px;
  padding: 8px 12px;
  background: var(--color-accent);
  border: none;
  border-radius: 6px;
  color: white;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  align-self: flex-start;
}

.workout-widget__today-btn:hover {
  background: var(--color-accent-hover);
  transform: translateY(-1px);
}

/* Program View */
.workout-widget--program {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.workout-widget__program-info {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.workout-widget__program-badge {
  padding: 4px 10px;
  background: var(--color-gray-800);
  border-radius: 12px;
  font-size: 12px;
  color: var(--color-gray-300);
}

.workout-widget__program-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1;
  overflow-y: auto;
}

.workout-widget__program-day {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: var(--color-gray-800);
  border-radius: 8px;
  border-left: 3px solid var(--color-accent);
}

.workout-widget__program-day--rest {
  border-left-color: var(--color-gray-600);
  opacity: 0.8;
}

.workout-widget__program-day-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.workout-widget__program-day-label {
  font-size: 11px;
  color: var(--color-gray-500);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.workout-widget__program-day-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--color-white);
}

.workout-widget__program-day-desc {
  font-size: 12px;
  color: var(--color-gray-400);
}

.workout-widget__program-day-btn {
  margin-top: 6px;
  padding: 6px 12px;
  background: transparent;
  border: 1px solid var(--color-accent);
  border-radius: 4px;
  color: var(--color-accent);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  align-self: flex-start;
}

.workout-widget__program-day-btn:hover {
  background: var(--color-accent);
  color: white;
}

.workout-widget__program-tips {
  margin-top: 12px;
  padding: 12px;
  background: var(--color-gray-800);
  border-radius: 8px;
}

.workout-widget__program-tips h5 {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0 0 8px;
}

.workout-widget__program-tips ul {
  margin: 0;
  padding-left: 16px;
}

.workout-widget__program-tips li {
  font-size: 12px;
  color: var(--color-gray-400);
  margin: 4px 0;
}

/* Header */
.workout-widget__header {
  display: flex;
  align-items: center;
  gap: 12px;
}

.workout-widget__back {
  padding: 6px 12px;
  background: transparent;
  border: none;
  color: var(--color-gray-400);
  font-size: 14px;
  cursor: pointer;
  transition: color 0.2s ease;
}

.workout-widget__back:hover {
  color: var(--color-white);
}

.workout-widget__header h4 {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-white);
  margin: 0;
}

/* Exercise List (Generate View) */
.workout-widget__exercise-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1;
  overflow-y: auto;
}

.workout-widget__exercise-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--color-gray-800);
  border-radius: 8px;
}

.workout-widget__exercise-num {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-accent);
  color: white;
  border-radius: 50%;
  font-size: 12px;
  font-weight: 600;
}

.workout-widget__exercise-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.workout-widget__exercise-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--color-white);
}

.workout-widget__exercise-detail {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-accent);
}

.workout-widget__exercise-rest {
  color: var(--color-gray-500);
  font-weight: 400;
}

.workout-widget__exercise-muscles {
  font-size: 11px;
  color: var(--color-gray-500);
}

/* Actions */
.workout-widget__actions {
  display: flex;
  gap: 8px;
  margin-top: auto;
}

.workout-widget__action-btn {
  flex: 1;
  padding: 12px 16px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
}

.workout-widget__action-btn--primary {
  background: linear-gradient(135deg, var(--color-accent), var(--looops-amber));
  color: white;
}

.workout-widget__action-btn--primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px var(--color-accent-glow);
}

.workout-widget__action-btn--secondary {
  background: var(--color-gray-700);
  color: var(--color-gray-300);
}

.workout-widget__action-btn--secondary:hover {
  background: var(--color-gray-600);
}

/* Empty State */
.workout-widget__empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 24px;
  flex: 1;
}

.workout-widget__empty p {
  font-size: 14px;
  color: var(--color-gray-400);
  margin: 4px 0;
}

/* Exercise Grid (Browse View) */
.workout-widget__exercise-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
  flex: 1;
  overflow-y: auto;
}

.workout-widget__exercise-card {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background: var(--color-gray-800);
  border-radius: 8px;
  position: relative;
}

.workout-widget__exercise-card .workout-widget__exercise-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--color-white);
}

.workout-widget__exercise-muscles {
  font-size: 11px;
  color: var(--color-gray-500);
}

.workout-widget__favorite {
  position: absolute;
  top: 8px;
  right: 8px;
  color: var(--looops-amber);
  font-size: 12px;
}

.workout-widget__more {
  text-align: center;
  font-size: 13px;
  color: var(--color-gray-500);
  margin: 8px 0 0;
}

/* Light Mode */
[data-theme="light"] .workout-widget--setup h4 {
  color: var(--color-gray-900);
}

[data-theme="light"] .workout-widget__stat {
  background: var(--color-gray-100);
}

[data-theme="light"] .workout-widget__stat-value {
  color: var(--color-gray-900);
}

[data-theme="light"] .workout-widget__focus-btn {
  background: var(--color-gray-100);
  border-color: var(--color-gray-300);
}

[data-theme="light"] .workout-widget__focus-btn:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .workout-widget__recent-item {
  background: var(--color-gray-100);
}

[data-theme="light"] .workout-widget__recent-name {
  color: var(--color-gray-900);
}

[data-theme="light"] .workout-widget__exercise-item {
  background: var(--color-gray-100);
}

[data-theme="light"] .workout-widget__exercise-name {
  color: var(--color-gray-900);
}

[data-theme="light"] .workout-widget__exercise-card {
  background: var(--color-gray-100);
}

[data-theme="light"] .workout-widget__today-header h4 {
  color: var(--color-gray-900);
}

[data-theme="light"] .workout-widget__today-card {
  background: linear-gradient(135deg, var(--color-gray-100), var(--color-gray-200));
}

[data-theme="light"] .workout-widget__today-name {
  color: var(--color-gray-900);
}

[data-theme="light"] .workout-widget__today-desc {
  color: var(--color-gray-600);
}

[data-theme="light"] .workout-widget__program-badge {
  background: var(--color-gray-200);
  color: var(--color-gray-700);
}

[data-theme="light"] .workout-widget__program-day {
  background: var(--color-gray-100);
}

[data-theme="light"] .workout-widget__program-day-name {
  color: var(--color-gray-900);
}

[data-theme="light"] .workout-widget__program-day-desc {
  color: var(--color-gray-600);
}

[data-theme="light"] .workout-widget__program-tips {
  background: var(--color-gray-100);
}

[data-theme="light"] .workout-widget__program-tips h5 {
  color: var(--color-gray-900);
}

[data-theme="light"] .workout-widget__program-tips li {
  color: var(--color-gray-600);
}

[data-theme="light"] .workout-widget__header h4 {
  color: var(--color-gray-900);
}

/* Responsive */
@media (max-width: 600px) {
  .workout-widget__focus-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .workout-widget__exercise-grid {
    grid-template-columns: 1fr;
  }
}

/* ========== Day Type Selector ========== */
.day-type-selector {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-top: 0.5rem;
}

.day-type-chip {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.5rem 0.75rem;
  background: var(--color-gray-800);
  border: 2px solid var(--color-gray-700);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 0.875rem;
  color: var(--color-gray-300);
}

.day-type-chip:hover {
  background: var(--color-gray-700);
  border-color: var(--color-gray-600);
}

.day-type-chip.selected {
  color: white;
  border-color: currentColor;
}

.day-type-chip-icon {
  font-size: 1rem;
}

.day-type-chip-label {
  font-weight: 500;
}

.form-field-hint {
  font-size: 0.75rem;
  color: var(--color-gray-500);
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
}

.form-field-note {
  font-size: 0.75rem;
  color: var(--color-gray-500);
  margin-top: 0.5rem;
  font-style: italic;
}

/* ========== Habit Edit Modal ========== */
.habit-edit-modal {
  background: var(--color-gray-900);
  border-radius: 16px;
  width: 90%;
  max-width: 500px;
  max-height: 90vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.habit-edit-content {
  padding: 1.5rem;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.habit-edit-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.75rem;
  margin-top: 0.5rem;
  padding: 1rem;
  background: var(--color-gray-800);
  border-radius: 12px;
}

.habit-edit-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
}

.habit-edit-stat-value {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--color-white);
}

.habit-edit-stat-label {
  font-size: 0.7rem;
  color: var(--color-gray-400);
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

/* ========== Light Theme - Day Type Selector ========== */
[data-theme="light"] .day-type-chip {
  background: var(--color-gray-100);
  border-color: var(--color-gray-300);
  color: var(--color-gray-700);
}

[data-theme="light"] .day-type-chip:hover {
  background: var(--color-gray-200);
  border-color: var(--color-gray-400);
}

[data-theme="light"] .day-type-chip.selected {
  color: white;
}

[data-theme="light"] .form-field-hint,
[data-theme="light"] .form-field-note {
  color: var(--color-gray-500);
}

/* ========== Light Theme - Habit Edit Modal ========== */
[data-theme="light"] .habit-edit-modal {
  background: var(--color-white);
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
}

[data-theme="light"] .habit-edit-stats {
  background: var(--color-gray-100);
}

[data-theme="light"] .habit-edit-stat-value {
  color: var(--color-gray-900);
}

[data-theme="light"] .habit-edit-stat-label {
  color: var(--color-gray-500);
}

/* ========== Week Day Types Editor ========== */
.week-day-types-editor {
  background: var(--color-gray-900);
  border-radius: 16px;
  padding: 1.5rem;
}

.week-day-types-editor.compact {
  padding: 1rem;
  background: transparent;
}

.week-editor-header {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
  margin-bottom: 1.5rem;
  position: relative;
}

.week-editor-header h3 {
  color: var(--color-white);
  font-size: 1.25rem;
  margin: 0;
}

.week-editor-hint {
  color: var(--color-gray-400);
  font-size: 0.875rem;
}

.week-editor-close {
  position: absolute;
  top: 0;
  right: 0;
  background: none;
  border: none;
  color: var(--color-gray-400);
  font-size: 1.5rem;
  cursor: pointer;
  padding: 0.25rem;
  line-height: 1;
}

.week-editor-close:hover {
  color: var(--color-white);
}

.week-editor-days {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 0.75rem;
}

.week-editor-day {
  position: relative;
}

.week-editor-day.today .week-editor-day-btn {
  box-shadow: 0 0 0 2px var(--color-accent);
}

.week-editor-day-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.35rem;
  padding: 1rem 0.75rem;
  background: var(--color-gray-800);
  border: 2px solid var(--color-gray-700);
  border-radius: 12px;
  cursor: pointer;
  width: 100%;
  min-width: 70px;
  transition: all 0.2s ease;
}

.week-editor-day-btn:hover {
  background: var(--color-gray-700);
}

.week-editor-day-name {
  font-size: 0.7rem;
  color: var(--color-gray-400);
  text-transform: uppercase;
  font-weight: 600;
}

.week-editor-day-num {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--color-white);
}

.week-editor-day-type {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  font-size: 1rem;
}

.week-editor-day-multi {
  position: absolute;
  top: 4px;
  right: 4px;
  font-size: 0.625rem;
  background: var(--color-accent);
  color: white;
  padding: 0 4px;
  border-radius: 8px;
  font-weight: 600;
}

/* Day type picker modal */
.week-editor-picker-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 199;
}

.week-editor-picker {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 200;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 16px;
  padding: 1.5rem;
  width: 340px;
  max-width: 90vw;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

.week-editor-picker-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  color: var(--color-gray-200);
  font-size: 1rem;
  font-weight: 500;
}

.week-editor-picker-close {
  background: none;
  border: none;
  color: var(--color-gray-400);
  cursor: pointer;
  font-size: 1.25rem;
  padding: 0;
  line-height: 1;
}

.week-editor-picker-types {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}

.week-editor-picker-custom {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
  margin-top: 0.75rem;
  padding-top: 0.75rem;
  border-top: 1px solid var(--color-gray-700);
}

.week-editor-type-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: var(--color-gray-700);
  border: 2px solid var(--color-gray-600);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 0.875rem;
  color: var(--color-gray-300);
}

.week-editor-type-btn:hover {
  background: var(--color-gray-600);
}

.week-editor-type-btn.active {
  color: white;
}

.week-editor-type-icon {
  font-size: 1rem;
}

.week-editor-type-label {
  font-weight: 500;
}

.week-editor-type-check {
  margin-left: auto;
  font-size: 0.75rem;
}

.week-editor-clear-btn {
  width: 100%;
  margin-top: 1rem;
  padding: 0.75rem;
  background: transparent;
  border: 1px dashed var(--color-gray-600);
  border-radius: 10px;
  color: var(--color-gray-400);
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.week-editor-clear-btn:hover {
  border-color: var(--color-gray-500);
  color: var(--color-gray-300);
}

.week-editor-footer {
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid var(--color-gray-800);
}

.week-editor-note {
  color: var(--color-gray-500);
  font-size: 0.75rem;
  text-align: center;
}

/* Quick Actions FAB - Combined floating action button */
.quick-actions-fab {
  position: fixed;
  bottom: 80px;
  right: 20px;
  z-index: 100;
  display: flex;
  flex-direction: column-reverse;
  align-items: center;
  gap: 12px;
}

.quick-actions-btn {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--color-accent), #e05545);
  border: none;
  color: white;
  font-size: 2rem;
  font-weight: 300;
  cursor: pointer;
  box-shadow: 0 4px 20px rgba(242, 112, 89, 0.4);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  align-items: center;
  justify-content: center;
}

.quick-actions-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 24px rgba(242, 112, 89, 0.5);
}

.quick-actions-icon {
  transition: transform 0.3s ease;
  line-height: 1;
}

.quick-actions-icon.rotated {
  transform: rotate(45deg);
}

.quick-actions-menu {
  display: flex;
  flex-direction: column;
  gap: 8px;
  animation: fabMenuIn 0.3s ease forwards;
}

@keyframes fabMenuIn {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.8);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.quick-action-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--color-gray-800);
  border: 1px solid var(--color-gray-700);
  border-radius: 28px;
  color: var(--color-gray-100);
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.quick-action-item:hover {
  background: var(--color-gray-700);
  transform: translateX(-4px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
}

.quick-action-icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
}

.quick-action-label {
  font-size: 0.875rem;
  font-weight: 500;
}

.quick-actions-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.3);
  z-index: 99;
  animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Light theme */
[data-theme="light"] .quick-action-item {
  background: var(--color-white);
  border-color: var(--color-gray-200);
  color: var(--color-gray-900);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .quick-action-item:hover {
  background: var(--color-gray-100);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
}

[data-theme="light"] .quick-actions-backdrop {
  background: rgba(0, 0, 0, 0.2);
}

/* Quick Add Type Toggle (for habits) */
.quick-add-type-toggle {
  display: flex;
  gap: 8px;
}

.quick-add-type-btn {
  flex: 1;
  padding: 10px 16px;
  border: 1px solid var(--color-gray-600);
  border-radius: var(--radius);
  background: transparent;
  color: var(--color-text-secondary);
  cursor: pointer;
  font-size: 0.875rem;
  font-weight: 500;
  transition: all 0.2s ease;
}

.quick-add-type-btn:hover {
  border-color: var(--color-gray-500);
  background: var(--color-gray-800);
}

[data-theme="light"] .quick-add-type-btn {
  border-color: var(--color-gray-300);
}

[data-theme="light"] .quick-add-type-btn:hover {
  border-color: var(--color-gray-400);
  background: var(--color-gray-100);
}

/* Routine Picker Modal */
.routine-picker-modal {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  width: 90%;
  max-width: 400px;
  max-height: 70vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.routine-picker-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid var(--color-border);
}

.routine-picker-header h3 {
  margin: 0;
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--color-text);
}

.routine-picker-close {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  color: var(--color-text-secondary);
  font-size: 1.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius);
  transition: all 0.2s ease;
}

.routine-picker-close:hover {
  background: var(--color-gray-700);
  color: var(--color-text);
}

.routine-picker-list {
  padding: 12px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.routine-picker-empty {
  padding: 32px;
  text-align: center;
  color: var(--color-text-tertiary);
}

.routine-picker-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
  width: 100%;
}

.routine-picker-item:hover {
  background: var(--color-surface-hover);
  border-color: var(--looops-coral);
  transform: translateY(-1px);
}

.routine-picker-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.routine-picker-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.routine-picker-title {
  font-size: 0.9375rem;
  font-weight: 600;
  color: var(--color-text);
}

.routine-picker-meta {
  font-size: 0.75rem;
  color: var(--color-text-tertiary);
}

.routine-picker-start {
  color: var(--looops-coral);
  font-size: 1rem;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.routine-picker-item:hover .routine-picker-start {
  opacity: 1;
}

/* Light theme */
[data-theme="light"] .routine-picker-modal {
  background: white;
}

[data-theme="light"] .routine-picker-close:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .routine-picker-item {
  background: var(--color-gray-50);
  border-color: var(--color-gray-200);
}

[data-theme="light"] .routine-picker-item:hover {
  background: white;
}

/* Legacy FAB style for backward compatibility */
.week-types-fab {
  position: fixed;
  bottom: 80px;
  right: 20px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: var(--color-accent);
  border: none;
  color: white;
  font-size: 1.5rem;
  cursor: pointer;
  box-shadow: 0 4px 20px rgba(242, 112, 89, 0.4);
  transition: all 0.2s ease;
  z-index: 50;
}

.week-types-fab:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 24px rgba(242, 112, 89, 0.5);
}

.week-types-modal {
  background: var(--color-gray-900);
  border-radius: 20px;
  width: 95%;
  max-width: 700px;
  max-height: 90vh;
  overflow: auto;
  padding: 1.5rem;
}

/* Light theme */
[data-theme="light"] .week-day-types-editor {
  background: var(--color-white);
}

[data-theme="light"] .week-day-types-editor.compact {
  background: transparent;
}

[data-theme="light"] .week-editor-header h3 {
  color: var(--color-gray-900);
}

[data-theme="light"] .week-editor-hint {
  color: var(--color-gray-500);
}

[data-theme="light"] .week-editor-day-btn {
  background: var(--color-gray-100);
  border-color: var(--color-gray-300);
}

[data-theme="light"] .week-editor-day-btn:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .week-editor-day-name {
  color: var(--color-gray-500);
}

[data-theme="light"] .week-editor-day-num {
  color: var(--color-gray-900);
}

[data-theme="light"] .week-editor-picker-backdrop {
  background: rgba(0, 0, 0, 0.3);
}

[data-theme="light"] .week-editor-picker {
  background: var(--color-white);
  border-color: var(--color-gray-200);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
}

[data-theme="light"] .week-editor-picker-header {
  color: var(--color-gray-600);
}

[data-theme="light"] .week-editor-type-btn {
  background: var(--color-gray-100);
  border-color: var(--color-gray-300);
  color: var(--color-gray-700);
}

[data-theme="light"] .week-editor-type-btn:hover {
  background: var(--color-gray-200);
}

[data-theme="light"] .week-editor-clear-btn {
  border-color: var(--color-gray-300);
  color: var(--color-gray-500);
}

[data-theme="light"] .week-editor-footer {
  border-color: var(--color-gray-200);
}

[data-theme="light"] .week-types-modal {
  background: var(--color-white);
}

/* Responsive */
@media (max-width: 600px) {
  .week-editor-days {
    gap: 0.25rem;
  }

  .week-editor-day-btn {
    padding: 0.5rem 0.25rem;
    min-width: 40px;
  }

  .week-editor-day-num {
    font-size: 1rem;
  }

  .week-editor-day-type {
    width: 24px;
    height: 24px;
    font-size: 0.75rem;
  }

  .week-editor-picker {
    width: 95vw;
    max-width: 340px;
  }
}

/* ========== Finance Module ========== */
.finance-screen {
  padding: 24px;
  max-width: 1200px;
  margin: 0 auto;
}

.finance-screen--embedded {
  padding: 0;
  max-width: none;
}

.finance-embedded-header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: 16px;
}

.finance-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 24px;
}

.finance-header-title h2 {
  margin: 0 0 4px 0;
  font-size: 1.75rem;
  font-weight: 700;
  color: var(--color-text-primary);
}

.finance-header-subtitle {
  font-size: 0.9rem;
  color: var(--color-text-muted);
}

.finance-sync-btn {
  padding: 8px 16px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  transition: opacity 0.2s;
}

.finance-sync-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.finance-sync-btn:hover:not(:disabled) {
  opacity: 0.9;
}

/* Finance Tabs */
.finance-tabs {
  display: flex;
  gap: 4px;
  margin-bottom: 24px;
  border-bottom: 1px solid var(--color-border);
  padding-bottom: 0;
}

.finance-tab {
  padding: 12px 20px;
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--color-text-muted);
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 500;
  transition: all 0.2s;
}

.finance-tab:hover {
  color: var(--color-text-primary);
}

.finance-tab.active {
  color: var(--color-primary);
  border-bottom-color: var(--color-primary);
}

/* Finance Content */
.finance-content {
  min-height: 400px;
}

/* Finance Cards */
.finance-card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
}

.finance-card h3 {
  margin: 0 0 16px 0;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--color-text-primary);
}

/* Empty State */
.finance-empty-state {
  text-align: center;
  padding: 60px 20px;
}

.finance-empty-icon {
  font-size: 4rem;
  margin-bottom: 16px;
}

.finance-empty-state h3 {
  margin: 0 0 12px 0;
  font-size: 1.5rem;
  color: var(--color-text-primary);
}

.finance-empty-state p {
  color: var(--color-text-muted);
  margin: 0 0 24px 0;
  max-width: 400px;
  margin-left: auto;
  margin-right: auto;
}

.finance-connect-btn {
  padding: 12px 32px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s, opacity 0.2s;
}

.finance-connect-btn:hover {
  transform: translateY(-1px);
  opacity: 0.9;
}

/* Overview Grid */
.finance-overview {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
}

/* Net Worth Card */
.finance-networth {
  grid-column: span 1;
}

.finance-networth-value {
  font-size: 2rem;
  font-weight: 700;
  color: var(--color-text-primary);
  margin-bottom: 16px;
}

.finance-networth-breakdown {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.finance-networth-item {
  display: flex;
  justify-content: space-between;
  font-size: 0.9rem;
}

.finance-networth-item .positive {
  color: var(--color-success);
}

.finance-networth-item .negative {
  color: var(--color-danger);
}

/* Spending by Loop */
.finance-spending-loops {
  grid-column: span 1;
}

.finance-loop-bars {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.finance-loop-bar-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.finance-loop-label {
  min-width: 100px;
  font-size: 0.9rem;
  font-weight: 500;
}

.finance-loop-bar-container {
  flex: 1;
  height: 8px;
  background: var(--color-gray-200);
  border-radius: 4px;
  overflow: hidden;
}

.finance-loop-bar-fill {
  height: 100%;
  border-radius: 4px;
  transition: width 0.3s ease;
}

.finance-loop-amount {
  min-width: 80px;
  text-align: right;
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--color-text-primary);
}

/* Transaction List */
.finance-transaction-list,
.finance-transaction-list-full {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.finance-transaction-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
}

.finance-transaction-icon {
  font-size: 1.5rem;
}

.finance-transaction-icon-lg {
  font-size: 2rem;
  min-width: 48px;
  text-align: center;
}

.finance-transaction-details,
.finance-transaction-info {
  flex: 1;
  min-width: 0;
}

.finance-transaction-desc {
  display: block;
  font-weight: 500;
  color: var(--color-text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.finance-transaction-main {
  display: flex;
  align-items: center;
  gap: 8px;
}

.finance-transaction-date {
  font-size: 0.8rem;
  color: var(--color-text-muted);
}

.finance-transaction-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.8rem;
  color: var(--color-text-muted);
  margin-top: 4px;
}

.finance-transaction-amount,
.finance-transaction-amount-lg {
  font-weight: 600;
  font-size: 0.95rem;
}

.finance-transaction-amount-lg {
  font-size: 1.1rem;
  min-width: 100px;
  text-align: right;
}

.finance-transaction-amount.positive,
.finance-transaction-amount-lg.positive {
  color: var(--color-success);
}

.finance-transaction-amount.negative,
.finance-transaction-amount-lg.negative {
  color: var(--color-text-primary);
}

.finance-transaction-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;
  background: var(--color-gray-50);
  border-radius: 8px;
}

.finance-pending-badge {
  font-size: 0.7rem;
  padding: 2px 6px;
  background: var(--color-warning);
  color: white;
  border-radius: 4px;
  font-weight: 600;
}

.finance-category-badge {
  font-size: 0.7rem;
  padding: 2px 8px;
  border-radius: 4px;
  color: white;
  font-weight: 500;
}

.finance-empty-text {
  color: var(--color-text-muted);
  font-style: italic;
  padding: 20px;
  text-align: center;
}

/* Filters */
.finance-filters {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
  flex-wrap: wrap;
}

.finance-search {
  flex: 1;
  min-width: 200px;
  padding: 10px 14px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-surface);
  color: var(--color-text-primary);
  font-size: 0.9rem;
}

.finance-search::placeholder {
  color: var(--color-text-muted);
}

.finance-filter-select {
  padding: 10px 14px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-surface);
  color: var(--color-text-primary);
  font-size: 0.9rem;
  cursor: pointer;
}

/* Accounts */
.finance-accounts-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.finance-account-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  background: var(--color-gray-50);
  border-radius: 8px;
}

.finance-account-card.hidden {
  opacity: 0.6;
}

.finance-account-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.finance-account-name {
  font-weight: 600;
  color: var(--color-text-primary);
}

.finance-account-institution {
  font-size: 0.85rem;
  color: var(--color-text-muted);
}

.finance-account-balance {
  font-size: 1.1rem;
  font-weight: 700;
}

.finance-account-balance.positive {
  color: var(--color-success);
}

.finance-account-balance.negative {
  color: var(--color-danger);
}

/* Categories */
.finance-categories-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 12px;
}

.finance-category-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
  border-left: 3px solid;
}

.finance-category-icon {
  font-size: 1.5rem;
}

.finance-category-info {
  flex: 1;
}

.finance-category-name {
  display: block;
  font-weight: 500;
  color: var(--color-text-primary);
}

.finance-category-loop {
  font-size: 0.8rem;
  color: var(--color-text-muted);
}

.finance-category-delete {
  background: none;
  border: none;
  color: var(--color-text-muted);
  font-size: 1.2rem;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
}

.finance-category-delete:hover {
  background: var(--color-danger-light);
  color: var(--color-danger);
}

/* Settings */
.finance-settings-desc {
  color: var(--color-text-muted);
  margin: 0 0 16px 0;
  line-height: 1.5;
}

.finance-setup-steps {
  padding-left: 20px;
  margin: 0 0 20px 0;
  color: var(--color-text-secondary);
  line-height: 1.8;
}

.finance-setup-steps a {
  color: var(--color-primary);
  text-decoration: none;
}

.finance-setup-steps a:hover {
  text-decoration: underline;
}

.finance-token-input {
  display: flex;
  gap: 12px;
}

.finance-token-input input {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid var(--color-border);
  border-radius: 8px;
  background: var(--color-surface);
  color: var(--color-text-primary);
  font-size: 0.9rem;
  font-family: monospace;
}

.finance-token-input input::placeholder {
  font-family: inherit;
  color: var(--color-text-muted);
}

.finance-token-input button {
  padding: 12px 24px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  white-space: nowrap;
}

.finance-token-input button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.finance-error-message {
  margin-top: 12px;
  padding: 12px;
  background: var(--color-danger-light, rgba(239, 68, 68, 0.1));
  color: var(--color-danger);
  border-radius: 8px;
  font-size: 0.9rem;
}

.finance-success-message {
  margin-top: 12px;
  padding: 12px;
  background: var(--color-success-light, rgba(34, 197, 94, 0.1));
  color: var(--color-success);
  border-radius: 8px;
  font-size: 0.9rem;
}

.finance-sync-message {
  margin-top: 12px;
  padding: 12px;
  background: var(--color-primary-light, rgba(99, 102, 241, 0.1));
  color: var(--color-primary);
  border-radius: 8px;
  font-size: 0.9rem;
}

.finance-connection-item {
  padding: 16px;
  background: var(--color-gray-50);
  border-radius: 8px;
  margin-bottom: 12px;
}

.finance-connection-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.finance-connection-provider {
  font-weight: 600;
  color: var(--color-text-primary);
}

.finance-connection-status {
  font-size: 0.85rem;
  padding: 4px 10px;
  background: var(--color-success-light, rgba(34, 197, 94, 0.1));
  color: var(--color-success);
  border-radius: 12px;
}

.finance-connection-meta {
  font-size: 0.85rem;
  color: var(--color-text-muted);
}

.finance-delete-btn {
  margin-top: 12px;
  padding: 8px 16px;
  background: transparent;
  border: 1px solid var(--color-danger, #dc3545);
  color: var(--color-danger, #dc3545);
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.85rem;
  transition: all 0.2s;
}

.finance-delete-btn:hover {
  background: var(--color-danger, #dc3545);
  color: white;
}

.finance-danger-zone {
  border: 1px solid var(--color-danger, #dc3545);
  background: rgba(220, 53, 69, 0.05);
}

.finance-danger-zone h3 {
  color: var(--color-danger, #dc3545);
}

.finance-reset-btn {
  padding: 12px 24px;
  background: var(--color-danger, #dc3545);
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s;
}

.finance-reset-btn:hover {
  background: #c82333;
  transform: translateY(-1px);
}

.finance-import-btn {
  padding: 12px 24px;
  background: var(--color-gray-200);
  color: var(--color-text-muted);
  border: none;
  border-radius: 8px;
  cursor: not-allowed;
}

.finance-settings-options {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.finance-setting-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
}

.finance-setting-item span {
  font-weight: 500;
  color: var(--color-text-primary);
}

.finance-setting-item input[type="checkbox"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
}

.finance-setting-item select {
  padding: 8px 12px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  background: var(--color-surface);
  color: var(--color-text-primary);
  cursor: pointer;
}

/* Expenses View */
.finance-expenses {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.finance-income-card {
  background: linear-gradient(135deg, var(--color-wealth-bg) 0%, var(--color-surface) 100%);
}

.finance-income-display {
  cursor: pointer;
  padding: 12px;
  background: var(--color-surface);
  border-radius: 8px;
  margin-bottom: 16px;
  transition: background 0.2s;
}

.finance-income-display:hover {
  background: var(--color-gray-100);
}

.finance-income-value {
  font-size: 2rem;
  font-weight: 700;
  color: var(--color-wealth-text);
  display: block;
}

.finance-edit-hint {
  font-size: 0.75rem;
  color: var(--color-text-muted);
}

.finance-income-edit {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
}

.finance-income-edit input {
  flex: 1;
  padding: 12px;
  font-size: 1.5rem;
  border: 2px solid var(--color-primary);
  border-radius: 8px;
  background: var(--color-surface);
  color: var(--color-text-primary);
}

.finance-budget-summary {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.finance-budget-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid var(--color-border);
}

.finance-budget-item:last-child {
  border-bottom: none;
  font-weight: 600;
}

.finance-expenses-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.finance-expenses-header h3 {
  margin: 0;
}

.finance-add-btn {
  padding: 8px 16px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
}

.finance-add-btn:hover {
  background: var(--color-primary-dark);
}

.finance-expenses-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

.finance-import-btn {
  padding: 8px 16px;
  background: var(--color-gray-200);
  color: var(--color-text-primary);
  border: none;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s;
  font-size: 0.9rem;
}

.finance-import-btn:hover {
  background: var(--color-gray-300);
}

.finance-import-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.finance-import-status {
  margin-top: 12px;
  padding: 10px 14px;
  border-radius: 6px;
  font-size: 0.9rem;
}

.finance-import-status.success {
  background: var(--color-success-bg, #d4edda);
  color: var(--color-success-text, #155724);
  border: 1px solid var(--color-success-border, #c3e6cb);
}

.finance-import-status.error {
  background: var(--color-error-bg, #f8d7da);
  color: var(--color-error-text, #721c24);
  border: 1px solid var(--color-error-border, #f5c6cb);
}

.finance-loop-expenses {
  border-left: 4px solid;
}

.finance-loop-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.finance-loop-header h4 {
  margin: 0;
  font-weight: 600;
}

.finance-loop-total {
  font-size: 0.9rem;
  color: var(--color-text-secondary);
  font-weight: 500;
}

/* Category Accordion Styles */
.finance-category-accordions {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.finance-category-group {
  border-radius: 8px;
  overflow: hidden;
  background: var(--color-gray-50);
}

.finance-category-group.collapsed {
  background: transparent;
}

.finance-category-header {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: var(--color-gray-100);
  border: none;
  cursor: pointer;
  font-size: 0.9rem;
  transition: background-color 0.15s ease;
}

.finance-category-header:hover {
  background: var(--color-gray-200);
}

.finance-category-group.collapsed .finance-category-header {
  background: transparent;
  border-bottom: 1px solid var(--color-gray-100);
  border-radius: 0;
}

.finance-category-group.collapsed .finance-category-header:hover {
  background: var(--color-gray-50);
}

.finance-category-info {
  display: flex;
  align-items: center;
  gap: 8px;
}

.finance-category-chevron {
  display: inline-block;
  font-size: 1rem;
  font-weight: bold;
  color: var(--color-text-muted);
  transition: transform 0.2s ease;
  width: 12px;
}

.finance-category-chevron.expanded {
  transform: rotate(90deg);
}

.finance-category-name {
  font-weight: 500;
  color: var(--color-text-primary);
}

.finance-category-count {
  font-size: 0.75rem;
  color: var(--color-text-muted);
  background: var(--color-gray-200);
  padding: 2px 6px;
  border-radius: 10px;
}

.finance-category-total {
  font-weight: 600;
  color: var(--color-text-primary);
}

.finance-category-group .finance-expense-list {
  padding: 8px 12px 12px;
}

.finance-category-group .finance-expense-row {
  background: var(--color-surface);
  border: 1px solid var(--color-gray-100);
}

.finance-expense-monthly {
  font-size: 0.75rem;
  color: var(--color-text-muted);
  margin-left: 4px;
}

.finance-expense-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.finance-expense-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  background: var(--color-gray-50);
  border-radius: 8px;
}

.finance-expense-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.finance-expense-name {
  font-weight: 500;
  color: var(--color-text-primary);
}

.finance-expense-meta {
  font-size: 0.8rem;
  color: var(--color-text-muted);
}

.finance-expense-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.finance-expense-amount {
  font-weight: 600;
  color: var(--color-text-primary);
}

.finance-expense-edit {
  padding: 4px 10px;
  background: var(--color-gray-200);
  border: none;
  border-radius: 4px;
  font-size: 0.8rem;
  cursor: pointer;
  color: var(--color-text-secondary);
}

.finance-expense-edit:hover {
  background: var(--color-gray-300);
}

.finance-expense-delete {
  background: none;
  border: none;
  color: var(--color-text-muted);
  font-size: 1.2rem;
  cursor: pointer;
  padding: 4px;
}

.finance-expense-delete:hover {
  color: var(--color-danger);
}

.finance-empty-expenses {
  text-align: center;
  padding: 40px 20px;
}

.finance-empty-expenses h4 {
  margin: 16px 0 8px;
  color: var(--color-text-primary);
}

.finance-empty-expenses p {
  color: var(--color-text-muted);
  margin: 0;
}

/* Expense Modal */
.finance-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.finance-modal {
  background: var(--color-surface);
  border-radius: 12px;
  padding: 24px;
  width: 100%;
  max-width: 480px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

.finance-modal h3 {
  margin: 0 0 20px 0;
  color: var(--color-text-primary);
}

.finance-form-group {
  margin-bottom: 16px;
}

.finance-form-group label {
  display: block;
  margin-bottom: 6px;
  font-weight: 500;
  color: var(--color-text-secondary);
  font-size: 0.9rem;
}

.finance-form-group input,
.finance-form-group select,
.finance-form-group textarea {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--color-border);
  border-radius: 6px;
  background: var(--color-surface);
  color: var(--color-text-primary);
  font-size: 1rem;
}

.finance-form-group input:focus,
.finance-form-group select:focus,
.finance-form-group textarea:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px var(--color-primary-light);
}

.finance-form-group textarea {
  resize: vertical;
  min-height: 60px;
}

.finance-form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.finance-modal-actions {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  margin-top: 24px;
  padding-top: 16px;
  border-top: 1px solid var(--color-border);
}

.finance-save-btn {
  padding: 10px 20px;
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
}

.finance-save-btn:hover {
  background: var(--color-primary-dark);
}

.finance-cancel-btn {
  padding: 10px 20px;
  background: var(--color-gray-200);
  color: var(--color-text-secondary);
  border: none;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
}

.finance-cancel-btn:hover {
  background: var(--color-gray-300);
}

/* Mobile responsive */
@media (max-width: 768px) {
  .finance-screen {
    padding: 16px;
  }

  .finance-header {
    flex-direction: column;
    gap: 16px;
  }

  .finance-tabs {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  .finance-tab {
    padding: 10px 14px;
    white-space: nowrap;
  }

  .finance-overview {
    grid-template-columns: 1fr;
  }

  .finance-filters {
    flex-direction: column;
  }

  .finance-search {
    min-width: 100%;
  }

  .finance-token-input {
    flex-direction: column;
  }

  .finance-categories-grid {
    grid-template-columns: 1fr;
  }
}
